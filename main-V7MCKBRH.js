var CN=Object.defineProperty,DN=Object.defineProperties;var AN=Object.getOwnPropertyDescriptors;var xw=Object.getOwnPropertySymbols,RN=Object.getPrototypeOf,kN=Object.prototype.hasOwnProperty,NN=Object.prototype.propertyIsEnumerable,xN=Reflect.get;var Pw=(n,e,t)=>e in n?CN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F=(n,e)=>{for(var t in e||={})kN.call(e,t)&&Pw(n,t,e[t]);if(xw)for(var t of xw(e))NN.call(e,t)&&Pw(n,t,e[t]);return n},ke=(n,e)=>DN(n,AN(e));var Fr=(n,e,t)=>xN(RN(n),t,e);var _=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{c(t.next(u))}catch(l){i(l)}},s=u=>{try{c(t.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((t=t.apply(n,e)).next())});var _p;function Mu(){return _p}function An(n){let e=_p;return _p=n,e}var Mw=Symbol("NotFound"),ya=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function Ci(n){return n===Mw||n?.name==="\u0275NotFound"}function Ow(n,e){return Object.is(n,e)}var Je=null,Ou=!1,Ep=1;var Co=Symbol("SIGNAL");function oe(n){let e=Je;return Je=n,e}function Lu(){return Je}var Fu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function wp(n){if(Ou)throw new Error("");if(Je===null)return;Je.consumerOnSignalRead(n);let e=Je.nextProducerIndex++;if(Bu(Je),e<Je.producerNode.length&&Je.producerNode[e]!==n&&va(Je)){let t=Je.producerNode[e];Uu(t,Je.producerIndexOfThis[e])}Je.producerNode[e]!==n&&(Je.producerNode[e]=n,Je.producerIndexOfThis[e]=va(Je)?jw(n,Je,e):0),Je.producerLastReadVersion[e]=n.version}function Lw(){Ep++}function Fw(n){if(!(va(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ep)){if(!n.producerMustRecompute(n)&&!ju(n)){Ip(n);return}n.producerRecomputeValue(n),Ip(n)}}function Tp(n){if(n.liveConsumerNode===void 0)return;let e=Ou;Ou=!0;try{for(let t of n.liveConsumerNode)t.dirty||PN(t)}finally{Ou=e}}function Vw(){return Je?.consumerAllowSignalWrites!==!1}function PN(n){n.dirty=!0,Tp(n),n.consumerMarkedDirty?.(n)}function Ip(n){n.dirty=!1,n.lastCleanEpoch=Ep}function Vu(n){return n&&(n.nextProducerIndex=0),oe(n)}function bp(n,e){if(oe(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(va(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Uu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ju(n){Bu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Fw(t),r!==t.version))return!0}return!1}function Sp(n){if(Bu(n),va(n))for(let e=0;e<n.producerNode.length;e++)Uu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function jw(n,e,t){if(Uw(n),n.liveConsumerNode.length===0&&Bw(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=jw(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Uu(n,e){if(Uw(n),n.liveConsumerNode.length===1&&Bw(n))for(let r=0;r<n.producerNode.length;r++)Uu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Bu(i),i.producerIndexOfThis[r]=e}}function va(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Bu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Uw(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Bw(n){return n.producerNode!==void 0}function MN(){throw new Error}var $w=MN;function ON(n){$w(n)}function Cp(n){$w=n}var LN=null;function Dp(n,e){Vw()||ON(n),n.equal(n.value,e)||(n.value=e,FN(n))}var Ap=ke(F({},Fu),{equal:Ow,value:void 0,kind:"signal"});function FN(n){n.version++,Lw(),Tp(n),LN?.(n)}function ne(n){return typeof n=="function"}function Do(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var $u=Do(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Di(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ve=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(o){e=o instanceof $u?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Hw(o)}catch(s){e=e??[],s instanceof $u?e=[...e,...s.errors]:e.push(s)}}if(e)throw new $u(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Hw(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Di(t,e)}remove(e){let{_finalizers:t}=this;t&&Di(t,e),e instanceof n&&e._removeParent(this)}};Ve.EMPTY=(()=>{let n=new Ve;return n.closed=!0,n})();var Rp=Ve.EMPTY;function Hu(n){return n instanceof Ve||n&&"closed"in n&&ne(n.remove)&&ne(n.add)&&ne(n.unsubscribe)}function Hw(n){ne(n)?n():n.unsubscribe()}var fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ao={setTimeout(n,e,...t){let{delegate:r}=Ao;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ao;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function zu(n){Ao.setTimeout(()=>{let{onUnhandledError:e}=fn;if(e)e(n);else throw n})}function _a(){}var zw=kp("C",void 0,void 0);function qw(n){return kp("E",void 0,n)}function Ww(n){return kp("N",n,void 0)}function kp(n,e,t){return{kind:n,value:e,error:t}}var Ai=null;function Ro(n){if(fn.useDeprecatedSynchronousErrorHandling){let e=!Ai;if(e&&(Ai={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ai;if(Ai=null,t)throw r}}else n()}function Gw(n){fn.useDeprecatedSynchronousErrorHandling&&Ai&&(Ai.errorThrown=!0,Ai.error=n)}var Ri=class extends Ve{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Hu(e)&&e.add(this)):this.destination=UN}static create(e,t,r){return new ko(e,t,r)}next(e){this.isStopped?xp(Ww(e),this):this._next(e)}error(e){this.isStopped?xp(qw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?xp(zw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},VN=Function.prototype.bind;function Np(n,e){return VN.call(n,e)}var Pp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){qu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){qu(r)}else qu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){qu(t)}}},ko=class extends Ri{constructor(e,t,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&fn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Np(e.next,o),error:e.error&&Np(e.error,o),complete:e.complete&&Np(e.complete,o)}):i=e}this.destination=new Pp(i)}};function qu(n){fn.useDeprecatedSynchronousErrorHandling?Gw(n):zu(n)}function jN(n){throw n}function xp(n,e){let{onStoppedNotification:t}=fn;t&&Ao.setTimeout(()=>t(n,e))}var UN={closed:!0,next:_a,error:jN,complete:_a};var No=typeof Symbol=="function"&&Symbol.observable||"@@observable";function zt(n){return n}function Mp(...n){return Op(n)}function Op(n){return n.length===0?zt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ae=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=$N(t)?t:new ko(t,r,i);return Ro(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Kw(r),new r((i,o)=>{let s=new ko({next:c=>{try{t(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[No](){return this}pipe(...t){return Op(t)(this)}toPromise(t){return t=Kw(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Kw(n){var e;return(e=n??fn.Promise)!==null&&e!==void 0?e:Promise}function BN(n){return n&&ne(n.next)&&ne(n.error)&&ne(n.complete)}function $N(n){return n&&n instanceof Ri||BN(n)&&Hu(n)}function Lp(n){return ne(n?.lift)}function fe(n){return e=>{if(Lp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(n,e,t,r,i){return new Fp(n,e,t,r,i)}var Fp=class extends Ri{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function xo(){return fe((n,e)=>{let t=null;n._refCount++;let r=pe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Po=class extends ae{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Lp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ve;let t=this.getSubject();e.add(this.source.subscribe(pe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ve.EMPTY)}return e}refCount(){return xo()(this)}};var Qw=Do(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var at=(()=>{class n extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Wu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Qw}next(t){Ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Rp:(this.currentObservers=null,o.push(t),new Ve(()=>{this.currentObservers=null,Di(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ae;return t.source=this,t}}return n.create=(e,t)=>new Wu(e,t),n})(),Wu=class extends at{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Rp}};var Ze=class extends at{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Vp={now(){return(Vp.delegate||Date).now()},delegate:void 0};var Gu=class extends Ve{constructor(e,t){super()}schedule(e,t=0){return this}};var Ia={setInterval(n,e,...t){let{delegate:r}=Ia;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ia;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Mo=class extends Gu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ia.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ia.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Di(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Oo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Oo.now=Vp.now;var Lo=class extends Oo{constructor(e,t=Oo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var jp=new Lo(Mo);var Ku=class extends Mo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Qu=class extends Lo{};var Up=new Qu(Ku);var Vt=new ae(n=>n.complete());function Yw(n){return n&&ne(n.schedule)}function Jw(n){return n[n.length-1]}function Zw(n){return ne(Jw(n))?n.pop():void 0}function Vr(n){return Yw(Jw(n))?n.pop():void 0}function Yu(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function eT(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(c,u)}l((r=r.apply(n,e||[])).next())})}function Xw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ki(n){return this instanceof ki?(this.v=n,this):new ki(n)}function tT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(D){return Promise.resolve(D).then(y,p)}}function c(y,D){r[y]&&(i[y]=function(N){return new Promise(function(k,O){o.push([y,N,k,O])>1||u(y,N)})},D&&(i[y]=D(i[y])))}function u(y,D){try{l(r[y](D))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof ki?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,D){y(D),o.shift(),o.length&&u(o[0][0],o[0][1])}}function nT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Xw=="function"?Xw(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,u){s=n[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var Ju=n=>n&&typeof n.length=="number"&&typeof n!="function";function Zu(n){return ne(n?.then)}function Xu(n){return ne(n[No])}function el(n){return Symbol.asyncIterator&&ne(n?.[Symbol.asyncIterator])}function tl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function HN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var nl=HN();function rl(n){return ne(n?.[nl])}function il(n){return tT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ki(t.read());if(i)return yield ki(void 0);yield yield ki(r)}}finally{t.releaseLock()}})}function ol(n){return ne(n?.getReader)}function ct(n){if(n instanceof ae)return n;if(n!=null){if(Xu(n))return zN(n);if(Ju(n))return qN(n);if(Zu(n))return WN(n);if(el(n))return rT(n);if(rl(n))return GN(n);if(ol(n))return KN(n)}throw tl(n)}function zN(n){return new ae(e=>{let t=n[No]();if(ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function qN(n){return new ae(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function WN(n){return new ae(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,zu)})}function GN(n){return new ae(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function rT(n){return new ae(e=>{QN(n,e).catch(t=>e.error(t))})}function KN(n){return rT(il(n))}function QN(n,e){var t,r,i,o;return eT(this,void 0,void 0,function*(){try{for(t=nT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function jt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function jr(n,e=0){return fe((t,r)=>{t.subscribe(pe(r,i=>jt(r,n,()=>r.next(i),e),()=>jt(r,n,()=>r.complete(),e),i=>jt(r,n,()=>r.error(i),e)))})}function Ur(n,e=0){return fe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function iT(n,e){return ct(n).pipe(Ur(e),jr(e))}function oT(n,e){return ct(n).pipe(Ur(e),jr(e))}function sT(n,e){return new ae(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function aT(n,e){return new ae(t=>{let r;return jt(t,e,()=>{r=n[nl](),jt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function sl(n,e){if(!n)throw new Error("Iterable cannot be null");return new ae(t=>{jt(t,e,()=>{let r=n[Symbol.asyncIterator]();jt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function cT(n,e){return sl(il(n),e)}function uT(n,e){if(n!=null){if(Xu(n))return iT(n,e);if(Ju(n))return sT(n,e);if(Zu(n))return oT(n,e);if(el(n))return sl(n,e);if(rl(n))return aT(n,e);if(ol(n))return cT(n,e)}throw tl(n)}function qe(n,e){return e?uT(n,e):ct(n)}function X(...n){let e=Vr(n);return qe(n,e)}function Fo(n,e){let t=ne(n)?n:()=>n,r=i=>i.error(t());return new ae(e?i=>e.schedule(r,0,i):r)}function Bp(n){return!!n&&(n instanceof ae||ne(n.lift)&&ne(n.subscribe))}var ir=Do(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ge(n,e){return fe((t,r)=>{let i=0;t.subscribe(pe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:YN}=Array;function JN(n,e){return YN(e)?n(...e):n(e)}function lT(n){return ge(e=>JN(n,e))}var{isArray:ZN}=Array,{getPrototypeOf:XN,prototype:ex,keys:tx}=Object;function dT(n){if(n.length===1){let e=n[0];if(ZN(e))return{args:e,keys:null};if(nx(e)){let t=tx(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function nx(n){return n&&typeof n=="object"&&XN(n)===ex}function hT(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function al(...n){let e=Vr(n),t=Zw(n),{args:r,keys:i}=dT(n);if(r.length===0)return qe([],e);let o=new ae(rx(r,e,i?s=>hT(i,s):zt));return t?o.pipe(lT(t)):o}function rx(n,e,t=zt){return r=>{fT(e,()=>{let{length:i}=n,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)fT(e,()=>{let l=qe(n[u],e),h=!1;l.subscribe(pe(r,p=>{o[u]=p,h||(h=!0,c--),c||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function fT(n,e,t){n?jt(t,n,e):e()}function pT(n,e,t,r,i,o,s,c){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?D(N):u.push(N),D=N=>{o&&e.next(N),l++;let k=!1;ct(t(N,h++)).subscribe(pe(e,O=>{i?.(O),o?y(O):e.next(O)},()=>{k=!0},void 0,()=>{if(k)try{for(l--;u.length&&l<r;){let O=u.shift();s?jt(e,s,()=>D(O)):D(O)}m()}catch(O){e.error(O)}}))};return n.subscribe(pe(e,y,()=>{p=!0,m()})),()=>{c?.()}}function Xe(n,e,t=1/0){return ne(e)?Xe((r,i)=>ge((o,s)=>e(r,o,i,s))(ct(n(r,i))),t):(typeof e=="number"&&(t=e),fe((r,i)=>pT(r,i,n,t)))}function gT(n=1/0){return Xe(zt,n)}function mT(){return gT(1)}function Vo(...n){return mT()(qe(n,Vr(n)))}function Ea(n){return new ae(e=>{ct(n()).subscribe(e)})}function xt(n,e){return fe((t,r)=>{let i=0;t.subscribe(pe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Br(n){return fe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(pe(t,void 0,void 0,s=>{o=ct(n(s,Br(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function yT(n,e,t,r,i){return(o,s)=>{let c=t,u=e,l=0;o.subscribe(pe(s,h=>{let p=l++;u=c?n(u,h,p):(c=!0,h),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function jo(n,e){return ne(e)?Xe(n,e,1):Xe(n,1)}function $r(n){return fe((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function or(n){return n<=0?()=>Vt:fe((e,t)=>{let r=0;e.subscribe(pe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function cl(n=ix){return fe((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ix(){return new ir}function wa(n){return fe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function sr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?xt((i,o)=>n(i,o,r)):zt,or(1),t?$r(e):cl(()=>new ir))}function Uo(n){return n<=0?()=>Vt:fe((e,t)=>{let r=[];e.subscribe(pe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function $p(n,e){let t=arguments.length>=2;return r=>r.pipe(n?xt((i,o)=>n(i,o,r)):zt,Uo(1),t?$r(e):cl(()=>new ir))}function Hp(n,e){return fe(yT(n,e,arguments.length>=2,!0))}function zp(...n){let e=Vr(n);return fe((t,r)=>{(e?Vo(n,t,e):Vo(n,t)).subscribe(r)})}function on(n,e){return fe((t,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();t.subscribe(pe(r,u=>{i?.unsubscribe();let l=0,h=o++;ct(n(u,h)).subscribe(i=pe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function ul(n){return fe((e,t)=>{ct(n).subscribe(pe(t,()=>t.complete(),_a)),!t.closed&&e.subscribe(t)})}function ut(n,e,t){let r=ne(n)||e||t?{next:n,error:e,complete:t}:n;return r?fe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(pe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):zt}var gl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",H=class extends Error{code;constructor(e,t){super(rg(e,t)),this.code=e}};function ax(n){return`NG0${Math.abs(n)}`}function rg(n,e){return`${ax(n)}${e?": "+e:""}`}function Me(n){for(let e in n)if(n[e]===Me)return e;throw Error("")}function Bt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Bt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function ml(n,e){return n?e?`${n} ${e}`:n:e||""}var cx=Me({__forward_ref__:Me});function yl(n){return n.__forward_ref__=yl,n.toString=function(){return Bt(this())},n}function Ut(n){return ig(n)?n():n}function ig(n){return typeof n=="function"&&n.hasOwnProperty(cx)&&n.__forward_ref__===yl}function ET(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function V(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ca(n){return ux(n,vl)}function og(n){return Ca(n)!==null}function ux(n,e){return n.hasOwnProperty(e)&&n[e]||null}function lx(n){let e=n?.[vl]??null;return e||null}function Wp(n){return n&&n.hasOwnProperty(dl)?n[dl]:null}var vl=Me({\u0275prov:Me}),dl=Me({\u0275inj:Me}),B=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=V({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function sg(n){return n&&!!n.\u0275providers}var ag=Me({\u0275cmp:Me}),cg=Me({\u0275dir:Me}),ug=Me({\u0275pipe:Me}),lg=Me({\u0275mod:Me}),ba=Me({\u0275fac:Me}),Oi=Me({__NG_ELEMENT_ID__:Me}),vT=Me({__NG_ENV_ID__:Me});function Da(n){return typeof n=="string"?n:n==null?"":String(n)}function wT(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Da(n)}function dg(n,e){throw new H(-200,n)}function _l(n,e){throw new H(-201,!1)}var Gp;function TT(){return Gp}function qt(n){let e=Gp;return Gp=n,e}function hg(n,e,t){let r=Ca(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;_l(n,"Injector")}var dx={},Ni=dx,Kp="__NG_DI_FLAG__",Qp=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=xi(t)||0;try{return this.injector.get(e,r&8?null:Ni,r)}catch(i){if(Ci(i))return i;throw i}}},hl="ngTempTokenPath",hx="ngTokenPath",fx=/\n/gm,px="\u0275",_T="__source";function gx(n,e=0){let t=Mu();if(t===void 0)throw new H(-203,!1);if(t===null)return hg(n,void 0,e);{let r=mx(e),i=t.retrieve(n,r);if(Ci(i)){if(r.optional)return null;throw i}return i}}function Y(n,e=0){return(TT()||gx)(Ut(n),e)}function R(n,e){return Y(n,xi(e))}function xi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function mx(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Yp(n){let e=[];for(let t=0;t<n.length;t++){let r=Ut(n[t]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=yx(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(Y(i,o))}else e.push(Y(r))}return e}function bT(n,e){return n[Kp]=e,n.prototype[Kp]=e,n}function yx(n){return n[Kp]}function vx(n,e,t,r){let i=n[hl];throw e[_T]&&i.unshift(e[_T]),n.message=_x(`
`+n.message,i,t,r),n[hx]=i,n[hl]=null,n}function _x(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==px?n.slice(2):n;let i=Bt(e);if(Array.isArray(e))i=e.map(Bt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):Bt(c)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(fx,`
  `)}`}function Pi(n,e){let t=n.hasOwnProperty(ba);return t?n[ba]:null}function ST(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function CT(n){return n.flat(Number.POSITIVE_INFINITY)}function Il(n,e){n.forEach(t=>Array.isArray(t)?Il(t,e):e(t))}function fg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Aa(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function DT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function El(n,e,t){let r=$o(n,e);return r>=0?n[r|1]=t:(r=~r,DT(n,r,e,t)),r}function wl(n,e){let t=$o(n,e);if(t>=0)return n[t|1]}function $o(n,e){return Ix(n,e,1)}function Ix(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Li={},Rn=[],cr=new B(""),pg=new B("",-1),gg=new B(""),Sa=class{get(e,t=Ni){if(t===Ni)throw new ya(`NullInjectorError: No provider for ${Bt(e)}!`);return t}};function mg(n){return n[lg]||null}function qr(n){return n[ag]||null}function yg(n){return n[cg]||null}function AT(n){return n[ug]||null}function Wt(n){return{\u0275providers:n}}function RT(n){return Wt([{provide:cr,multi:!0,useValue:n}])}function kT(...n){return{\u0275providers:vg(!0,n),\u0275fromNgModule:!0}}function vg(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Il(e,s=>{let c=s;fl(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&NT(i,o),t}function NT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];_g(i,o=>{e(o,r)})}}function fl(n,e,t,r){if(n=Ut(n),!n)return!1;let i=null,o=Wp(n),s=!o&&qr(n);if(!o&&!s){let u=n.ngModule;if(o=Wp(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)fl(l,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{Il(o.imports,h=>{fl(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&NT(l,e)}if(!c){let l=Pi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Rn},i),e({provide:gg,useValue:i,multi:!0},i),e({provide:cr,useValue:()=>Y(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=n;_g(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function _g(n,e){for(let t of n)sg(t)&&(t=t.\u0275providers),Array.isArray(t)?_g(t,e):e(t)}var Ex=Me({provide:String,useValue:Me});function xT(n){return n!==null&&typeof n=="object"&&Ex in n}function wx(n){return!!(n&&n.useExisting)}function Tx(n){return!!(n&&n.useFactory)}function pl(n){return typeof n=="function"}var Ra=new B(""),ll={},IT={},qp;function ka(){return qp===void 0&&(qp=new Sa),qp}var et=class{},Mi=class extends et{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Zp(e,s=>this.processProvider(s)),this.records.set(pg,Bo(void 0,this)),i.has("environment")&&this.records.set(et,Bo(void 0,this));let o=this.records.get(Ra);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(gg,Rn,{self:!0}))}retrieve(e,t){let r=xi(t)||0;try{return this.get(e,Ni,r)}catch(i){if(Ci(i))return i;throw i}}destroy(){Ta(this),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return Ta(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ta(this);let t=An(this),r=qt(void 0),i;try{return e()}finally{An(t),qt(r)}}get(e,t=Ni,r){if(Ta(this),e.hasOwnProperty(vT))return e[vT](this);let i=xi(r),o,s=An(this),c=qt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=Ax(e)&&Ca(e);h&&this.injectableDefInScope(h)?l=Bo(Jp(e),ll):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?ka():this.parent;return t=i&8&&t===Ni?null:t,u.get(e,t)}catch(u){if(Ci(u)){if((u[hl]=u[hl]||[]).unshift(Bt(e)),s)throw u;return vx(u,e,"R3InjectorError",this.source)}else throw u}finally{qt(c),An(s)}}resolveInjectorInitializers(){let e=oe(null),t=An(this),r=qt(void 0),i;try{let o=this.get(cr,Rn,{self:!0});for(let s of o)s()}finally{An(t),qt(r),oe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Bt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ut(e);let t=pl(e)?e:Ut(e&&e.provide),r=Sx(e);if(!pl(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Bo(void 0,ll,!0),i.factory=()=>Yp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=oe(null);try{return t.value===IT?dg(Bt(e)):t.value===ll&&(t.value=IT,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&Dx(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{oe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ut(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Jp(n){let e=Ca(n),t=e!==null?e.factory:Pi(n);if(t!==null)return t;if(n instanceof B)throw new H(204,!1);if(n instanceof Function)return bx(n);throw new H(204,!1)}function bx(n){if(n.length>0)throw new H(204,!1);let t=lx(n);return t!==null?()=>t.factory(n):()=>new n}function Sx(n){if(xT(n))return Bo(void 0,n.useValue);{let e=PT(n);return Bo(e,ll)}}function PT(n,e,t){let r;if(pl(n)){let i=Ut(n);return Pi(i)||Jp(i)}else if(xT(n))r=()=>Ut(n.useValue);else if(Tx(n))r=()=>n.useFactory(...Yp(n.deps||[]));else if(wx(n))r=(i,o)=>Y(Ut(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ut(n&&(n.useClass||n.provide));if(Cx(n))r=()=>new i(...Yp(n.deps));else return Pi(i)||Jp(i)}return r}function Ta(n){if(n.destroyed)throw new H(205,!1)}function Bo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Cx(n){return!!n.deps}function Dx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Ax(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Zp(n,e){for(let t of n)Array.isArray(t)?Zp(t,e):t&&sg(t)?Zp(t.\u0275providers,e):e(t)}function nt(n,e){let t;n instanceof Mi?(Ta(n),t=n):t=new Qp(n);let r,i=An(t),o=qt(void 0);try{return e()}finally{An(i),qt(o)}}function MT(){return TT()!==void 0||Mu()!=null}var pn=0,K=1,ee=2,tt=3,sn=4,an=5,Ho=6,zo=7,He=8,Fi=9,Nn=10,Oe=11,qo=12,Ig=13,Vi=14,Gt=15,Wr=16,ji=17,xn=18,Na=19,Eg=20,ar=21,Tl=22,xa=23,Kt=24,bl=25,dt=26,OT=1,wg=6,Gr=7,Pa=8,Ui=9,ht=10;function ur(n){return Array.isArray(n)&&typeof n[OT]=="object"}function gn(n){return Array.isArray(n)&&n[OT]===!0}function Tg(n){return(n.flags&4)!==0}function Kr(n){return n.componentOffset>-1}function Sl(n){return(n.flags&1)===1}function Bi(n){return!!n.template}function Wo(n){return(n[ee]&512)!==0}function $i(n){return(n[ee]&256)===256}var LT="svg",FT="math";function cn(n){for(;Array.isArray(n);)n=n[pn];return n}function bg(n,e){return cn(e[n])}function Pn(n,e){return cn(e[n.index])}function Ma(n,e){return n.data[e]}function VT(n,e){return n[e]}function mn(n,e){let t=e[n];return ur(t)?t:t[pn]}function jT(n){return(n[ee]&4)===4}function Cl(n){return(n[ee]&128)===128}function UT(n){return gn(n[tt])}function Mn(n,e){return e==null?null:n[e]}function Sg(n){n[ji]=0}function Cg(n){n[ee]&1024||(n[ee]|=1024,Cl(n)&&La(n))}function BT(n,e){for(;n>0;)e=e[Vi],n--;return e}function Oa(n){return!!(n[ee]&9216||n[Kt]?.dirty)}function Dl(n){n[Nn].changeDetectionScheduler?.notify(8),n[ee]&64&&(n[ee]|=1024),Oa(n)&&La(n)}function La(n){n[Nn].changeDetectionScheduler?.notify(0);let e=Hr(n);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!Cl(e)));)e=Hr(e)}function Dg(n,e){if($i(n))throw new H(911,!1);n[ar]===null&&(n[ar]=[]),n[ar].push(e)}function $T(n,e){if(n[ar]===null)return;let t=n[ar].indexOf(e);t!==-1&&n[ar].splice(t,1)}function Hr(n){let e=n[tt];return gn(e)?e[tt]:e}function Ag(n){return n[zo]??=[]}function Rg(n){return n.cleanup??=[]}function HT(n,e,t,r){let i=Ag(e);i.push(t),n.firstCreatePass&&Rg(n).push(r,i.length-1)}var ce={lFrame:rb(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Fa=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(Fa||{}),Rx=0,Xp=!1;function zT(){return ce.lFrame.elementDepthCount}function qT(){ce.lFrame.elementDepthCount++}function kg(){ce.lFrame.elementDepthCount--}function WT(){return ce.bindingsEnabled}function GT(){return ce.skipHydrationRootTNode!==null}function Ng(n){return ce.skipHydrationRootTNode===n}function xg(){ce.skipHydrationRootTNode=null}function de(){return ce.lFrame.lView}function Et(){return ce.lFrame.tView}function je(n){return ce.lFrame.contextLView=n,n[He]}function Ue(n){return ce.lFrame.contextLView=null,n}function $t(){let n=Pg();for(;n!==null&&n.type===64;)n=n.parent;return n}function Pg(){return ce.lFrame.currentTNode}function KT(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Go(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function Mg(){return ce.lFrame.isParent}function QT(){ce.lFrame.isParent=!1}function YT(){return ce.lFrame.contextLView}function Og(n){ET("Must never be called in production mode"),Rx=n}function Lg(){return Xp}function Fg(n){let e=Xp;return Xp=n,e}function JT(n){return ce.lFrame.bindingIndex=n}function Qr(){return ce.lFrame.bindingIndex++}function Vg(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ZT(){return ce.lFrame.inI18n}function XT(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Al(e)}function eb(){return ce.lFrame.currentDirectiveIndex}function Al(n){ce.lFrame.currentDirectiveIndex=n}function tb(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function jg(){return ce.lFrame.currentQueryIndex}function Rl(n){ce.lFrame.currentQueryIndex=n}function kx(n){let e=n[K];return e.type===2?e.declTNode:e.type===1?n[an]:null}function Ug(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=kx(o),i===null||(o=o[Vi],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ce.lFrame=nb();return r.currentTNode=e,r.lView=n,!0}function kl(n){let e=nb(),t=n[K];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function nb(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?rb(n):e}function rb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function ib(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Bg=ib;function Nl(){let n=ib();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ob(n){return(ce.lFrame.contextLView=BT(n,ce.lFrame.contextLView))[He]}function lr(){return ce.lFrame.selectedIndex}function Yr(n){ce.lFrame.selectedIndex=n}function xl(){let n=ce.lFrame;return Ma(n.tView,n.selectedIndex)}function sb(){return ce.lFrame.currentNamespace}var ab=!0;function Pl(){return ab}function Ml(n){ab=n}function eg(n,e=null,t=null,r){let i=$g(n,e,t,r);return i.resolveInjectorInitializers(),i}function $g(n,e=null,t=null,r,i=new Set){let o=[t||Rn,kT(n)];return r=r||(typeof n=="object"?void 0:Bt(n)),new Mi(o,e||ka(),r||null,i)}var lt=class n{static THROW_IF_NOT_FOUND=Ni;static NULL=new Sa;static create(e,t){if(Array.isArray(e))return eg({name:""},t,e,"");{let r=e.name??"";return eg({name:r},e.parent,e.providers,r)}}static \u0275prov=V({token:n,providedIn:"any",factory:()=>Y(pg)});static __NG_ELEMENT_ID__=-1},ft=new B(""),Jr=(()=>{class n{static __NG_ELEMENT_ID__=Nx;static __NG_ENV_ID__=t=>t}return n})(),tg=class extends Jr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return $i(this._lView)}onDestroy(e){let t=this._lView;return Dg(t,e),()=>$T(t,e)}};function Nx(){return new tg(de())}var kn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Qt=new B("",{providedIn:"root",factory:()=>{let n=R(et),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(kn),e.handleError(t))}}}),cb={provide:cr,useValue:()=>void R(kn),multi:!0},xx=new B("",{providedIn:"root",factory:()=>{let n=R(ft).defaultView;if(!n)return;let e=R(Qt),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),R(Jr).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function Hg(){return Wt([RT(()=>void R(xx))])}function zg(n){return typeof n=="function"&&n[Co]!==void 0}function qg(n){return zg(n)&&typeof n.set=="function"}var zr=class{},Va=new B("",{providedIn:"root",factory:()=>!1});var Wg=new B(""),Gg=new B("");var dr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ze(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ae(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ko=(()=>{class n{internalPendingTasks=R(dr);scheduler=R(zr);errorHandler=R(Qt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})();function ja(...n){}var Kg=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>new ng})}return n})(),ng=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Qa(n){return{toString:n}.toString()}var Ol="__parameters__";function $x(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Hx(n,e,t){return Qa(()=>{let r=$x(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,h){let p=u.hasOwnProperty(Ol)?u[Ol]:Object.defineProperty(u,Ol,{value:[]})[Ol];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Yt=bT(Hx("Optional"),8);function zx(n){return typeof n=="function"}var $l=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Vb(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Jt=(()=>{let n=()=>jb;return n.ngInherit=!0,n})();function jb(n){return n.type.prototype.ngOnChanges&&(n.setInput=Wx),qx}function qx(){let n=Bb(this),e=n?.current;if(e){let t=n.previous;if(t===Li)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Wx(n,e,t,r,i){let o=this.declaredInputs[r],s=Bb(n)||Gx(n,{previous:Li,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new $l(l&&l.currentValue,t,u===Li),Vb(n,e,i,t)}var Ub="__ngSimpleChanges__";function Bb(n){return n[Ub]||null}function Gx(n,e){return n[Ub]=e}var ub=[];var Ne=function(n,e=null,t){for(let r=0;r<ub.length;r++){let i=ub[r];i(n,e,t)}};function Kx(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=jb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Qx(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Fl(n,e,t){$b(n,e,3,t)}function Vl(n,e,t,r){(n[ee]&3)===t&&$b(n,e,t,r)}function Qg(n,e){let t=n[ee];(t&3)===e&&(t&=16383,t+=1,n[ee]=t)}function $b(n,e,t,r){let i=r!==void 0?n[ji]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[ji]+=65536),(c<o||o==-1)&&(Yx(n,t,e,u),n[ji]=(n[ji]&4294901760)+u+2),u++}function lb(n,e){Ne(4,n,e);let t=oe(null);try{e.call(n)}finally{oe(t),Ne(5,n,e)}}function Yx(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[ee]>>14<n[ji]>>16&&(n[ee]&3)===e&&(n[ee]+=16384,lb(c,o)):lb(c,o)}var Yo=-1,$a=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function Jx(n){return(n.flags&8)!==0}function Zx(n){return(n.flags&16)!==0}function Xx(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];tP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function eP(n){return n===3||n===4||n===6}function tP(n){return n.charCodeAt(0)===64}function ad(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?db(n,t,i,null,e[++r]):db(n,t,i,null,null))}}return n}function db(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Hb(n){return n!==Yo}function Hl(n){return n&32767}function nP(n){return n>>16}function zl(n,e){let t=nP(n),r=e;for(;t>0;)r=r[Vi],t--;return r}var nm=!0;function hb(n){let e=nm;return nm=n,e}var rP=256,zb=rP-1,qb=5,iP=0,On={};function oP(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Oi)&&(r=t[Oi]),r==null&&(r=t[Oi]=iP++);let i=r&zb,o=1<<i;e.data[n+(i>>qb)]|=o}function Wb(n,e){let t=Gb(n,e);if(t!==-1)return t;let r=e[K];r.firstCreatePass&&(n.injectorIndex=e.length,Yg(r.data,n),Yg(e,null),Yg(r.blueprint,null));let i=Pm(n,e),o=n.injectorIndex;if(Hb(i)){let s=Hl(i),c=zl(i,e),u=c[K].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function Yg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Gb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Pm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Zb(i),r===null)return Yo;if(t++,i=i[Vi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Yo}function sP(n,e,t){oP(n,e,t)}function Kb(n,e,t){if(t&8||n!==void 0)return n;_l(e,"NodeInjector")}function Qb(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Fi],o=qt(void 0);try{return i?i.get(e,r,t&8):hg(e,r,t&8)}finally{qt(o)}}return Kb(r,e,t)}function Yb(n,e,t,r=0,i){if(n!==null){if(e[ee]&2048&&!(r&2)){let s=lP(n,e,t,r,On);if(s!==On)return s}let o=Jb(n,e,t,r,On);if(o!==On)return o}return Qb(e,t,r,i)}function Jb(n,e,t,r,i){let o=cP(t);if(typeof o=="function"){if(!Ug(e,n,r))return r&1?Kb(i,t,r):Qb(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))_l(t);else return s}finally{Bg()}}else if(typeof o=="number"){let s=null,c=Gb(n,e),u=Yo,l=r&1?e[Gt][an]:null;for((c===-1||r&4)&&(u=c===-1?Pm(n,e):e[c+8],u===Yo||!pb(r,!1)?c=-1:(s=e[K],c=Hl(u),e=zl(u,e)));c!==-1;){let h=e[K];if(fb(o,c,h.data)){let p=aP(c,e,t,s,r,l);if(p!==On)return p}u=e[c+8],u!==Yo&&pb(r,e[K].data[c+8]===l)&&fb(o,c,e)?(s=h,c=Hl(u),e=zl(u,e)):c=-1}}return i}function aP(n,e,t,r,i,o){let s=e[K],c=s.data[n+8],u=r==null?Kr(c)&&nm:r!=s&&(c.type&3)!==0,l=i&1&&o===c,h=jl(c,s,t,u,l);return h!==null?ql(e,s,h,c,i):On}function jl(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?c:c+h,m=i?c+h:l;for(let y=p;y<m;y++){let D=s[y];if(y<u&&t===D||y>=u&&D.type===t)return y}if(i){let y=s[u];if(y&&Bi(y)&&y.type===t)return u}return null}function ql(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof $a){let c=o;c.resolving&&dg(wT(s[t]));let u=hb(c.canSeeViewProviders);c.resolving=!0;let l=s[t].type||s[t],h,p=c.injectImpl?qt(c.injectImpl):null,m=Ug(n,r,0);try{o=n[t]=c.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&Kx(t,s[t],e)}finally{p!==null&&qt(p),hb(u),c.resolving=!1,Bg()}}return o}function cP(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Oi)?n[Oi]:void 0;return typeof e=="number"?e>=0?e&zb:uP:e}function fb(n,e,t){let r=1<<n;return!!(t[e+(n>>qb)]&r)}function pb(n,e){return!(n&2)&&!(n&1&&e)}var Hi=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Yb(this._tNode,this._lView,e,xi(r),t)}};function uP(){return new Hi($t(),de())}function cd(n){return Qa(()=>{let e=n.prototype.constructor,t=e[ba]||rm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ba]||rm(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function rm(n){return ig(n)?()=>{let e=rm(Ut(n));return e&&e()}:Pi(n)}function lP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ee]&2048&&!Wo(s);){let c=Jb(o,s,t,r|2,On);if(c!==On)return c;let u=o.parent;if(!u){let l=s[Eg];if(l){let h=l.get(t,On,r);if(h!==On)return h}u=Zb(s),s=s[Vi]}o=u}return i}function Zb(n){let e=n[K],t=e.type;return t===2?e.declTNode:t===1?n[an]:null}function dP(){return ts($t(),de())}function ts(n,e){return new Ya(Pn(n,e))}var Ya=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=dP}return n})();function hP(n){return n instanceof Ya?n.nativeElement:n}function fP(){return this._results[Symbol.iterator]()}var Wl=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new at}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=CT(e);(this._changesDetected=!ST(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=fP};function Xb(n){return(n.flags&128)===128}var Mm=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Mm||{}),eS=new Map,pP=0;function gP(){return pP++}function mP(n){eS.set(n[Na],n)}function im(n){eS.delete(n[Na])}var gb="__ngContext__";function Jo(n,e){ur(e)?(n[gb]=e[Na],mP(e)):n[gb]=e}function tS(n){return rS(n[qo])}function nS(n){return rS(n[sn])}function rS(n){for(;n!==null&&!gn(n);)n=n[sn];return n}var om;function Om(n){om=n}function iS(){if(om!==void 0)return om;if(typeof document<"u")return document;throw new H(210,!1)}var ud=new B("",{providedIn:"root",factory:()=>yP}),yP="ng",ld=new B(""),Xr=new B("",{providedIn:"platform",factory:()=>"unknown"});var dd=new B("",{providedIn:"root",factory:()=>iS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var vP="h",_P="b";var oS="r";var sS="di";var aS=!1,cS=new B("",{providedIn:"root",factory:()=>aS});var IP=(n,e,t,r)=>{};function EP(n,e,t,r){IP(n,e,t,r)}function Lm(n){return(n.flags&32)===32}var wP=()=>null;function uS(n,e,t=!1){return wP(n,e,t)}function lS(n,e){let t=n.contentQueries;if(t!==null){let r=oe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];Rl(o),c.contentQueries(2,e[s],s)}}}finally{oe(r)}}}function sm(n,e,t){Rl(0);let r=oe(null);try{e(n,t)}finally{oe(r)}}function dS(n,e,t){if(Tg(e)){let r=oe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let u=t[s];c.contentQueries(1,u,s)}}}finally{oe(r)}}}var hr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(hr||{});var Gl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gl})`}};function hd(n){return n instanceof Gl?n.changingThisBreaksApplicationSecurity:n}function hS(n,e){let t=fS(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gl})`)}return t===e}function fS(n){return n instanceof Gl&&n.getTypeName()||null}var TP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function pS(n){return n=String(n),n.match(TP)?n:"unsafe:"+n}var Fm=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Fm||{});function Vm(n){let e=bP();return e?e.sanitize(Fm.URL,n)||"":hS(n,"URL")?hd(n):pS(Da(n))}function bP(){let n=de();return n&&n[Nn].sanitizer}function gS(n){return n instanceof Function?n():n}function SP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var mS="ng-template";function CP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&SP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(jm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function jm(n){return n.type===4&&n.value!==mS}function DP(n,e,t){let r=n.type===4&&!t?mS:n.value;return e===r}function AP(n,e,t){let r=4,i=n.attrs,o=i!==null?NP(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!yn(r)&&!yn(u))return!1;if(s&&yn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!DP(n,u,t)||u===""&&e.length===1){if(yn(r))return!1;s=!0}}else if(r&8){if(i===null||!CP(n,i,u,t)){if(yn(r))return!1;s=!0}}else{let l=e[++c],h=RP(u,i,jm(n),t);if(h===-1){if(yn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(yn(r))return!1;s=!0}}}}return yn(r)||s}function yn(n){return(n&1)===0}function RP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return xP(e,n)}function kP(n,e,t=!1){for(let r=0;r<e.length;r++)if(AP(n,e[r],t))return!0;return!1}function NP(n){for(let e=0;e<n.length;e++){let t=n[e];if(eP(t))return e}return n.length}function xP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function mb(n,e){return n?":not("+e.trim()+")":e}function PP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!yn(s)&&(e+=mb(o,i),i=""),r=s,o=o||!yn(r);t++}return i!==""&&(e+=mb(o,i)),e}function MP(n){return n.map(PP).join(",")}function OP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!yn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var un={};function LP(n,e){return n.createText(e)}function FP(n,e,t){n.setValue(e,t)}function yS(n,e,t){return n.createElement(e,t)}function Kl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function vS(n,e,t){n.appendChild(e,t)}function yb(n,e,t,r,i){r!==null?Kl(n,e,t,r,i):vS(n,e,t)}function _S(n,e,t){n.removeChild(null,e,t)}function VP(n,e,t){n.setAttribute(e,"style",t)}function jP(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function IS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Xx(n,e,r),i!==null&&jP(n,e,i),o!==null&&VP(n,e,o)}function Um(n,e,t,r,i,o,s,c,u,l,h){let p=dt+r,m=p+i,y=UP(p,m),D=typeof l=="function"?l():l;return y[K]={type:n,blueprint:y,template:t,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function UP(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:un);return t}function BP(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Um(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Bm(n,e,t,r,i,o,s,c,u,l,h){let p=e.blueprint.slice();return p[pn]=i,p[ee]=r|4|128|8|64|1024,(l!==null||n&&n[ee]&2048)&&(p[ee]|=2048),Sg(p),p[tt]=p[Vi]=n,p[He]=t,p[Nn]=s||n&&n[Nn],p[Oe]=c||n&&n[Oe],p[Fi]=u||n&&n[Fi]||null,p[an]=o,p[Na]=gP(),p[Ho]=h,p[Eg]=l,p[Gt]=e.type==2?n[Gt]:p,p}function $P(n,e,t){let r=Pn(e,n),i=BP(t),o=n[Nn].rendererFactory,s=$m(n,Bm(n,i,null,ES(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function ES(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function wS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function $m(n,e){return n[qo]?n[Ig][sn]=e:n[qo]=e,n[Ig]=e,e}function U(n=1){TS(Et(),de(),lr()+n,!1)}function TS(n,e,t,r){if(!r)if((e[ee]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Fl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Vl(e,o,0,t)}Yr(t)}var fd=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(fd||{});function am(n,e,t,r){let i=oe(null);try{let[o,s,c]=n.inputs[t],u=null;(s&fd.SignalBased)!==0&&(u=e[o][Co]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):Vb(e,u,o,r)}finally{oe(i)}}var fr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(fr||{}),HP;function Hm(n,e){return HP(n,e)}function Qo(n,e,t,r,i){if(r!=null){let o,s=!1;gn(r)?o=r:ur(r)&&(s=!0,r=r[pn]);let c=cn(r);n===0&&t!==null?i==null?vS(e,t,c):Kl(e,t,c,i||null,!0):n===1&&t!==null?Kl(e,t,c,i||null,!0):n===2?_S(e,c,s):n===3&&e.destroyNode(c),o!=null&&tM(e,n,o,t,i)}}function zP(n,e){bS(n,e),e[pn]=null,e[an]=null}function qP(n,e,t,r,i,o){r[pn]=i,r[an]=e,gd(n,r,t,1,i,o)}function bS(n,e){e[Nn].changeDetectionScheduler?.notify(9),gd(n,e,e[Oe],2,null,null)}function WP(n){let e=n[qo];if(!e)return Jg(n[K],n);for(;e;){let t=null;if(ur(e))t=e[qo];else{let r=e[ht];r&&(t=r)}if(!t){for(;e&&!e[sn]&&e!==n;)ur(e)&&Jg(e[K],e),e=e[tt];e===null&&(e=n),ur(e)&&Jg(e[K],e),t=e&&e[sn]}e=t}}function zm(n,e){let t=n[Ui],r=t.indexOf(e);t.splice(r,1)}function pd(n,e){if($i(e))return;let t=e[Oe];t.destroyNode&&gd(n,e,t,3,null,null),WP(e)}function Jg(n,e){if($i(e))return;let t=oe(null);try{e[ee]&=-129,e[ee]|=256,e[Kt]&&Sp(e[Kt]),KP(n,e),GP(n,e),e[K].type===1&&e[Oe].destroy();let r=e[Wr];if(r!==null&&gn(e[tt])){r!==e[tt]&&zm(r,e);let i=e[xn];i!==null&&i.detachView(n)}im(e)}finally{oe(t)}}function GP(n,e){let t=n.cleanup,r=e[zo];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let c=t[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[t[s+1]];t[s].call(c)}r!==null&&(e[zo]=null);let i=e[ar];if(i!==null){e[ar]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[xa];if(o!==null){e[xa]=null;for(let s of o)s.destroy()}}function KP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof $a)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];Ne(4,c,u);try{u.call(c)}finally{Ne(5,c,u)}}else{Ne(4,i,o);try{o.call(i)}finally{Ne(5,i,o)}}}}}function QP(n,e,t){return YP(n,e.parent,t)}function YP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[pn];if(Kr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===hr.None||i===hr.Emulated)return null}return Pn(r,t)}function JP(n,e,t){return XP(n,e,t)}function ZP(n,e,t){return n.type&40?Pn(n,t):null}var XP=ZP,vb;function qm(n,e,t,r){let i=QP(n,r,e),o=e[Oe],s=r.parent||e[an],c=JP(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)yb(o,i,t[u],c,!1);else yb(o,i,t,c,!1);vb!==void 0&&vb(o,r,e,t,i)}function Ua(n,e){if(e!==null){let t=e.type;if(t&3)return Pn(e,n);if(t&4)return cm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ua(n,r);{let i=n[e.index];return gn(i)?cm(-1,i):cn(i)}}else{if(t&128)return Ua(n,e.next);if(t&32)return Hm(e,n)()||cn(n[e.index]);{let r=SS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Hr(n[Gt]);return Ua(i,r)}else return Ua(n,e.next)}}}return null}function SS(n,e){if(e!==null){let r=n[Gt][an],i=e.projection;return r.projection[i]}return null}function cm(n,e){let t=ht+n+1;if(t<e.length){let r=e[t],i=r[K].firstChild;if(i!==null)return Ua(r,i)}return e[Gr]}function Wm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(s&&e===0&&(c&&Jo(cn(c),r),t.flags|=2),!Lm(t))if(u&8)Wm(n,e,t.child,r,i,o,!1),Qo(e,n,i,c,o);else if(u&32){let l=Hm(t,r),h;for(;h=l();)Qo(e,n,i,h,o);Qo(e,n,i,c,o)}else u&16?eM(n,e,r,t,i,o):Qo(e,n,i,c,o);t=s?t.projectionNext:t.next}}function gd(n,e,t,r,i,o){Wm(t,r,n.firstChild,e,i,o,!1)}function eM(n,e,t,r,i,o){let s=t[Gt],u=s[an].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Qo(e,n,i,h,o)}else{let l=u,h=s[tt];Xb(r)&&(l.flags|=128),Wm(n,e,l,h,i,o,!0)}}function tM(n,e,t,r,i){let o=t[Gr],s=cn(t);o!==s&&Qo(e,n,r,o,i);for(let c=ht;c<t.length;c++){let u=t[c];gd(u[K],u,n,e,r,o)}}function nM(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:fr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=fr.Important),n.setStyle(t,r,i,o))}}function CS(n,e,t,r,i){let o=lr(),s=r&2;try{Yr(-1),s&&e.length>dt&&TS(n,e,dt,!1),Ne(s?2:0,i,t),t(r,i)}finally{Yr(o),Ne(s?3:1,i,t)}}function DS(n,e,t){cM(n,e,t),(t.flags&64)===64&&uM(n,e,t)}function Gm(n,e,t=Pn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function rM(n,e,t,r){let o=r.get(cS,aS)||t===hr.ShadowDom,s=n.selectRootElement(e,o);return iM(s),s}function iM(n){oM(n)}var oM=()=>null;function sM(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function AS(n,e,t,r,i,o){let s=e[K];if(Km(n,s,e,t,r)){Kr(n)&&aM(e,n.index);return}n.type&3&&(t=sM(t)),RS(n,e,t,r,i,o)}function RS(n,e,t,r,i,o){if(n.type&3){let s=Pn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function aM(n,e){let t=mn(e,n);t[ee]&16||(t[ee]|=64)}function cM(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Kr(t)&&$P(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Wb(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let c=n.data[s],u=ql(e,n,s,t);if(Jo(u,e),o!==null&&hM(e,s-r,u,c,t,o),Bi(c)){let l=mn(t.index,e);l[He]=ql(e,n,s,t)}}}function uM(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=eb();try{Yr(o);for(let c=r;c<i;c++){let u=n.data[c],l=e[c];Al(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&lM(u,l)}}finally{Yr(-1),Al(s)}}function lM(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function dM(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];kP(e,o.selectors,!1)&&(r??=[],Bi(o)?r.unshift(o):r.push(o))}return r}function hM(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];am(r,t,u,l)}}function kS(n,e,t,r,i){let o=dt+t,s=e[K],c=i(s,e,n,r,t);e[o]=c,Go(n,!0);let u=n.type===2;return u?(IS(e[Oe],c,n),(zT()===0||Sl(n))&&Jo(c,e),qT()):Jo(c,e),Pl()&&(!u||!Lm(n))&&qm(s,e,c,n),n}function NS(n){let e=n;return Mg()?QT():(e=e.parent,Go(e,!1)),e}function fM(n,e){let t=n[Fi];if(!t)return;t.get(Qt,null)?.(e)}function Km(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];am(p,t[l],h,i),c=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];am(h,l,r,i),c=!0}return c}function pM(n,e){let t=mn(e,n),r=t[K];gM(r,t);let i=t[pn];i!==null&&t[Ho]===null&&(t[Ho]=uS(i,t[Fi])),Ne(18),Qm(r,t,t[He]),Ne(19,t[He])}function gM(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Qm(n,e,t){kl(e);try{let r=n.viewQuery;r!==null&&sm(1,r,t);let i=n.template;i!==null&&CS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[xn]?.finishViewCreation(n),n.staticContentQueries&&lS(n,e),n.staticViewQueries&&sm(2,n.viewQuery,t);let o=n.components;o!==null&&mM(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ee]&=-5,Nl()}}function mM(n,e){for(let t=0;t<e.length;t++)pM(n,e[t])}function md(n,e,t,r){let i=oe(null);try{let o=e.tView,c=n[ee]&4096?4096:16,u=Bm(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Wr]=l;let h=n[xn];return h!==null&&(u[xn]=h.createEmbeddedView(o)),Qm(o,u,t),u}finally{oe(i)}}function Ha(n,e){return!e||e.firstChild===null||Xb(n)}var _b=!1,yM=new B("");function za(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(cn(o)),gn(o)&&xS(o,r);let s=t.type;if(s&8)za(n,e,t.child,r);else if(s&32){let c=Hm(t,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=SS(e,t);if(Array.isArray(c))r.push(...c);else{let u=Hr(e[Gt]);za(u[K],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function xS(n,e){for(let t=ht;t<n.length;t++){let r=n[t],i=r[K].firstChild;i!==null&&za(r[K],r,i,e)}n[Gr]!==n[pn]&&e.push(n[Gr])}function PS(n){if(n[bl]!==null){for(let e of n[bl])e.impl.addSequence(e);n[bl].length=0}}var MS=[];function vM(n){return n[Kt]??_M(n)}function _M(n){let e=MS.pop()??Object.create(EM);return e.lView=n,e}function IM(n){n.lView[Kt]!==n&&(n.lView=null,MS.push(n))}var EM=ke(F({},Fu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{La(n.lView)},consumerOnSignalRead(){this.lView[Kt]=this}});function wM(n){let e=n[Kt]??Object.create(TM);return e.lView=n,e}var TM=ke(F({},Fu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Hr(n.lView);for(;e&&!OS(e[K]);)e=Hr(e);e&&Cg(e)},consumerOnSignalRead(){this.lView[Kt]=this}});function OS(n){return n.type!==2}function LS(n){if(n[xa]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[xa])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ee]&8192)}}var bM=100;function Ym(n,e=0){let r=n[Nn].rendererFactory,i=!1;i||r.begin?.();try{SM(n,e)}finally{i||r.end?.()}}function SM(n,e){let t=Lg();try{Fg(!0),um(n,e);let r=0;for(;Oa(n);){if(r===bM)throw new H(103,!1);r++,um(n,1)}}finally{Fg(t)}}function FS(n,e){Og(e?Fa.Exhaustive:Fa.OnlyDirtyViews);try{Ym(n)}finally{Og(Fa.Off)}}function CM(n,e,t,r){if($i(e))return;let i=e[ee],o=!1,s=!1;kl(e);let c=!0,u=null,l=null;o||(OS(n)?(l=vM(e),u=Vu(l)):Lu()===null?(c=!1,l=wM(e),u=Vu(l)):e[Kt]&&(Sp(e[Kt]),e[Kt]=null));try{Sg(e),JT(n.bindingStartIndex),t!==null&&CS(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Fl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Vl(e,y,0,null),Qg(e,0)}if(s||DM(e),LS(e),VS(e,0),n.contentQueries!==null&&lS(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Fl(e,y)}else{let y=n.contentHooks;y!==null&&Vl(e,y,1),Qg(e,1)}RM(n,e);let p=n.components;p!==null&&US(e,p,0);let m=n.viewQuery;if(m!==null&&sm(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Fl(e,y)}else{let y=n.viewHooks;y!==null&&Vl(e,y,2),Qg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Tl]){for(let y of e[Tl])y();e[Tl]=null}o||(PS(e),e[ee]&=-73)}catch(h){throw o||La(e),h}finally{l!==null&&(bp(l,u),c&&IM(l)),Nl()}}function VS(n,e){for(let t=tS(n);t!==null;t=nS(t))for(let r=ht;r<t.length;r++){let i=t[r];jS(i,e)}}function DM(n){for(let e=tS(n);e!==null;e=nS(e)){if(!(e[ee]&2))continue;let t=e[Ui];for(let r=0;r<t.length;r++){let i=t[r];Cg(i)}}}function AM(n,e,t){Ne(18);let r=mn(e,n);jS(r,t),Ne(19,r[He])}function jS(n,e){Cl(n)&&um(n,e)}function um(n,e){let r=n[K],i=n[ee],o=n[Kt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ju(o)),s||=!1,o&&(o.dirty=!1),n[ee]&=-9217,s)CM(r,n,r.template,n[He]);else if(i&8192){let c=oe(null);try{LS(n),VS(n,1);let u=r.components;u!==null&&US(n,u,1),PS(n)}finally{oe(c)}}}function US(n,e,t){for(let r=0;r<e.length;r++)AM(n,e[r],t)}function RM(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Yr(~i);else{let o=i,s=t[++r],c=t[++r];XT(s,o);let u=e[o];Ne(24,u),c(2,u),Ne(25,u)}}}finally{Yr(-1)}}function Jm(n,e){let t=Lg()?64:1088;for(n[Nn].changeDetectionScheduler?.notify(e);n;){n[ee]|=t;let r=Hr(n);if(Wo(n)&&!r)return n;n=r}return null}function BS(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function $S(n,e){let t=ht+e;if(t<n.length)return n[t]}function yd(n,e,t,r=!0){let i=e[K];if(kM(i,e,n,t),r){let s=cm(t,n),c=e[Oe],u=c.parentNode(n[Gr]);u!==null&&qP(i,n[an],c,e,u,s)}let o=e[Ho];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function HS(n,e){let t=qa(n,e);return t!==void 0&&pd(t[K],t),t}function qa(n,e){if(n.length<=ht)return;let t=ht+e,r=n[t];if(r){let i=r[Wr];i!==null&&i!==n&&zm(i,r),e>0&&(n[t-1][sn]=r[sn]);let o=Aa(n,ht+e);zP(r[K],r);let s=o[xn];s!==null&&s.detachView(o[K]),r[tt]=null,r[sn]=null,r[ee]&=-129}return r}function kM(n,e,t,r){let i=ht+r,o=t.length;r>0&&(t[i-1][sn]=e),r<o-ht?(e[sn]=t[i],fg(t,ht+r,e)):(t.push(e),e[sn]=null),e[tt]=t;let s=e[Wr];s!==null&&t!==s&&zS(s,e);let c=e[xn];c!==null&&c.insertView(n),Dl(e),e[ee]|=128}function zS(n,e){let t=n[Ui],r=e[tt];if(ur(r))n[ee]|=2;else{let i=r[tt][Gt];e[Gt]!==i&&(n[ee]|=2)}t===null?n[Ui]=[e]:t.push(e)}var Zr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[K];return za(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[He]}set context(e){this._lView[He]=e}get destroyed(){return $i(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[tt];if(gn(e)){let t=e[Pa],r=t?t.indexOf(this):-1;r>-1&&(qa(e,r),Aa(t,r))}this._attachedToViewContainer=!1}pd(this._lView[K],this._lView)}onDestroy(e){Dg(this._lView,e)}markForCheck(){Jm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){Dl(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,Ym(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[Fi].get(yM,_b)}catch{this.exhaustive=_b}}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Wo(this._lView),t=this._lView[Wr];t!==null&&!e&&zm(t,this._lView),bS(this._lView[K],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let t=Wo(this._lView),r=this._lView[Wr];r!==null&&!t&&zS(r,this._lView),Dl(this._lView)}};var Wa=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=NM;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=md(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Zr(o)}}return n})();function NM(){return Zm($t(),de())}function Zm(n,e){return n.type&4?new Wa(e,n,ts(n,e)):null}function vd(n,e,t,r,i){let o=n.data[e];if(o===null)o=xM(n,e,t,r,i),ZT()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=KT();o.injectorIndex=s===null?-1:s.injectorIndex}return Go(o,!0),o}function xM(n,e,t,r,i){let o=Pg(),s=Mg(),c=s?o:o&&o.parent,u=n.data[e]=MM(n,c,t,e,r,i);return PM(n,u,o,s),u}function PM(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function MM(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return GT()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var m5=new RegExp(`^(\\d+)*(${_P}|${vP})*(.*)`);function OM(n){let e=n[wg]??[],r=n[tt][Oe],i=[];for(let o of e)o.data[sS]!==void 0?i.push(o):LM(o,r);n[wg]=i}function LM(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[oS];for(;t<i;){let o=r.nextSibling;_S(e,r,!1),r=o,t++}}}var FM=()=>null,VM=()=>null;function lm(n,e){return FM(n,e)}function qS(n,e,t){return VM(n,e,t)}var WS=class{},_d=class{},dm=class{resolveComponentFactory(e){throw new H(917,!1)}},Ja=class{static NULL=new dm},zi=class{};var GS=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>null})}return n})();var Ul={},hm=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Ul,r);return i!==Ul||t===Ul?i:this.parentInjector.get(e,t,r)}};function Ql(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=ml(i,c);else if(o==2){let u=c,l=e[++s];r=ml(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ns(n,e=0){let t=de();if(t===null)return Y(n,e);let r=$t();return Yb(r,t,Ut(n),e)}function jM(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let c=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,l]=h.resolveHostDirectives(s);break}$M(n,e,t,c,o,u,l)}o!==null&&r!==null&&UM(t,r,o)}function UM(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new H(-301,!1);r.push(e[i],o)}}function BM(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function $M(n,e,t,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let y=r[m];!u&&Bi(y)&&(u=!0,BM(n,t,m)),sP(Wb(t,e),n,y.type)}KM(t,n.data.length,c);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=wS(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(t.mergedAttrs=ad(t.mergedAttrs,y.hostAttrs),zM(n,t,e,p,y),GM(p,y,i),s!==null&&s.has(y)){let[N,k]=s.get(y);t.directiveToIndex.set(y.type,[p,N+t.directiveStart,k+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let D=y.type.prototype;!l&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(D.ngOnChanges||D.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}HM(n,t,o)}function HM(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Ib(0,e,i,r),Ib(1,e,i,r),wb(e,r,!1);else{let o=t.get(i);Eb(0,e,o,r),Eb(1,e,o,r),wb(e,r,!0)}}}function Ib(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),KS(e,o)}}function Eb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),KS(e,s)}}function KS(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function wb(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||jm(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(s)}function zM(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Pi(i.type,!0)),s=new $a(o,Bi(i),ns);n.blueprint[r]=s,t[r]=s,qM(n,e,r,wS(n,t,i.hostVars,un),i)}function qM(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;WM(s)!=c&&s.push(c),s.push(t,r,o)}}function WM(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function GM(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Bi(e)&&(t[""]=n)}}function KM(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function QS(n,e,t,r,i,o,s,c){let u=e[K],l=u.consts,h=Mn(l,s),p=vd(u,n,t,r,h);return o&&jM(u,e,p,Mn(l,c),i),p.mergedAttrs=ad(p.mergedAttrs,p.attrs),p.attrs!==null&&Ql(p,p.attrs,!1),p.mergedAttrs!==null&&Ql(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function YS(n,e){Qx(n,e),Tg(e)&&n.queries.elementEnd(e)}function QM(n,e,t,r,i,o){let s=e.consts,c=Mn(s,i),u=vd(e,n,t,r,c);if(u.mergedAttrs=ad(u.mergedAttrs,u.attrs),o!=null){let l=Mn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&Ql(u,u.attrs,!1),u.mergedAttrs!==null&&Ql(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function pr(n,e,t){if(t===un)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Bl(n,e,t){return function r(i){let o=Kr(n)?mn(n.index,e):e;Jm(o,5);let s=e[He],c=Tb(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)c=Tb(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function Tb(n,e,t,r){let i=oe(null);try{return Ne(6,e,t),t(r)!==!1}catch(o){return fM(n,o),!1}finally{Ne(7,e,t),oe(i)}}function JS(n,e,t,r,i,o,s,c){let u=Sl(n),l=!1,h=null;if(!r&&u&&(h=YM(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Pn(n,t),m=r?r(p):p;EP(t,m,o,c);let y=i.listen(m,o,c),D=r?N=>r(cn(N[n.index])):n.index;ZS(D,e,t,o,c,y,!1)}return l}function YM(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[zo],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function ZS(n,e,t,r,i,o,s){let c=e.firstCreatePass?Rg(e):null,u=Ag(t),l=u.length;u.push(i,o),c&&c.push(r,n,l,(l+1)*(s?-1:1))}function bb(n,e,t,r,i,o){let s=e[t],c=e[K],l=c.data[t].outputs[r],p=s[l].subscribe(o);ZS(n.index,c,e,i,o,p,!0)}var fm=Symbol("BINDING");var Yl=class extends Ja{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=qr(e);return new Zo(t,this.ngModule)}};function JM(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&fd.SignalBased)!==0};return i&&(o.transform=i),o})}function ZM(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function XM(n,e,t){let r=e instanceof et?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new hm(t,r):t}function eO(n){let e=n.get(zi,null);if(e===null)throw new H(407,!1);let t=n.get(GS,null),r=n.get(zr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function tO(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return yS(e,t,t==="svg"?LT:t==="math"?FT:null)}var Zo=class extends _d{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=JM(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=ZM(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=MP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Ne(22);let c=oe(null);try{let u=this.componentDef,l=nO(r,u,s,o),h=XM(u,i||this.ngModule,e),p=eO(h),m=p.rendererFactory.createRenderer(null,u),y=r?rM(m,r,u.encapsulation,h):tO(u,m),D=s?.some(Sb)||o?.some(O=>typeof O!="function"&&O.bindings.some(Sb)),N=Bm(null,l,null,512|ES(u),null,null,p,m,h,null,uS(y,h,!0));N[dt]=y,kl(N);let k=null;try{let O=QS(dt,N,2,"#host",()=>l.directiveRegistry,!0,0);y&&(IS(m,y,O),Jo(y,N)),DS(l,N,O),dS(l,O,N),YS(l,O),t!==void 0&&iO(O,this.ngContentSelectors,t),k=mn(O.index,N),N[He]=k[He],Qm(l,N,null)}catch(O){throw k!==null&&im(k),im(N),O}finally{Ne(23),Nl()}return new Jl(this.componentType,N,!!D)}finally{oe(c)}}};function nO(n,e,t,r){let i=n?["ng-version","20.1.0"]:OP(e.selectors[0]),o=null,s=null,c=0;if(t)for(let h of t)c+=h[fm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){c+=m[fm].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=yg(p);u.push(m)}return Um(0,null,rO(o,s),1,c,u,null,null,null,[i],null)}function rO(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function Sb(n){let e=n[fm].kind;return e==="input"||e==="twoWay"}var Jl=class extends WS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Ma(t[K],dt),this.location=ts(this._tNode,t),this.instance=mn(this._tNode.index,t)[He],this.hostView=this.changeDetectorRef=new Zr(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Km(r,i[K],i,e,t);this.previousInputValues.set(e,t);let s=mn(r.index,i);Jm(s,1)}get injector(){return new Hi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function iO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var rs=(()=>{class n{static __NG_ELEMENT_ID__=oO}return n})();function oO(){let n=$t();return eC(n,de())}var sO=rs,XS=class extends sO{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ts(this._hostTNode,this._hostLView)}get injector(){return new Hi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Pm(this._hostTNode,this._hostLView);if(Hb(e)){let t=zl(e,this._hostLView),r=Hl(e),i=t[K].data[r+8];return new Hi(i,t)}else return new Hi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Cb(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=lm(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,Ha(this._hostTNode,s)),c}createComponent(e,t,r,i,o,s,c){let u=e&&!zx(e),l;if(u)l=t;else{let k=t||{};l=k.index,r=k.injector,i=k.projectableNodes,o=k.environmentInjector||k.ngModuleRef,s=k.directives,c=k.bindings}let h=u?e:new Zo(qr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let O=(u?p:this.parentInjector).get(et,null);O&&(o=O)}let m=qr(h.componentType??{}),y=lm(this._lContainer,m?.id??null),D=y?.firstChild??null,N=h.create(p,i,D,o,s,c);return this.insertImpl(N.hostView,l,Ha(this._hostTNode,y)),N}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(UT(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[tt],l=new XS(u,u[an],u[tt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return yd(s,i,o,r),e.attachToViewContainerRef(),fg(Zg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Cb(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=qa(this._lContainer,t);r&&(Aa(Zg(this._lContainer),t),pd(r[K],r))}detach(e){let t=this._adjustIndex(e,-1),r=qa(this._lContainer,t);return r&&Aa(Zg(this._lContainer),t)!=null?new Zr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Cb(n){return n[Pa]}function Zg(n){return n[Pa]||(n[Pa]=[])}function eC(n,e){let t,r=e[n.index];return gn(r)?t=r:(t=BS(r,e,null,n),e[n.index]=t,$m(e,t)),cO(t,e,n,r),new XS(t,n,e)}function aO(n,e){let t=n[Oe],r=t.createComment(""),i=Pn(e,n),o=t.parentNode(i);return Kl(t,o,r,t.nextSibling(i),!1),r}var cO=dO,uO=()=>!1;function lO(n,e,t){return uO(n,e,t)}function dO(n,e,t,r){if(n[Gr])return;let i;t.type&8?i=cn(r):i=aO(e,t),n[Gr]=i}var pm=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},gm=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),c=this.queries[s.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Xm(e,t).matches!==null&&this.queries[t].setDirty()}},mm=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=_O(e):this.predicate=e}},ym=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},vm=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,hO(t,o)),this.matchTNodeWithReadOption(e,t,jl(t,e,o,!1,!1))}else r===Wa?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,jl(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ya||i===rs||i===Wa&&t.type&4)this.addMatch(t.index,-2);else{let o=jl(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function hO(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function fO(n,e){return n.type&11?ts(n,e):n.type&4?Zm(n,e):null}function pO(n,e,t,r){return t===-1?fO(e,n):t===-2?gO(n,e,r):ql(n,n[K],t,e)}function gO(n,e,t){if(t===Ya)return ts(e,n);if(t===Wa)return Zm(e,n);if(t===rs)return eC(e,n)}function tC(n,e,t,r){let i=e[xn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,c=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)c.push(null);else{let h=o[l];c.push(pO(e,h,s[u+1],t.metadata.read))}}i.matches=c}return i.matches}function _m(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=tC(n,e,i,t);for(let c=0;c<o.length;c+=2){let u=o[c];if(u>0)r.push(s[c/2]);else{let l=o[c+1],h=e[-u];for(let p=ht;p<h.length;p++){let m=h[p];m[Wr]===m[tt]&&_m(m[K],m,l,r)}if(h[Ui]!==null){let p=h[Ui];for(let m=0;m<p.length;m++){let y=p[m];_m(y[K],y,l,r)}}}}}return r}function mO(n,e){return n[xn].queries[e].queryList}function yO(n,e,t){let r=new Wl((t&4)===4);return HT(n,e,r,r.destroy),(e[xn]??=new gm).queries.push(new pm(r))-1}function vO(n,e,t){let r=Et();return r.firstCreatePass&&(IO(r,new mm(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),yO(r,de(),e)}function _O(n){return n.split(",").map(e=>e.trim())}function IO(n,e,t){n.queries===null&&(n.queries=new ym),n.queries.track(new vm(e,t))}function Xm(n,e){return n.queries.getByIndex(e)}function EO(n,e){let t=n[K],r=Xm(t,e);return r.crossesNgTemplate?_m(t,n,e,[]):tC(t,n,r,e)}var Db=new Set;function ei(n){Db.has(n)||(Db.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Xo=class{},Id=class{};var Zl=class extends Xo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Yl(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=mg(e);this._bootstrapComponents=gS(o.bootstrap),this._r3Injector=$g(e,t,[{provide:Xo,useValue:this},{provide:Ja,useValue:this.componentFactoryResolver},...r],Bt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Xl=class extends Id{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Zl(this.moduleType,e,[])}};var Ga=class extends Xo{injector;componentFactoryResolver=new Yl(this);instance=null;constructor(e){super();let t=new Mi([...e.providers,{provide:Xo,useValue:this},{provide:Ja,useValue:this.componentFactoryResolver}],e.parent||ka(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Za(n,e,t=null){return new Ga({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var wO=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=vg(!1,t.type),i=r.length>0?Za([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=V({token:n,providedIn:"environment",factory:()=>new n(Y(et))})}return n})();function ue(n){return Qa(()=>{let e=nC(n),t=ke(F({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Mm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(wO).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||hr.Emulated,styles:n.styles||Rn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ei("NgStandalone"),rC(t);let r=n.dependencies;return t.directiveDefs=Ab(r,TO),t.pipeDefs=Ab(r,AT),t.id=CO(t),t})}function TO(n){return qr(n)||yg(n)}function bO(n,e){if(n==null)return Li;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=fd.None,u=null),t[o]=[r,c,u],e[o]=s}return t}function SO(n){if(n==null)return Li;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ey(n){return Qa(()=>{let e=nC(n);return rC(e),e})}function nC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Li,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Rn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:bO(n.inputs,e),outputs:SO(n.outputs),debugInfo:null}}function rC(n){n.features?.forEach(e=>e(n))}function Ab(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function CO(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function DO(n,e,t,r,i,o,s,c){if(t.firstCreatePass){n.mergedAttrs=ad(n.mergedAttrs,n.attrs);let h=n.tView=Um(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}c&&(n.flags|=c),Go(n,!1);let u=AO(t,e,n,r);Pl()&&qm(t,e,u,n),Jo(u,e);let l=BS(u,e,u,n);e[r+dt]=l,$m(e,l),lO(l,n,e)}function ed(n,e,t,r,i,o,s,c,u,l,h){let p=t+dt,m;if(e.firstCreatePass){if(m=vd(e,p,4,s||null,c||null),l!=null){let y=Mn(e.consts,l);m.localNames=[];for(let D=0;D<y.length;D+=2)m.localNames.push(y[D],-1)}}else m=e.data[p];return DO(m,n,e,t,r,i,o,u),l!=null&&Gm(n,m,h),m}var AO=RO;function RO(n,e,t,r){return Ml(!0),e[Oe].createComment("")}var ty=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(ty||{}),Xa=new B(""),iC=!1,Im=class extends at{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,MT()&&(this.destroyRef=R(Jr,{optional:!0})??void 0,this.pendingTasks=R(dr,{optional:!0})??void 0)}emit(e){let t=oe(null);try{super.next(e)}finally{oe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Ve&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ve=Im;function oC(n){let e,t;function r(){n=ja;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Rb(n){return queueMicrotask(()=>n()),()=>{n=ja}}var ny="isAngularZone",td=ny+"_ID",kO=0,Ce=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ve(!1);onMicrotaskEmpty=new ve(!1);onStable=new ve(!1);onError=new ve(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=iC}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,PO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ny)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new H(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,NO,ja,ja);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},NO={};function ry(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xO(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){oC(()=>{n.callbackScheduled=!1,Em(n),n.isCheckStableRunning=!0,ry(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Em(n)}function PO(n){let e=()=>{xO(n)},t=kO++;n._inner=n._inner.fork({name:"angular",properties:{[ny]:!0,[td]:t,[td+t]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(MO(u))return r.invokeTask(o,s,c,u);try{return kb(n),r.invokeTask(o,s,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Nb(n)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return kb(n),r.invoke(o,s,c,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!OO(u)&&e(),Nb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Em(n),ry(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Em(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function kb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Nb(n){n._nesting--,ry(n)}var nd=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ve;onMicrotaskEmpty=new ve;onStable=new ve;onError=new ve;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function MO(n){return sC(n,"__ignore_ng_zone__")}function OO(n){return sC(n,"__scheduler_tick__")}function sC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var aC=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})();var iy=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var oy=new B("");function ec(n){return!!n&&typeof n.then=="function"}function cC(n){return!!n&&typeof n.subscribe=="function"}var uC=new B("");var sy=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=R(uC,{optional:!0})??[];injector=R(lt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=nt(this.injector,i);if(ec(o))t.push(o);else if(cC(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ed=new B("");function lC(){Cp(()=>{let n="";throw new H(600,n)})}function dC(n){return n.isBoundToModule}var LO=10;var Wi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(Qt);afterRenderManager=R(aC);zonelessEnabled=R(Va);rootEffectScheduler=R(Kg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new at;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(dr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ge(t=>!t))}constructor(){R(Xa,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=R(et);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=lt.NULL){return this._injector.get(Ce).run(()=>{Ne(10);let s=t instanceof _d;if(!this._injector.get(sy).done){let D="";throw new H(405,D)}let u;s?u=t:u=this._injector.get(Ja).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=dC(u)?void 0:this._injector.get(Xo),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(oy,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Ba(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Ne(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ne(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(ty.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new H(101,!1);let t=oe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,oe(t),this.afterTick.next(),Ne(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(zi,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<LO;)Ne(14),this.synchronizeOnce(),Ne(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Oa(i))continue;let o=r&&!this.zonelessEnabled?0:1;Ym(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Oa(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ba(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Ed,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ba(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new H(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ba(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var wm=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Xg(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function FO(n,e,t){let r,i,o=0,s=n.length-1,c=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=n.at(o),h=e[o],p=Xg(o,l,o,h,t);if(p!==0){p<0&&n.updateValue(o,h),o++;continue}let m=n.at(s),y=e[u],D=Xg(s,m,u,y,t);if(D!==0){D<0&&n.updateValue(s,y),s--,u--;continue}let N=t(o,l),k=t(s,m),O=t(o,h);if(Object.is(O,k)){let $=t(u,y);Object.is($,N)?(n.swap(o,s),n.updateValue(s,y),u--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new rd,i??=Pb(n,o,s,t),Tm(n,r,o,O))n.updateValue(o,h),o++,s++;else if(i.has(O))r.set(N,n.detach(o)),s--;else{let $=n.create(o,e[o]);n.attach(o,$),o++,s++}}for(;o<=u;)xb(n,r,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=n.at(o),p=l.value,m=Xg(o,h,o,p,t);if(m!==0)m<0&&n.updateValue(o,p),o++,l=u.next();else{r??=new rd,i??=Pb(n,o,s,t);let y=t(o,p);if(Tm(n,r,o,y))n.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))n.attach(o,n.create(o,p)),o++,s++,l=u.next();else{let D=t(o,h);r.set(D,n.detach(o)),s--}}}for(;!l.done;)xb(n,r,t,n.length,l.value),l=u.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(u=>{n.destroy(u)})}function Tm(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function xb(n,e,t,r,i){if(Tm(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function Pb(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var rd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Ln(n,e,t,r,i,o,s,c){ei("NgControlFlow");let u=de(),l=Et(),h=Mn(l.consts,o);return ed(u,l,n,e,t,r,i,h,256,s,c),ay}function ay(n,e,t,r,i,o,s,c){ei("NgControlFlow");let u=de(),l=Et(),h=Mn(l.consts,o);return ed(u,l,n,e,t,r,i,h,512,s,c),ay}function Fn(n,e){ei("NgControlFlow");let t=de(),r=Qr(),i=t[r]!==un?t[r]:-1,o=i!==-1?id(t,dt+i):void 0,s=0;if(pr(t,r,n)){let c=oe(null);try{if(o!==void 0&&HS(o,s),n!==-1){let u=dt+n,l=id(t,u),h=Dm(t[K],u),p=qS(l,h,t),m=md(t,h,e,{dehydratedView:p});yd(l,m,s,Ha(h,p))}}finally{oe(c)}}else if(o!==void 0){let c=$S(o,s);c!==void 0&&(c[He]=e)}}var bm=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-ht}};function is(n){return n}var Sm=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Vn(n,e,t,r,i,o,s,c,u,l,h,p,m){ei("NgControlFlow");let y=de(),D=Et(),N=u!==void 0,k=de(),O=c?s.bind(k[Gt][He]):s,$=new Sm(N,O);k[dt+n]=$,ed(y,D,n+1,e,t,r,i,Mn(D.consts,o),256),N&&ed(y,D,n+2,u,l,h,p,Mn(D.consts,m),512)}var Cm=class extends wm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-ht}at(e){return this.getLView(e)[He].$implicit}attach(e,t){let r=t[Ho];this.needsIndexUpdate||=e!==this.length,yd(this.lContainer,t,e,Ha(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,VO(this.lContainer,e)}create(e,t){let r=lm(this.lContainer,this.templateTNode.tView.ssrId),i=md(this.hostLView,this.templateTNode,new bm(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){pd(e[K],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[He].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[He].$index=e}getLView(e){return jO(this.lContainer,e)}};function jn(n){let e=oe(null),t=lr();try{let r=de(),i=r[K],o=r[t],s=t+1,c=id(r,s);if(o.liveCollection===void 0){let l=Dm(i,s);o.liveCollection=new Cm(c,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(FO(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Qr(),h=u.length===0;if(pr(r,l,h)){let p=t+2,m=id(r,p);if(h){let y=Dm(i,p),D=qS(m,y,r),N=md(r,y,void 0,{dehydratedView:D});yd(m,N,0,Ha(y,D))}else i.firstUpdatePass&&OM(m),HS(m,0)}}}finally{oe(e)}}function id(n,e){return n[e]}function VO(n,e){return qa(n,e)}function jO(n,e){return $S(n,e)}function Dm(n,e){return Ma(n,e)}function xe(n,e,t){let r=de(),i=Qr();if(pr(r,i,e)){let o=Et(),s=xl();AS(s,r,n,e,r[Oe],t)}return xe}function Am(n,e,t,r,i){Km(e,n,t,i?"class":"style",r)}function z(n,e,t,r){let i=de(),o=i[K],s=n+dt,c=o.firstCreatePass?QS(s,i,2,e,dM,WT(),t,r):o.data[s];if(kS(c,i,n,e,hC),Sl(c)){let u=i[K];DS(u,i,c),dS(u,c,i)}return r!=null&&Gm(i,c),z}function Q(){let n=Et(),e=$t(),t=NS(e);return n.firstCreatePass&&YS(n,t),Ng(t)&&xg(),kg(),t.classesWithoutHost!=null&&Jx(t)&&Am(n,t,de(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Zx(t)&&Am(n,t,de(),t.stylesWithoutHost,!1),Q}function rt(n,e,t,r){return z(n,e,t,r),Q(),rt}function me(n,e,t,r){let i=de(),o=i[K],s=n+dt,c=o.firstCreatePass?QM(s,o,2,e,t,r):o.data[s];return kS(c,i,n,e,hC),r!=null&&Gm(i,c),me}function Ie(){let n=$t(),e=NS(n);return Ng(e)&&xg(),kg(),Ie}function pt(n,e,t,r){return me(n,e,t,r),Ie(),pt}var hC=(n,e,t,r,i)=>(Ml(!0),yS(e[Oe],r,sb()));function it(){return de()}function gr(n,e,t){let r=de(),i=Qr();if(pr(r,i,e)){let o=Et(),s=xl();RS(s,r,n,e,r[Oe],t)}return gr}var tc="en-US";var UO=tc;function fC(n){typeof n=="string"&&(UO=n.toLowerCase().replace(/_/g,"-"))}function De(n,e,t){let r=de(),i=Et(),o=$t();return pC(i,r,r[Oe],o,n,e,t),De}function We(n,e,t){let r=de(),i=Et(),o=$t();return(o.type&3||t)&&JS(o,i,r,t,r[Oe],n,e,Bl(o,r,e)),We}function pC(n,e,t,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=Bl(r,e,o),JS(r,n,e,s,t,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Bl(r,e,o),bb(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Bl(r,e,o),bb(r,e,p,i,i,u)}}function Ee(n=1){return ob(n)}function cy(n,e,t){vO(n,e,t)}function uy(n){let e=de(),t=Et(),r=jg();Rl(r+1);let i=Xm(t,r);if(n.dirty&&jT(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=EO(e,r);n.reset(o,hP),n.notifyOnChanges()}return!0}return!1}function ly(){return mO(de(),jg())}function wd(n){let e=YT();return VT(e,dt+n)}function Ll(n,e){return n<<17|e<<2}function qi(n){return n>>17&32767}function BO(n){return(n&2)==2}function $O(n,e){return n&131071|e<<17}function Rm(n){return n|2}function es(n){return(n&131068)>>2}function em(n,e){return n&-131069|e<<2}function HO(n){return(n&1)===1}function km(n){return n|1}function zO(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,c=qi(s),u=es(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||$o(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=qi(n[c+1]);n[r+1]=Ll(m,c),m!==0&&(n[m+1]=em(n[m+1],r)),n[c+1]=$O(n[c+1],r)}else n[r+1]=Ll(c,0),c!==0&&(n[c+1]=em(n[c+1],r)),c=r;else n[r+1]=Ll(u,0),c===0?c=r:n[u+1]=em(n[u+1],r),u=r;l&&(n[r+1]=Rm(n[r+1])),Mb(n,h,r,!0),Mb(n,h,r,!1),qO(e,h,n,r,o),s=Ll(c,u),o?e.classBindings=s:e.styleBindings=s}function qO(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&$o(o,e)>=0&&(t[r+1]=km(t[r+1]))}function Mb(n,e,t,r){let i=n[t+1],o=e===null,s=r?qi(i):es(i),c=!1;for(;s!==0&&(c===!1||o);){let u=n[s],l=n[s+1];WO(u,e)&&(c=!0,n[s+1]=r?km(l):Rm(l)),s=r?qi(l):es(l)}c&&(n[t+1]=r?Rm(i):km(i))}function WO(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?$o(n,e)>=0:!1}var vn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function GO(n){return n.substring(vn.key,vn.keyEnd)}function KO(n){return QO(n),gC(n,mC(n,0,vn.textEnd))}function gC(n,e){let t=vn.textEnd;return t===e?-1:(e=vn.keyEnd=YO(n,vn.key=e,t),mC(n,e,t))}function QO(n){vn.key=0,vn.keyEnd=0,vn.value=0,vn.valueEnd=0,vn.textEnd=n.length}function mC(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function YO(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Td(n,e,t){return yC(n,e,t,!1),Td}function Pt(n,e){return yC(n,e,null,!0),Pt}function Gi(n){ZO(i1,JO,n,!0)}function JO(n,e){for(let t=KO(e);t>=0;t=gC(e,t))El(n,GO(e),!0)}function yC(n,e,t,r){let i=de(),o=Et(),s=Vg(2);if(o.firstUpdatePass&&_C(o,n,s,r),e!==un&&pr(i,s,e)){let c=o.data[lr()];IC(o,c,i,i[Oe],n,i[s+1]=s1(e,t),r,s)}}function ZO(n,e,t,r){let i=Et(),o=Vg(2);i.firstUpdatePass&&_C(i,null,o,r);let s=de();if(t!==un&&pr(s,o,t)){let c=i.data[lr()];if(EC(c,r)&&!vC(i,o)){let u=r?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(t=ml(u,t||"")),Am(i,c,s,t,r)}else o1(i,c,s,s[Oe],s[o+1],s[o+1]=r1(n,e,t),r,o)}}function vC(n,e){return e>=n.expandoStartIndex}function _C(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[lr()],s=vC(n,t);EC(o,r)&&e===null&&!s&&(e=!1),e=XO(i,o,e,r),zO(i,o,e,t,s,r)}}function XO(n,e,t,r){let i=tb(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=tm(null,n,e,t,r),t=Ka(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=tm(i,n,e,t,r),o===null){let u=e1(n,e,r);u!==void 0&&Array.isArray(u)&&(u=tm(null,n,e,u[1],r),u=Ka(u,e.attrs,r),t1(n,e,r,u))}else o=n1(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function e1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(es(r)!==0)return n[qi(r)]}function t1(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[qi(i)]=r}function n1(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ka(r,s,t)}return Ka(r,e.attrs,t)}function tm(n,e,t,r,i){let o=null,s=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<s&&(o=e[c],r=Ka(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function Ka(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),El(n,s,t?!0:e[++o]))}return n===void 0?null:n}function r1(n,e,t){if(t==null||t==="")return Rn;let r=[],i=hd(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function i1(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&El(n,r,t)}function o1(n,e,t,r,i,o,s,c){i===un&&(i=Rn);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,D=null,N;h===p?(u+=2,l+=2,m!==y&&(D=p,N=y)):p===null||h!==null&&h<p?(u+=2,D=h):(l+=2,D=p,N=y),D!==null&&IC(n,e,t,r,D,N,s,c),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function IC(n,e,t,r,i,o,s,c){if(!(e.type&3))return;let u=n.data,l=u[c+1],h=HO(l)?Ob(u,e,t,i,es(l),s):void 0;if(!od(h)){od(o)||BO(l)&&(o=Ob(u,null,t,i,c,s));let p=bg(lr(),t);nM(r,s,p,i,o)}}function Ob(n,e,t,r,i,o){let s=e===null,c;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===un&&(m=p?Rn:void 0);let y=p?wl(m,r):h===r?m:void 0;if(l&&!od(y)&&(y=wl(u,r)),od(y)&&(c=y,s))return c;let D=n[i+1];i=s?qi(D):es(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=wl(u,r))}return c}function od(n){return n!==void 0}function s1(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Bt(hd(n)))),n}function EC(n,e){return(n.flags&(e?8:16))!==0}function q(n,e=""){let t=de(),r=Et(),i=n+dt,o=r.firstCreatePass?vd(r,i,1,e,null):r.data[i],s=a1(r,t,o,e,n);t[i]=s,Pl()&&qm(r,t,s,o),Go(o,!1)}var a1=(n,e,t,r,i)=>(Ml(!0),LP(e[Oe],r));function c1(n,e,t,r=""){return pr(n,Qr(),t)?e+Da(t)+r:un}function ot(n){return _n("",n),ot}function _n(n,e,t){let r=de(),i=c1(r,n,e,t);return i!==un&&u1(r,lr(),i),_n}function u1(n,e,t){let r=bg(e,n);FP(n[Oe],r,t)}function bd(n,e,t){qg(e)&&(e=e());let r=de(),i=Qr();if(pr(r,i,e)){let o=Et(),s=xl();AS(s,r,n,e,r[Oe],t)}return bd}function dy(n,e){let t=qg(n);return t&&n.set(e),t}function Sd(n,e){let t=de(),r=Et(),i=$t();return pC(r,t,t[Oe],i,n,e),Sd}function gt(n){return pr(de(),Qr(),n)?Da(n):un}var sd=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},hy=(()=>{class n{compileModuleSync(t){return new Xl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=mg(t),o=gS(i.declarations).reduce((s,c)=>{let u=qr(c);return u&&s.push(new Zo(u)),s},[]);return new sd(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var l1=(()=>{class n{zone=R(Ce);changeDetectionScheduler=R(zr);applicationRef=R(Wi);applicationErrorHandler=R(Qt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wC=new B("",{factory:()=>!1});function fy({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ce(ke(F({},gy()),{scheduleInRootZone:t})),[{provide:Ce,useFactory:n},{provide:cr,multi:!0,useFactory:()=>{let r=R(l1,{optional:!0});return()=>r.initialize()}},{provide:cr,multi:!0,useFactory:()=>{let r=R(d1);return()=>{r.initialize()}}},e===!0?{provide:Wg,useValue:!0}:[],{provide:Gg,useValue:t??iC},{provide:Qt,useFactory:()=>{let r=R(Ce),i=R(et),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(kn),o.handleError(s))})}}}]}function py(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=fy({ngZoneFactory:()=>{let i=gy(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&ei("NgZone_CoalesceEvent"),new Ce(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Wt([{provide:wC,useValue:!0},{provide:Va,useValue:!1},r])}function gy(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var d1=(()=>{class n{subscription=new Ve;initialized=!1;zone=R(Ce);pendingTasks=R(dr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var TC=(()=>{class n{applicationErrorHandler=R(Qt);appRef=R(Wi);taskService=R(dr);ngZone=R(Ce);zonelessEnabled=R(Va);tracing=R(Xa,{optional:!0});disableScheduling=R(Wg,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ve;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(td):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(Gg,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof nd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Rb:oC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(td+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Rb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function h1(){return typeof $localize<"u"&&$localize.locale||tc}var my=new B("",{providedIn:"root",factory:()=>R(my,{optional:!0,skipSelf:!0})||h1()});var CC=Symbol("InputSignalNode#UNSET"),E1=ke(F({},Ap),{transformFn:void 0,applyValueToInputSignal(n,e){Dp(n,e)}});function DC(n,e){let t=Object.create(E1);t.value=n,t.transformFn=e?.transform;function r(){if(wp(t),t.value===CC){let i=null;throw new H(-950,i)}return t.value}return r[Co]=t,r}var w1=new B("");w1.__NG_ELEMENT_ID__=n=>{let e=$t();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new H(204,!1)};function bC(n,e){return DC(n,e)}function T1(n){return DC(CC,n)}var AC=(bC.required=T1,bC);var rc=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},RC=new rc("20.1.0");var yy=new B(""),b1=new B("");function nc(n){return!n.moduleRef}function S1(n){let e=nc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ce);return t.run(()=>{nc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Qt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),nc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(yy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(yy);s.add(o),n.moduleRef.onDestroy(()=>{Ba(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return D1(r,t,()=>{let o=e.get(sy);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(my,tc);if(fC(s||tc),!e.get(b1,!0))return nc(n)?e.get(Wi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(nc(n)){let u=e.get(Wi);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return C1?.(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}var C1;function D1(n,e,t){try{let r=t();return ec(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Cd=null;function A1(n=[],e){return lt.create({name:e,providers:[{provide:Ra,useValue:"platform"},{provide:yy,useValue:new Set([()=>Cd=null])},...n]})}function R1(n=[]){if(Cd)return Cd;let e=A1(n);return Cd=e,lC(),k1(e),e}function k1(n){let e=n.get(ld,null);nt(n,()=>{e?.forEach(t=>t())})}function vy(){return!1}var Dd=(()=>{class n{static __NG_ELEMENT_ID__=N1}return n})();function N1(n){return x1($t(),de(),(n&16)===16)}function x1(n,e,t){if(Kr(n)&&!t){let r=mn(n.index,e);return new Zr(r,r)}else if(n.type&175){let r=e[Gt];return new Zr(r,e)}return null}function kC(n){Ne(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=R1(r),o=[fy({}),{provide:zr,useExisting:TC},cb,...t||[]],s=new Ga({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return S1({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Ne(9)}}var PC=null;function mr(){return PC}function _y(n){PC??=n}var ic=class{},Iy=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>R(MC),providedIn:"platform"})}return n})();var MC=(()=>{class n extends Iy{_location;_history;_doc=R(ft);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mr().getBaseHref(this._doc)}onPopState(t){let r=mr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=mr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function OC(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function NC(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function ti(n){return n&&n[0]!=="?"?`?${n}`:n}var Ad=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>R(FC),providedIn:"root"})}return n})(),LC=new B(""),FC=(()=>{class n extends Ad{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(ft).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return OC(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ti(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ti(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ti(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Y(Iy),Y(LC,8))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),os=(()=>{class n{_subject=new at;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=O1(NC(xC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ti(r))}normalize(t){return n.stripTrailingSlash(M1(this._basePath,xC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ti(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ti(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ti;static joinWithSlash=OC;static stripTrailingSlash=NC;static \u0275fac=function(r){return new(r||n)(Y(Ad))};static \u0275prov=V({token:n,factory:()=>P1(),providedIn:"root"})}return n})();function P1(){return new os(Y(Ad))}function M1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function xC(n){return n.replace(/\/index.html$/,"")}function O1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Ey(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var oc=class{};var VC="browser";var kd=new B(""),Cy=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Y(kd),Y(Ce))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),sc=class{_doc;constructor(e){this._doc=e}manager},wy="ng-app-id";function jC(n){for(let e of n)e.remove()}function UC(n,e){let t=e.createElement("style");return t.textContent=n,t}function L1(n,e,t,r){let i=n.head?.querySelectorAll(`style[${wy}="${e}"],link[${wy}="${e}"]`);if(i)for(let o of i)o.removeAttribute(wy),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function by(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Dy=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,L1(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,UC);r?.forEach(i=>this.addUsage(i,this.external,by))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(jC(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])jC(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,UC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,by(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Y(ft),Y(ud),Y(dd,8),Y(Xr))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),Ty={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ay=/%COMP%/g;var $C="%COMP%",F1=`_nghost-${$C}`,V1=`_ngcontent-${$C}`,j1=!0,U1=new B("",{providedIn:"root",factory:()=>j1});function B1(n){return V1.replace(Ay,n)}function $1(n){return F1.replace(Ay,n)}function HC(n,e){return e.map(t=>t.replace(Ay,n))}var Ry=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,c,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new ac(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Rd?i.applyToHost(t):i instanceof cc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case hr.Emulated:o=new Rd(u,l,r,this.appId,h,s,c,p,m);break;case hr.ShadowDom:return new Sy(u,l,t,r,s,c,this.nonce,p,m);default:o=new cc(u,l,r,h,s,c,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Y(Cy),Y(Dy),Y(ud),Y(U1),Y(ft),Y(Xr),Y(Ce),Y(dd),Y(Xa,8))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),ac=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Ty[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(BC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(BC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Ty[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Ty[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(fr.DashCase|fr.Important)?e.style.setProperty(t,r,i&fr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&fr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=mr().getGlobalEventTarget(this.doc,e),!e))throw new H(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function BC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Sy=class extends ac{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,c,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=HC(i.id,h);for(let m of h){let y=document.createElement("style");c&&y.setAttribute("nonce",c),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=by(m,o);c&&y.setAttribute("nonce",c),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cc=class extends ac{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,u,l){super(e,o,s,c,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?HC(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Rd=class extends cc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,c,u,l,h),this.contentAttr=B1(h),this.hostAttr=$1(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Nd=class n extends ic{supportsDOMEvents=!0;static makeCurrent(){_y(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=H1();return t==null?null:z1(t)}resetBaseElement(){uc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ey(document.cookie,e)}},uc=null;function H1(){return uc=uc||document.head.querySelector("base"),uc?uc.getAttribute("href"):null}function z1(n){return new URL(n,document.baseURI).pathname}var q1=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),qC=(()=>{class n extends sc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Y(ft))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),zC=["alt","control","meta","shift"],W1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},G1={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},WC=(()=>{class n extends sc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mr().onAndCancel(t,s.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),zC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=W1[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),zC.forEach(s=>{if(s!==i){let c=G1[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Y(ft))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function ky(n,e){return kC(F({rootComponent:n},K1(e)))}function K1(n){return{appProviders:[...X1,...n?.providers??[]],platformProviders:Z1}}function Q1(){Nd.makeCurrent()}function Y1(){return new kn}function J1(){return Om(document),document}var Z1=[{provide:Xr,useValue:VC},{provide:ld,useValue:Q1,multi:!0},{provide:ft,useFactory:J1}];var X1=[{provide:Ra,useValue:"root"},{provide:kn,useFactory:Y1},{provide:kd,useClass:qC,multi:!0,deps:[ft]},{provide:kd,useClass:WC,multi:!0,deps:[ft]},Ry,Dy,Cy,{provide:zi,useExisting:Ry},{provide:oc,useClass:q1},[]];var GC=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Y(ft))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ie="primary",bc=Symbol("RouteTitle"),Oy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Yi(n){return new Oy(n)}function tD(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=n[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function tL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Un(n[t],e[t]))return!1;return!0}function Un(n,e){let t=n?Ly(n):void 0,r=e?Ly(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!nD(n[i],e[i]))return!1;return!0}function Ly(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function nD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function rD(n){return n.length>0?n[n.length-1]:null}function vr(n){return Bp(n)?n:ec(n)?qe(Promise.resolve(n)):X(n)}var nL={exact:oD,subset:sD},iD={exact:rL,subset:iL,ignored:()=>!0};function KC(n,e,t){return nL[t.paths](n.root,e.root,t.matrixParams)&&iD[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function rL(n,e){return Un(n,e)}function oD(n,e,t){if(!Ki(n.segments,e.segments)||!Md(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!oD(n.children[r],e.children[r],t))return!1;return!0}function iL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>nD(n[t],e[t]))}function sD(n,e,t){return aD(n,e,e.segments,t)}function aD(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ki(i,t)||e.hasChildren()||!Md(i,t,r))}else if(n.segments.length===t.length){if(!Ki(n.segments,t)||!Md(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!sD(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ki(n.segments,i)||!Md(n.segments,i,r)||!n.children[ie]?!1:aD(n.children[ie],e,o,r)}}function Md(n,e,t){return e.every((r,i)=>iD[t](n[i].parameters,r.parameters))}var $n=class{root;queryParams;fragment;_queryParamMap;constructor(e=new we([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Yi(this.queryParams),this._queryParamMap}toString(){return aL.serialize(this)}},we=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Od(this)}},ni=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Yi(this.parameters),this._parameterMap}toString(){return uD(this)}};function oL(n,e){return Ki(n,e)&&n.every((t,r)=>Un(t.parameters,e[r].parameters))}function Ki(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function sL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ie&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ie&&(t=t.concat(e(i,r)))}),t}var Sc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>new Ji,providedIn:"root"})}return n})(),Ji=class{parse(e){let t=new Vy(e);return new $n(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${lc(e.root,!0)}`,r=lL(e.queryParams),i=typeof e.fragment=="string"?`#${cL(e.fragment)}`:"";return`${t}${r}${i}`}},aL=new Ji;function Od(n){return n.segments.map(e=>uD(e)).join("/")}function lc(n,e){if(!n.hasChildren())return Od(n);if(e){let t=n.children[ie]?lc(n.children[ie],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ie&&r.push(`${i}:${lc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=sL(n,(r,i)=>i===ie?[lc(n.children[ie],!1)]:[`${i}:${lc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ie]!=null?`${Od(n)}/${t[0]}`:`${Od(n)}/(${t.join("//")})`}}function cD(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xd(n){return cD(n).replace(/%3B/gi,";")}function cL(n){return encodeURI(n)}function Fy(n){return cD(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ld(n){return decodeURIComponent(n)}function QC(n){return Ld(n.replace(/\+/g,"%20"))}function uD(n){return`${Fy(n.path)}${uL(n.parameters)}`}function uL(n){return Object.entries(n).map(([e,t])=>`;${Fy(e)}=${Fy(t)}`).join("")}function lL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${xd(t)}=${xd(i)}`).join("&"):`${xd(t)}=${xd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var dL=/^[^\/()?;#]+/;function Ny(n){let e=n.match(dL);return e?e[0]:""}var hL=/^[^\/()?;=#]+/;function fL(n){let e=n.match(hL);return e?e[0]:""}var pL=/^[^=?&#]+/;function gL(n){let e=n.match(pL);return e?e[0]:""}var mL=/^[^&#]+/;function yL(n){let e=n.match(mL);return e?e[0]:""}var Vy=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ie]=new we(e,t)),r}parseSegment(){let e=Ny(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new ni(Ld(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=fL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ny(this.remaining);i&&(r=i,this.capture(r))}e[Ld(t)]=Ld(r)}parseQueryParam(e){let t=gL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=yL(this.remaining);s&&(r=s,this.capture(r))}let i=QC(t),o=QC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ny(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ie);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ie]:new we([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function lD(n){return n.segments.length>0?new we([],{[ie]:n}):n}function dD(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=dD(i);if(r===ie&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new we(n.segments,e);return vL(t)}function vL(n){if(n.numberOfChildren===1&&n.children[ie]){let e=n.children[ie];return new we(n.segments.concat(e.segments),e.children)}return n}function ls(n){return n instanceof $n}function hD(n,e,t=null,r=null){let i=fD(n);return pD(i,e,t,r)}function fD(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let c=new we(o.url,s);return o===n&&(e=c),c}let r=t(n.root),i=lD(r);return e??i}function pD(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return xy(i,i,i,t,r);let o=_L(e);if(o.toRoot())return xy(i,i,new we([],{}),t,r);let s=IL(o,i,n),c=s.processChildren?hc(s.segmentGroup,s.index,o.commands):mD(s.segmentGroup,s.index,o.commands);return xy(i,s.segmentGroup,c,t,r)}function Fd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function gc(n){return typeof n=="object"&&n!=null&&n.outlets}function xy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=gD(n,e,t);let c=lD(dD(s));return new $n(c,o,i)}function gD(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=gD(o,e,t)}),new we(n.segments,r)}var Vd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Fd(r[0]))throw new H(4003,!1);let i=r.find(gc);if(i&&i!==rD(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function _L(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Vd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new Vd(t,e,r)}var cs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function IL(n,e,t){if(n.isAbsolute)return new cs(e,!0,0);if(!t)return new cs(e,!1,NaN);if(t.parent===null)return new cs(t,!0,0);let r=Fd(n.commands[0])?0:1,i=t.segments.length-1+r;return EL(t,i,n.numberOfDoubleDots)}function EL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new cs(r,!1,i-o)}function wL(n){return gc(n[0])?n[0].outlets:{[ie]:n}}function mD(n,e,t){if(n??=new we([],{}),n.segments.length===0&&n.hasChildren())return hc(n,e,t);let r=TL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new we(n.segments.slice(0,r.pathIndex),{});return o.children[ie]=new we(n.segments.slice(r.pathIndex),n.children),hc(o,0,i)}else return r.match&&i.length===0?new we(n.segments,{}):r.match&&!n.hasChildren()?jy(n,e,t):r.match?hc(n,0,i):jy(n,e,t)}function hc(n,e,t){if(t.length===0)return new we(n.segments,{});{let r=wL(t),i={};if(Object.keys(r).some(o=>o!==ie)&&n.children[ie]&&n.numberOfChildren===1&&n.children[ie].segments.length===0){let o=hc(n.children[ie],e,t);return new we(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=mD(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new we(n.segments,i)}}function TL(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],c=t[r];if(gc(c))break;let u=`${c}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!JC(u,l,s))return o;r+=2}else{if(!JC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function jy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(gc(o)){let u=bL(o.outlets);return new we(r,u)}if(i===0&&Fd(t[0])){let u=n.segments[e];r.push(new ni(u.path,YC(t[0]))),i++;continue}let s=gc(o)?o.outlets[ie]:`${o}`,c=i<t.length-1?t[i+1]:null;s&&c&&Fd(c)?(r.push(new ni(s,YC(c))),i+=2):(r.push(new ni(s,{})),i++)}return new we(r,{})}function bL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=jy(new we([],{}),0,r))}),e}function YC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function JC(n,e,t){return n==t.path&&Un(e,t.parameters)}var fc="imperative",mt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(mt||{}),Xt=class{id;url;constructor(e,t){this.id=e,this.url=t}},Zi=class extends Xt{type=mt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},En=class extends Xt{urlAfterRedirects;type=mt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(Mt||{}),mc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(mc||{}),Bn=class extends Xt{reason;code;type=mt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yr=class extends Xt{reason;code;type=mt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},ds=class extends Xt{error;target;type=mt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},yc=class extends Xt{urlAfterRedirects;state;type=mt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jd=class extends Xt{urlAfterRedirects;state;type=mt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ud=class extends Xt{urlAfterRedirects;state;shouldActivate;type=mt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Bd=class extends Xt{urlAfterRedirects;state;type=mt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$d=class extends Xt{urlAfterRedirects;state;type=mt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hd=class{route;type=mt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zd=class{route;type=mt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},qd=class{snapshot;type=mt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wd=class{snapshot;type=mt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gd=class{snapshot;type=mt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kd=class{snapshot;type=mt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var vc=class{},hs=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function SL(n){return!(n instanceof vc)&&!(n instanceof hs)}function CL(n,e){return n.providers&&!n._injector&&(n._injector=Za(n.providers,e,`Route: ${n.path}`)),n._injector??e}function In(n){return n.outlet||ie}function DL(n,e){let t=n.filter(r=>In(r)===e);return t.push(...n.filter(r=>In(r)!==e)),t}function gs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Qd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return gs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ms(this.rootInjector)}},ms=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Qd(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Y(et))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Uy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Uy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=By(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return By(e,this._root).map(t=>t.value)}};function Uy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Uy(n,t);if(r)return r}return null}function By(n,e){if(n===e.value)return[e];for(let t of e.children){let r=By(n,t);if(r.length)return r.unshift(e),r}return[]}var Zt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function as(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var _c=class extends Yd{snapshot;constructor(e,t){super(e),this.snapshot=t,Qy(this,e)}toString(){return this.snapshot.toString()}};function yD(n){let e=AL(n),t=new Ze([new ni("",{})]),r=new Ze({}),i=new Ze({}),o=new Ze({}),s=new Ze(""),c=new ri(t,r,o,s,i,ie,n,e.root);return c.snapshot=e.root,new _c(new Zt(c,[]),e)}function AL(n){let e={},t={},r={},i="",o=new Qi([],e,r,i,t,ie,n,null,{});return new Ic("",new Zt(o,[]))}var ri=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ge(l=>l[bc]))??X(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ge(e=>Yi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ge(e=>Yi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Jd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),i?.data),n._resolvedData)}:r={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},i&&_D(i)&&(r.resolve[bc]=i.title),r}var Qi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[bc]}constructor(e,t,r,i,o,s,c,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Yi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Yi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ic=class extends Yd{url;constructor(e,t){super(t),this.url=e,Qy(this,t)}toString(){return vD(this._root)}};function Qy(n,e){e.value._routerState=n,e.children.forEach(t=>Qy(n,t))}function vD(n){let e=n.children.length>0?` { ${n.children.map(vD).join(", ")} } `:"";return`${n.value}${e}`}function Py(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Un(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Un(e.params,t.params)||n.paramsSubject.next(t.params),tL(e.url,t.url)||n.urlSubject.next(t.url),Un(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $y(n,e){let t=Un(n.params,e.params)&&oL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||$y(n.parent,e.parent))}function _D(n){return typeof n.title=="string"||n.title===null}var ID=new B(""),Cc=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ie;activateEvents=new ve;deactivateEvents=new ve;attachEvents=new ve;detachEvents=new ve;routerOutletData=AC(void 0);parentContexts=R(ms);location=R(rs);changeDetector=R(Dd);inputBinder=R(th,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Hy(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ey({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Jt]})}return n})(),Hy=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===ri?this.route:e===ms?this.childContexts:e===ID?this.outletData:this.parent.get(e,t)}},th=new B("");var Yy=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ue({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&rt(0,"router-outlet")},dependencies:[Cc],encapsulation:2})}return n})();function Jy(n){let e=n.children&&n.children.map(Jy),t=e?ke(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ie&&(t.component=Yy),t}function RL(n,e,t){let r=Ec(n,e._root,t?t._root:void 0);return new _c(r,e)}function Ec(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=kL(n,e,t);return new Zt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Ec(n,c)),s}}let r=NL(e.value),i=e.children.map(o=>Ec(n,o));return new Zt(r,i)}}function kL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ec(n,r,i);return Ec(n,r)})}function NL(n){return new ri(new Ze(n.url),new Ze(n.params),new Ze(n.queryParams),new Ze(n.fragment),new Ze(n.data),n.outlet,n.component,n)}var fs=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ED="ngNavigationCancelingError";function Zd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ls(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wD(!1,Mt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function wD(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ED]=!0,t.cancellationCode=e,t}function xL(n){return TD(n)&&ls(n.url)}function TD(n){return!!n&&n[ED]}var PL=(n,e,t,r)=>ge(i=>(new zy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),zy=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Py(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=as(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=as(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=as(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=as(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Kd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Wd(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Py(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),Py(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Xd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},us=class{component;route;constructor(e,t){this.component=e,this.route=t}};function ML(n,e,t){let r=n._root,i=e?e._root:null;return dc(r,i,t,[r.value])}function OL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ys(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!og(n)?n:e.get(n):r}function dc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=as(e);return n.children.forEach(s=>{LL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>pc(c,t.getContext(s),i)),i}function LL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=FL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Xd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?dc(n,e,c?c.children:null,r,i):dc(n,e,t,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new us(c.outlet.component,s))}else s&&pc(e,c,i),i.canActivateChecks.push(new Xd(r)),o.component?dc(n,null,c?c.children:null,r,i):dc(n,null,t,r,i);return i}function FL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ki(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ki(n.url,e.url)||!Un(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$y(n,e)||!Un(n.queryParams,e.queryParams);case"paramsChange":default:return!$y(n,e)}}function pc(n,e,t){let r=as(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?pc(s,e.children.getContext(o),t):pc(s,null,t):pc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new us(e.outlet.component,i)):t.canDeactivateChecks.push(new us(null,i)):t.canDeactivateChecks.push(new us(null,i))}function Dc(n){return typeof n=="function"}function VL(n){return typeof n=="boolean"}function jL(n){return n&&Dc(n.canLoad)}function UL(n){return n&&Dc(n.canActivate)}function BL(n){return n&&Dc(n.canActivateChild)}function $L(n){return n&&Dc(n.canDeactivate)}function HL(n){return n&&Dc(n.canMatch)}function bD(n){return n instanceof ir||n?.name==="EmptyError"}var Pd=Symbol("INITIAL_VALUE");function ps(){return on(n=>al(n.map(e=>e.pipe(or(1),zp(Pd)))).pipe(ge(e=>{for(let t of e)if(t!==!0){if(t===Pd)return Pd;if(t===!1||zL(t))return t}return!0}),xt(e=>e!==Pd),or(1)))}function zL(n){return ls(n)||n instanceof fs}function qL(n,e){return Xe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?X(ke(F({},t),{guardsResult:!0})):WL(s,r,i,n).pipe(Xe(c=>c&&VL(c)?GL(r,o,n,e):X(c)),ge(c=>ke(F({},t),{guardsResult:c})))})}function WL(n,e,t,r){return qe(n).pipe(Xe(i=>ZL(i.component,i.route,t,e,r)),sr(i=>i!==!0,!0))}function GL(n,e,t,r){return qe(e).pipe(jo(i=>Vo(QL(i.route.parent,r),KL(i.route,r),JL(n,i.path,t),YL(n,i.route,t))),sr(i=>i!==!0,!0))}function KL(n,e){return n!==null&&e&&e(new Gd(n)),X(!0)}function QL(n,e){return n!==null&&e&&e(new qd(n)),X(!0)}function YL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let i=r.map(o=>Ea(()=>{let s=gs(e)??t,c=ys(o,s),u=UL(c)?c.canActivate(e,n):nt(s,()=>c(e,n));return vr(u).pipe(sr())}));return X(i).pipe(ps())}function JL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>OL(s)).filter(s=>s!==null).map(s=>Ea(()=>{let c=s.guards.map(u=>{let l=gs(s.node)??t,h=ys(u,l),p=BL(h)?h.canActivateChild(r,n):nt(l,()=>h(r,n));return vr(p).pipe(sr())});return X(c).pipe(ps())}));return X(o).pipe(ps())}function ZL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return X(!0);let s=o.map(c=>{let u=gs(e)??i,l=ys(c,u),h=$L(l)?l.canDeactivate(n,e,t,r):nt(u,()=>l(n,e,t,r));return vr(h).pipe(sr())});return X(s).pipe(ps())}function XL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return X(!0);let o=i.map(s=>{let c=ys(s,n),u=jL(c)?c.canLoad(e,t):nt(n,()=>c(e,t));return vr(u)});return X(o).pipe(ps(),SD(r))}function SD(n){return Mp(ut(e=>{if(typeof e!="boolean")throw Zd(n,e)}),ge(e=>e===!0))}function eF(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return X(!0);let o=i.map(s=>{let c=ys(s,n),u=HL(c)?c.canMatch(e,t):nt(n,()=>c(e,t));return vr(u)});return X(o).pipe(ps(),SD(r))}var wc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Tc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ss(n){return Fo(new wc(n))}function tF(n){return Fo(new H(4e3,!1))}function nF(n){return Fo(wD(!1,Mt.GuardRejected))}var qy=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return X(r);if(i.numberOfChildren>1||!i.children[ie])return tF(`${e.redirectTo}`);i=i.children[ie]}}applyRedirectCommands(e,t,r,i,o){return rF(t,i,o).pipe(ge(s=>{if(s instanceof $n)throw new Tc(s);let c=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Tc(c);return c}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new $n(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=t[c]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new we(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function rF(n,e,t){if(typeof n=="string")return X(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,params:l,data:h,title:p}=e;return vr(nt(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,title:p})))}var Wy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function iF(n,e,t,r,i){let o=CD(n,e,t);return o.matched?(r=CL(e,r),eF(r,e,t,i).pipe(ge(s=>s===!0?o:F({},Wy)))):X(o)}function CD(n,e,t){if(e.path==="**")return oF(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},Wy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||tD)(t,n,e);if(!i)return F({},Wy);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function oF(n){return{matched:!0,parameters:n.length>0?rD(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function ZC(n,e,t,r){return t.length>0&&cF(n,t,r)?{segmentGroup:new we(e,aF(r,new we(t,n.children))),slicedSegments:[]}:t.length===0&&uF(n,t,r)?{segmentGroup:new we(n.segments,sF(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new we(n.segments,n.children),slicedSegments:t}}function sF(n,e,t,r){let i={};for(let o of t)if(nh(n,e,o)&&!r[In(o)]){let s=new we([],{});i[In(o)]=s}return F(F({},r),i)}function aF(n,e){let t={};t[ie]=e;for(let r of n)if(r.path===""&&In(r)!==ie){let i=new we([],{});t[In(r)]=i}return t}function cF(n,e,t){return t.some(r=>nh(n,e,r)&&In(r)!==ie)}function uF(n,e,t){return t.some(r=>nh(n,e,r))}function nh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function lF(n,e,t){return e.length===0&&!n.children[t]}var Gy=class{};function dF(n,e,t,r,i,o,s="emptyOnly"){return new Ky(n,e,t,r,i,s,o).recognize()}var hF=31,Ky=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new qy(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=ZC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ge(({children:t,rootSnapshot:r})=>{let i=new Zt(r,t),o=new Ic("",i),s=hD(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Qi([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ie,t).pipe(ge(r=>({children:r,rootSnapshot:t})),Br(r=>{if(r instanceof Tc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof wc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ge(s=>s instanceof Zt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return qe(o).pipe(jo(s=>{let c=r.children[s],u=DL(t,s);return this.processSegmentGroup(e,u,c,s,i)}),Hp((s,c)=>(s.push(...c),s)),$r(null),$p(),Xe(s=>{if(s===null)return ss(r);let c=DD(s);return fF(c),X(c)}))}processSegment(e,t,r,i,o,s,c){return qe(t).pipe(jo(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,c).pipe(Br(l=>{if(l instanceof wc)return X(null);throw l}))),sr(u=>!!u),Br(u=>{if(bD(u))return lF(r,i,o)?X(new Gy):ss(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,c,u){return In(r)!==s&&(s===ie||!nh(i,o,r))?ss(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):ss(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=CD(t,i,o);if(!u)return ss(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hF&&(this.allowRedirects=!1));let y=new Qi(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,XC(i),In(i),i.component??i._loadedComponent??null,i,eD(i)),D=Jd(y,c,this.paramsInheritanceStrategy);return y.params=Object.freeze(D.params),y.data=Object.freeze(D.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(on(k=>this.applyRedirects.lineralizeSegments(i,k)),Xe(k=>this.processSegment(e,r,t,k.concat(m),s,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let c=iF(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(on(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(on(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,D=new Qi(m,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,XC(r),In(r),r.component??r._loadedComponent??null,r,eD(r)),N=Jd(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(N.params),D.data=Object.freeze(N.data);let{segmentGroup:k,slicedSegments:O}=ZC(t,m,y,l);if(O.length===0&&k.hasChildren())return this.processChildren(h,l,k,D).pipe(ge(Z=>new Zt(D,Z)));if(l.length===0&&O.length===0)return X(new Zt(D,[]));let $=In(r)===o;return this.processSegment(h,l,k,O,$?ie:o,!0,D).pipe(ge(Z=>new Zt(D,Z instanceof Zt?[Z]:[])))}))):ss(t)))}getChildConfig(e,t,r){return t.children?X({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?X({routes:t._loadedRoutes,injector:t._loadedInjector}):XL(e,t,r,this.urlSerializer).pipe(Xe(i=>i?this.configLoader.loadChildren(e,t).pipe(ut(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):nF(t))):X({routes:[],injector:e})}};function fF(n){n.sort((e,t)=>e.value.outlet===ie?-1:t.value.outlet===ie?1:e.value.outlet.localeCompare(t.value.outlet))}function pF(n){let e=n.value.routeConfig;return e&&e.path===""}function DD(n){let e=[],t=new Set;for(let r of n){if(!pF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=DD(r.children);e.push(new Zt(r.value,i))}return e.filter(r=>!t.has(r))}function XC(n){return n.data||{}}function eD(n){return n.resolve||{}}function gF(n,e,t,r,i,o){return Xe(s=>dF(n,e,t,r,s.extractedUrl,i,o).pipe(ge(({state:c,tree:u})=>ke(F({},s),{targetSnapshot:c,urlAfterRedirects:u}))))}function mF(n,e){return Xe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return X(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of AD(u))s.add(l);let c=0;return qe(s).pipe(jo(u=>o.has(u)?yF(u,r,n,e):(u.data=Jd(u,u.parent,n).resolve,X(void 0))),ut(()=>c++),Uo(1),Xe(u=>c===s.size?X(t):Vt))})}function AD(n){let e=n.children.map(t=>AD(t)).flat();return[n,...e]}function yF(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!_D(i)&&(o[bc]=i.title),Ea(()=>(n.data=Jd(n,n.parent,t).resolve,vF(o,n,e,r).pipe(ge(s=>(n._resolvedData=s,n.data=F(F({},n.data),s),null)))))}function vF(n,e,t,r){let i=Ly(n);if(i.length===0)return X({});let o={};return qe(i).pipe(Xe(s=>_F(n[s],e,t,r).pipe(sr(),ut(c=>{if(c instanceof fs)throw Zd(new Ji,c);o[s]=c}))),Uo(1),ge(()=>o),Br(s=>bD(s)?Vt:Fo(s)))}function _F(n,e,t,r){let i=gs(e)??r,o=ys(n,i),s=o.resolve?o.resolve(e,t):nt(i,()=>o(e,t));return vr(s)}function My(n){return on(e=>{let t=n(e);return t?qe(t).pipe(ge(()=>e)):X(e)})}var Zy=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ie);return r}getResolvedTitleForRoute(t){return t.data[bc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>R(RD),providedIn:"root"})}return n})(),RD=(()=>{class n extends Zy{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Y(GC))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ac=new B("",{providedIn:"root",factory:()=>({})}),Rc=new B(""),kD=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(hy);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return X(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=vr(nt(t,()=>r.loadComponent())).pipe(ge(xD),ut(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),wa(()=>{this.componentLoaders.delete(r)})),o=new Po(i,()=>new at).pipe(xo());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=ND(r,this.compiler,t,this.onLoadEndListener).pipe(wa(()=>{this.childrenLoaders.delete(r)})),s=new Po(o,()=>new at).pipe(xo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ND(n,e,t,r){return vr(nt(t,()=>n.loadChildren())).pipe(ge(xD),Xe(i=>i instanceof Id||Array.isArray(i)?X(i):qe(e.compileModuleAsync(i))),ge(i=>{r&&r(n);let o,s,c=!1;return Array.isArray(i)?(s=i,c=!0):(o=i.create(t).injector,s=o.get(Rc,[],{optional:!0,self:!0}).flat()),{routes:s.map(Jy),injector:o}}))}function IF(n){return n&&typeof n=="object"&&"default"in n}function xD(n){return IF(n)?n.default:n}var rh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>R(EF),providedIn:"root"})}return n})(),EF=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PD=new B("");var MD=new B(""),OD=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new at;transitionAbortWithErrorSubject=new at;configLoader=R(kD);environmentInjector=R(et);destroyRef=R(Jr);urlSerializer=R(Sc);rootContexts=R(ms);location=R(os);inputBindingEnabled=R(th,{optional:!0})!==null;titleStrategy=R(Zy);options=R(Ac,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(rh);createViewTransition=R(PD,{optional:!0});navigationErrorHandler=R(MD,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>X(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Hd(i)),r=i=>this.events.next(new zd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ke(F({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new Ze(null),this.transitions.pipe(xt(r=>r!==null),on(r=>{let i=!1;return X(r).pipe(on(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Mt.SupersededByNewNavigation),Vt;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ke(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&c!=="reload"){let u="";return this.events.next(new yr(o.id,this.urlSerializer.serialize(o.rawUrl),u,mc.IgnoredSameUrlNavigation)),o.resolve(!1),Vt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return X(o).pipe(on(u=>(this.events.next(new Zi(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Vt:Promise.resolve(u))),gF(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ut(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=ke(F({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new yc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new Zi(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let D=yD(this.rootComponentType).snapshot;return this.currentTransition=r=ke(F({},o),{targetSnapshot:D,urlAfterRedirects:l,extras:ke(F({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,X(r)}else{let u="";return this.events.next(new yr(o.id,this.urlSerializer.serialize(o.extractedUrl),u,mc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Vt}}),ut(o=>{let s=new jd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ge(o=>(this.currentTransition=r=ke(F({},o),{guards:ML(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),qL(this.environmentInjector,o=>this.events.next(o)),ut(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Zd(this.urlSerializer,o.guardsResult);let s=new Ud(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),xt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Mt.GuardRejected),!1)),My(o=>{if(o.guards.canActivateChecks.length!==0)return X(o).pipe(ut(s=>{let c=new Bd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),on(s=>{let c=!1;return X(s).pipe(mF(this.paramsInheritanceStrategy,this.environmentInjector),ut({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(s,"",Mt.NoDataFromResolver)}}))}),ut(s=>{let c=new $d(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}))}),My(o=>{let s=c=>{let u=[];if(c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent){let l=gs(c)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,c.routeConfig).pipe(ut(h=>{c.component=h}),ge(()=>{})))}for(let l of c.children)u.push(...s(l));return u};return al(s(o.targetSnapshot.root)).pipe($r(null),or(1))}),My(()=>this.afterPreactivation()),on(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return c?qe(c).pipe(ge(()=>r)):X(r)}),ge(o=>{let s=RL(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ke(F({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),ut(()=>{this.events.next(new vc)}),PL(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),or(1),ul(new ae(o=>{let s=r.abortController.signal,c=()=>o.next();return s.addEventListener("abort",c),()=>s.removeEventListener("abort",c)}).pipe(xt(()=>!i&&!r.targetRouterState),ut(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Mt.Aborted)}))),ut({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new En(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),ul(this.transitionAbortWithErrorSubject.pipe(ut(o=>{throw o}))),wa(()=>{i||this.cancelNavigationTransition(r,"",Mt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Br(o=>{if(this.destroyed)return r.resolve(!1),Vt;if(i=!0,TD(o))this.events.next(new Bn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),xL(o)?this.events.next(new hs(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new ds(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=nt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(c instanceof fs){let{message:u,cancellationCode:l}=Zd(this.urlSerializer,c);this.events.next(new Bn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new hs(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Vt}))}))}cancelNavigationTransition(t,r,i){let o=new Bn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wF(n){return n!==fc}var LD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>R(TF),providedIn:"root"})}return n})(),eh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},TF=(()=>{class n extends eh{static \u0275fac=(()=>{let t;return function(i){return(t||(t=cd(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FD=(()=>{class n{urlSerializer=R(Sc);options=R(Ac,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(os);urlHandlingStrategy=R(rh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new $n;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof $n?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=yD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>R(bF),providedIn:"root"})}return n})(),bF=(()=>{class n extends FD{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Zi?this.updateStateMemento():t instanceof yr?this.commitTransition(r):t instanceof yc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof vc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Bn&&t.code!==Mt.SupersededByNewNavigation&&t.code!==Mt.Redirect?this.restoreHistory(r):t instanceof ds?this.restoreHistory(r,!0):t instanceof En&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let c=this.browserPageId,u=F(F({},s),this.generateNgRouterState(i,c));this.location.replaceState(t,"",u)}else{let c=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=cd(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xy(n,e){n.events.pipe(xt(t=>t instanceof En||t instanceof Bn||t instanceof ds||t instanceof yr),ge(t=>t instanceof En||t instanceof yr?0:(t instanceof Bn?t.code===Mt.Redirect||t.code===Mt.SupersededByNewNavigation:!1)?2:1),xt(t=>t!==2),or(1)).subscribe(()=>{e()})}var SF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},CF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},vs=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(iy);stateManager=R(FD);options=R(Ac,{optional:!0})||{};pendingTasks=R(dr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(OD);urlSerializer=R(Sc);location=R(os);urlHandlingStrategy=R(rh);injector=R(et);_events=new at;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(LD);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(Rc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(th,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ve;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Bn&&r.code!==Mt.Redirect&&r.code!==Mt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof En)this.navigated=!0;else if(r instanceof hs){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||wF(i.source)},s);this.scheduleNavigation(c,fc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}SL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,s,o).catch(u=>{this.disposed||this.injector.get(Qt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Jy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=fD(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return pD(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ls(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,fc,null,r)}navigate(t,r={skipLocationChange:!1}){return DF(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=F({},SF):r===!1?i=F({},CF):i=r,ls(t))return KC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return KC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{c=p,u=m});let h=this.pendingTasks.add();return Xy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DF(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new H(4008,!1)}var RF=new B("");function ev(n,...e){return Wt([{provide:Rc,multi:!0,useValue:n},[],{provide:ri,useFactory:kF,deps:[vs]},{provide:Ed,multi:!0,useFactory:NF},e.map(t=>t.\u0275providers)])}function kF(n){return n.routerState.root}function NF(){let n=R(lt);return e=>{let t=n.get(Wi);if(e!==t.components[0])return;let r=n.get(vs),i=n.get(xF);n.get(PF)===1&&r.initialNavigation(),n.get(MF,null,{optional:!0})?.setUpPreloading(),n.get(RF,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var xF=new B("",{factory:()=>new at}),PF=new B("",{providedIn:"root",factory:()=>1});var MF=new B("");var VD={production:!1,firebaseConfig:{projectId:"japones-bedac",appId:"1:964982698950:web:e5b2797c57df0d657eb8c7",storageBucket:"japones-bedac.firebasestorage.app",apiKey:"AIzaSyAnnJLZr_SqhDgu8Kx4bY0t3_OiM3m_KME",authDomain:"japones-bedac.firebaseapp.com",messagingSenderId:"964982698950",measurementId:"G-R79XFJ7LC5"}};var ih=class n{texto="";isActive=!1;tabClicked=new ve;onCLick(){this.tabClicked.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-alfabeto-tab-button"]],inputs:{texto:"texto",isActive:"isActive"},outputs:{tabClicked:"tabClicked"},decls:2,vars:3,consts:[[1,"tab-button",3,"click"]],template:function(t,r){t&1&&(me(0,"button",0),We("click",function(){return r.onCLick()}),q(1),Ie()),t&2&&(Pt("active",r.isActive),U(),ot(r.texto))},styles:[".tab-button[_ngcontent-%COMP%]{padding:.7rem 1.5rem;border:none;border-radius:50px;background:#1a2a6c;color:#fff;font-size:1rem;font-weight:700;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:10px;box-shadow:0 5px 10px #0000004d}.tab-button[_ngcontent-%COMP%]:hover{background:#0d1a4a;transform:translateY(-3px)}.tab-button.active[_ngcontent-%COMP%]{background:#fdbb2d;color:#333}"]})};var oh=class n{isActive=!1;texto="";tabClicked=new ve;onCLick(){this.tabClicked.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-group-tab-button"]],inputs:{isActive:"isActive",texto:"texto"},outputs:{tabClicked:"tabClicked"},decls:2,vars:3,consts:[[1,"tab-button",3,"click"]],template:function(t,r){t&1&&(me(0,"button",0),We("click",function(){return r.onCLick()}),q(1),Ie()),t&2&&(Pt("active",r.isActive),U(),ot(r.texto))},styles:[".tab-button[_ngcontent-%COMP%]{padding:10px 20px;background:#e0e7ff;border:none;border-radius:30px;cursor:pointer;transition:all .3s;font-weight:500;box-shadow:0 5px 10px #0000004d}.tab-button[_ngcontent-%COMP%]:hover{background:#c5d2ff;transform:translateY(-3px)}.tab-button.active[_ngcontent-%COMP%]{background:#1a2a6c;color:#fff}"]})};var ii=class n{groupList=[{id:0,text:"Todos"},{id:1,text:"Vogais"},{id:2,text:"K"},{id:3,text:"S"},{id:4,text:"T"},{id:5,text:"N"},{id:6,text:"H"},{id:7,text:"M"},{id:8,text:"Y"},{id:9,text:"R"},{id:10,text:"W"}];getAll(){return this.groupList}getTextById(e){let t=this.groupList.find(r=>r.id===e);return t?t.text:""}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var sh=class n{tabsList=[{id:0,text:"Todos"},{id:1,text:"Hiragana"},{id:2,text:"Katakana"}];getAll(){return this.tabsList}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var ah=class n{checked=!1;checkedChange=new ve;toggleCheck(e){e.stopPropagation(),this.checked=!this.checked,this.checkedChange.emit(this.checked)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-check-button"]],inputs:{checked:"checked"},outputs:{checkedChange:"checkedChange"},decls:2,vars:2,consts:[["type","button","aria-label","Marcar/Desmarcar",1,"check-btn",3,"click"],[1,"fas","fa-check"]],template:function(t,r){t&1&&(me(0,"button",0),We("click",function(o){return r.toggleCheck(o)}),pt(1,"i",1),Ie()),t&2&&Pt("checked",r.checked)},styles:[".check-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#ffffff4d;border:none;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff;transition:all .3s;z-index:10}.check-btn.checked[_ngcontent-%COMP%]{background:#4caf50;color:#fff}"]})};var _s=class n{strokes="";kana="";romaji="";example="";meaning="";group="";flipped=!1;checked=!1;checkedChange=new ve;toggleFlip(){this.flipped=!this.flipped}onCheckedChange(e){this.checkedChange.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-flashcard"]],inputs:{strokes:"strokes",kana:"kana",romaji:"romaji",example:"example",meaning:"meaning",group:"group",checked:"checked"},outputs:{checkedChange:"checkedChange"},decls:21,vars:11,consts:[[1,"flashcard",3,"click"],[1,"flashcard-inner"],[1,"flashcard-front"],[3,"checkedChange","checked"],[1,"strokes"],[1,"kana"],[1,"flashcard-back"],[1,"romaji"],[1,"example-container"],[1,"example-word"],[1,"example-meaning"]],template:function(t,r){t&1&&(z(0,"div",0),De("click",function(){return r.toggleFlip()}),z(1,"div",1)(2,"div",2)(3,"app-check-button",3),De("checkedChange",function(o){return r.onCheckedChange(o)}),Q(),z(4,"div",4),q(5),Q(),z(6,"div",5),q(7),Q()(),z(8,"div",6)(9,"app-check-button",3),Sd("checkedChange",function(o){return dy(r.checked,o)||(r.checked=o),o}),De("checkedChange",function(o){return r.onCheckedChange(o)}),Q(),z(10,"div",4),q(11),Q(),z(12,"div",5),q(13),Q(),z(14,"div",7),q(15),Q(),z(16,"div",8)(17,"div",9),q(18),Q(),z(19,"div",10),q(20),Q()()()()()),t&2&&(Pt("flipped",r.flipped),U(3),xe("checked",r.checked),U(2),ot(r.strokes),U(2),ot(r.kana),U(2),bd("checked",r.checked),U(2),ot(r.strokes),U(2),ot(r.kana),U(2),ot(r.romaji),U(3),ot(r.example),U(2),ot(r.meaning))},dependencies:[ah],styles:[".flashcard[_ngcontent-%COMP%]{width:200px;height:280px;box-sizing:border-box}.flashcard[_ngcontent-%COMP%]:hover{transform:translateY(-5px);cursor:pointer}.flashcard-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;text-align:center;transition:transform 1s;transform-style:preserve-3d}.flashcard.flipped[_ngcontent-%COMP%]   .flashcard-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.flashcard-front[_ngcontent-%COMP%], .flashcard-back[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;backface-visibility:hidden;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:15px;box-shadow:0 5px 15px #000000b3;padding:15px;overflow:hidden}.flashcard-front[_ngcontent-%COMP%]{background:#1a2a6c;color:#fff}.flashcard-back[_ngcontent-%COMP%]{background:#fdbb2d;color:#333;transform:rotateY(180deg);justify-content:space-between}.kana[_ngcontent-%COMP%], .kanji[_ngcontent-%COMP%]{font-size:4rem;font-weight:700;margin-bottom:10px;font-family:Noto Sans JP,sans-serif}.romaji[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:10px}.meaning[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin-bottom:10px}.example-container[_ngcontent-%COMP%]{width:100%;padding:10px;background:#ffffffb3;border-radius:10px;margin-top:10px;max-height:100px;overflow:hidden}.example-word[_ngcontent-%COMP%]{font-size:1.1rem;font-family:Noto Sans JP,sans-serif;margin-bottom:5px;line-height:1.3}.example-meaning[_ngcontent-%COMP%]{font-size:.9rem;font-style:italic;color:#555;line-height:1.3}.strokes[_ngcontent-%COMP%]{font-size:.9rem;color:#1a2a6c;font-weight:700;position:absolute;top:10px;left:10px;background:#ffffffb3;padding:2px 8px;border-radius:10px}"]})};var oi=class n{hiraganaList=[{kana:"\u3042",romaji:"a",group:"Vogais",strokes:"3 tra\xE7os",example:"\u3042\u3081 (ame)",meaning:"chuva"},{kana:"\u3044",romaji:"i",group:"Vogais",strokes:"2 tra\xE7os",example:"\u3044\u3059 (isu)",meaning:"cadeira"},{kana:"\u3046",romaji:"u",group:"Vogais",strokes:"2 tra\xE7os",example:"\u3046\u307E (uma)",meaning:"cavalo"},{kana:"\u3048",romaji:"e",group:"Vogais",strokes:"2 tra\xE7os",example:"\u3048\u304D (eki)",meaning:"esta\xE7\xE3o"},{kana:"\u304A",romaji:"o",group:"Vogais",strokes:"3 tra\xE7os",example:"\u304A\u306B (oni)",meaning:"dem\xF4nio"},{kana:"\u304B",romaji:"ka",group:"K",strokes:"2 tra\xE7os",example:"\u304B\u3055 (kasa)",meaning:"guarda-chuva"},{kana:"\u304D",romaji:"ki",group:"K",strokes:"4 tra\xE7os",example:"\u304D (ki)",meaning:"\xE1rvore"},{kana:"\u304F",romaji:"ku",group:"K",strokes:"1 tra\xE7o",example:"\u304F\u3064 (kutsu)",meaning:"sapato"},{kana:"\u3051",romaji:"ke",group:"K",strokes:"3 tra\xE7os",example:"\u3051\u3044\u3055\u3064 (keisatsu)",meaning:"pol\xEDcia"},{kana:"\u3053",romaji:"ko",group:"K",strokes:"2 tra\xE7os",example:"\u3053\u3069\u3082 (kodomo)",meaning:"crian\xE7a"},{kana:"\u3055",romaji:"sa",group:"S",strokes:"3 tra\xE7os",example:"\u3055\u304B\u306A (sakana)",meaning:"peixe"},{kana:"\u3057",romaji:"shi",group:"S",strokes:"1 tra\xE7o",example:"\u3057\u304A (shio)",meaning:"sal"},{kana:"\u3059",romaji:"su",group:"S",strokes:"2 tra\xE7os",example:"\u3059\u3057 (sushi)",meaning:"sushi"},{kana:"\u305B",romaji:"se",group:"S",strokes:"2 tra\xE7os",example:"\u305B\u3093\u305B\u3044 (sensei)",meaning:"professor"},{kana:"\u305D",romaji:"so",group:"S",strokes:"1 tra\xE7o",example:"\u305D\u3089 (sora)",meaning:"c\xE9u"},{kana:"\u305F",romaji:"ta",group:"T",strokes:"4 tra\xE7os",example:"\u305F\u3053 (tako)",meaning:"polvo"},{kana:"\u3061",romaji:"chi",group:"T",strokes:"2 tra\xE7os",example:"\u3061\u3061 (chichi)",meaning:"pai"},{kana:"\u3064",romaji:"tsu",group:"T",strokes:"1 tra\xE7o",example:"\u3064\u304D (tsuki)",meaning:"lua"},{kana:"\u3066",romaji:"te",group:"T",strokes:"1 tra\xE7o",example:"\u3066 (te)",meaning:"m\xE3o"},{kana:"\u3068",romaji:"to",group:"T",strokes:"2 tra\xE7os",example:"\u3068\u3051\u3044 (tokei)",meaning:"rel\xF3gio"},{kana:"\u306A",romaji:"na",group:"N",strokes:"4 tra\xE7os",example:"\u306A\u3059 (nasu)",meaning:"berinjela"},{kana:"\u306B",romaji:"ni",group:"N",strokes:"3 tra\xE7os",example:"\u306B\u307B\u3093 (nihon)",meaning:"Jap\xE3o"},{kana:"\u306C",romaji:"nu",group:"N",strokes:"2 tra\xE7os",example:"\u306C\u3044\u3050\u308B\u307F (nuigurumi)",meaning:"pel\xFAcia"},{kana:"\u306D",romaji:"ne",group:"N",strokes:"2 tra\xE7os",example:"\u306D\u3053 (neko)",meaning:"gato"},{kana:"\u306E",romaji:"no",group:"N",strokes:"1 tra\xE7o",example:"\u306E\u308A (nori)",meaning:"alga marinha"},{kana:"\u306F",romaji:"ha",group:"H",strokes:"3 tra\xE7os",example:"\u306F\u306A (hana)",meaning:"flor"},{kana:"\u3072",romaji:"hi",group:"H",strokes:"1 tra\xE7o",example:"\u3072\u3053\u3046\u304D (hikouki)",meaning:"avi\xE3o"},{kana:"\u3075",romaji:"fu",group:"H",strokes:"4 tra\xE7os",example:"\u3075\u306D (fune)",meaning:"navio"},{kana:"\u3078",romaji:"he",group:"H",strokes:"1 tra\xE7o",example:"\u3078\u3084 (heya)",meaning:"quarto"},{kana:"\u307B",romaji:"ho",group:"H",strokes:"4 tra\xE7os",example:"\u307B\u3057 (hoshi)",meaning:"estrela"},{kana:"\u307E",romaji:"ma",group:"M",strokes:"3 tra\xE7os",example:"\u307E\u3093\u304C (manga)",meaning:"quadrinhos"},{kana:"\u307F",romaji:"mi",group:"M",strokes:"2 tra\xE7os",example:"\u307F\u305A (mizu)",meaning:"\xE1gua"},{kana:"\u3080",romaji:"mu",group:"M",strokes:"3 tra\xE7os",example:"\u3080\u3057 (mushi)",meaning:"inseto"},{kana:"\u3081",romaji:"me",group:"M",strokes:"2 tra\xE7os",example:"\u3081 (me)",meaning:"olho"},{kana:"\u3082",romaji:"mo",group:"M",strokes:"3 tra\xE7os",example:"\u3082\u3082 (momo)",meaning:"p\xEAssego"},{kana:"\u3084",romaji:"ya",group:"Y",strokes:"3 tra\xE7os",example:"\u3084\u307E (yama)",meaning:"montanha"},{kana:"\u3086",romaji:"yu",group:"Y",strokes:"2 tra\xE7os",example:"\u3086\u304D (yuki)",meaning:"neve"},{kana:"\u3088",romaji:"yo",group:"Y",strokes:"2 tra\xE7os",example:"\u3088\u308B (yoru)",meaning:"noite"},{kana:"\u3089",romaji:"ra",group:"R",strokes:"2 tra\xE7os",example:"\u3089\u304F\u3060 (rakuda)",meaning:"camelo"},{kana:"\u308A",romaji:"ri",group:"R",strokes:"2 tra\xE7os",example:"\u308A\u3093\u3054 (ringo)",meaning:"ma\xE7\xE3"},{kana:"\u308B",romaji:"ru",group:"R",strokes:"1 tra\xE7o",example:"\u308B\u3059 (rusu)",meaning:"aus\xEAncia"},{kana:"\u308C",romaji:"re",group:"R",strokes:"2 tra\xE7os",example:"\u308C\u3093\u3057\u3085\u3046 (renshuu)",meaning:"pr\xE1tica"},{kana:"\u308D",romaji:"ro",group:"R",strokes:"1 tra\xE7o",example:"\u308D\u3046\u304B (rouka)",meaning:"corredor"},{kana:"\u308F",romaji:"wa",group:"W",strokes:"2 tra\xE7os",example:"\u308F\u306B (wani)",meaning:"crocodilo"},{kana:"\u3092",romaji:"wo",group:"W",strokes:"3 tra\xE7os",example:"\u3092 (part\xEDcula)",meaning:"part\xEDcula objeto"},{kana:"\u3093",romaji:"n",group:"W",strokes:"1 tra\xE7o",example:"\u306B\u307B\u3093\u3054 (nihongo)",meaning:"l\xEDngua japonesa"}];groupsService=R(ii);getAll(){return this.hiraganaList}getByGroup(e){let t=this.groupsService.getTextById(e).toLowerCase();return this.hiraganaList.filter(r=>r.group.toLowerCase()===t)}getLenght(){return this.hiraganaList.length}getRandom(){let e=Math.floor(Math.random()*this.hiraganaList.length);return this.hiraganaList[e]}getByKana(e){return this.hiraganaList.find(r=>r.kana===e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var FF=(n,e)=>e.kana;function VF(n,e){if(n&1){let t=it();z(0,"app-flashcard",2),De("checkedChange",function(i){let o=je(t).$implicit,s=Ee();return Ue(s.onCardChecked({kana:o.kana,checked:i}))}),Q()}if(n&2){let t=e.$implicit,r=Ee();xe("kana",gt(t.kana))("romaji",gt(t.romaji))("group",gt(t.group))("strokes",gt(t.strokes))("example",gt(t.example))("meaning",gt(t.meaning))("checked",r.checkedStates[t.kana]||!1)}}var ch=class n{group=0;checkedStates={};checkedChange=new ve;hiraganaService=R(oi);hiraganaList=[];ngOnChanges(e){if(e.group){let t=e.group.currentValue;this.hiraganaList=t?this.hiraganaService.getByGroup(t):this.hiraganaService.getAll()}}onCardChecked(e){this.checkedChange.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-tab-hiragana"]],inputs:{group:"group",checkedStates:"checkedStates"},outputs:{checkedChange:"checkedChange"},features:[Jt],decls:6,vars:0,consts:[[1,"flashcard-container"],[3,"checked","kana","romaji","group","strokes","example","meaning"],[3,"checkedChange","checked","kana","romaji","group","strokes","example","meaning"]],template:function(t,r){t&1&&(z(0,"h1"),q(1,"Hiragana"),Q(),rt(2,"hr"),z(3,"div",0),Vn(4,VF,1,13,"app-flashcard",1,FF),Q()),t&2&&(U(4),jn(r.hiraganaList))},dependencies:[_s],styles:["hr[_ngcontent-%COMP%]{border:2px solid #fdbb2d}h1[_ngcontent-%COMP%]{color:#1a2a6c;justify-self:center;font-size:2rem;font-weight:700}.flashcard-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(12em,1fr));gap:2em;box-sizing:border-box;justify-items:center}.sectionFlashCards[_ngcontent-%COMP%]{margin-bottom:5em}"],changeDetection:0})};var si=class n{katakanaList=[{kana:"\u30A2",romaji:"a",group:"Vogais",strokes:"2 tra\xE7os",example:"\u30A2\u30E1\u30EA\u30AB (amerika)",meaning:"Am\xE9rica"},{kana:"\u30A4",romaji:"i",group:"Vogais",strokes:"2 tra\xE7os",example:"\u30A4\u30BF\u30EA\u30A2 (itaria)",meaning:"It\xE1lia"},{kana:"\u30A6",romaji:"u",group:"Vogais",strokes:"3 tra\xE7os",example:"\u30A6\u30A4\u30B9\u30AD\u30FC (uisukii)",meaning:"u\xEDsque"},{kana:"\u30A8",romaji:"e",group:"Vogais",strokes:"3 tra\xE7os",example:"\u30A8\u30EC\u30D9\u30FC\u30BF\u30FC (erebeetaa)",meaning:"elevador"},{kana:"\u30AA",romaji:"o",group:"Vogais",strokes:"3 tra\xE7os",example:"\u30AA\u30EC\u30F3\u30B8 (orenji)",meaning:"laranja"},{kana:"\u30AB",romaji:"ka",group:"k",strokes:"2 tra\xE7os",example:"\u30AB\u30E1\u30E9 (kamera)",meaning:"c\xE2mera"},{kana:"\u30AD",romaji:"ki",group:"k",strokes:"3 tra\xE7os",example:"\u30AD\u30FC\u30DC\u30FC\u30C9 (kiiboodo)",meaning:"teclado"},{kana:"\u30AF",romaji:"ku",group:"k",strokes:"2 tra\xE7os",example:"\u30AF\u30C3\u30AD\u30FC (kukkii)",meaning:"biscoito"},{kana:"\u30B1",romaji:"ke",group:"k",strokes:"3 tra\xE7os",example:"\u30B1\u30FC\u30AD (keeki)",meaning:"bolo"},{kana:"\u30B3",romaji:"ko",group:"k",strokes:"2 tra\xE7os",example:"\u30B3\u30FC\u30D2\u30FC (koohii)",meaning:"caf\xE9"},{kana:"\u30B5",romaji:"sa",group:"s",strokes:"3 tra\xE7os",example:"\u30B5\u30E9\u30C0 (sarada)",meaning:"salada"},{kana:"\u30B7",romaji:"shi",group:"s",strokes:"3 tra\xE7os",example:"\u30B7\u30E3\u30EF\u30FC (shawaa)",meaning:"chuveiro"},{kana:"\u30B9",romaji:"su",group:"s",strokes:"2 tra\xE7os",example:"\u30B9\u30FC\u30D1\u30FC (suupaa)",meaning:"supermercado"},{kana:"\u30BB",romaji:"se",group:"s",strokes:"2 tra\xE7os",example:"\u30BB\u30FC\u30BF\u30FC (seetaa)",meaning:"su\xE9ter"},{kana:"\u30BD",romaji:"so",group:"s",strokes:"2 tra\xE7os",example:"\u30BD\u30D5\u30A1 (sofa)",meaning:"sof\xE1"},{kana:"\u30BF",romaji:"ta",group:"t",strokes:"3 tra\xE7os",example:"\u30BF\u30AF\u30B7\u30FC (takushii)",meaning:"t\xE1xi"},{kana:"\u30C1",romaji:"chi",group:"t",strokes:"2 tra\xE7os",example:"\u30C1\u30FC\u30BA (chiizu)",meaning:"queijo"},{kana:"\u30C4",romaji:"tsu",group:"t",strokes:"3 tra\xE7os",example:"\u30C4\u30A2\u30FC (tsuaa)",meaning:"passeio"},{kana:"\u30C6",romaji:"te",group:"t",strokes:"2 tra\xE7os",example:"\u30C6\u30EC\u30D3 (terebi)",meaning:"televis\xE3o"},{kana:"\u30C8",romaji:"to",group:"t",strokes:"2 tra\xE7os",example:"\u30C8\u30DE\u30C8 (tomato)",meaning:"tomate"},{kana:"\u30CA",romaji:"na",group:"n",strokes:"2 tra\xE7os",example:"\u30CA\u30A4\u30D5 (naifu)",meaning:"faca"},{kana:"\u30CB",romaji:"ni",group:"n",strokes:"2 tra\xE7os",example:"\u30CB\u30F3\u30B8\u30F3 (ninjin)",meaning:"cenoura"},{kana:"\u30CC",romaji:"nu",group:"n",strokes:"2 tra\xE7os",example:"\u30CC\u30FC\u30C9\u30EB (nuudoru)",meaning:"macarr\xE3o"},{kana:"\u30CD",romaji:"ne",group:"n",strokes:"4 tra\xE7os",example:"\u30CD\u30AF\u30BF\u30A4 (nekutai)",meaning:"gravata"},{kana:"\u30CE",romaji:"no",group:"n",strokes:"1 tra\xE7o",example:"\u30CE\u30FC\u30C8 (nooto)",meaning:"caderno"},{kana:"\u30CF",romaji:"ha",group:"h",strokes:"2 tra\xE7os",example:"\u30CF\u30F3\u30D0\u30FC\u30AC\u30FC (hanbaagaa)",meaning:"hamb\xFArguer"},{kana:"\u30D2",romaji:"hi",group:"h",strokes:"2 tra\xE7os",example:"\u30D2\u30FC\u30BF\u30FC (hiitaa)",meaning:"aquecedor"},{kana:"\u30D5",romaji:"fu",group:"h",strokes:"1 tra\xE7o",example:"\u30D5\u30E9\u30A4\u30D1\u30F3 (furaipan)",meaning:"frigideira"},{kana:"\u30D8",romaji:"he",group:"h",strokes:"1 tra\xE7o",example:"\u30D8\u30EA\u30B3\u30D7\u30BF\u30FC (herikoputaa)",meaning:"helic\xF3ptero"},{kana:"\u30DB",romaji:"ho",group:"h",strokes:"4 tra\xE7os",example:"\u30DB\u30C6\u30EB (hoteru)",meaning:"hotel"},{kana:"\u30DE",romaji:"ma",group:"m",strokes:"2 tra\xE7os",example:"\u30DE\u30F3\u30AC (manga)",meaning:"quadrinhos"},{kana:"\u30DF",romaji:"mi",group:"m",strokes:"3 tra\xE7os",example:"\u30DF\u30EB\u30AF (miruku)",meaning:"leite"},{kana:"\u30E0",romaji:"mu",group:"m",strokes:"2 tra\xE7os",example:"\u30E0\u30FC\u30D3\u30FC (muubii)",meaning:"filme"},{kana:"\u30E1",romaji:"me",group:"m",strokes:"2 tra\xE7os",example:"\u30E1\u30CB\u30E5\u30FC (menyuu)",meaning:"card\xE1pio"},{kana:"\u30E2",romaji:"mo",group:"m",strokes:"3 tra\xE7os",example:"\u30E2\u30CB\u30BF\u30FC (monitaa)",meaning:"monitor"},{kana:"\u30E4",romaji:"ya",group:"y",strokes:"3 tra\xE7os",example:"\u30E4\u30AF\u30EB\u30C8 (yakuruto)",meaning:"yakult"},{kana:"\u30E6",romaji:"yu",group:"y",strokes:"2 tra\xE7os",example:"\u30E6\u30FC\u30E2\u30A2 (yuumoa)",meaning:"humor"},{kana:"\u30E8",romaji:"yo",group:"y",strokes:"2 tra\xE7os",example:"\u30E8\u30FC\u30ED\u30C3\u30D1 (yooroppa)",meaning:"Europa"},{kana:"\u30E9",romaji:"ra",group:"r",strokes:"2 tra\xE7os",example:"\u30E9\u30FC\u30E1\u30F3 (raamen)",meaning:"l\xE1men"},{kana:"\u30EA",romaji:"ri",group:"r",strokes:"2 tra\xE7os",example:"\u30EA\u30E2\u30B3\u30F3 (rimokon)",meaning:"controle remoto"},{kana:"\u30EB",romaji:"ru",group:"r",strokes:"2 tra\xE7os",example:"\u30EB\u30FC\u30EB (ruuru)",meaning:"regra"},{kana:"\u30EC",romaji:"re",group:"r",strokes:"1 tra\xE7o",example:"\u30EC\u30B9\u30C8\u30E9\u30F3 (resutoran)",meaning:"restaurante"},{kana:"\u30ED",romaji:"ro",group:"r",strokes:"3 tra\xE7os",example:"\u30ED\u30DC\u30C3\u30C8 (robotto)",meaning:"rob\xF4"},{kana:"\u30EF",romaji:"wa",group:"w",strokes:"2 tra\xE7os",example:"\u30EF\u30A4\u30F3 (wain)",meaning:"vinho"},{kana:"\u30F2",romaji:"wo",group:"w",strokes:"3 tra\xE7os",example:"\u30F2 (part\xEDcula)",meaning:"part\xEDcula objeto"},{kana:"\u30F3",romaji:"n",group:"w",strokes:"2 tra\xE7os",example:"\u30DA\u30F3 (pen)",meaning:"caneta"}];groupsService=R(ii);getAll(){return this.katakanaList}getByGroup(e){let t=this.groupsService.getTextById(e).toLowerCase();return this.katakanaList.filter(r=>t===r.group.toLowerCase())}getLenght(){return this.katakanaList.length}getRandom(){let e=Math.floor(Math.random()*this.katakanaList.length);return this.katakanaList[e]}getByKana(e){return this.katakanaList.find(r=>r.kana===e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var jF=(n,e)=>e.kana;function UF(n,e){if(n&1){let t=it();z(0,"app-flashcard",2),De("checkedChange",function(i){let o=je(t).$implicit,s=Ee();return Ue(s.onCardChecked({kana:o.kana,checked:i}))}),Q()}if(n&2){let t=e.$implicit,r=Ee();xe("kana",gt(t.kana))("romaji",gt(t.romaji))("group",gt(t.group))("strokes",gt(t.strokes))("example",gt(t.example))("meaning",gt(t.meaning))("checked",r.checkedStates[t.kana]||!1)}}var uh=class n{group=0;checkedStates={};checkedChange=new ve;katakanaList=[];katakanaService=R(si);ngOnChanges(e){if(e.group){let t=e.group.currentValue;this.katakanaList=t?this.katakanaService.getByGroup(t):this.katakanaService.getAll()}}onCardChecked(e){this.checkedChange.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-tab-katakana"]],inputs:{group:"group",checkedStates:"checkedStates"},outputs:{checkedChange:"checkedChange"},features:[Jt],decls:6,vars:0,consts:[[1,"flashcard-container"],[3,"checked","kana","romaji","group","strokes","example","meaning"],[3,"checkedChange","checked","kana","romaji","group","strokes","example","meaning"]],template:function(t,r){t&1&&(z(0,"h1"),q(1,"Katakana"),Q(),rt(2,"hr"),z(3,"div",0),Vn(4,UF,1,13,"app-flashcard",1,jF),Q()),t&2&&(U(4),jn(r.katakanaList))},dependencies:[_s],styles:["hr[_ngcontent-%COMP%]{border:2px solid #fdbb2d}h1[_ngcontent-%COMP%]{color:#1a2a6c;justify-self:center;font-size:2rem;font-weight:700}.flashcard-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(12em,1fr));gap:2em;box-sizing:border-box;justify-items:center}.sectionFlashCards[_ngcontent-%COMP%]{margin-bottom:5em}"]})};var lh=class n{isCollapsed=!1;totalChecked=0;progress=0;hiraganaService=R(oi);katakanaService=R(si);totalCharacters=this.hiraganaService.getLenght()+this.katakanaService.getLenght();collapseBar(){this.isCollapsed=!this.isCollapsed}updateProgress(){this.progress=+(this.totalChecked/this.totalCharacters*100).toFixed(2)}ngOnChanges(e){e.totalChecked&&this.updateProgress()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-progress-bar"]],inputs:{totalChecked:"totalChecked"},features:[Jt],decls:13,vars:7,consts:[[1,"progress-section"],[1,"progress-header"],[1,"progress-title"],[1,"fas","fa-chart-line"],[1,"toggle-btn",3,"click"],[1,"fas","fa-chevron-up"],[1,"progress-content"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"fas","fa-check-circle"]],template:function(t,r){t&1&&(me(0,"div",0)(1,"div",1)(2,"h3",2),pt(3,"i",3),q(4," Seu Progresso"),Ie(),me(5,"button",4),We("click",function(){return r.collapseBar()}),pt(6,"i",5),Ie()(),me(7,"div",6)(8,"div",7),pt(9,"div",8),Ie(),me(10,"div",9),pt(11,"i",10),q(12),Ie()()()),t&2&&(Pt("collapsed",r.isCollapsed),U(6),Pt("rotated",r.isCollapsed),U(3),Td("width",r.progress+"%"),U(3),_n("",r.progress,"% Completo"))},styles:[".progress-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:15px;font-size:.9rem;color:#555}.progress-text[_ngcontent-%COMP%]{text-align:center;font-weight:700;color:#1a2a6c;display:flex;align-items:center;justify-content:center;gap:5px}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#4caf50,#8bc34a);border-radius:10px;transition:width .5s ease;position:relative}.progress-bar[_ngcontent-%COMP%]{height:20px;background:#e0e0e0;border-radius:10px;overflow:hidden;margin-bottom:10px}.progress-title[_ngcontent-%COMP%]{color:#1a2a6c;margin-bottom:15px;font-size:1.5rem;display:flex;align-items:center;gap:10px}.progress-section[_ngcontent-%COMP%]{background:#ffffffe6;border-radius:15px;padding:20px;margin-top:30px;margin-bottom:0;box-shadow:0 5px 15px #0000004d;transition:max-height .5s ease,padding .5s ease;max-height:500px;overflow:hidden}.progress-section.collapsed[_ngcontent-%COMP%]{max-height:60px;padding:10px 20px}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;cursor:pointer}.toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#1a2a6c}.toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .5s ease}.toggle-btn[_ngcontent-%COMP%]   i.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}"]})};var jD=()=>{};var $D=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},BF=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},dh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($D(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BF(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new nv;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let D=l<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},nv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$F=function(n){let e=$D(n);return dh.encodeByteArray(e,!0)},Nc=function(n){return $F(n).replace(/\./g,"")},hh=function(n){try{return dh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function iv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var HF=()=>iv().__FIREBASE_DEFAULTS__,zF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qF=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&hh(n[1]);return e&&JSON.parse(e)},fh=()=>{try{return jD()||HF()||zF()||qF()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ov=n=>{var e,t;return(t=(e=fh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},HD=n=>{let e=ov(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},sv=()=>{var n;return(n=fh())===null||n===void 0?void 0:n.config},av=n=>{var e;return(e=fh())===null||e===void 0?void 0:e[`_${n}`]};var Xi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ai(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function ph(n){return _(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function zD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Nc(JSON.stringify(t)),Nc(JSON.stringify(s)),""].join(".")}var kc={};function WF(){let n={prod:[],emulator:[]};for(let e of Object.keys(kc))kc[e]?n.emulator.push(e):n.prod.push(e);return n}function GF(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var UD=!1;function gh(n,e){if(typeof window>"u"||typeof document>"u"||!ai(window.location.host)||kc[n]===e||kc[n]||UD)return;kc[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=WF().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{UD=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=GF(r),y=t("text"),D=document.getElementById(y)||document.createElement("span"),N=t("learnmore"),k=document.getElementById(N)||document.createElement("a"),O=t("preprendIcon"),$=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Z=m.element;c(Z),h(k,N);let Ae=l();u($,O),Z.append($,D,k,Ae),document.body.appendChild(Z)}o?(D.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function KF(){var n;let e=(n=fh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GD(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function KD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QD(){let n=yt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function YD(){return!KF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xc(){try{return typeof indexedDB=="object"}catch{return!1}}function JD(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var QF="FirebaseError",en=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=QF,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wn.prototype.create)}},wn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?YF(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new en(i,c,r)}};function YF(n,e){return n.replace(JF,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var JF=/\{\$([^}]+)}/g;function ZD(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Hn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(BD(o)&&BD(s)){if(!Hn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function BD(n){return n!==null&&typeof n=="object"}function Is(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function XD(n,e){let t=new rv(n,e);return t.subscribe.bind(t)}var rv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ZF(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=tv),i.error===void 0&&(i.error=tv),i.complete===void 0&&(i.complete=tv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ZF(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tv(){}var DX=4*60*60*1e3;function Ot(n){return n&&n._delegate?n._delegate:n}var Lt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var eo="[DEFAULT]";var cv=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Xi;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eV(e))try{this.getOrInitializeService({instanceIdentifier:eo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=eo){return this.instances.has(e)}getOptions(e=eo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XF(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=eo){return this.component?this.component.multipleInstances?e:eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function XF(n){return n===eo?void 0:n}function eV(n){return n.instantiationMode==="EAGER"}var mh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new cv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var tV=[],le=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(le||{}),nV={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},rV=le.INFO,iV={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},oV=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=iV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},zn=class{constructor(e){this.name=e,this._logLevel=rV,this._logHandler=oV,this._userLogHandler=null,tV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var sV=(n,e)=>e.some(t=>n instanceof t),eA,tA;function aV(){return eA||(eA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cV(){return tA||(tA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var nA=new WeakMap,lv=new WeakMap,rA=new WeakMap,uv=new WeakMap,hv=new WeakMap;function uV(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(qn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&nA.set(t,n)}).catch(()=>{}),hv.set(e,n),e}function lV(n){if(lv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});lv.set(n,e)}var dv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return lv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||rA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function iA(n){dv=n(dv)}function dV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(yh(this),e,...t);return rA.set(r,e.sort?e.sort():[e]),qn(r)}:cV().includes(n)?function(...e){return n.apply(yh(this),e),qn(nA.get(this))}:function(...e){return qn(n.apply(yh(this),e))}}function hV(n){return typeof n=="function"?dV(n):(n instanceof IDBTransaction&&lV(n),sV(n,aV())?new Proxy(n,dv):n)}function qn(n){if(n instanceof IDBRequest)return uV(n);if(uv.has(n))return uv.get(n);let e=hV(n);return e!==n&&(uv.set(n,e),hv.set(e,n)),e}var yh=n=>hv.get(n);function sA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=qn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(qn(s.result),u.oldVersion,u.newVersion,qn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var fV=["get","getKey","getAll","getAllKeys","count"],pV=["put","add","delete","clear"],fv=new Map;function oA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(fv.get(e))return fv.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=pV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fV.includes(t)))return;let o=function(s,...c){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[t](...c),i&&u.done]))[0]})};return fv.set(e,o),o}iA(n=>ke(F({},n),{get:(e,t,r)=>oA(e,t)||n.get(e,t,r),has:(e,t)=>!!oA(e,t)||n.has(e,t)}));var gv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(gV(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function gV(n){let e=n.getComponent();return e?.type==="VERSION"}var mv="@firebase/app",aA="0.13.2";var _r=new zn("@firebase/app"),mV="@firebase/app-compat",yV="@firebase/analytics-compat",vV="@firebase/analytics",_V="@firebase/app-check-compat",IV="@firebase/app-check",EV="@firebase/auth",wV="@firebase/auth-compat",TV="@firebase/database",bV="@firebase/data-connect",SV="@firebase/database-compat",CV="@firebase/functions",DV="@firebase/functions-compat",AV="@firebase/installations",RV="@firebase/installations-compat",kV="@firebase/messaging",NV="@firebase/messaging-compat",xV="@firebase/performance",PV="@firebase/performance-compat",MV="@firebase/remote-config",OV="@firebase/remote-config-compat",LV="@firebase/storage",FV="@firebase/storage-compat",VV="@firebase/firestore",jV="@firebase/ai",UV="@firebase/firestore-compat",BV="firebase",$V="11.10.0";var yv="[DEFAULT]",HV={[mv]:"fire-core",[mV]:"fire-core-compat",[vV]:"fire-analytics",[yV]:"fire-analytics-compat",[IV]:"fire-app-check",[_V]:"fire-app-check-compat",[EV]:"fire-auth",[wV]:"fire-auth-compat",[TV]:"fire-rtdb",[bV]:"fire-data-connect",[SV]:"fire-rtdb-compat",[CV]:"fire-fn",[DV]:"fire-fn-compat",[AV]:"fire-iid",[RV]:"fire-iid-compat",[kV]:"fire-fcm",[NV]:"fire-fcm-compat",[xV]:"fire-perf",[PV]:"fire-perf-compat",[MV]:"fire-rc",[OV]:"fire-rc-compat",[LV]:"fire-gcs",[FV]:"fire-gcs-compat",[VV]:"fire-fst",[UV]:"fire-fst-compat",[jV]:"fire-vertex","fire-js":"fire-js",[BV]:"fire-js-all"};var Pc=new Map,zV=new Map,vv=new Map;function cA(n,e){try{n.container.addComponent(e)}catch(t){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tn(n){let e=n.name;if(vv.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;vv.set(e,n);for(let t of Pc.values())cA(t,n);for(let t of zV.values())cA(t,n);return!0}function Es(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tn(n){return n==null?!1:n.settings!==void 0}var qV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ci=new wn("app","Firebase",qV);var _v=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}};var ui=$V;function wv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:yv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ci.create("bad-app-name",{appName:String(i)});if(t||(t=sv()),!t)throw ci.create("no-options");let o=Pc.get(i);if(o){if(Hn(t,o.options)&&Hn(r,o.config))return o;throw ci.create("duplicate-app",{appName:i})}let s=new mh(i);for(let u of vv.values())s.addComponent(u);let c=new _v(t,r,s);return Pc.set(i,c),c}function to(n=yv){let e=Pc.get(n);if(!e&&n===yv&&sv())return wv();if(!e)throw ci.create("no-app",{appName:n});return e}function vh(){return Array.from(Pc.values())}function Be(n,e,t){var r;let i=(r=HV[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(c.join(" "));return}Tn(new Lt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var WV="firebase-heartbeat-database",GV=1,Mc="firebase-heartbeat-store",pv=null;function hA(){return pv||(pv=sA(WV,GV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Mc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ci.create("idb-open",{originalErrorMessage:n.message})})),pv}function KV(n){return _(this,null,function*(){try{let t=(yield hA()).transaction(Mc),r=yield t.objectStore(Mc).get(fA(n));return yield t.done,r}catch(e){if(e instanceof en)_r.warn(e.message);else{let t=ci.create("idb-get",{originalErrorMessage:e?.message});_r.warn(t.message)}}})}function uA(n,e){return _(this,null,function*(){try{let r=(yield hA()).transaction(Mc,"readwrite");yield r.objectStore(Mc).put(e,fA(n)),yield r.done}catch(t){if(t instanceof en)_r.warn(t.message);else{let r=ci.create("idb-set",{originalErrorMessage:t?.message});_r.warn(r.message)}}})}function fA(n){return`${n.name}!${n.options.appId}`}var QV=1024,YV=30,Iv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ev(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=lA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>YV){let s=ZV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_r.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=lA(),{heartbeatsToSend:r,unsentEntries:i}=JV(this._heartbeatsCache.heartbeats),o=Nc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return _r.warn(t),""}})}};function lA(){return new Date().toISOString().substring(0,10)}function JV(n,e=QV){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),dA(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),dA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Ev=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return xc()?JD().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield KV(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return uA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return uA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function dA(n){return Nc(JSON.stringify({version:2,heartbeats:n})).length}function ZV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function XV(n){Tn(new Lt("platform-logger",e=>new gv(e),"PRIVATE")),Tn(new Lt("heartbeat",e=>new Iv(e),"PRIVATE")),Be(mv,aA,n),Be(mv,aA,"esm2017"),Be("fire-js","")}XV("");var ej="firebase",tj="11.10.0";Be(ej,tj,"app");function pA(n){n===void 0&&(n=R(lt));let e=n.get(Ko);return t=>new ae(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let c=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return c.add(()=>{r.unsubscribe(),s()}),c})}var li=new rc("ANGULARFIRE2_VERSION");function Oc(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ts=(n,e)=>{let t=e?[e]:vh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ws=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(ws||{}),gA=vy()&&typeof Zone<"u"?ws.WARN:ws.SILENT;var _h=class{zone;delegate;constructor(e,t=Up){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},di=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=R(Ce);this.outsideAngular=t.runOutsideAngular(()=>new _h(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new _h(typeof Zone>"u"?void 0:Zone.current,jp))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mA=!1;function nj(n,e){!mA&&(gA>ws.SILENT||vy())&&(mA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),gA>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function rj(n){let e=R(Ce,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function no(n){let e=R(Ce,{optional:!0});return e?e.run(()=>n()):n()}var ij=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),nt(t,()=>no(()=>n.apply(void 0,r)))),nn=(n,e,t)=>(t||=e?ws.WARN:ws.VERBOSE,function(){let r,i=arguments,o,s,c;try{o=R(di),s=R(Ko),c=R(et)}catch{return nj(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=no(()=>s.add())),i[l]=ij(i[l],r,c));let u=rj(()=>n.apply(this,i));return e?u instanceof ae?u.pipe(Ur(o.outsideAngular),jr(o.insideAngular),pA(c)):u instanceof Promise?no(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>nt(c,()=>no(()=>h(m))),m=>nt(c,()=>no(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:no(()=>u):u instanceof ae?u.pipe(Ur(o.outsideAngular),jr(o.insideAngular)):no(()=>u)});var Ir=class{constructor(e){return e}},ro=class{constructor(){return vh()}};function oj(n){return n&&n.length===1?n[0]:new Ir(to())}var Tv=new B("angularfire2._apps"),sj={provide:Ir,useFactory:oj,deps:[[new Yt,Tv]]},aj={provide:ro,deps:[[new Yt,Tv]]};function cj(n){return(e,t)=>{let r=t.get(Xr);Be("angularfire",li.full,"core"),Be("angularfire",li.full,"app"),Be("angular",RC.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Ir(i)}}function yA(n,...e){return Wt([sj,aj,{provide:Tv,useFactory:cj(n),multi:!0,deps:[Ce,lt,di,...e]}])}var vA=nn(wv,!0);var uj=new Map,lj={activated:!1,tokenObservers:[]},dj={initialized:!1,enabled:!1};function bn(n){return uj.get(n)||Object.assign({},lj)}function wA(){return dj}var hj="https://content-firebaseappcheck.googleapis.com/v1";var fj="exchangeDebugToken",_A={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},kee=24*60*60*1e3;var Cv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Xi,this.pending.promise.catch(t=>{}),yield pj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Xi,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function pj(n){return new Promise(e=>{setTimeout(e,n)})}var gj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},hi=new wn("appCheck","AppCheck",gj);function TA(n){if(!bn(n).activated)throw hi.create("use-before-activation",{appName:n.name})}function bA(r,i){return _(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,c)}catch(y){throw hi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw hi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw hi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw hi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function SA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${hj}/projects/${t}/apps/${r}:${fj}?key=${i}`,body:{debug_token:e}}}var mj="firebase-app-check-database",yj=1,Dv="firebase-app-check-store";var Ih=null;function vj(){return Ih||(Ih=new Promise((n,e)=>{try{let t=indexedDB.open(mj,yj);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(hi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Dv,{keyPath:"compositeKey"})}}}catch(t){e(hi.create("storage-open",{originalErrorMessage:t?.message}))}}),Ih)}function _j(n,e){return Ij(Ej(n),e)}function Ij(n,e){return _(this,null,function*(){let r=(yield vj()).transaction(Dv,"readwrite"),o=r.objectStore(Dv).put({compositeKey:n,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;c(hi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function Ej(n){return`${n.options.appId}-${n.name}`}var Lc=new zn("@firebase/app-check");function bv(n,e){return xc()?_j(n,e).catch(t=>{Lc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function CA(){return wA().enabled}function DA(){return _(this,null,function*(){let n=wA();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var wj={error:"UNKNOWN_ERROR"};function Tj(n){return dh.encodeString(JSON.stringify(n),!1)}function Av(n,e=!1,t=!1){return _(this,null,function*(){let r=n.app;TA(r);let i=bn(r),o=i.token,s;if(o&&!Fc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Fc(l)?o=l:yield bv(r,void 0))}if(!e&&o&&Fc(o))return{token:o.token};let c=!1;if(CA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=bA(SA(r,yield DA()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=yield i.exchangeTokenPromise;return yield bv(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Lc.warn(l.message):t&&Lc.error(l),Sv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=yield bn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Lc.warn(l.message):t&&Lc.error(l),s=l}let u;return o?s?Fc(o)?u={token:o.token,internalError:s}:u=Sv(s):(u={token:o.token},i.token=o,yield bv(r,o)):u=Sv(s),c&&Dj(r,u),u})}function bj(n){return _(this,null,function*(){let e=n.app;TA(e);let{provider:t}=bn(e);if(CA()){let r=yield DA(),{token:i}=yield bA(SA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function Sj(n,e,t,r){let{app:i}=n,o=bn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Fc(o.token)){let c=o.token;Promise.resolve().then(()=>{t({token:c.token}),IA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>IA(n))}function AA(n,e){let t=bn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function IA(n){let{app:e}=n,t=bn(e),r=t.tokenRefresher;r||(r=Cj(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Cj(n){let{app:e}=n;return new Cv(()=>_(null,null,function*(){let t=bn(e),r;if(t.token?r=yield Av(n,!0):r=yield Av(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=bn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},_A.RETRIAL_MIN_WAIT,_A.RETRIAL_MAX_WAIT)}function Dj(n,e){let t=bn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Fc(n){return n.expireTimeMillis-Date.now()>0}function Sv(n){return{token:Tj(wj),error:n}}var Rv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=bn(this.app);for(let t of e)AA(this.app,t.next);return Promise.resolve()}};function Aj(n,e){return new Rv(n,e)}function Rj(n){return{getToken:e=>Av(n,e),getLimitedUseToken:()=>bj(n),addTokenListener:e=>Sj(n,"INTERNAL",e),removeTokenListener:e=>AA(n.app,e)}}var kj="@firebase/app-check",Nj="0.10.1";var xj="app-check",EA="app-check-internal";function Pj(){Tn(new Lt(xj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Aj(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(EA).initialize()})),Tn(new Lt(EA,n=>{let e=n.getProvider("app-check").getImmediate();return Rj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Be(kj,Nj)}Pj();var Mj="app-check";var bs=class{constructor(){return Ts(Mj)}};var Oj=["localhost","0.0.0.0","127.0.0.1"],Hee=typeof window<"u"&&Oj.includes(window.location.hostname);function HA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var zA=HA,qA=new wn("auth","Firebase",HA());var Ch=new zn("@firebase/auth");function Lj(n,...e){Ch.logLevel<=le.WARN&&Ch.warn(`Auth (${ui}): ${n}`,...e)}function wh(n,...e){Ch.logLevel<=le.ERROR&&Ch.error(`Auth (${ui}): ${n}`,...e)}function Gn(n,...e){throw Gv(n,...e)}function Sn(n,...e){return Gv(n,...e)}function Wv(n,e,t){let r=Object.assign(Object.assign({},zA()),{[e]:t});return new wn("auth","Firebase",r).create(e,{appName:n.name})}function io(n){return Wv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fj(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Gn(n,"argument-error"),Wv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return qA.create(n,...e)}function J(n,e,...t){if(!n)throw Gv(e,...t)}function Er(n){let e="INTERNAL ASSERTION FAILED: "+n;throw wh(e),new Error(e)}function Tr(n,e){n||Er(e)}function xv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Vj(){return RA()==="http:"||RA()==="https:"}function RA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function jj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vj()||GD()||"connection"in navigator)?navigator.onLine:!0}function Uj(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var oo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Tr(t>e,"Short delay should be less than long delay!"),this.isMobile=qD()||KD()}get(){return jj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Kv(n,e){Tr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Dh=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Bj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var $j=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Hj=new oo(3e4,6e4);function Qv(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Cs(o,s,c,u){return _(this,arguments,function*(n,e,t,r,i={}){return WA(n,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Is(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return WD()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&ai(n.emulatorConfig.host)&&(y.credentials="include"),Dh.fetch()(yield GA(n,n.config.apiHost,t,p),y)}))})}function WA(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Bj),e);try{let i=new Pv(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Eh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eh(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Eh(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Eh(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Wv(n,h,l);Gn(n,h)}}catch(i){if(i instanceof en)throw i;Gn(n,"network-request-failed",{message:String(i)})}})}function zj(o,s,c,u){return _(this,arguments,function*(n,e,t,r,i={}){let l=yield Cs(n,e,t,r,i);return"mfaPendingCredential"in l&&Gn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function GA(n,e,t,r){return _(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?Kv(n.config,i):`${n.config.apiScheme}://${i}`;return $j.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var Pv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Sn(this.auth,"network-request-failed")),Hj.get())})}};function Eh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Sn(n,e,r);return i.customData._tokenResponse=t,i}function qj(n,e){return _(this,null,function*(){return Cs(n,"POST","/v1/accounts:delete",e)})}function Ah(n,e){return _(this,null,function*(){return Cs(n,"POST","/v1/accounts:lookup",e)})}function Vc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Yv(n,e=!1){return _(this,null,function*(){let t=Ot(n),r=yield t.getIdToken(e),i=Jv(r);J(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Vc(kv(i.auth_time)),issuedAtTime:Vc(kv(i.iat)),expirationTime:Vc(kv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function kv(n){return Number(n)*1e3}function Jv(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return wh("JWT malformed, contained fewer than 3 sections"),null;try{let i=hh(t);return i?JSON.parse(i):(wh("Failed to decode base64 JWT payload"),null)}catch(i){return wh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function kA(n){let e=Jv(n);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Uc(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof en&&Wj(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Wj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Mv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Bc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vc(this.lastLoginAt),this.creationTime=Vc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Rh(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Uc(n,Ah(t,{idToken:r}));J(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?KA(o.providerUserInfo):[],c=Gj(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!c?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Bc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function Zv(n){return _(this,null,function*(){let e=Ot(n);yield Rh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Gj(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function KA(n){return n.map(e=>{var{providerId:t}=e,r=Yu(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Kj(n,e){return _(this,null,function*(){let t=yield WA(n,{},()=>_(null,null,function*(){let r=Is({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield GA(n,i,"/v1/token",`key=${o}`),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return n.emulatorConfig&&ai(n.emulatorConfig.host)&&(u.credentials="include"),Dh.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Qj(n,e){return _(this,null,function*(){return Cs(n,"POST","/v2/accounts:revokeToken",Qv(n,e))})}var jc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){J(e.length!==0,"internal-error");let t=kA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Kj(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(J(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(J(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Er("not implemented")}};function fi(n,e){J(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var pi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Yu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Bc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield Uc(this,this.stsTokenManager.getToken(this.auth,e));return J(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Yv(this,e)}reload(){return Zv(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Rh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(tn(this.auth.app))return Promise.reject(io(this.auth));let e=yield this.getIdToken();return yield Uc(this,qj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,c,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,D=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,k=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=t.createdAt)!==null&&l!==void 0?l:void 0,$=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Z,emailVerified:Ae,isAnonymous:Rt,providerData:Se,stsTokenManager:T}=t;J(Z&&T,e,"internal-error");let v=jc.fromJSON(this.name,T);J(typeof Z=="string",e,"internal-error"),fi(p,e.name),fi(m,e.name),J(typeof Ae=="boolean",e,"internal-error"),J(typeof Rt=="boolean",e,"internal-error"),fi(y,e.name),fi(D,e.name),fi(N,e.name),fi(k,e.name),fi(O,e.name),fi($,e.name);let E=new n({uid:Z,auth:e,email:m,emailVerified:Ae,displayName:p,isAnonymous:Rt,photoURL:D,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:O,lastLoginAt:$});return Se&&Array.isArray(Se)&&(E.providerData=Se.map(w=>Object.assign({},w))),k&&(E._redirectEventId=k),E}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new jc;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Rh(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];J(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?KA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new jc;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Bc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var NA=new Map;function wr(n){Tr(n instanceof Function,"Expected a class definition");let e=NA.get(n);return e?(Tr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,NA.set(n,e),e)}var Yj=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Ov=Yj;function Th(n,e,t){return`firebase:${n}:${e}:${t}`}var kh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Th(this.userKey,i.apiKey,o),this.fullPersistenceKey=Th("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Ah(this.auth,{idToken:e}).catch(()=>{});return t?pi._fromGetAccountInfoResponse(this.auth,t,e):null}return pi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(wr(Ov),e,r);let i=(yield Promise.all(t.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||wr(Ov),s=Th(r,e.config.apiKey,e.name),c=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield Ah(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield pi._fromGetAccountInfoResponse(e,m,h)}else p=pi._fromJSON(e,h);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(t.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function xA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(e0(e))return"Blackberry";if(t0(e))return"Webos";if(YA(e))return"Safari";if((e.includes("chrome/")||JA(e))&&!e.includes("edge/"))return"Chrome";if(XA(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function QA(n=yt()){return/firefox\//i.test(n)}function YA(n=yt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JA(n=yt()){return/crios\//i.test(n)}function ZA(n=yt()){return/iemobile/i.test(n)}function XA(n=yt()){return/android/i.test(n)}function e0(n=yt()){return/blackberry/i.test(n)}function t0(n=yt()){return/webos/i.test(n)}function Xv(n=yt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Jj(n=yt()){var e;return Xv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Zj(){return QD()&&document.documentMode===10}function n0(n=yt()){return Xv(n)||XA(n)||t0(n)||e0(n)||/windows phone/i.test(n)||ZA(n)}function r0(n,e=[]){let t;switch(n){case"Browser":t=xA(yt());break;case"Worker":t=`${xA(yt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ui}/${r}`}var Lv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Xj(t){return _(this,arguments,function*(n,e={}){return Cs(n,"GET","/v2/passwordPolicy",Qv(n,e))})}var e2=6,Fv=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:e2,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Vv=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nh(this),this.idTokenSubscription=new Nh(this),this.beforeStateQueue=new Lv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wr(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield kh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield Ah(this,{idToken:e}),r=yield pi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(tn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Rh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Uj()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(tn(this.app))return Promise.reject(io(this));let t=e?Ot(e):null;return t&&J(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return tn(this.app)?Promise.reject(io(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return tn(this.app)?Promise.reject(io(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(wr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield Xj(this),t=new Fv(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Qj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&wr(e)||this._popupRedirectResolver;J(t,this,"argument-error"),this.redirectPersistenceManager=yield kh.create(this,[wr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=r0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Lj(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function jh(n){return Ot(n)}var Nh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=XD(t=>this.observer=t)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var e_={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t2(n){e_=n}function n2(n){return e_.loadJS(n)}function r2(){return e_.gapiScript}function i0(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function t_(n,e){let t=Es(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Hn(o,e??{}))return i;Gn(i,"already-initialized")}return t.initialize({options:e})}function i2(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(wr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function n_(n,e,t){let r=jh(n);J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=o0(e),{host:s,port:c}=o2(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){J(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),J(Hn(l,r.config.emulator)&&Hn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ai(s)?(ph(`${o}//${s}${u}`),gh("Auth",!0)):i||s2()}function o0(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function o2(n){let e=o0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:PA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:PA(s)}}}function PA(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function s2(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var $c=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Er("not implemented")}_getIdTokenResponse(e){return Er("not implemented")}_linkToIdToken(e,t){return Er("not implemented")}_getReauthenticationResolver(e){return Er("not implemented")}};function Ss(n,e){return _(this,null,function*(){return zj(n,"POST","/v1/accounts:signInWithIdp",Qv(n,e))})}var a2="http://localhost",xh=class n extends $c{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Yu(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Ss(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Ss(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Ss(e,t)}buildRequest(){let e={requestUri:a2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Is(t)}return e}};var Hc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ph=class extends Hc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var r_=(()=>{class n extends Ph{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return xh._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var zc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield pi._fromIdTokenResponse(e,r,i),s=MA(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=MA(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function MA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var jv=class n extends en{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function s0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?jv._fromErrorAndOperation(n,o,e,r):o})}function c2(n,e,t=!1){return _(this,null,function*(){let r=yield Uc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return zc._forOperation(n,"link",r)})}function u2(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(tn(r.app))return Promise.reject(io(r));let i="reauthenticate";try{let o=yield Uc(n,s0(r,i,e,n),t);J(o.idToken,r,"internal-error");let s=Jv(o.idToken);J(s,r,"internal-error");let{sub:c}=s;return J(n.uid===c,r,"user-mismatch"),zc._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Gn(r,"user-mismatch"),o}})}function l2(n,e,t=!1){return _(this,null,function*(){if(tn(n.app))return Promise.reject(io(n));let r="signIn",i=yield s0(n,r,e),o=yield zc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function i_(n,e,t,r){return Ot(n).onIdTokenChanged(e,t,r)}function o_(n,e,t){return Ot(n).beforeAuthStateChanged(e,t)}function s_(n,e,t,r){return Ot(n).onAuthStateChanged(e,t,r)}function a_(n){return Ot(n).signOut()}var Mh="__sak";var Oh=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mh,"1"),this.storage.removeItem(Mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var d2=1e3,h2=10,f2=(()=>{class n extends Oh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=n0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);Zj()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,h2):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},d2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield Fr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield Fr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield Fr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),a0=f2;var p2=(()=>{class n extends Oh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),c_=p2;function g2(n){return Promise.all(n.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var m2=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield g2(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function u_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Uv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=u_("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Wn(){return window}function y2(n){Wn().location.href=n}function c0(){return typeof Wn().WorkerGlobalScope<"u"&&typeof Wn().importScripts=="function"}function v2(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function _2(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function I2(){return c0()?self:null}var u0="firebaseLocalStorageDb",E2=1,Lh="firebaseLocalStorage",l0="fbase_key",so=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Uh(n,e){return n.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function w2(){let n=indexedDB.deleteDatabase(u0);return new so(n).toPromise()}function Bv(){let n=indexedDB.open(u0,E2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Lh,{keyPath:l0})}catch(i){t(i)}}),n.addEventListener("success",()=>_(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Lh)?e(r):(r.close(),yield w2(),e(yield Bv()))}))})}function OA(n,e,t){return _(this,null,function*(){let r=Uh(n,!0).put({[l0]:e,value:t});return new so(r).toPromise()})}function T2(n,e){return _(this,null,function*(){let t=Uh(n,!1).get(e),r=yield new so(t).toPromise();return r===void 0?null:r.value})}function LA(n,e){let t=Uh(n,!0).delete(e);return new so(t).toPromise()}var b2=800,S2=3,C2=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Bv(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>S2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return c0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=m2._getInstance(I2()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield v2(),!this.activeServiceWorker)return;this.sender=new Uv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||_2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Bv();return yield OA(t,Mh,"1"),yield LA(t,Mh),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>OA(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>T2(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>LA(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let s=Uh(o,!1).getAll();return new so(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),b2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),d0=C2;var Xee=i0("rcb"),ete=new oo(3e4,6e4);function h0(n,e){return e?wr(e):(J(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var qc=class extends $c{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ss(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ss(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ss(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function D2(n){return l2(n.auth,new qc(n),n.bypassAuthState)}function A2(n){let{auth:e,user:t}=n;return J(t,e,"internal-error"),u2(t,new qc(n),n.bypassAuthState)}function R2(n){return _(this,null,function*(){let{auth:e,user:t}=n;return J(t,e,"internal-error"),c2(t,new qc(n),n.bypassAuthState)})}var Fh=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D2;case"linkViaPopup":case"linkViaRedirect":return R2;case"reauthViaPopup":case"reauthViaRedirect":return A2;default:Gn(this.auth,"internal-error")}}resolve(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var k2=new oo(2e3,1e4);function l_(n,e,t){return _(this,null,function*(){if(tn(n.app))return Promise.reject(Sn(n,"operation-not-supported-in-this-environment"));let r=jh(n);Fj(n,e,Hc);let i=h0(r,t);return new N2(r,"signInViaPopup",e,i).executeNotNull()})}var N2=(()=>{class n extends Fh{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return _(this,null,function*(){let t=yield this.execute();return J(t,this.auth,"internal-error"),t})}onExecution(){return _(this,null,function*(){Tr(this.filter.length===1,"Popup operations only handle one event");let t=u_();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,k2.get())};t()}}n.currentPopupAction=null;return n})(),x2="pendingRedirect",bh=new Map,$v=class n extends Fh{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=bh.get(this.auth._key());if(!e){try{let r=(yield P2(this.resolver,this.auth))?yield Fr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}bh.set(this.auth._key(),e)}return this.bypassAuthState||bh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Fr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Fr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function P2(n,e){return _(this,null,function*(){let t=L2(e),r=O2(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function M2(n,e){bh.set(n._key(),e)}function O2(n){return wr(n._redirectPersistence)}function L2(n){return Th(x2,n.config.apiKey,n.name)}function F2(n,e,t=!1){return _(this,null,function*(){if(tn(n.app))return Promise.reject(io(n));let r=jh(n),i=h0(r,e),s=yield new $v(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var V2=10*60*1e3,Hv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!j2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!f0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Sn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=V2&&this.cachedEventUids.clear(),this.cachedEventUids.has(FA(e))}saveEventToCache(e){this.cachedEventUids.add(FA(e)),this.lastProcessedEventTime=Date.now()}};function FA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function f0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function j2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return f0(n);default:return!1}}function U2(t){return _(this,arguments,function*(n,e={}){return Cs(n,"GET","/v1/projects",e)})}var B2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$2=/^https?/;function H2(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield U2(n);for(let t of e)try{if(z2(t))return}catch{}Gn(n,"unauthorized-domain")})}function z2(n){let e=xv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!$2.test(t))return!1;if(B2.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var q2=new oo(3e4,6e4);function VA(){let n=Wn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function W2(n){return new Promise((e,t)=>{var r,i,o;function s(){VA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VA(),t(Sn(n,"network-request-failed"))},timeout:q2.get()})}if(!((i=(r=Wn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Wn().gapi)===null||o===void 0)&&o.load)s();else{let c=i0("iframefcb");return Wn()[c]=()=>{gapi.load?s():t(Sn(n,"network-request-failed"))},n2(`${r2()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw Sh=null,e})}var Sh=null;function G2(n){return Sh=Sh||W2(n),Sh}var K2=new oo(5e3,15e3),Q2="__/auth/iframe",Y2="emulator/auth/iframe",J2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function X2(n){let e=n.config;J(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Kv(e,Y2):`https://${n.config.authDomain}/${Q2}`,r={apiKey:e.apiKey,appName:n.name,v:ui},i=Z2.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Is(r).slice(1)}`}function eU(n){return _(this,null,function*(){let e=yield G2(n),t=Wn().gapi;return J(t,n,"internal-error"),e.open({where:document.body,url:X2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:J2,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Sn(n,"network-request-failed"),c=Wn().setTimeout(()=>{o(s)},K2.get());function u(){Wn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var tU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nU=500,rU=600,iU="_blank",oU="http://localhost",Vh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function sU(n,e,t,r=nU,i=rU){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},tU),{width:r.toString(),height:i.toString(),top:o,left:s}),l=yt().toLowerCase();t&&(c=JA(l)?iU:t),QA(l)&&(e=e||oU,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,D])=>`${m}${y}=${D},`,"");if(Jj(l)&&c!=="_self")return aU(e||"",c),new Vh(null);let p=window.open(e||"",c,h);J(p,n,"popup-blocked");try{p.focus()}catch{}return new Vh(p)}function aU(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var cU="__/auth/handler",uU="emulator/auth/handler",lU=encodeURIComponent("fac");function jA(n,e,t,r,i,o){return _(this,null,function*(){J(n.config.authDomain,n,"auth-domain-config-required"),J(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ui,eventId:i};if(e instanceof Hc){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",ZD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Ph){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let c=s;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=yield n._getAppCheckToken(),l=u?`#${lU}=${encodeURIComponent(u)}`:"";return`${dU(n)}?${Is(c).slice(1)}${l}`})}function dU({config:n}){return n.emulator?Kv(n,uU):`https://${n.authDomain}/${cU}`}var Nv="webStorageSupport",zv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=c_,this._completeRedirectFn=F2,this._overrideRedirectResult=M2}_openPopup(e,t,r,i){return _(this,null,function*(){var o;Tr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield jA(e,t,r,xv(),i);return sU(e,s,u_())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield jA(e,t,r,xv(),i);return y2(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Tr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield eU(e),r=new Hv(e);return t.register("authEvent",i=>(J(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nv,{type:Nv},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Nv];s!==void 0&&t(!!s),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=H2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return n0()||YA()||Xv()}},p0=zv;var UA="@firebase/auth",BA="1.10.8";var qv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function hU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fU(n){Tn(new Lt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;J(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:r0(n)},l=new Vv(r,i,o,u);return i2(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Tn(new Lt("auth-internal",e=>{let t=jh(e.getProvider("auth").getImmediate());return(r=>new qv(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Be(UA,BA,hU(n)),Be(UA,BA,"esm2017")}var pU=5*60,gU=av("authIdTokenMaxAge")||pU,$A=null,mU=n=>e=>_(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>gU)return;let i=t?.token;$A!==i&&($A=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function d_(n=to()){let e=Es(n,"auth");if(e.isInitialized())return e.getImmediate();let t=t_(n,{popupRedirectResolver:p0,persistence:[d0,a0,c_]}),r=av("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=mU(o.toString());o_(t,s,()=>s(t.currentUser)),i_(t,c=>s(c))}}let i=ov("auth");return i&&n_(t,`http://${i}`),t}function yU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}t2({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Sn("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",yU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fU("Browser");var g0="auth",ao=class{constructor(e){return e}},Wc=class{constructor(){return Ts(g0)}};var h_=new B("angularfire2.auth-instances");function aB(n,e){let t=Oc(g0,n,e);return t&&new ao(t)}function cB(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ao(r)}}var uB={provide:Wc,deps:[[new Yt,h_]]},lB={provide:ao,useFactory:aB,deps:[[new Yt,h_],Ir]};function m0(n,...e){return Be("angularfire",li.full,"auth"),Wt([lB,uB,{provide:h_,useFactory:cB(n),multi:!0,deps:[Ce,lt,di,ro,[new Yt,bs],...e]}])}var y0=nn(d_,!0);var v0=nn(s_,!0);var _0=nn(l_,!0,2);var I0=nn(a_,!0,2);var ln=class n{constructor(e){this.auth=e;v0(this.auth,t=>{this.currentUserSubject.next(t)})}currentUserSubject=new Ze(null);currentUser$=this.currentUserSubject.asObservable();loginWithGoogle(){return _(this,null,function*(){let e=new r_;return e.setCustomParameters({prompt:"select_account"}),yield _0(this.auth,e)})}logout(){return I0(this.auth)}currentUser(){return this.auth.currentUser||console.warn("AuthService: Nenhum usu\xE1rio autenticado no momento."),this.auth.currentUser}get authInstance(){return this.auth}static \u0275fac=function(t){return new(t||n)(Y(ao))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var E0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},w0={};var br,p_;(function(){var n;function e(T,v){function E(){}E.prototype=v.prototype,T.D=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(w,b,C){for(var I=Array(arguments.length-2),tr=2;tr<arguments.length;tr++)I[tr-2]=arguments[tr];return v.prototype[b].apply(w,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,E){E||(E=0);var w=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)w[b]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(b=0;16>b;++b)w[b]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],b=T.g[2];var C=T.g[3],I=v+(C^E&(b^C))+w[0]+3614090360&4294967295;v=E+(I<<7&4294967295|I>>>25),I=C+(b^v&(E^b))+w[1]+3905402710&4294967295,C=v+(I<<12&4294967295|I>>>20),I=b+(E^C&(v^E))+w[2]+606105819&4294967295,b=C+(I<<17&4294967295|I>>>15),I=E+(v^b&(C^v))+w[3]+3250441966&4294967295,E=b+(I<<22&4294967295|I>>>10),I=v+(C^E&(b^C))+w[4]+4118548399&4294967295,v=E+(I<<7&4294967295|I>>>25),I=C+(b^v&(E^b))+w[5]+1200080426&4294967295,C=v+(I<<12&4294967295|I>>>20),I=b+(E^C&(v^E))+w[6]+2821735955&4294967295,b=C+(I<<17&4294967295|I>>>15),I=E+(v^b&(C^v))+w[7]+4249261313&4294967295,E=b+(I<<22&4294967295|I>>>10),I=v+(C^E&(b^C))+w[8]+1770035416&4294967295,v=E+(I<<7&4294967295|I>>>25),I=C+(b^v&(E^b))+w[9]+2336552879&4294967295,C=v+(I<<12&4294967295|I>>>20),I=b+(E^C&(v^E))+w[10]+4294925233&4294967295,b=C+(I<<17&4294967295|I>>>15),I=E+(v^b&(C^v))+w[11]+2304563134&4294967295,E=b+(I<<22&4294967295|I>>>10),I=v+(C^E&(b^C))+w[12]+1804603682&4294967295,v=E+(I<<7&4294967295|I>>>25),I=C+(b^v&(E^b))+w[13]+4254626195&4294967295,C=v+(I<<12&4294967295|I>>>20),I=b+(E^C&(v^E))+w[14]+2792965006&4294967295,b=C+(I<<17&4294967295|I>>>15),I=E+(v^b&(C^v))+w[15]+1236535329&4294967295,E=b+(I<<22&4294967295|I>>>10),I=v+(b^C&(E^b))+w[1]+4129170786&4294967295,v=E+(I<<5&4294967295|I>>>27),I=C+(E^b&(v^E))+w[6]+3225465664&4294967295,C=v+(I<<9&4294967295|I>>>23),I=b+(v^E&(C^v))+w[11]+643717713&4294967295,b=C+(I<<14&4294967295|I>>>18),I=E+(C^v&(b^C))+w[0]+3921069994&4294967295,E=b+(I<<20&4294967295|I>>>12),I=v+(b^C&(E^b))+w[5]+3593408605&4294967295,v=E+(I<<5&4294967295|I>>>27),I=C+(E^b&(v^E))+w[10]+38016083&4294967295,C=v+(I<<9&4294967295|I>>>23),I=b+(v^E&(C^v))+w[15]+3634488961&4294967295,b=C+(I<<14&4294967295|I>>>18),I=E+(C^v&(b^C))+w[4]+3889429448&4294967295,E=b+(I<<20&4294967295|I>>>12),I=v+(b^C&(E^b))+w[9]+568446438&4294967295,v=E+(I<<5&4294967295|I>>>27),I=C+(E^b&(v^E))+w[14]+3275163606&4294967295,C=v+(I<<9&4294967295|I>>>23),I=b+(v^E&(C^v))+w[3]+4107603335&4294967295,b=C+(I<<14&4294967295|I>>>18),I=E+(C^v&(b^C))+w[8]+1163531501&4294967295,E=b+(I<<20&4294967295|I>>>12),I=v+(b^C&(E^b))+w[13]+2850285829&4294967295,v=E+(I<<5&4294967295|I>>>27),I=C+(E^b&(v^E))+w[2]+4243563512&4294967295,C=v+(I<<9&4294967295|I>>>23),I=b+(v^E&(C^v))+w[7]+1735328473&4294967295,b=C+(I<<14&4294967295|I>>>18),I=E+(C^v&(b^C))+w[12]+2368359562&4294967295,E=b+(I<<20&4294967295|I>>>12),I=v+(E^b^C)+w[5]+4294588738&4294967295,v=E+(I<<4&4294967295|I>>>28),I=C+(v^E^b)+w[8]+2272392833&4294967295,C=v+(I<<11&4294967295|I>>>21),I=b+(C^v^E)+w[11]+1839030562&4294967295,b=C+(I<<16&4294967295|I>>>16),I=E+(b^C^v)+w[14]+4259657740&4294967295,E=b+(I<<23&4294967295|I>>>9),I=v+(E^b^C)+w[1]+2763975236&4294967295,v=E+(I<<4&4294967295|I>>>28),I=C+(v^E^b)+w[4]+1272893353&4294967295,C=v+(I<<11&4294967295|I>>>21),I=b+(C^v^E)+w[7]+4139469664&4294967295,b=C+(I<<16&4294967295|I>>>16),I=E+(b^C^v)+w[10]+3200236656&4294967295,E=b+(I<<23&4294967295|I>>>9),I=v+(E^b^C)+w[13]+681279174&4294967295,v=E+(I<<4&4294967295|I>>>28),I=C+(v^E^b)+w[0]+3936430074&4294967295,C=v+(I<<11&4294967295|I>>>21),I=b+(C^v^E)+w[3]+3572445317&4294967295,b=C+(I<<16&4294967295|I>>>16),I=E+(b^C^v)+w[6]+76029189&4294967295,E=b+(I<<23&4294967295|I>>>9),I=v+(E^b^C)+w[9]+3654602809&4294967295,v=E+(I<<4&4294967295|I>>>28),I=C+(v^E^b)+w[12]+3873151461&4294967295,C=v+(I<<11&4294967295|I>>>21),I=b+(C^v^E)+w[15]+530742520&4294967295,b=C+(I<<16&4294967295|I>>>16),I=E+(b^C^v)+w[2]+3299628645&4294967295,E=b+(I<<23&4294967295|I>>>9),I=v+(b^(E|~C))+w[0]+4096336452&4294967295,v=E+(I<<6&4294967295|I>>>26),I=C+(E^(v|~b))+w[7]+1126891415&4294967295,C=v+(I<<10&4294967295|I>>>22),I=b+(v^(C|~E))+w[14]+2878612391&4294967295,b=C+(I<<15&4294967295|I>>>17),I=E+(C^(b|~v))+w[5]+4237533241&4294967295,E=b+(I<<21&4294967295|I>>>11),I=v+(b^(E|~C))+w[12]+1700485571&4294967295,v=E+(I<<6&4294967295|I>>>26),I=C+(E^(v|~b))+w[3]+2399980690&4294967295,C=v+(I<<10&4294967295|I>>>22),I=b+(v^(C|~E))+w[10]+4293915773&4294967295,b=C+(I<<15&4294967295|I>>>17),I=E+(C^(b|~v))+w[1]+2240044497&4294967295,E=b+(I<<21&4294967295|I>>>11),I=v+(b^(E|~C))+w[8]+1873313359&4294967295,v=E+(I<<6&4294967295|I>>>26),I=C+(E^(v|~b))+w[15]+4264355552&4294967295,C=v+(I<<10&4294967295|I>>>22),I=b+(v^(C|~E))+w[6]+2734768916&4294967295,b=C+(I<<15&4294967295|I>>>17),I=E+(C^(b|~v))+w[13]+1309151649&4294967295,E=b+(I<<21&4294967295|I>>>11),I=v+(b^(E|~C))+w[4]+4149444226&4294967295,v=E+(I<<6&4294967295|I>>>26),I=C+(E^(v|~b))+w[11]+3174756917&4294967295,C=v+(I<<10&4294967295|I>>>22),I=b+(v^(C|~E))+w[2]+718787259&4294967295,b=C+(I<<15&4294967295|I>>>17),I=E+(C^(b|~v))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var E=v-this.blockSize,w=this.B,b=this.h,C=0;C<v;){if(b==0)for(;C<=E;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<v;)if(w[b++]=T.charCodeAt(C++),b==this.blockSize){i(this,w),b=0;break}}else for(;C<v;)if(w[b++]=T[C++],b==this.blockSize){i(this,w),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var E=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=E&255,E/=256;for(this.u(T),T=Array(16),v=E=0;4>v;++v)for(var w=0;32>w;w+=8)T[E++]=this.g[v]>>>w&255;return T};function o(T,v){var E=c;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function s(T,v){this.h=v;for(var E=[],w=!0,b=T.length-1;0<=b;b--){var C=T[b]|0;w&&C==v||(E[b]=C,w=!1)}this.g=E}var c={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return k(l(-T));for(var v=[],E=1,w=0;T>=E;w++)v[w]=T/E|0,E*=4294967296;return new s(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return k(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),w=p,b=0;b<T.length;b+=8){var C=Math.min(8,T.length-b),I=parseInt(T.substring(b,b+C),v);8>C?(C=l(Math.pow(v,C)),w=w.j(C).add(l(I))):(w=w.j(E),w=w.add(l(I)))}return w}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(N(this))return-k(this).m();for(var T=0,v=1,E=0;E<this.g.length;E++){var w=this.i(E);T+=(0<=w?w:4294967296+w)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D(this))return"0";if(N(this))return"-"+k(this).toString(T);for(var v=l(Math.pow(T,6)),E=this,w="";;){var b=Ae(E,v).g;E=O(E,b.j(v));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=b,D(E))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function D(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function N(T){return T.h==-1}n.l=function(T){return T=O(this,T),N(T)?-1:D(T)?0:1};function k(T){for(var v=T.g.length,E=[],w=0;w<v;w++)E[w]=~T.g[w];return new s(E,~T.h).add(m)}n.abs=function(){return N(this)?k(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0,b=0;b<=v;b++){var C=w+(this.i(b)&65535)+(T.i(b)&65535),I=(C>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);w=I>>>16,C&=65535,I&=65535,E[b]=I<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function O(T,v){return T.add(k(v))}n.j=function(T){if(D(this)||D(T))return p;if(N(this))return N(T)?k(this).j(k(T)):k(k(this).j(T));if(N(T))return k(this.j(k(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,E=[],w=0;w<2*v;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<T.g.length;b++){var C=this.i(w)>>>16,I=this.i(w)&65535,tr=T.i(b)>>>16,Zs=T.i(b)&65535;E[2*w+2*b]+=I*Zs,$(E,2*w+2*b),E[2*w+2*b+1]+=C*Zs,$(E,2*w+2*b+1),E[2*w+2*b+1]+=I*tr,$(E,2*w+2*b+1),E[2*w+2*b+2]+=C*tr,$(E,2*w+2*b+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function $(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function Z(T,v){this.g=T,this.h=v}function Ae(T,v){if(D(v))throw Error("division by zero");if(D(T))return new Z(p,p);if(N(T))return v=Ae(k(T),v),new Z(k(v.g),k(v.h));if(N(v))return v=Ae(T,k(v)),new Z(k(v.g),v.h);if(30<T.g.length){if(N(T)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,w=v;0>=w.l(T);)E=Rt(E),w=Rt(w);var b=Se(E,1),C=Se(w,1);for(w=Se(w,2),E=Se(E,2);!D(w);){var I=C.add(w);0>=I.l(T)&&(b=b.add(E),C=I),w=Se(w,1),E=Se(E,1)}return v=O(T,b.j(v)),new Z(b,v)}for(b=p;0<=T.l(v);){for(E=Math.max(1,Math.floor(T.m()/v.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=l(E),I=C.j(v);N(I)||0<I.l(T);)E-=w,C=l(E),I=C.j(v);D(C)&&(C=m),b=b.add(C),T=O(T,I)}return new Z(b,T)}n.A=function(T){return Ae(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)&T.i(w);return new s(E,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)|T.i(w);return new s(E,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)^T.i(w);return new s(E,this.h^T.h)};function Rt(T){for(var v=T.g.length+1,E=[],w=0;w<v;w++)E[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(E,T.h)}function Se(T,v){var E=v>>5;v%=32;for(var w=T.g.length-E,b=[],C=0;C<w;C++)b[C]=0<v?T.i(C+E)>>>v|T.i(C+E+1)<<32-v:T.i(C+E);return new s(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,p_=w0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,br=w0.Integer=s}).apply(typeof E0<"u"?E0:typeof self<"u"?self:typeof window<"u"?window:{});var Bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sr={};var g_,hB,Ds,m_,Gc,$h,y_,v_,__;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bh=="object"&&Bh];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var S=a[g];if(!(S in f))break e;f=f[S]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var f=0,g=!1,S={next:function(){if(!g&&f<a.length){var A=f++;return{value:d(A,a[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,f){return f})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,g),a.apply(d,S)}}return function(){return a.apply(d,arguments)}}function m(a,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function D(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,S,A){for(var M=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)M[Re-2]=arguments[Re];return d.prototype[S].apply(g,M)}}function N(a){let d=a.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function k(a,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let S=a.length||0,A=g.length||0;a.length=S+A;for(let M=0;M<A;M++)a[S+M]=g[M]}else a.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(a){return/^[\s\xa0]*$/.test(a)}function Z(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Ae(a){return Ae[" "](a),a}Ae[" "]=function(){};var Rt=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function Se(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function T(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function v(a){let d={};for(let f in a)d[f]=a[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let f,g;for(let S=1;S<arguments.length;S++){g=arguments[S];for(f in g)a[f]=g[f];for(let A=0;A<E.length;A++)f=E[A],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function b(a){var d=1;a=a.split(":");let f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function C(a){c.setTimeout(()=>{throw a},0)}function I(){var a=Kf;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class tr{constructor(){this.h=this.g=null}add(d,f){let g=Zs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Zs=new O(()=>new Wk,a=>a.reset());class Wk{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Xs,ea=!1,Kf=new tr,NE=()=>{let a=c.Promise.resolve(void 0);Xs=()=>{a.then(Gk)}};var Gk=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){C(f)}var d=Zs;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}ea=!1};function Pr(){this.s=this.s,this.C=this.C}Pr.prototype.s=!1,Pr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Tt(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Tt.prototype.h=function(){this.defaultPrevented=!0};var Kk=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function ta(a,d){if(Tt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(Rt){e:{try{Ae(d.nodeName);var S=!0;break e}catch{}S=!1}S||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Qk[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ta.aa.h.call(this)}}D(ta,Tt);var Qk={2:"touch",3:"pen",4:"mouse"};ta.prototype.h=function(){ta.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var na="closure_listenable_"+(1e6*Math.random()|0),Yk=0;function Jk(a,d,f,g,S){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=S,this.key=++Yk,this.da=this.fa=!1}function yu(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function vu(a){this.src=a,this.g={},this.h=0}vu.prototype.add=function(a,d,f,g,S){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var M=Yf(a,d,g,S);return-1<M?(d=a[M],f||(d.fa=!1)):(d=new Jk(d,this.src,A,!!g,S),d.fa=f,a.push(d)),d};function Qf(a,d){var f=d.type;if(f in a.g){var g=a.g[f],S=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=S)&&Array.prototype.splice.call(g,S,1),A&&(yu(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Yf(a,d,f,g){for(var S=0;S<a.length;++S){var A=a[S];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return S}return-1}var Jf="closure_lm_"+(1e6*Math.random()|0),Zf={};function xE(a,d,f,g,S){if(g&&g.once)return ME(a,d,f,g,S);if(Array.isArray(d)){for(var A=0;A<d.length;A++)xE(a,d[A],f,g,S);return null}return f=np(f),a&&a[na]?a.K(d,f,l(g)?!!g.capture:!!g,S):PE(a,d,f,!1,g,S)}function PE(a,d,f,g,S,A){if(!d)throw Error("Invalid event type");var M=l(S)?!!S.capture:!!S,Re=ep(a);if(Re||(a[Jf]=Re=new vu(a)),f=Re.add(d,f,g,M,A),f.proxy)return f;if(g=Zk(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)Kk||(S=M),S===void 0&&(S=!1),a.addEventListener(d.toString(),g,S);else if(a.attachEvent)a.attachEvent(LE(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Zk(){function a(f){return d.call(a.src,a.listener,f)}let d=Xk;return a}function ME(a,d,f,g,S){if(Array.isArray(d)){for(var A=0;A<d.length;A++)ME(a,d[A],f,g,S);return null}return f=np(f),a&&a[na]?a.L(d,f,l(g)?!!g.capture:!!g,S):PE(a,d,f,!0,g,S)}function OE(a,d,f,g,S){if(Array.isArray(d))for(var A=0;A<d.length;A++)OE(a,d[A],f,g,S);else g=l(g)?!!g.capture:!!g,f=np(f),a&&a[na]?(a=a.i,d=String(d).toString(),d in a.g&&(A=a.g[d],f=Yf(A,f,g,S),-1<f&&(yu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete a.g[d],a.h--)))):a&&(a=ep(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Yf(d,f,g,S)),(f=-1<a?d[a]:null)&&Xf(f))}function Xf(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[na])Qf(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(LE(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=ep(d))?(Qf(f,a),f.h==0&&(f.src=null,d[Jf]=null)):yu(a)}}}function LE(a){return a in Zf?Zf[a]:Zf[a]="on"+a}function Xk(a,d){if(a.da)a=!0;else{d=new ta(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Xf(a),a=f.call(g,d)}return a}function ep(a){return a=a[Jf],a instanceof vu?a:null}var tp="__closure_events_fn_"+(1e9*Math.random()>>>0);function np(a){return typeof a=="function"?a:(a[tp]||(a[tp]=function(d){return a.handleEvent(d)}),a[tp])}function bt(){Pr.call(this),this.i=new vu(this),this.M=this,this.F=null}D(bt,Pr),bt.prototype[na]=!0,bt.prototype.removeEventListener=function(a,d,f,g){OE(this,a,d,f,g)};function kt(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new Tt(d,a);else if(d instanceof Tt)d.target=d.target||a;else{var S=d;d=new Tt(g,a),w(d,S)}if(S=!0,f)for(var A=f.length-1;0<=A;A--){var M=d.g=f[A];S=_u(M,g,!0,d)&&S}if(M=d.g=a,S=_u(M,g,!0,d)&&S,S=_u(M,g,!1,d)&&S,f)for(A=0;A<f.length;A++)M=d.g=f[A],S=_u(M,g,!1,d)&&S}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)yu(f[g]);delete a.g[d],a.h--}}this.F=null},bt.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},bt.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function _u(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var S=!0,A=0;A<d.length;++A){var M=d[A];if(M&&!M.da&&M.capture==f){var Re=M.listener,It=M.ha||M.src;M.fa&&Qf(a.i,M),S=Re.call(It,g)!==!1&&S}}return S&&!g.defaultPrevented}function FE(a,d,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function VE(a){a.g=FE(()=>{a.g=null,a.i&&(a.i=!1,VE(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class eN extends Pr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:VE(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ra(a){Pr.call(this),this.h=a,this.g={}}D(ra,Pr);var jE=[];function UE(a){Se(a.g,function(d,f){this.g.hasOwnProperty(f)&&Xf(d)},a),a.g={}}ra.prototype.N=function(){ra.aa.N.call(this),UE(this)},ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rp=c.JSON.stringify,tN=c.JSON.parse,nN=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function ip(){}ip.prototype.h=null;function BE(a){return a.h||(a.h=a.i())}function $E(){}var ia={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function op(){Tt.call(this,"d")}D(op,Tt);function sp(){Tt.call(this,"c")}D(sp,Tt);var wi={},HE=null;function Iu(){return HE=HE||new bt}wi.La="serverreachability";function zE(a){Tt.call(this,wi.La,a)}D(zE,Tt);function oa(a){let d=Iu();kt(d,new zE(d))}wi.STAT_EVENT="statevent";function qE(a,d){Tt.call(this,wi.STAT_EVENT,a),this.stat=d}D(qE,Tt);function Nt(a){let d=Iu();kt(d,new qE(d,a))}wi.Ma="timingevent";function WE(a,d){Tt.call(this,wi.Ma,a),this.size=d}D(WE,Tt);function sa(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function aa(){this.g=!0}aa.prototype.xa=function(){this.g=!1};function rN(a,d,f,g,S,A){a.info(function(){if(a.g)if(A)for(var M="",Re=A.split("&"),It=0;It<Re.length;It++){var _e=Re[It].split("=");if(1<_e.length){var St=_e[0];_e=_e[1];var Ct=St.split("_");M=2<=Ct.length&&Ct[1]=="type"?M+(St+"="+_e+"&"):M+(St+"=redacted&")}}else M=null;else M=A;return"XMLHTTP REQ ("+g+") [attempt "+S+"]: "+d+`
`+f+`
`+M})}function iN(a,d,f,g,S,A,M){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+S+"]: "+d+`
`+f+`
`+A+" "+M})}function wo(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+sN(a,f)+(g?" "+g:"")})}function oN(a,d){a.info(function(){return"TIMEOUT: "+d})}aa.prototype.info=function(){};function sN(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var S=g[1];if(Array.isArray(S)&&!(1>S.length)){var A=S[0];if(A!="noop"&&A!="stop"&&A!="close")for(var M=1;M<S.length;M++)S[M]=""}}}}return rp(f)}catch{return d}}var Eu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},GE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ap;function wu(){}D(wu,ip),wu.prototype.g=function(){return new XMLHttpRequest},wu.prototype.i=function(){return{}},ap=new wu;function Mr(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new ra(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new KE}function KE(){this.i=null,this.g="",this.h=!1}var QE={},cp={};function up(a,d,f){a.L=1,a.v=Cu(nr(d)),a.m=f,a.P=!0,YE(a,null)}function YE(a,d){a.F=Date.now(),Tu(a),a.A=nr(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),lw(f.i,"t",g),a.C=0,f=a.j.J,a.h=new KE,a.g=Aw(a.j,f?d:null,!a.m),0<a.O&&(a.M=new eN(m(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var S="readystatechange";Array.isArray(S)||(S&&(jE[0]=S.toString()),S=jE);for(var A=0;A<S.length;A++){var M=xE(f,S[A],g||d.handleEvent,!1,d.h||d);if(!M)break;d.g[M.key]=M}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),oa(),rN(a.i,a.u,a.A,a.l,a.R,a.m)}Mr.prototype.ca=function(a){a=a.target;let d=this.M;d&&rr(a)==3?d.j():this.Y(a)},Mr.prototype.Y=function(a){try{if(a==this.g)e:{let Ct=rr(this.g);var d=this.g.Ba();let So=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||yw(this.g)))){this.J||Ct!=4||d==7||(d==8||0>=So?oa(3):oa(2)),lp(this);var f=this.g.Z();this.X=f;t:if(JE(this)){var g=yw(this.g);a="";var S=g.length,A=rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ti(this),ca(this);var M="";break t}this.h.i=new c.TextDecoder}for(d=0;d<S;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(A&&d==S-1)});g.length=0,this.h.g+=a,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=f==200,iN(this.i,this.u,this.A,this.l,this.R,Ct,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,It=this.g;if((Re=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Re)){var _e=Re;break t}}_e=null}if(f=_e)wo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dp(this,f);else{this.o=!1,this.s=3,Nt(12),Ti(this),ca(this);break e}}if(this.P){f=!0;let hn;for(;!this.J&&this.C<M.length;)if(hn=aN(this,M),hn==cp){Ct==4&&(this.s=4,Nt(14),f=!1),wo(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==QE){this.s=4,Nt(15),wo(this.i,this.l,M,"[Invalid Chunk]"),f=!1;break}else wo(this.i,this.l,hn,null),dp(this,hn);if(JE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||M.length!=0||this.h.h||(this.s=1,Nt(16),f=!1),this.o=this.o&&f,!f)wo(this.i,this.l,M,"[Invalid Chunked Response]"),Ti(this),ca(this);else if(0<M.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),yp(St),St.M=!0,Nt(11))}}else wo(this.i,this.l,M,null),dp(this,M);Ct==4&&Ti(this),this.o&&!this.J&&(Ct==4?bw(this.j,this):(this.o=!1,Tu(this)))}else bN(this.g),f==400&&0<M.indexOf("Unknown SID")?(this.s=3,Nt(12)):(this.s=0,Nt(13)),Ti(this),ca(this)}}}catch{}finally{}};function JE(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function aN(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?cp:(f=Number(d.substring(f,g)),isNaN(f)?QE:(g+=1,g+f>d.length?cp:(d=d.slice(g,g+f),a.C=g+f,d)))}Mr.prototype.cancel=function(){this.J=!0,Ti(this)};function Tu(a){a.S=Date.now()+a.I,ZE(a,a.I)}function ZE(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=sa(m(a.ba,a),d)}function lp(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Mr.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(oN(this.i,this.A),this.L!=2&&(oa(),Nt(17)),Ti(this),this.s=2,ca(this)):ZE(this,this.S-a)};function ca(a){a.j.G==0||a.J||bw(a.j,a)}function Ti(a){lp(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,UE(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function dp(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||hp(f.h,a))){if(!a.K&&hp(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var S=g;if(S[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Nu(f),Ru(f);else break e;mp(f),Nt(18)}}else f.za=S[1],0<f.za-f.T&&37500>S[2]&&f.F&&f.v==0&&!f.C&&(f.C=sa(m(f.Za,f),6e3));if(1>=tw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Si(f,11)}else if((a.K||f.g==a)&&Nu(f),!$(d))for(S=f.Da.g.parse(d),d=0;d<S.length;d++){let _e=S[d];if(f.T=_e[0],_e=_e[1],f.G==2)if(_e[0]=="c"){f.K=_e[1],f.ia=_e[2];let St=_e[3];St!=null&&(f.la=St,f.j.info("VER="+f.la));let Ct=_e[4];Ct!=null&&(f.Aa=Ct,f.j.info("SVER="+f.Aa));let So=_e[5];So!=null&&typeof So=="number"&&0<So&&(g=1.5*So,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let hn=a.g;if(hn){let Pu=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pu){var A=g.h;A.g||Pu.indexOf("spdy")==-1&&Pu.indexOf("quic")==-1&&Pu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(fp(A,A.h),A.h=null))}if(g.D){let vp=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;vp&&(g.ya=vp,Pe(g.I,g.D,vp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var M=a;if(g.qa=Dw(g,g.J?g.ia:null,g.W),M.K){nw(g.h,M);var Re=M,It=g.L;It&&(Re.I=It),Re.B&&(lp(Re),Tu(Re)),g.g=M}else ww(g);0<f.i.length&&ku(f)}else _e[0]!="stop"&&_e[0]!="close"||Si(f,7);else f.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Si(f,7):gp(f):_e[0]!="noop"&&f.l&&f.l.ta(_e),f.v=0)}}oa(4)}catch{}}var cN=class{constructor(a,d){this.g=a,this.map=d}};function XE(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ew(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function tw(a){return a.h?1:a.g?a.g.size:0}function hp(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function fp(a,d){a.g?a.g.add(d):a.h=d}function nw(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}XE.prototype.cancel=function(){if(this.i=rw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function rw(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.D);return d}return N(a.i)}function uN(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function lN(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(let g in a)d[f++]=g;return d}}}function iw(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=lN(a),g=uN(a),S=g.length,A=0;A<S;A++)d.call(void 0,g[A],f&&f[A],a)}var ow=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dN(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),S=null;if(0<=g){var A=a[f].substring(0,g);S=a[f].substring(g+1)}else A=a[f];d(A,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function bi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof bi){this.h=a.h,bu(this,a.j),this.o=a.o,this.g=a.g,Su(this,a.s),this.l=a.l;var d=a.i,f=new da;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),sw(this,f),this.m=a.m}else a&&(d=String(a).match(ow))?(this.h=!1,bu(this,d[1]||"",!0),this.o=ua(d[2]||""),this.g=ua(d[3]||"",!0),Su(this,d[4]),this.l=ua(d[5]||"",!0),sw(this,d[6]||"",!0),this.m=ua(d[7]||"")):(this.h=!1,this.i=new da(null,this.h))}bi.prototype.toString=function(){var a=[],d=this.j;d&&a.push(la(d,aw,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(la(d,aw,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(la(f,f.charAt(0)=="/"?pN:fN,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",la(f,mN)),a.join("")};function nr(a){return new bi(a)}function bu(a,d,f){a.j=f?ua(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Su(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function sw(a,d,f){d instanceof da?(a.i=d,yN(a.i,a.h)):(f||(d=la(d,gN)),a.i=new da(d,a.h))}function Pe(a,d,f){a.i.set(d,f)}function Cu(a){return Pe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ua(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function la(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,hN),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function hN(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var aw=/[#\/\?@]/g,fN=/[#\?:]/g,pN=/[#\?]/g,gN=/[#\?@]/g,mN=/#/g;function da(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Or(a){a.g||(a.g=new Map,a.h=0,a.i&&dN(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=da.prototype,n.add=function(a,d){Or(this),this.i=null,a=To(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function cw(a,d){Or(a),d=To(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function uw(a,d){return Or(a),d=To(a,d),a.g.has(d)}n.forEach=function(a,d){Or(this),this.g.forEach(function(f,g){f.forEach(function(S){a.call(d,S,g,this)},this)},this)},n.na=function(){Or(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let S=a[g];for(let A=0;A<S.length;A++)f.push(d[g])}return f},n.V=function(a){Or(this);let d=[];if(typeof a=="string")uw(this,a)&&(d=d.concat(this.g.get(To(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},n.set=function(a,d){return Or(this),this.i=null,a=To(this,a),uw(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function lw(a,d,f){cw(a,d),0<f.length&&(a.i=null,a.g.set(To(a,d),N(f)),a.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),M=this.V(g);for(g=0;g<M.length;g++){var S=A;M[g]!==""&&(S+="="+encodeURIComponent(String(M[g]))),a.push(S)}}return this.i=a.join("&")};function To(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function yN(a,d){d&&!a.j&&(Or(a),a.i=null,a.g.forEach(function(f,g){var S=g.toLowerCase();g!=S&&(cw(this,g),lw(this,S,f))},a)),a.j=d}function vN(a,d){let f=new aa;if(c.Image){let g=new Image;g.onload=y(Lr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Lr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Lr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Lr,f,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function _N(a,d){let f=new aa,g=new AbortController,S=setTimeout(()=>{g.abort(),Lr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(A=>{clearTimeout(S),A.ok?Lr(f,"TestPingServer: ok",!0,d):Lr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(S),Lr(f,"TestPingServer: error",!1,d)})}function Lr(a,d,f,g,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),g(f)}catch{}}function IN(){this.g=new nN}function EN(a,d,f){let g=f||"";try{iw(a,function(S,A){let M=S;l(S)&&(M=rp(S)),d.push(g+A+"="+encodeURIComponent(M))})}catch(S){throw d.push(g+"type="+encodeURIComponent("_badmap")),S}}function ha(a){this.l=a.Ub||null,this.j=a.eb||!1}D(ha,ip),ha.prototype.g=function(){return new Du(this.l,this.j)},ha.prototype.i=function(a){return function(){return a}}({});function Du(a,d){bt.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Du,bt),n=Du.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,pa(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fa(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,pa(this)),this.g&&(this.readyState=3,pa(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dw(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function dw(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?fa(this):pa(this),this.readyState==3&&dw(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,fa(this))},n.Qa=function(a){this.g&&(this.response=a,fa(this))},n.ga=function(){this.g&&fa(this)};function fa(a){a.readyState=4,a.l=null,a.j=null,a.v=null,pa(a)}n.setRequestHeader=function(a,d){this.u.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function pa(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Du.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function hw(a){let d="";return Se(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function pp(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=hw(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Pe(a,d,f))}function Fe(a){bt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Fe,bt);var wN=/^https?$/i,TN=["POST","PUT"];n=Fe.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ap.g(),this.v=this.o?BE(this.o):BE(ap),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(A){fw(this,A);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var S in g)f.set(S,g[S]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),S=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(TN,d,void 0))||g||S||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,M]of f)this.g.setRequestHeader(A,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mw(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){fw(this,A)}};function fw(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,pw(a),Au(a)}function pw(a){a.A||(a.A=!0,kt(a,"complete"),kt(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,kt(this,"complete"),kt(this,"abort"),Au(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Au(this,!0)),Fe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?gw(this):this.bb())},n.bb=function(){gw(this)};function gw(a){if(a.h&&typeof s<"u"&&(!a.v[1]||rr(a)!=4||a.Z()!=2)){if(a.u&&rr(a)==4)FE(a.Ea,0,a);else if(kt(a,"readystatechange"),rr(a)==4){a.h=!1;try{let M=a.Z();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=M===0){var S=String(a.D).match(ow)[1]||null;!S&&c.self&&c.self.location&&(S=c.self.location.protocol.slice(0,-1)),g=!wN.test(S?S.toLowerCase():"")}f=g}if(f)kt(a,"complete"),kt(a,"success");else{a.m=6;try{var A=2<rr(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",pw(a)}}finally{Au(a)}}}}function Au(a,d){if(a.g){mw(a);let f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||kt(a,"ready");try{f.onreadystatechange=g}catch{}}}function mw(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function rr(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<rr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),tN(d)}};function yw(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function bN(a){let d={};a=(a.g&&2<=rr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if($(a[g]))continue;var f=b(a[g]);let S=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[S]||[];d[S]=A,A.push(f)}T(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ga(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function vw(a){this.Aa=0,this.i=[],this.j=new aa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ga("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ga("baseRetryDelayMs",5e3,a),this.cb=ga("retryDelaySeedMs",1e4,a),this.Wa=ga("forwardChannelMaxRetries",2,a),this.wa=ga("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new XE(a&&a.concurrentRequestLimit),this.Da=new IN,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=vw.prototype,n.la=8,n.G=1,n.connect=function(a,d,f,g){Nt(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Dw(this,null,this.W),ku(this)};function gp(a){if(_w(a),a.G==3){var d=a.U++,f=nr(a.I);if(Pe(f,"SID",a.K),Pe(f,"RID",d),Pe(f,"TYPE","terminate"),ma(a,f),d=new Mr(a,a.j,d),d.L=2,d.v=Cu(nr(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=Aw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Tu(d)}Cw(a)}function Ru(a){a.g&&(yp(a),a.g.cancel(),a.g=null)}function _w(a){Ru(a),a.u&&(c.clearTimeout(a.u),a.u=null),Nu(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function ku(a){if(!ew(a.h)&&!a.s){a.s=!0;var d=a.Ga;Xs||NE(),ea||(Xs(),ea=!0),Kf.add(d,a),a.B=0}}function SN(a,d){return tw(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=sa(m(a.Ga,a,d),Sw(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let S=new Mr(this,this.j,a),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(S.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Ew(this,S,d),f=nr(this.I),Pe(f,"RID",a),Pe(f,"CVER",22),this.D&&Pe(f,"X-HTTP-Session-Id",this.D),ma(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(hw(A)))+"&"+d:this.m&&pp(f,this.m,A)),fp(this.h,S),this.Ua&&Pe(f,"TYPE","init"),this.P?(Pe(f,"$req",d),Pe(f,"SID","null"),S.T=!0,up(S,f,null)):up(S,f,d),this.G=2}}else this.G==3&&(a?Iw(this,a):this.i.length==0||ew(this.h)||Iw(this))};function Iw(a,d){var f;d?f=d.l:f=a.U++;let g=nr(a.I);Pe(g,"SID",a.K),Pe(g,"RID",f),Pe(g,"AID",a.T),ma(a,g),a.m&&a.o&&pp(g,a.m,a.o),f=new Mr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Ew(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),fp(a.h,f),up(f,g,d)}function ma(a,d){a.H&&Se(a.H,function(f,g){Pe(d,g,f)}),a.l&&iw({},function(f,g){Pe(d,g,f)})}function Ew(a,d,f){f=Math.min(a.i.length,f);var g=a.l?m(a.l.Na,a.l,a):null;e:{var S=a.i;let A=-1;for(;;){let M=["count="+f];A==-1?0<f?(A=S[0].g,M.push("ofs="+A)):A=0:M.push("ofs="+A);let Re=!0;for(let It=0;It<f;It++){let _e=S[It].g,St=S[It].map;if(_e-=A,0>_e)A=Math.max(0,S[It].g-100),Re=!1;else try{EN(St,M,"req"+_e+"_")}catch{g&&g(St)}}if(Re){g=M.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function ww(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Xs||NE(),ea||(Xs(),ea=!0),Kf.add(d,a),a.v=0}}function mp(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=sa(m(a.Fa,a),Sw(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Tw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=sa(m(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nt(10),Ru(this),Tw(this))};function yp(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Tw(a){a.g=new Mr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=nr(a.qa);Pe(d,"RID","rpc"),Pe(d,"SID",a.K),Pe(d,"AID",a.T),Pe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Pe(d,"TO",a.ja),Pe(d,"TYPE","xmlhttp"),ma(a,d),a.m&&a.o&&pp(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Cu(nr(d)),f.m=null,f.P=!0,YE(f,a)}n.Za=function(){this.C!=null&&(this.C=null,Ru(this),mp(this),Nt(19))};function Nu(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function bw(a,d){var f=null;if(a.g==d){Nu(a),yp(a),a.g=null;var g=2}else if(hp(a.h,d))f=d.D,nw(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var S=a.B;g=Iu(),kt(g,new WE(g,f)),ku(a)}else ww(a);else if(S=d.s,S==3||S==0&&0<d.X||!(g==1&&SN(a,d)||g==2&&mp(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),S){case 1:Si(a,5);break;case 4:Si(a,10);break;case 3:Si(a,6);break;default:Si(a,2)}}}function Sw(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Si(a,d){if(a.j.info("Error code "+d),d==2){var f=m(a.fb,a),g=a.Xa;let S=!g;g=new bi(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||bu(g,"https"),Cu(g),S?vN(g.toString(),f):_N(g.toString(),f)}else Nt(2);a.G=0,a.l&&a.l.sa(d),Cw(a),_w(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function Cw(a){if(a.G=0,a.ka=[],a.l){let d=rw(a.h);(d.length!=0||a.i.length!=0)&&(k(a.ka,d),k(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function Dw(a,d,f){var g=f instanceof bi?nr(f):new bi(f);if(g.g!="")d&&(g.g=d+"."+g.g),Su(g,g.s);else{var S=c.location;g=S.protocol,d=d?d+"."+S.hostname:S.hostname,S=+S.port;var A=new bi(null);g&&bu(A,g),d&&(A.g=d),S&&Su(A,S),f&&(A.l=f),g=A}return f=a.D,d=a.ya,f&&d&&Pe(g,f,d),Pe(g,"VER",a.la),ma(a,g),g}function Aw(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Fe(new ha({eb:f})):new Fe(a.pa),d.Ha(a.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rw(){}n=Rw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xu(){}xu.prototype.g=function(a,d){return new Ht(a,d)};function Ht(a,d){bt.call(this),this.g=new vw(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!$(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new bo(this)}D(Ht,bt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){gp(this.g)},Ht.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=rp(a),a=f);d.i.push(new cN(d.Ya++,a)),d.G==3&&ku(d)},Ht.prototype.N=function(){this.g.l=null,delete this.j,gp(this.g),delete this.g,Ht.aa.N.call(this)};function kw(a){op.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}D(kw,op);function Nw(){sp.call(this),this.status=1}D(Nw,sp);function bo(a){this.g=a}D(bo,Rw),bo.prototype.ua=function(){kt(this.g,"a")},bo.prototype.ta=function(a){kt(this.g,new kw(a))},bo.prototype.sa=function(a){kt(this.g,new Nw)},bo.prototype.ra=function(){kt(this.g,"b")},xu.prototype.createWebChannel=xu.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,__=Sr.createWebChannelTransport=function(){return new xu},v_=Sr.getStatEventTarget=function(){return Iu()},y_=Sr.Event=wi,$h=Sr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Eu.NO_ERROR=0,Eu.TIMEOUT=8,Eu.HTTP_ERROR=6,Gc=Sr.ErrorCode=Eu,GE.COMPLETE="complete",m_=Sr.EventType=GE,$E.EventType=ia,ia.OPEN="a",ia.CLOSE="b",ia.ERROR="c",ia.MESSAGE="d",bt.prototype.listen=bt.prototype.K,Ds=Sr.WebChannel=$E,hB=Sr.FetchXmlHttpFactory=ha,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,g_=Sr.XhrIo=Fe}).apply(typeof Bh<"u"?Bh:typeof self<"u"?self:typeof window<"u"?window:{});var T0="@firebase/firestore",b0="4.8.0";var vt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");var Gs="11.10.0";var po=new zn("@firebase/firestore");function As(){return po.logLevel}function L(n,...e){if(po.logLevel<=le.DEBUG){let t=e.map(aE);po.debug(`Firestore (${Gs}): ${n}`,...t)}}function Cr(n,...e){if(po.logLevel<=le.ERROR){let t=e.map(aE);po.error(`Firestore (${Gs}): ${n}`,...t)}}function vi(n,...e){if(po.logLevel<=le.WARN){let t=e.map(aE);po.warn(`Firestore (${Gs}): ${n}`,...t)}}function aE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function W(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,dR(n,r,t)}function dR(n,e,t){let r=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Cr(r),new Error(r)}function be(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||dR(e,i,r)}function te(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends en{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Qn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Qh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},b_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vt.UNAUTHENTICATED))}shutdown(){}},S_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},C_=class{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){be(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string",31837,{l:r}),new Qh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new vt(e)}},D_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},A_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new D_(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Yh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},R_=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){be(this.o===void 0,3512);let r=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,L("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Yh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Yh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function fB(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function hR(){return new TextEncoder}var eu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=fB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function se(n,e){return n<e?-1:n>e?1:0}function k_(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return se(r,i);{let o=hR(),s=pB(o.encode(S0(n,t)),o.encode(S0(e,t)));return s!==0?s:se(r,i)}}t+=r>65535?2:1}return se(n.length,e.length)}function S0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function pB(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return se(n[t],e[t]);return se(n.length,e.length)}function Os(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var C0="__name__",Jh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&W(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&W(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return se(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):k_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return br.fromString(e.substring(4,e.length-2))}},ze=class n extends Jh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},gB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rn=class n extends Jh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return gB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===C0}static keyField(){return new n([C0])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new j(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new j(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new j(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new j(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var G=class n{constructor(e){this.path=e}static fromPath(e){return new n(ze.fromString(e))}static fromName(e){return new n(ze.fromString(e).popFirst(5))}static empty(){return new n(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ze(e.slice()))}};function mB(n,e,t){if(!t)throw new j(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yB(n,e,t,r){if(e===!0&&r===!0)throw new j(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function D0(n){if(!G.isDocumentKey(n))throw new j(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function cE(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":W(12329,{type:typeof n})}function tu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new j(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=cE(n);throw new j(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Qe(n,e){let t={typeString:n};return e&&(t.value=e),t}function pu(n,e){if(!fR(n))throw new j(x.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new j(x.INVALID_ARGUMENT,t);return!0}var A0=-62135596800,R0=1e6,Ye=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*R0);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<A0)throw new j(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/R0}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-A0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:Qe("string",Ye._jsonSchemaVersion),seconds:Qe("number"),nanoseconds:Qe("number")};var re=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ye(0,0))}static max(){return new n(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var nu=-1,N_=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};N_.UNKNOWN_ID=-1;function vB(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Ye(t+1,0):new Ye(t,r));return new go(i,G.empty(),e)}function _B(n){return new go(n.readTime,n.key,nu)}var go=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(re.min(),G.empty(),nu)}static max(){return new n(re.max(),G.empty(),nu)}};function IB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=G.comparator(n.documentKey,e.documentKey),t!==0?t:se(n.largestBatchId,e.largestBatchId))}var EB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",x_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ks(n){return _(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==EB)throw n;L("LocalStore","Unexpectedly lost primary lease")})}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function wB(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qs(n){return n.name==="IndexedDbTransactionError"}var uE=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),lE=-1;function Df(n){return n==null}function ru(n){return n===0&&1/n==-1/0}function TB(n){return typeof n=="number"&&Number.isInteger(n)&&!ru(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var pR="";function bB(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=k0(e)),e=SB(n.get(t),e);return k0(e)}function SB(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case pR:t+="";break;default:t+=o}}return t}function k0(n){return n+pR+""}var CB="remoteDocuments",gR="owner";var mR="mutationQueues";var yR="mutations";var vR="documentMutations",DB="remoteDocumentsV14";var _R="remoteDocumentGlobal";var IR="targets";var ER="targetDocuments";var wR="targetGlobal",TR="collectionParents";var bR="clientMetadata";var SR="bundles";var CR="namedQueries";var AB="indexConfiguration";var RB="indexState";var kB="indexEntries";var DR="documentOverlays";var NB="globals";var xB=[mR,yR,vR,CB,IR,gR,wR,ER,bR,_R,TR,SR,CR],one=[...xB,DR],PB=[mR,yR,vR,DB,IR,gR,wR,ER,bR,_R,TR,SR,CR,DR],MB=PB,OB=[...MB,AB,RB,kB];var sne=[...OB,NB];function N0(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Io(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function AR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var $e=class n{constructor(e,t){this.comparator=e,this.root=t||Yn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xs(this.root,e,this.comparator,!1)}getReverseIterator(){return new xs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xs(this.root,e,this.comparator,!0)}},xs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Yn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw W(27949);return e+(this.isRed()?0:1)}};Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1;Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Yn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _t=class n{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zh(this.data.getIterator())}getIteratorFrom(e){return new Zh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Zh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Kn=class n{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new n([])}unionWith(e){let t=new _t(rn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Os(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Xh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var At=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Xh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};At.EMPTY_BYTE_STRING=new At("");var LB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(n){if(be(!!n,39018),typeof n=="string"){let e=0,t=LB.exec(n);if(be(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(n.seconds),nanos:Le(n.nanos)}}function Le(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ar(n){return typeof n=="string"?At.fromBase64String(n):At.fromUint8Array(n)}var RR="server_timestamp",kR="__type__",NR="__previous_value__",xR="__local_write_time__";function dE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[kR])===null||t===void 0?void 0:t.stringValue)===RR}function Af(n){let e=n.mapValue.fields[NR];return dE(e)?Af(e):e}function iu(n){let e=Dr(n.mapValue.fields[xR].timestampValue);return new Ye(e.seconds,e.nanos)}var P_=class{constructor(e,t,r,i,o,s,c,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},ef="(default)",tf=class n{constructor(e,t){this.projectId=e,this.database=t||ef}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===ef}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var hE="__type__",PR="__max__",Hh={mapValue:{fields:{__type__:{stringValue:PR}}}},fE="__vector__",Ls="value";function _i(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dE(n)?4:OR(n)?9007199254740991:MR(n)?10:11:W(28295,{value:n})}function Xn(n,e){if(n===e)return!0;let t=_i(n);if(t!==_i(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return iu(n).isEqual(iu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Dr(i.timestampValue),c=Dr(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Ar(i.bytesValue).isEqual(Ar(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Le(i.geoPointValue.latitude)===Le(o.geoPointValue.latitude)&&Le(i.geoPointValue.longitude)===Le(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Le(i.integerValue)===Le(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Le(i.doubleValue),c=Le(o.doubleValue);return s===c?ru(s)===ru(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return Os(n.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(N0(s)!==N0(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!Xn(s[u],c[u])))return!1;return!0}(n,e);default:return W(52216,{left:n})}}function ou(n,e){return(n.values||[]).find(t=>Xn(t,e))!==void 0}function Fs(n,e){if(n===e)return 0;let t=_i(n),r=_i(e);if(t!==r)return se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return se(n.booleanValue,e.booleanValue);case 2:return function(o,s){let c=Le(o.integerValue||o.doubleValue),u=Le(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return x0(n.timestampValue,e.timestampValue);case 4:return x0(iu(n),iu(e));case 5:return k_(n.stringValue,e.stringValue);case 6:return function(o,s){let c=Ar(o),u=Ar(s);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=se(c[l],u[l]);if(h!==0)return h}return se(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let c=se(Le(o.latitude),Le(s.latitude));return c!==0?c:se(Le(o.longitude),Le(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return P0(n.arrayValue,e.arrayValue);case 10:return function(o,s){var c,u,l,h;let p=o.fields||{},m=s.fields||{},y=(c=p[Ls])===null||c===void 0?void 0:c.arrayValue,D=(u=m[Ls])===null||u===void 0?void 0:u.arrayValue,N=se(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:P0(y,D)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Hh.mapValue&&s===Hh.mapValue)return 0;if(o===Hh.mapValue)return 1;if(s===Hh.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=k_(u[p],h[p]);if(m!==0)return m;let y=Fs(c[u[p]],l[h[p]]);if(y!==0)return y}return se(u.length,h.length)}(n.mapValue,e.mapValue);default:throw W(23264,{le:t})}}function x0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return se(n,e);let t=Dr(n),r=Dr(e),i=se(t.seconds,r.seconds);return i!==0?i:se(t.nanos,r.nanos)}function P0(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Fs(t[i],r[i]);if(o)return o}return se(t.length,r.length)}function Vs(n){return M_(n)}function M_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Dr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ar(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return G.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=M_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${M_(t.fields[s])}`;return i+"}"}(n.mapValue):W(61005,{value:n})}function Wh(n){switch(_i(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Af(n);return e?16+Wh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ar(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Wh(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Io(r.fields,(o,s)=>{i+=o.length+Wh(s)}),i}(n.mapValue);default:throw W(13486,{value:n})}}function O_(n){return!!n&&"integerValue"in n}function pE(n){return!!n&&"arrayValue"in n}function M0(n){return!!n&&"nullValue"in n}function O0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Gh(n){return!!n&&"mapValue"in n}function MR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[hE])===null||t===void 0?void 0:t.stringValue)===fE}function Qc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Io(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function OR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===PR}var cne={mapValue:{fields:{[hE]:{stringValue:fE},[Ls]:{arrayValue:{}}}}};var Cn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Gh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qc(t)}setAll(e){let t=rn.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=Qc(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Gh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Gh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Io(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Qc(this.value))}};function LR(n){let e=[];return Io(n.fields,(t,r)=>{let i=new rn([t]);if(Gh(r)){let o=LR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Kn(e)}var Dn=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,re.min(),re.min(),re.min(),Cn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,re.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,re.min(),re.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,re.min(),re.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var js=class{constructor(e,t){this.position=e,this.inclusive=t}};function L0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),t.key):r=Fs(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function F0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xn(n.position[t],e.position[t]))return!1;return!0}var Us=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function FB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var nf=class{},st=class n extends nf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new F_(e,t,r):t==="array-contains"?new U_(e,r):t==="in"?new B_(e,r):t==="not-in"?new $_(e,r):t==="array-contains-any"?new H_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new V_(e,r):new j_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Fs(t,this.value)):t!==null&&_i(this.value)===_i(t)&&this.matchesComparison(Fs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},er=class n extends nf{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return FR(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function FR(n){return n.op==="and"}function VR(n){return VB(n)&&FR(n)}function VB(n){for(let e of n.filters)if(e instanceof er)return!1;return!0}function L_(n){if(n instanceof st)return n.field.canonicalString()+n.op.toString()+Vs(n.value);if(VR(n))return n.filters.map(e=>L_(e)).join(",");{let e=n.filters.map(t=>L_(t)).join(",");return`${n.op}(${e})`}}function jR(n,e){return n instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&Xn(r.value,i.value)}(n,e):n instanceof er?function(r,i){return i instanceof er&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&jR(s,i.filters[c]),!0):!1}(n,e):void W(19439)}function UR(n){return n instanceof st?function(t){return`${t.field.canonicalString()} ${t.op} ${Vs(t.value)}`}(n):n instanceof er?function(t){return t.op.toString()+" {"+t.getFilters().map(UR).join(" ,")+"}"}(n):"Filter"}var F_=class extends st{constructor(e,t,r){super(e,t,r),this.key=G.fromName(r.referenceValue)}matches(e){let t=G.comparator(e.key,this.key);return this.matchesComparison(t)}},V_=class extends st{constructor(e,t){super(e,"in",t),this.keys=BR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},j_=class extends st{constructor(e,t){super(e,"not-in",t),this.keys=BR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function BR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>G.fromName(r.referenceValue))}var U_=class extends st{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return pE(t)&&ou(t.arrayValue,this.value)}},B_=class extends st{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ou(this.value.arrayValue,t)}},$_=class extends st{constructor(e,t){super(e,"not-in",t)}matches(e){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ou(this.value.arrayValue,t)}},H_=class extends st{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!pE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ou(this.value.arrayValue,r))}};var z_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Pe=null}};function V0(n,e=null,t=[],r=[],i=null,o=null,s=null){return new z_(n,e,t,r,i,o,s)}function gE(n){let e=te(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>L_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Df(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vs(r)).join(",")),e.Pe=t}return e.Pe}function mE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!F0(n.startAt,e.startAt)&&F0(n.endAt,e.endAt)}function q_(n){return G.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Bs=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function jB(n,e,t,r,i,o,s,c){return new Bs(n,e,t,r,i,o,s,c)}function yE(n){return new Bs(n)}function j0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function UB(n){return n.collectionGroup!==null}function Yc(n){let e=te(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new _t(rn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Us(o,r))}),t.has(rn.keyField().canonicalString())||e.Te.push(new Us(rn.keyField(),r))}return e.Te}function Jn(n){let e=te(n);return e.Ie||(e.Ie=BB(e,Yc(n))),e.Ie}function BB(n,e){if(n.limitType==="F")return V0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Us(i.field,o)});let t=n.endAt?new js(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new js(n.startAt.position,n.startAt.inclusive):null;return V0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function W_(n,e,t){return new Bs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rf(n,e){return mE(Jn(n),Jn(e))&&n.limitType===e.limitType}function $R(n){return`${gE(Jn(n))}|lt:${n.limitType}`}function Rs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>UR(i)).join(", ")}]`),Df(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Vs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Vs(i)).join(",")),`Target(${r})`}(Jn(n))}; limitType=${n.limitType})`}function kf(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Yc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,c,u){let l=L0(s,c,u);return s.inclusive?l<=0:l<0}(r.startAt,Yc(r),i)||r.endAt&&!function(s,c,u){let l=L0(s,c,u);return s.inclusive?l>=0:l>0}(r.endAt,Yc(r),i))}(n,e)}function $B(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HR(n){return(e,t)=>{let r=!1;for(let i of Yc(n)){let o=HB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function HB(n,e,t){let r=n.field.isKeyField()?G.comparator(e.key,t.key):function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?Fs(u,l):W(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return W(19790,{direction:n.dir})}}var Rr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return AR(this.inner)}size(){return this.innerSize}};var zB=new $e(G.comparator);function kr(){return zB}var zR=new $e(G.comparator);function Kc(...n){let e=zR;for(let t of n)e=e.insert(t.key,t);return e}function qR(n){let e=zR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function co(){return Jc()}function WR(){return Jc()}function Jc(){return new Rr(n=>n.toString(),(n,e)=>n.isEqual(e))}var qB=new $e(G.comparator),WB=new _t(G.comparator);function he(...n){let e=WB;for(let t of n)e=e.add(t);return e}var GB=new _t(se);function KB(){return GB}function vE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ru(e)?"-0":e}}function GR(n){return{integerValue:""+n}}function QB(n,e){return TB(e)?GR(e):vE(n,e)}var $s=class{constructor(){this._=void 0}};function YB(n,e,t){return n instanceof Hs?function(i,o){let s={fields:{[kR]:{stringValue:RR},[xR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&dE(o)&&(o=Af(o)),o&&(s.fields[NR]=o),{mapValue:s}}(t,e):n instanceof mo?QR(n,e):n instanceof yo?YR(n,e):function(i,o){let s=KR(i,o),c=U0(s)+U0(i.Ee);return O_(s)&&O_(i.Ee)?GR(c):vE(i.serializer,c)}(n,e)}function JB(n,e,t){return n instanceof mo?QR(n,e):n instanceof yo?YR(n,e):t}function KR(n,e){return n instanceof zs?function(r){return O_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Hs=class extends $s{},mo=class extends $s{constructor(e){super(),this.elements=e}};function QR(n,e){let t=JR(e);for(let r of n.elements)t.some(i=>Xn(i,r))||t.push(r);return{arrayValue:{values:t}}}var yo=class extends $s{constructor(e){super(),this.elements=e}};function YR(n,e){let t=JR(e);for(let r of n.elements)t=t.filter(i=>!Xn(i,r));return{arrayValue:{values:t}}}var zs=class extends $s{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function U0(n){return Le(n.integerValue||n.doubleValue)}function JR(n){return pE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ZB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof mo&&i instanceof mo||r instanceof yo&&i instanceof yo?Os(r.elements,i.elements,Xn):r instanceof zs&&i instanceof zs?Xn(r.Ee,i.Ee):r instanceof Hs&&i instanceof Hs}(n.transform,e.transform)}var G_=class{constructor(e,t){this.version=e,this.transformResults=t}},ho=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Kh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var qs=class{};function ZR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new rf(n.key,ho.none()):new vo(n.key,n.data,ho.none());{let t=n.data,r=Cn.empty(),i=new _t(rn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Nr(n.key,r,new Kn(i.toArray()),ho.none())}}function XB(n,e,t){n instanceof vo?function(i,o,s){let c=i.value.clone(),u=$0(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Nr?function(i,o,s){if(!Kh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=$0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(XR(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Zc(n,e,t,r){return n instanceof vo?function(o,s,c,u){if(!Kh(o.precondition,s))return c;let l=o.value.clone(),h=H0(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Nr?function(o,s,c,u){if(!Kh(o.precondition,s))return c;let l=H0(o.fieldTransforms,u,s),h=s.data;return h.setAll(XR(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,c){return Kh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(n,e,t)}function e$(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=KR(r.transform,i||null);o!=null&&(t===null&&(t=Cn.empty()),t.set(r.field,o))}return t||null}function B0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Os(r,i,(o,s)=>ZB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var vo=class extends qs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Nr=class extends qs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function XR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function $0(n,e,t){let r=new Map;be(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,JB(s,c,t[i]))}return r}function H0(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,YB(o,s,e))}return r}var rf=class extends qs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},K_=class extends qs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Q_=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&XB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Zc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Zc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=WR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let u=ZR(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),he())}isEqual(e){return this.batchId===e.batchId&&Os(this.mutations,e.mutations,(t,r)=>B0(t,r))&&Os(this.baseMutations,e.baseMutations,(t,r)=>B0(t,r))}},Y_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){be(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return qB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var J_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Z_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ge,ye;function t$(n){switch(n){case x.OK:return W(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return W(15467,{code:n})}}function ek(n){if(n===void 0)return Cr("GRPC error has no .code"),x.UNKNOWN;switch(n){case Ge.OK:return x.OK;case Ge.CANCELLED:return x.CANCELLED;case Ge.UNKNOWN:return x.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return x.INTERNAL;case Ge.UNAVAILABLE:return x.UNAVAILABLE;case Ge.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Ge.NOT_FOUND:return x.NOT_FOUND;case Ge.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Ge.ABORTED:return x.ABORTED;case Ge.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Ge.DATA_LOSS:return x.DATA_LOSS;default:return W(39323,{code:n})}}(ye=Ge||(Ge={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var z0=null;var n$=new br([4294967295,4294967295],0);function q0(n){let e=hR().encode(n),t=new p_;return t.update(e),new Uint8Array(t.digest())}function W0(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new br([t,r],0),new br([i,o],0)]}var X_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new uo(`Invalid padding: ${t}`);if(r<0)throw new uo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new uo(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=br.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(br.fromNumber(r)));return i.compare(n$)===1&&(i=new br([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=q0(e),[r,i]=W0(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.fe===0)return;let t=q0(e),[r,i]=W0(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},uo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var of=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,su.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(re.min(),i,new $e(se),kr(),he())}},su=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,he(),he(),he())}};var Ps=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},sf=class{constructor(e,t){this.targetId=e,this.De=t}},af=class{constructor(e,t,r=At.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},cf=class{constructor(){this.ve=0,this.Ce=G0(),this.Fe=At.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=he(),t=he(),r=he();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:W(38017,{changeType:o})}}),new su(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=G0()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},eI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=kr(),this.je=zh(),this.Je=zh(),this.He=new $e(se)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:W(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(q_(o))if(r===0){let s=new G(o.path);this.Xe(t,s,Dn.newNoDocument(s,re.min()))}else be(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let c=this._t(e),u=c?this.ut(c,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}z0?.ct(function(h,p,m,y,D){var N,k,O,$,Z,Ae;let Rt={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Se=p.unchangedNames;return Se&&(Rt.bloomFilter={applied:D===0,hashCount:(N=Se?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:($=(O=(k=Se?.bits)===null||k===void 0?void 0:k.bitmap)===null||O===void 0?void 0:O.length)!==null&&$!==void 0?$:0,padding:(Ae=(Z=Se?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&Ae!==void 0?Ae:0,mightContain:T=>{var v;return(v=y?.mightContain(T))!==null&&v!==void 0&&v}}),Rt}(s,e.De,this.We.lt(),c,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=Ar(r).toUint8Array()}catch(u){if(u instanceof Xh)return vi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new X_(s,i,o)}catch(u){return vi(u instanceof uo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let c=this.st(s);if(c){if(o.current&&q_(c.target)){let u=new G(c.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Dn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=he();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new of(e,t,this.He,this.ze,r);return this.ze=kr(),this.je=zh(),this.Je=zh(),this.He=new $e(se),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new cf,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new _t(se),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new _t(se),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||L("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new cf),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function zh(){return new $e(G.comparator)}function G0(){return new $e(G.comparator)}var r$={asc:"ASCENDING",desc:"DESCENDING"},i$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o$={and:"AND",or:"OR"},tI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function nI(n,e){return n.useProto3Json||Df(e)?e:{value:e}}function uf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function s$(n,e){return uf(n,e.toTimestamp())}function Zn(n){return be(!!n,49232),re.fromTimestamp(function(t){let r=Dr(t);return new Ye(r.seconds,r.nanos)}(n))}function _E(n,e){return rI(n,e).canonicalString()}function rI(n,e){let t=function(i){return new ze(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function nk(n){let e=ze.fromString(n);return be(ak(e),10190,{key:e.toString()}),e}function iI(n,e){return _E(n.databaseId,e.path)}function I_(n,e){let t=nk(e);if(t.get(1)!==n.databaseId.projectId)throw new j(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new j(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new G(ik(t))}function rk(n,e){return _E(n.databaseId,e)}function a$(n){let e=nk(n);return e.length===4?ze.emptyPath():ik(e)}function oI(n){return new ze(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ik(n){return be(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function K0(n,e,t){return{name:iI(n,e),fields:t.value.mapValue.fields}}function c$(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:W(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(be(h===void 0||typeof h=="string",58123),At.fromBase64String(h||"")):(be(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),At.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(l){let h=l.code===void 0?x.UNKNOWN:ek(l.code);return new j(h,l.message||"")}(s);t=new af(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=I_(n,r.document.name),o=Zn(r.document.updateTime),s=r.document.createTime?Zn(r.document.createTime):re.min(),c=new Cn({mapValue:{fields:r.document.fields}}),u=Dn.newFoundDocument(i,o,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Ps(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=I_(n,r.document),o=r.readTime?Zn(r.readTime):re.min(),s=Dn.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Ps([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=I_(n,r.document),o=r.removedTargetIds||[];t=new Ps([],o,i,null)}else{if(!("filter"in e))return W(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Z_(i,o),c=r.targetId;t=new sf(c,s)}}return t}function u$(n,e){let t;if(e instanceof vo)t={update:K0(n,e.key,e.value)};else if(e instanceof rf)t={delete:iI(n,e.key)};else if(e instanceof Nr)t={update:K0(n,e.key,e.data),updateMask:v$(e.fieldMask)};else{if(!(e instanceof K_))return W(16599,{Rt:e.type});t={verify:iI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof Hs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof mo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof yo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof zs)return{fieldPath:s.field.canonicalString(),increment:c.Ee};throw W(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:s$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:W(27497)}(n,e.precondition)),t}function l$(n,e){return n&&n.length>0?(be(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Zn(i.updateTime):Zn(o);return s.isEqual(re.min())&&(s=Zn(o)),new G_(s,i.transformResults||[])}(t,e))):[]}function d$(n,e){return{documents:[rk(n,e.path)]}}function h$(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=rk(n,i);let o=function(l){if(l.length!==0)return sk(er.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ks(m.field),direction:g$(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=nI(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:t,parent:i}}function f$(n){let e=a$(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){be(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=ok(p);return m instanceof er&&VR(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(D){return new Us(Ns(D.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(t.orderBy));let c=null;t.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,Df(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new js(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new js(y,m)}(t.endAt)),jB(e,i,s,o,c,"F",u,l)}function p$(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ok(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ns(t.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ns(t.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ns(t.unaryFilter.field);return st.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ns(t.unaryFilter.field);return st.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}}(n):n.fieldFilter!==void 0?function(t){return st.create(Ns(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return er.create(t.compositeFilter.filters.map(r=>ok(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W(1026)}}(t.compositeFilter.op))}(n):W(30097,{filter:n})}function g$(n){return r$[n]}function m$(n){return i$[n]}function y$(n){return o$[n]}function ks(n){return{fieldPath:n.canonicalString()}}function Ns(n){return rn.fromServerFormat(n.fieldPath)}function sk(n){return n instanceof st?function(t){if(t.op==="=="){if(O0(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NAN"}};if(M0(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(O0(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NOT_NAN"}};if(M0(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ks(t.field),op:m$(t.op),value:t.value}}}(n):n instanceof er?function(t){let r=t.getFilters().map(i=>sk(i));return r.length===1?r[0]:{compositeFilter:{op:y$(t.op),filters:r}}}(n):W(54877,{filter:n})}function v$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ak(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var au=class n{constructor(e,t,r,i,o=re.min(),s=re.min(),c=At.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var sI=class{constructor(e){this.gt=e}};function _$(n){let e=f$({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?W_(e,e.limit,"L"):e}var lf=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Le(e.integerValue));else if("doubleValue"in e){let r=Le(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),ru(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Dr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Ar(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?OR(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):MR(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):W(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Ls,c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Le(c)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),G.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};lf.Ut=new lf;var aI=class{constructor(){this.Dn=new cI}addToCollectionParentIndex(e,t){return this.Dn.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(go.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(go.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},cI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _t(ze.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _t(ze.comparator)).toArray()}};var une=new Uint8Array(0);var Q0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ck=41943040,dn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(ck,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);var cu=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Y0="LruGarbageCollector",I$=1048576;function J0([n,e],[t,r]){let i=se(n,t);return i===0?se(e,r):i}var uI=class{constructor(e){this.Tr=e,this.buffer=new _t(J0),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();J0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},lI=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){L(Y0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qs(t)?L(Y0,"Ignoring IndexedDB error during garbage collection: ",t):yield Ks(t)}yield this.Rr(3e5)}))}},dI=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return P.resolve(uE.ue);let r=new uI(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(Q0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Q0):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),As()<=le.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function E$(n,e){return new dI(n,e)}var hI=class{constructor(){this.changes=new Rr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var fI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var pI=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Zc(r.mutation,i,Kn.empty(),Ye.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,t,r=he()){let i=co();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Kc();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=co();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,he()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=kr(),s=Jc(),c=function(){return Jc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Nr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Zc(h.mutation,l,h.mutation.getFieldMask(),Ye.now())):s.set(l.key,Kn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return c.set(l,new fI(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Jc(),i=new $e((s,c)=>s-c),o=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Kn.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||he()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=WR();h.forEach(m=>{if(!o.has(m)){let y=ZR(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):UB(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):P.resolve(co()),c=nu,u=o;return s.next(l=>P.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,he())).next(h=>({batchId:c,changes:qR(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new G(t)).next(r=>{let i=Kc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Kc();return this.indexManager.getCollectionParents(e,o).next(c=>P.forEach(c,u=>{let l=function(p,m){return new Bs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Dn.newInvalidDocument(h)))});let c=Kc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Zc(h.mutation,l,Kn.empty(),Ye.now()),kf(t,l)&&(c=c.insert(u,l))}),c})}};var gI=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return P.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Zn(i.createTime)}}(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:_$(i.bundledQuery),readTime:Zn(i.readTime)}}(t)),P.resolve()}};var mI=class{constructor(){this.overlays=new $e(G.comparator),this.kr=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=co();return P.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=co(),o=t.length+1,s=new G(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new $e((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=co(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=co(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return P.resolve(c)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new J_(t,r));let o=this.kr.get(t);o===void 0&&(o=he(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var yI=class{constructor(){this.sessionToken=At.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var uu=class{constructor(){this.qr=new _t(Ke.Qr),this.$r=new _t(Ke.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ke(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ke(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new G(new ze([])),r=new Ke(t,e),i=new Ke(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new G(new ze([])),r=new Ke(t,e),i=new Ke(t,e+1),o=he();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ke(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ke=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return G.comparator(e.key,t.key)||se(e.Hr,t.Hr)}static Ur(e,t){return se(e.Hr,t.Hr)||G.comparator(e.key,t.key)}};var vI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new _t(Ke.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Q_(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Yr=this.Yr.add(new Ke(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,t){return P.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?lE:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ke(t,0),i=new Ke(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _t(se);return t.forEach(i=>{let o=new Ke(i,0),s=new Ke(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new Ke(new G(o),0),c=new _t(se);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Hr)),!0)},s),P.resolve(this.ei(c))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){be(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(t.mutations,i=>{let o=new Ke(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ke(t,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var _I=class{constructor(e){this.ni=e,this.docs=function(){return new $e(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let r=kr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Dn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=kr(),s=t.path,c=new G(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||IB(_B(h),r)<=0||(i.has(h.key)||kf(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,t,r,i){W(9500)}ri(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new II(this)}getSize(e){return P.resolve(this.size)}},II=class extends hI{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var EI=class{constructor(e){this.persistence=e,this.ii=new Rr(t=>gE(t),mE),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.si=0,this.oi=new uu,this.targetCount=0,this._i=cu.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),P.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new cu(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.hr(t),P.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.oi.containsKey(t))}};var df=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new uE(0),this.ci=!1,this.ci=!0,this.li=new yI,this.referenceDelegate=e(this),this.hi=new EI(this),this.indexManager=new aI,this.remoteDocumentCache=function(i){return new _I(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new sI(t),this.Ti=new gI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new vI(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){L("MemoryPersistence","Starting transaction:",e);let i=new wI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},wI=class extends x_{constructor(e){super(),this.currentSequenceNumber=e}},TI=class n{constructor(e){this.persistence=e,this.Ai=new uu,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw W(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),P.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=G.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,re.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return P.or([()=>P.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},hf=class n{constructor(e,t){this.persistence=e,this.gi=new Rr(r=>bB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=E$(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return P.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(c=>{c||(r++,o.removeEntry(s,re.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),P.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),P.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wh(e.data.value)),t}Sr(e,t,r){return P.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var bI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=he(),i=he();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var SI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var CI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return YD()?8:wB(yt())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new SI;return this.ws(e,t,s).next(c=>{if(o.result=c,this.Rs)return this.Ss(e,t,s,c.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(As()<=le.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",Rs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(As()<=le.DEBUG&&L("QueryEngine","Query:",Rs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(As()<=le.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",Rs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(t))):P.resolve())}ps(e,t){if(j0(t))return P.resolve(null);let r=Jn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=W_(t,null,"F"),r=Jn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=he(...o);return this.gs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,c);return this.Ds(t,l,s,u.readTime)?this.ps(e,W_(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return j0(t)||i.isEqual(re.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?P.resolve(null):(As()<=le.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rs(t)),this.vs(e,s,t,vB(i,nu)).next(c=>c))})}bs(e,t){let r=new _t(HR(e));return t.forEach((i,o)=>{kf(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return As()<=le.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",Rs(t)),this.gs.getDocumentsMatchingQuery(e,t,go.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var IE="LocalStore",w$=3e8,DI=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new $e(se),this.Ms=new Rr(o=>gE(o),mE),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function T$(n,e,t,r){return new DI(n,e,t,r)}function uk(n,e){return _(this,null,function*(){let t=te(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=he();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:c}))})})})}function b$(n,e){let t=te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(c,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(N=>{let k=l.docVersions.get(D);be(k!==null,48541),N.version.compareTo(k)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=he();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function lk(n){let e=te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function S$(n,e){let t=te(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let c=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;c.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(At.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,k,O){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=w$?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(m,y,h)&&c.push(t.hi.updateTargetData(o,y))});let u=kr(),l=he();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(C$(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(re.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return P.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function C$(n,e,t){let r=he(),i=he();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=kr();return t.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):L(IE,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function D$(n,e){let t=te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=lE),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function A$(n,e){let t=te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new au(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function AI(n,e,t){return _(this,null,function*(){let r=te(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Qs(s))throw s;L(IE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function Z0(n,e,t){let r=te(n),i=re.min(),o=he();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=te(u),m=p.Ms.get(h);return m!==void 0?P.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)}(r,s,Jn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:re.min(),t?o:he())).next(c=>(R$(r,$B(e),c),{documents:c,qs:o})))}function R$(n,e,t){let r=n.xs.get(e)||re.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var ff=class{constructor(){this.activeTargetIds=KB()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var RI=class{constructor(){this.Fo=new ff,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ff,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var kI=class{xo(e){}shutdown(){}};var X0="ConnectivityMonitor",pf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){L(X0,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){L(X0,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var qh=null;function NI(){return qh===null?qh=function(){return 268435456+Math.round(2147483648*Math.random())}():qh++,"0x"+qh.toString(16)}var E_="RestConnection",k$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},xI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===ef?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=NI(),c=this.Go(e,t.toUriEncodedString());L(E_,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(c),h=ai(l);return this.jo(e,c,u,r,h).then(p=>(L(E_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw vi(E_,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=k$[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var PI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Dt="WebChannelConnection",MI=class extends xI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=NI();return new Promise((c,u)=>{let l=new g_;l.setWithCredentials(!0),l.listenOnce(m_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Gc.NO_ERROR:let p=l.getResponseJson();L(Dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case Gc.TIMEOUT:L(Dt,`RPC '${e}' ${s} timed out`),u(new j(x.DEADLINE_EXCEEDED,"Request time out"));break;case Gc.HTTP_ERROR:let m=l.getStatus();if(L(Dt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let D=y?.error;if(D&&D.status&&D.message){let N=function(O){let $=O.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf($)>=0?$:x.UNKNOWN}(D.status);u(new j(N,D.message))}else u(new j(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new j(x.UNAVAILABLE,"Connection failed."));break;default:W(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{L(Dt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);L(Dt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=NI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=__(),c=v_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");L(Dt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,D=new PI({Ho:k=>{y?L(Dt,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(m||(L(Dt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),L(Dt,`RPC '${e}' stream ${i} sending:`,k),p.send(k))},Yo:()=>p.close()}),N=(k,O,$)=>{k.listen(O,Z=>{try{$(Z)}catch(Ae){setTimeout(()=>{throw Ae},0)}})};return N(p,Ds.EventType.OPEN,()=>{y||(L(Dt,`RPC '${e}' stream ${i} transport opened.`),D.s_())}),N(p,Ds.EventType.CLOSE,()=>{y||(y=!0,L(Dt,`RPC '${e}' stream ${i} transport closed`),D.__(),this.I_(p))}),N(p,Ds.EventType.ERROR,k=>{y||(y=!0,vi(Dt,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),D.__(new j(x.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ds.EventType.MESSAGE,k=>{var O;if(!y){let $=k.data[0];be(!!$,16349);let Z=$,Ae=Z?.error||((O=Z[0])===null||O===void 0?void 0:O.error);if(Ae){L(Dt,`RPC '${e}' stream ${i} received error:`,Ae);let Rt=Ae.status,Se=function(E){let w=Ge[E];if(w!==void 0)return ek(w)}(Rt),T=Ae.message;Se===void 0&&(Se=x.INTERNAL,T="Unknown error status: "+Rt+" with message "+Ae.message),y=!0,D.__(new j(Se,T)),p.close()}else L(Dt,`RPC '${e}' stream ${i} received:`,$),D.a_($)}}),N(c,y_.STAT_EVENT,k=>{k.stat===$h.PROXY?L(Dt,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===$h.NOPROXY&&L(Dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.o_()},0),D}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function w_(){return typeof document<"u"?document:null}function Nf(n){return new tI(n,!0)}var gf=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var eR="PersistentStream",mf=class{constructor(e,t,r,i,o,s,c,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new gf(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(Cr(t.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new j(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return L(eR,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(L(eR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},OI=class extends mf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=c$(this.serializer,e),r=function(o){if(!("targetChange"in o))return re.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?re.min():s.readTime?Zn(s.readTime):re.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=oI(this.serializer),t.addTarget=function(o,s){let c,u=s.target;if(c=q_(u)?{documents:d$(o,u)}:{query:h$(o,u).Vt},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=tk(o,s.resumeToken);let l=nI(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(re.min())>0){c.readTime=uf(o,s.snapshotVersion.toTimestamp());let l=nI(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=p$(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=oI(this.serializer),t.removeTarget=e,this.k_(t)}},LI=class extends mf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=l$(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=oI(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>u$(this.serializer,r))};this.k_(t)}};var FI=class{},VI=class extends FI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new j(x.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,rI(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(x.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Jo(e,rI(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(x.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},jI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Cr(t),this._a=!1):L("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var _o="RemoteStore",UI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Eo(this)&&(L(_o,"Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=te(u);l.Ia.add(4),yield gu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield xf(l)})}(this))}))}),this.Aa=new jI(r,i)}};function xf(n){return _(this,null,function*(){if(Eo(n))for(let e of n.da)yield e(!0)})}function gu(n){return _(this,null,function*(){for(let e of n.da)yield e(!1)})}function dk(n,e){let t=te(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),bE(t)?TE(t):Ys(t).x_()&&wE(t,e))}function EE(n,e){let t=te(n),r=Ys(t);t.Ta.delete(e),r.x_()&&hk(t,e),t.Ta.size===0&&(r.x_()?r.B_():Eo(t)&&t.Aa.set("Unknown"))}function wE(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ys(n).H_(e)}function hk(n,e){n.Ra.$e(e),Ys(n).Y_(e)}function TE(n){n.Ra=new eI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ys(n).start(),n.Aa.aa()}function bE(n){return Eo(n)&&!Ys(n).M_()&&n.Ta.size>0}function Eo(n){return te(n).Ia.size===0}function fk(n){n.Ra=void 0}function N$(n){return _(this,null,function*(){n.Aa.set("Online")})}function x$(n){return _(this,null,function*(){n.Ta.forEach((e,t)=>{wE(n,e)})})}function P$(n,e){return _(this,null,function*(){fk(n),bE(n)?(n.Aa.la(e),TE(n)):n.Aa.set("Unknown")})}function M$(n,e,t){return _(this,null,function*(){if(n.Aa.set("Online"),e instanceof af&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ta.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ta.delete(c),i.Ra.removeTarget(c))})}(n,e)}catch(r){L(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield yf(n,r)}else if(e instanceof Ps?n.Ra.Ye(e):e instanceof sf?n.Ra.it(e):n.Ra.et(e),!t.isEqual(re.min()))try{let r=yield lk(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let c=o.Ra.Pt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(At.EMPTY_BYTE_STRING,h.snapshotVersion)),hk(o,u);let p=new au(h.target,u,l,h.sequenceNumber);wE(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){L(_o,"Failed to raise snapshot:",r),yield yf(n,r)}})}function yf(n,e,t){return _(this,null,function*(){if(!Qs(e))throw e;n.Ia.add(1),yield gu(n),n.Aa.set("Offline"),t||(t=()=>lk(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){L(_o,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield xf(n)}))})}function pk(n,e){return e().catch(t=>yf(n,t,e))}function Pf(n){return _(this,null,function*(){let e=te(n),t=Ii(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:lE;for(;O$(e);)try{let i=yield D$(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,L$(e,i)}catch(i){yield yf(e,i)}gk(e)&&mk(e)})}function O$(n){return Eo(n)&&n.Pa.length<10}function L$(n,e){n.Pa.push(e);let t=Ii(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function gk(n){return Eo(n)&&!Ii(n).M_()&&n.Pa.length>0}function mk(n){Ii(n).start()}function F$(n){return _(this,null,function*(){Ii(n).na()})}function V$(n){return _(this,null,function*(){let e=Ii(n);for(let t of n.Pa)e.X_(t.mutations)})}function j$(n,e,t){return _(this,null,function*(){let r=n.Pa.shift(),i=Y_.from(r,e,t);yield pk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Pf(n)})}function U$(n,e){return _(this,null,function*(){e&&Ii(n).Z_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return t$(s)&&s!==x.ABORTED}(i.code)){let o=r.Pa.shift();Ii(r).N_(),yield pk(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Pf(r)}})}(n,e)),gk(n)&&mk(n)})}function tR(n,e){return _(this,null,function*(){let t=te(n);t.asyncQueue.verifyOperationInProgress(),L(_o,"RemoteStore received new credentials");let r=Eo(t);t.Ia.add(3),yield gu(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield xf(t)})}function B$(n,e){return _(this,null,function*(){let t=te(n);e?(t.Ia.delete(2),yield xf(t)):e||(t.Ia.add(2),yield gu(t),t.Aa.set("Unknown"))})}function Ys(n){return n.Va||(n.Va=function(t,r,i){let o=te(t);return o.ia(),new OI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:N$.bind(null,n),e_:x$.bind(null,n),n_:P$.bind(null,n),J_:M$.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.Va.N_(),bE(n)?TE(n):n.Aa.set("Unknown")):(yield n.Va.stop(),fk(n))}))),n.Va}function Ii(n){return n.ma||(n.ma=function(t,r,i){let o=te(t);return o.ia(),new LI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:F$.bind(null,n),n_:U$.bind(null,n),ea:V$.bind(null,n),ta:j$.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.ma.N_(),yield Pf(n)):(yield n.ma.stop(),n.Pa.length>0&&(L(_o,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var BI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function SE(n,e){if(Cr("AsyncQueue",`${e}: ${n}`),Qs(n))return new j(x.UNAVAILABLE,`${e}: ${n}`);throw n}var vf=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||G.comparator(t.key,r.key):(t,r)=>G.comparator(t.key,r.key),this.keyedMap=Kc(),this.sortedSet=new $e(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var _f=class{constructor(){this.fa=new $e(G.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):W(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ws=class n{constructor(e,t,r,i,o,s,c,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,vf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var $I=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},HI=class{constructor(){this.queries=nR(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=te(t),o=i.queries;i.queries=nR(),o.forEach((s,c)=>{for(let u of c.wa)u.onError(r)})})(this,new j(x.ABORTED,"Firestore shutting down"))}};function nR(){return new Rr(n=>$R(n),Rf)}function $$(n,e){return _(this,null,function*(){let t=te(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new $I,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let c=SE(s,`Initialization of query '${Rs(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&CE(t)})}function H$(n,e){return _(this,null,function*(){let t=te(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function z$(n,e){let t=te(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.wa)c.Ca(i)&&(r=!0);s.ya=i}}r&&CE(t)}function q$(n,e,t){let r=te(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function CE(n){n.Da.forEach(e=>{e.next()})}var zI,rR;(rR=zI||(zI={})).Fa="default",rR.Cache="cache";var qI=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ws(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==zI.Cache}};var If=class{constructor(e){this.key=e}},Ef=class{constructor(e){this.key=e}},WI=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=he(),this.mutatedKeys=he(),this.Xa=HR(e),this.eu=new vf(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new _f,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=kf(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),k=!1;m&&y?m.data.isEqual(y.data)?D!==N&&(r.track({type:3,doc:y}),k=!0):this.iu(m,y)||(r.track({type:2,doc:y}),k=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),k=!0):m&&!y&&(r.track({type:1,doc:m}),k=!0,(u||l)&&(c=!0)),k&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:c,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,D){let N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{At:k})}};return N(y)-N(D)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let c=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Ws(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new _f,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=he(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Ef(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new If(r))}),t}uu(e){this.Ha=e.qs,this.Za=he();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ws.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},DE="SyncEngine",GI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},KI=class{constructor(e){this.key=e,this.lu=!1}},QI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Rr(c=>$R(c),Rf),this.Tu=new Map,this.Iu=new Set,this.du=new $e(G.comparator),this.Eu=new Map,this.Au=new uu,this.Ru={},this.Vu=new Map,this.mu=cu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function W$(n,e,t=!0){return _(this,null,function*(){let r=wk(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield yk(r,e,t,!0),i})}function G$(n,e){return _(this,null,function*(){let t=wk(n);yield yk(t,e,!0,!1)})}function yk(n,e,t,r){return _(this,null,function*(){let i=yield A$(n.localStore,Jn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield K$(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&dk(n.remoteStore,i),c})}function K$(n,e,t,r,i){return _(this,null,function*(){n.gu=(p,m,y)=>function(N,k,O,$){return _(this,null,function*(){let Z=k.view.nu(O);Z.Ds&&(Z=yield Z0(N.localStore,k.query,!1).then(({documents:T})=>k.view.nu(T,Z)));let Ae=$&&$.targetChanges.get(k.targetId),Rt=$&&$.targetMismatches.get(k.targetId)!=null,Se=k.view.applyChanges(Z,N.isPrimaryClient,Ae,Rt);return oR(N,k.targetId,Se._u),Se.snapshot})}(n,p,m,y);let o=yield Z0(n.localStore,e,!0),s=new WI(e,o.qs),c=s.nu(o.documents),u=su.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(c,n.isPrimaryClient,u);oR(n,t,l._u);let h=new GI(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function Q$(n,e,t){return _(this,null,function*(){let r=te(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Rf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield AI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&EE(r.remoteStore,i.targetId),YI(r,i.targetId)}).catch(Ks))):(YI(r,i.targetId),yield AI(r.localStore,i.targetId,!0))})}function Y$(n,e){return _(this,null,function*(){let t=te(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),EE(t.remoteStore,r.targetId))})}function J$(n,e,t){return _(this,null,function*(){let r=iH(n);try{let i=yield function(s,c){let u=te(s),l=Ye.now(),h=c.reduce((y,D)=>y.add(D.key),he()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=kr(),N=he();return u.Os.getEntries(y,h).next(k=>{D=k,D.forEach((O,$)=>{$.isValidDocument()||(N=N.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(k=>{p=k;let O=[];for(let $ of c){let Z=e$($,p.get($.key).overlayedDocument);Z!=null&&O.push(new Nr($.key,Z,LR(Z.value.mapValue),ho.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,c)}).next(k=>{m=k;let O=k.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,k.batchId,O)})}).then(()=>({batchId:m.batchId,changes:qR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new $e(se)),l=l.insert(c,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,t),yield mu(r,i.changes),yield Pf(r.remoteStore)}catch(i){let o=SE(i,"Failed to persist write");t.reject(o)}})}function vk(n,e){return _(this,null,function*(){let t=te(n);try{let r=yield S$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?be(s.lu,14607):i.removedDocuments.size>0&&(be(s.lu,42227),s.lu=!1))}),yield mu(t,r,e)}catch(r){yield Ks(r)}})}function iR(n,e,t){let r=te(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let u=te(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(c)&&(l=!0)}),l&&CE(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Z$(n,e,t){return _(this,null,function*(){let r=te(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new $e(G.comparator);s=s.insert(o,Dn.newNoDocument(o,re.min()));let c=he().add(o),u=new of(re.min(),new Map,new $e(se),s,c);yield vk(r,u),r.du=r.du.remove(o),r.Eu.delete(e),AE(r)}else yield AI(r.localStore,e,!1).then(()=>YI(r,e,t)).catch(Ks)})}function X$(n,e){return _(this,null,function*(){let t=te(n),r=e.batch.batchId;try{let i=yield b$(t.localStore,e);Ik(t,r,null),_k(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield mu(t,i)}catch(i){yield Ks(i)}})}function eH(n,e,t){return _(this,null,function*(){let r=te(n);try{let i=yield function(s,c){let u=te(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(be(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);Ik(r,e,t),_k(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield mu(r,i)}catch(i){yield Ks(i)}})}function _k(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function Ik(n,e,t){let r=te(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function YI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||Ek(n,r)})}function Ek(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(EE(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),AE(n))}function oR(n,e,t){for(let r of t)r instanceof If?(n.Au.addReference(r.key,e),tH(n,r)):r instanceof Ef?(L(DE,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||Ek(n,r.key)):W(19791,{yu:r})}function tH(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(L(DE,"New document in limbo: "+t),n.Iu.add(r),AE(n))}function AE(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new G(ze.fromString(e)),r=n.mu.next();n.Eu.set(r,new KI(t)),n.du=n.du.insert(t,r),dk(n.remoteStore,new au(Jn(yE(t.path)),r,"TargetPurposeLimboResolution",uE.ue))}}function mu(n,e,t){return _(this,null,function*(){let r=te(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=bI.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(u,l){return _(this,null,function*(){let h=te(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Qs(p))throw p;L(IE,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),D=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(D);h.Fs=h.Fs.insert(m,N)}}})}(r.localStore,o))})}function nH(n,e){return _(this,null,function*(){let t=te(n);if(!t.currentUser.isEqual(e)){L(DE,"User change. New user:",e.toKey());let r=yield uk(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(c=>{c.forEach(u=>{u.reject(new j(x.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield mu(t,r.Bs)}})}function rH(n,e){let t=te(n),r=t.Eu.get(e);if(r&&r.lu)return he().add(r.key);{let i=he(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let c=t.Pu.get(s);i=i.unionWith(c.view.tu)}return i}}function wk(n){let e=te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z$.bind(null,e),e.hu.J_=z$.bind(null,e.eventManager),e.hu.pu=q$.bind(null,e.eventManager),e}function iH(n){let e=te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eH.bind(null,e),e}var Tk=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=Nf(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return T$(this.persistence,new CI,t.initialUser,this.serializer)}Du(t){return new df(TI.Vi,this.serializer)}bu(t){return new RI}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),JI=class extends Tk{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){be(this.persistence.referenceDelegate instanceof hf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new lI(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new df(r=>hf.Vi(r,t),this.serializer)}};var oH=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>iR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nH.bind(null,this.syncEngine),yield B$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new HI}()}createDatastore(t){let r=Nf(t.databaseInfo.databaseId),i=function(s){return new MI(s)}(t.databaseInfo);return function(s,c,u,l){return new VI(s,c,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,c,u){return new UI(i,o,s,c,u)}(this.localStore,this.datastore,t.asyncQueue,r=>iR(this.syncEngine,r,0),function(){return pf.C()?new pf:new kI}())}createSyncEngine(t,r){return function(o,s,c,u,l,h,p){let m=new QI(o,s,c,u,l,h);return p&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield function(o){return _(this,null,function*(){let s=te(o);L(_o,"RemoteStore shutting down."),s.Ia.add(5),yield gu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var ZI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Cr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ei="FirestoreClient",XI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vt.UNAUTHENTICATED,this.clientId=eu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){L(Ei,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(L(Ei,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=SE(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function T_(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),L(Ei,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield uk(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{vi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{L("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{vi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function sR(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield sH(n);L(Ei,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>tR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>tR(e.remoteStore,i)),n._onlineComponents=e})}function sH(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){L(Ei,"Using user provided OfflineComponentProvider");try{yield T_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;vi("Error using user provided cache. Falling back to memory cache: "+t),yield T_(n,new Tk)}}else L(Ei,"Using default OfflineComponentProvider"),yield T_(n,new JI(void 0));return n._offlineComponents})}function bk(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(L(Ei,"Using user provided OnlineComponentProvider"),yield sR(n,n._uninitializedComponentsProvider._online)):(L(Ei,"Using default OnlineComponentProvider"),yield sR(n,new oH))),n._onlineComponents})}function aH(n){return bk(n).then(e=>e.syncEngine)}function cH(n){return _(this,null,function*(){let e=yield bk(n),t=e.eventManager;return t.onListen=W$.bind(null,e.syncEngine),t.onUnlisten=Q$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=G$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Y$.bind(null,e.syncEngine),t})}function uH(n,e,t={}){let r=new Qn;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,c,u,l){let h=new ZI({next:m=>{h.Ou(),s.enqueueAndForget(()=>H$(o,p));let y=m.docs.has(c);!y&&m.fromCache?l.reject(new j(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new j(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new qI(yE(c.path),h,{includeMetadataChanges:!0,ka:!0});return $$(o,p)}(yield cH(n),n.asyncQueue,e,t,r)})),r.promise}function Sk(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var aR=new Map;var Ck="firestore.googleapis.com",cR=!0,wf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ck,this.ssl=cR}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:cR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ck;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I$)throw new j(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},lu=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new b_;switch(r.type){case"firstParty":return new A_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=aR.get(t);r&&(L("ComponentProvider","Removing Datastore"),aR.delete(t),r.terminate())}(this),Promise.resolve()}};function Dk(n,e,t,r={}){var i;n=tu(n,lu);let o=ai(e),s=n._getSettings(),c=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(ph(`https://${u}`),gh("Firestore",!0)),s.host!==Ck&&s.host!==u&&vi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Hn(l,c)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=vt.MOCK_USER;else{h=zD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new j(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new vt(m)}n._authCredentials=new S_(new Qh(h,p))}}var eE=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ft=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new du(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(pu(t,n._jsonSchema))return new n(e,r||null,new G(ze.fromString(t.referencePath)))}};Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:Qe("string",Ft._jsonSchemaVersion),referencePath:Qe("string")};var du=class n extends eE{constructor(e,t,r){super(e,t,yE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new G(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ak(n,e,...t){if(n=Ot(n),arguments.length===1&&(e=eu.newId()),mB("doc","path",e),n instanceof lu){let r=ze.fromString(e,...t);return D0(r),new Ft(n,null,new G(r))}{if(!(n instanceof Ft||n instanceof du))throw new j(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ze.fromString(e,...t));return D0(r),new Ft(n.firestore,n instanceof du?n.converter:null,new G(r))}}var uR="AsyncQueue",Tf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new gf(this,"async_queue_retry"),this.oc=()=>{let r=w_();r&&L(uR,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=w_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=w_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Qn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Qs(e))throw e;L(uR,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Cr("INTERNAL UNHANDLED ERROR: ",lR(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=BI.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&W(47125,{hc:lR(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function lR(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var hu=class extends lu{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Tf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Tf(e),this._firestoreClient=void 0,yield e}})}};function Rk(n,e){let t=typeof n=="object"?n:to(),r=typeof n=="string"?n:e||ef,i=Es(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=HD("firestore");o&&Dk(i,...o)}return i}function kk(n){if(n._terminated)throw new j(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||lH(n),n._firestoreClient}function lH(n){var e,t,r;let i=n._freezeSettings(),o=function(c,u,l,h){return new P_(c,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Sk(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new XI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(n._componentsProvider))}var gi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(At.fromBase64String(e))}catch(t){throw new j(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};gi._jsonSchemaVersion="firestore/bytes/1.0",gi._jsonSchema={type:Qe("string",gi._jsonSchemaVersion),bytes:Qe("string")};var fu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new j(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var bf=class{constructor(e){this._methodName=e}};var mi=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(pu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};mi._jsonSchemaVersion="firestore/geoPoint/1.0",mi._jsonSchema={type:Qe("string",mi._jsonSchemaVersion),latitude:Qe("number"),longitude:Qe("number")};var yi=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new j(x.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:Qe("string",yi._jsonSchemaVersion),vectorValues:Qe("object")};var dH=/^__.*__$/,tE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Nr(e,this.data,this.fieldMask,t,this.fieldTransforms):new vo(e,this.data,t,this.fieldTransforms)}};function Nk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{Ec:n})}}var nE=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Sf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Nk(this.Ec)&&dH.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},rE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Nf(e)}Dc(e,t,r,i=!1){return new nE({Ec:e,methodName:t,bc:r,path:rn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function hH(n){let e=n._freezeSettings(),t=Nf(n._databaseId);return new rE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fH(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);Ok("Data must be an object, but it was:",s,r);let c=Pk(r,s),u,l;if(o.merge)u=new Kn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=pH(e,p,t);if(!s.contains(m))throw new j(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);mH(h,m)||h.push(m)}u=new Kn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new tE(new Cn(c),u,l)}function xk(n,e){if(Mk(n=Ot(n)))return Ok("Unsupported field value:",e,n),Pk(n,e);if(n instanceof bf)return function(r,i){if(!Nk(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let u=xk(c,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ye.fromDate(r);return{timestampValue:uf(i.serializer,o)}}if(r instanceof Ye){let o=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uf(i.serializer,o)}}if(r instanceof mi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gi)return{bytesValue:tk(i.serializer,r._byteString)};if(r instanceof Ft){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:_E(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yi)return function(s,c){return{mapValue:{fields:{[hE]:{stringValue:fE},[Ls]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.wc("VectorValues must only contain numeric values.");return vE(c.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${cE(r)}`)}(n,e)}function Pk(n,e){let t={};return AR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(n,(r,i)=>{let o=xk(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Mk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ye||n instanceof mi||n instanceof gi||n instanceof Ft||n instanceof bf||n instanceof yi)}function Ok(n,e,t){if(!Mk(t)||!fR(t)){let r=cE(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function pH(n,e,t){if((e=Ot(e))instanceof fu)return e._internalPath;if(typeof e=="string")return Lk(n,e);throw Sf("Field path arguments must be of type string or ",n,!1,void 0,t)}var gH=new RegExp("[~\\*/\\[\\]]");function Lk(n,e,t){if(e.search(gH)>=0)throw Sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fu(...e.split("."))._internalPath}catch{throw Sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new j(x.INVALID_ARGUMENT,c+n+u)}function mH(n,e){return n.some(t=>t.isEqual(e))}var Cf=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new iE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Fk("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},iE=class extends Cf{data(){return super.data()}};function Fk(n,e){return typeof e=="string"?Lk(n,e):e instanceof fu?e._internalPath:e._delegate._internalPath}var oE=class{convertValue(e,t="none"){switch(_i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ar(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw W(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Io(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ls].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Le(s.doubleValue));return new yi(o)}convertGeoPoint(e){return new mi(Le(e.latitude),Le(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Af(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){let t=Dr(e);return new Ye(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ze.fromString(e);be(ak(r),9688,{name:e});let i=new tf(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(t)||Cr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function yH(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var lo=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},fo=class n extends Cf{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ms(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Fk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new j(x.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};fo._jsonSchemaVersion="firestore/documentSnapshot/1.0",fo._jsonSchema={type:Qe("string",fo._jsonSchemaVersion),bundleSource:Qe("string","DocumentSnapshot"),bundleName:Qe("string"),bundle:Qe("string")};var Ms=class extends fo{data(e={}){return super.data(e)}},Xc=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ms(this._firestore,this._userDataWriter,r.key,r,new lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new Ms(i._firestore,i._userDataWriter,c.doc.key,c.doc,new lo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new Ms(i._firestore,i._userDataWriter,c.doc.key,c.doc,new lo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:vH(c.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new j(x.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=eu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function vH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:n})}}function Vk(n){n=tu(n,Ft);let e=tu(n.firestore,hu);return uH(kk(e),n._key).then(t=>IH(e,n,t))}Xc._jsonSchemaVersion="firestore/querySnapshot/1.0",Xc._jsonSchema={type:Qe("string",Xc._jsonSchemaVersion),bundleSource:Qe("string","QuerySnapshot"),bundleName:Qe("string"),bundle:Qe("string")};var sE=class extends oE{constructor(e){super(),this.firestore=e}convertBytes(e){return new gi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,t)}};function jk(n,e,t){n=tu(n,Ft);let r=tu(n.firestore,hu),i=yH(n.converter,e,t);return _H(r,[fH(hH(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ho.none())])}function _H(n,e){return function(r,i){let o=new Qn;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return J$(yield aH(r),i,o)})),o.promise}(kk(n),e)}function IH(n,e,t){let r=t.docs.get(e._key),i=new sE(n);return new fo(n,i,e._key,r,new lo(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Gs=i})(ui),Tn(new Lt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new hu(new C_(r.getProvider("auth-internal")),new R_(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tf(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Be(T0,b0,e),Be(T0,b0,"esm2017")})();var xr=class{constructor(e){return e}},Uk="firestore",RE=class{constructor(){return Ts(Uk)}};var kE=new B("angularfire2.firestore-instances");function EH(n,e){let t=Oc(Uk,n,e);return t&&new xr(t)}function wH(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new xr(r)}}var TH={provide:RE,deps:[[new Yt,kE]]},bH={provide:xr,useFactory:EH,deps:[[new Yt,kE],Ir]};function Bk(n,...e){return Be("angularfire",li.full,"fst"),Wt([bH,TH,{provide:kE,useFactory:wH(n),multi:!0,deps:[Ce,lt,di,ro,[new Yt,Wc],[new Yt,bs],...e]}])}var Js=nn(Ak,!0,2);var Mf=nn(Vk,!0);var $k=nn(Rk,!0);var Of=nn(jk,!0,2);var Lf=class n{constructor(e,t){this.firestore=e;this.authService=t}saveCheckedStates(e){return _(this,null,function*(){let t=this.authService.currentUser();if(t){let r=Js(this.firestore,`alfabetoStates/${t.uid}`);yield Of(r,{checkedStates:e,updatedAt:new Date}),console.log("Estados do alfabeto salvos no Firestore para",t.displayName)}else sessionStorage.setItem("checkedStates",JSON.stringify(e)),console.log("Estados do alfabeto salvos no SessionStorage")})}getCheckedStates(){return _(this,null,function*(){let e=this.authService.currentUser();if(e){let t=Js(this.firestore,`alfabetoStates/${e.uid}`),r=yield Mf(t);return r.exists()?(console.log("Estados do alfabeto recuperados do Firestore para",e.displayName),r.data().checkedStates||{}):(console.log("Nenhum estado de alfabeto encontrado no Firestore para",e.displayName),{})}else{let t=sessionStorage.getItem("checkedStates");return t?(console.log("Estados do alfabeto recuperados do SessionStorage"),JSON.parse(t)):(console.log("Nenhum estado de alfabeto encontrado no SessionStorage"),{})}})}static \u0275fac=function(t){return new(t||n)(Y(xr),Y(ln))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};function SH(n,e){if(n&1){let t=it();z(0,"app-alfabeto-tab-button",7),De("tabClicked",function(){let i=je(t).$implicit,o=Ee();return o.setActiveTab(i.id),Ue(o.resetGroup())}),Q()}if(n&2){let t=e.$implicit,r=Ee();xe("texto",gt(t.text))("isActive",r.activeTabIndex===t.id)}}function CH(n,e){if(n&1){let t=it();z(0,"app-group-tab-button",7),De("tabClicked",function(){let i=je(t).$implicit,o=Ee();return Ue(o.setActiveGroup(i.id))}),Q()}if(n&2){let t=e.$implicit,r=Ee();xe("texto",gt(t.text))("isActive",r.activeGroupIndex===t.id)}}function DH(n,e){if(n&1){let t=it();z(0,"app-tab-hiragana",8),De("checkedChange",function(i){je(t);let o=Ee();return Ue(o.onCheckedChange(i.kana,i.checked))}),Q()}if(n&2){let t=Ee();xe("group",t.activeGroupIndex)("checkedStates",t.checkedStates)}}function AH(n,e){if(n&1){let t=it();z(0,"app-tab-katakana",8),De("checkedChange",function(i){je(t);let o=Ee();return Ue(o.onCheckedChange(i.kana,i.checked))}),Q()}if(n&2){let t=Ee();xe("group",t.activeGroupIndex)("checkedStates",t.checkedStates)}}function RH(n,e){if(n&1){let t=it();z(0,"app-tab-hiragana",8),De("checkedChange",function(i){je(t);let o=Ee();return Ue(o.onCheckedChange(i.kana,i.checked))}),Q(),z(1,"app-tab-katakana",8),De("checkedChange",function(i){je(t);let o=Ee();return Ue(o.onCheckedChange(i.kana,i.checked))}),Q()}if(n&2){let t=Ee();xe("group",t.activeGroupIndex)("checkedStates",t.checkedStates),U(),xe("group",t.activeGroupIndex)("checkedStates",t.checkedStates)}}var Ff=class n{activeTabIndex=0;activeGroupIndex=0;groupList=[];tabsList=[];checkedStates={};totalChecked=0;groupService=R(ii);tabService=R(sh);alfabetoStateService=R(Lf);authService=R(ln);cdr=R(Dd);ngOnInit(){this.groupList=this.groupService.getAll(),this.tabsList=this.tabService.getAll(),this.authService.currentUser$.subscribe(()=>{this.loadCheckedStates()})}loadCheckedStates(){this.alfabetoStateService.getCheckedStates().then(e=>{this.checkedStates=e,this.updateTotalChecked(),this.cdr.markForCheck()})}setActiveTab(e){this.activeTabIndex=e}setActiveGroup(e){this.activeGroupIndex=e}resetGroup(){this.activeGroupIndex=0}onCheckedChange(e,t){this.checkedStates[e]=t,this.updateTotalChecked(),this.saveCheckedStates()}updateTotalChecked(){this.totalChecked=Object.values(this.checkedStates).filter(e=>e).length}saveCheckedStates(){console.log("Salvando estados do alfabeto:",this.checkedStates),this.alfabetoStateService.saveCheckedStates(this.checkedStates)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-alfabeto-page"]],outputs:{totalChecked:"totalChecked"},decls:12,vars:2,consts:[[1,"page"],[1,"tabSelect"],[3,"texto","isActive"],[1,"groupSelect"],[1,"flashcards"],[3,"group","checkedStates"],[3,"totalChecked"],[3,"tabClicked","texto","isActive"],[3,"checkedChange","group","checkedStates"]],template:function(t,r){if(t&1&&(z(0,"section",0)(1,"div",1),Vn(2,SH,1,3,"app-alfabeto-tab-button",2,is),Q(),z(4,"div",3),Vn(5,CH,1,3,"app-group-tab-button",2,is),Q(),z(7,"div",4),Ln(8,DH,1,2,"app-tab-hiragana",5)(9,AH,1,2,"app-tab-katakana",5)(10,RH,2,4),Q(),rt(11,"app-progress-bar",6),Q()),t&2){let i;U(2),jn(r.tabsList),U(3),jn(r.groupList),U(3),Fn((i=r.activeTabIndex)===1?8:i===2?9:10),U(3),xe("totalChecked",r.totalChecked)}},dependencies:[ih,oh,ch,uh,lh],styles:[".page[_ngcontent-%COMP%]{background-color:#fff;margin:2em auto;border-radius:15px;display:flex;flex-direction:column;padding:2em;gap:2em;max-width:1400px;box-shadow:0 10px 40px #fff9}.tabSelect[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:2em;justify-content:center}.groupSelect[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:0 10em}.sectionFlashCards[_ngcontent-%COMP%]{padding:0}.flashcards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}"],changeDetection:0})};var Vf=class n{altText="";status="neutral";disabled=!1;respostaSelecionada=new ve;classe="option-btn";emiteResposta(){this.disabled||this.respostaSelecionada.emit(this.altText)}ngOnChanges(e){this.classe="option-btn",this.status==="correct"?this.classe+=" correct":this.status==="incorrect"&&(this.classe+=" incorrect")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-option-button"]],inputs:{altText:"altText",status:"status",disabled:"disabled"},outputs:{respostaSelecionada:"respostaSelecionada"},features:[Jt],decls:2,vars:4,consts:[[3,"click","disabled"]],template:function(t,r){t&1&&(me(0,"button",0),We("click",function(){return r.emiteResposta()}),q(1),Ie()),t&2&&(Gi(r.classe),gr("disabled",r.disabled),U(),_n(" ",r.altText,`
`))},styles:[".option-btn[_ngcontent-%COMP%]{padding:20px;border:none;border-radius:15px;background:#e0e0e0;font-size:1.5rem;font-weight:700;cursor:pointer;transition:all .3s;width:100%}.option-btn[_ngcontent-%COMP%]:hover{background:#d0d0d0;transform:translateY(-3px)}.option-btn.correct[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.option-btn.incorrect[_ngcontent-%COMP%]{background:#f44336;color:#fff}"]})};var jf=class n{constructor(e,t){this.firestore=e;this.authService=t}saveScore(e,t,r,i=null,o=!1){return _(this,null,function*(){let s=this.authService.currentUser();s||(console.warn("Usu\xE1rio n\xE3o encontrado de imediato. Tentando aguardar auth..."),yield new Promise(u=>setTimeout(u,500)),s=this.authService.currentUser());let c={correct:e,wrong:t,total:r,lastQuestion:i,modoEscrita:o,updatedAt:new Date};if(s){let u=Js(this.firestore,`scores/${s.uid}`);yield Of(u,F({uid:s.uid,displayName:s.displayName},c)),console.log("Score salvo no Firestore para",s.displayName)}else sessionStorage.setItem("quizScore",JSON.stringify(c)),console.log("Score salvo no SessionStorage")})}getScore(){return _(this,null,function*(){let e=this.authService.currentUser();if(e||(console.warn("Usu\xE1rio n\xE3o encontrado de imediato para getScore. Tentando aguardar auth..."),yield new Promise(t=>setTimeout(t,500)),e=this.authService.currentUser()),e){let t=Js(this.firestore,`scores/${e.uid}`),r=yield Mf(t);return r.exists()?(console.log("Score recuperado com sucesso do Firestore para",e.displayName),r.data()):(console.log("Nenhum score encontrado para",e.displayName),null)}else{let t=sessionStorage.getItem("quizScore");return t?(console.log("Score recuperado do SessionStorage"),JSON.parse(t)):(console.log("Nenhum score encontrado no SessionStorage"),null)}})}static \u0275fac=function(t){return new(t||n)(Y(xr),Y(ln))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var kH=["inputResp"],Uf=class n{enterPress=new ve;status="";readonly=!1;valor="";inputResp;classe="input-resp";onKeyUpEnter(e){this.enterPress.emit(e)}ngOnChanges(e){(e.status||e.valor)&&(this.classe="input-resp",this.status==="correct"?this.classe+=" correct":this.status==="incorrect"&&(this.classe+=" incorrect"),this.inputResp&&setTimeout(()=>{this.inputResp.nativeElement.value=this.valor??""},50))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-input-resp"]],viewQuery:function(t,r){if(t&1&&cy(kH,5),t&2){let i;uy(i=ly())&&(r.inputResp=i.first)}},inputs:{status:"status",readonly:"readonly",valor:"valor"},outputs:{enterPress:"enterPress"},features:[Jt],decls:5,vars:5,consts:[["inputResp",""],[1,"input-container"],["type","text",3,"keyup.enter","readonly","value"],[1,"send-resp",3,"click","disabled"]],template:function(t,r){if(t&1){let i=it();me(0,"div",1)(1,"input",2,0),We("keyup.enter",function(){je(i);let s=wd(2);return Ue(r.onKeyUpEnter(s.value))}),Ie(),me(3,"button",3),We("click",function(){je(i);let s=wd(2);return Ue(r.onKeyUpEnter(s.value))}),q(4,"OK"),Ie()()}t&2&&(U(),Gi(r.classe),gr("readOnly",r.readonly)("value",r.valor),U(2),gr("disabled",r.readonly))},styles:[".input-resp[_ngcontent-%COMP%]{border-radius:10px;width:20%;max-height:40px;font-size:2rem;text-align:center;border:solid 1px rgba(0,0,0,.3);box-shadow:5px 5px #0003;padding:1em}.input-container[_ngcontent-%COMP%]{margin:3em 0 0;display:flex;justify-content:center;gap:2em}.input-resp.correct[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.input-resp.incorrect[_ngcontent-%COMP%]{background:#f44336;color:#fff}.send-resp[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:50px;background:#1a2a6c;color:#fff;font-size:1rem;font-weight:700;cursor:pointer;transition:all .3s;align-items:center;box-shadow:0 5px 10px #0000004d}.send-resp[_ngcontent-%COMP%]:hover{background:#0d1a4a;transform:translateY(-3px)}"]})};function NH(n,e){if(n&1){let t=it();z(0,"app-option-button",20),De("respostaSelecionada",function(i){je(t);let o=Ee(2);return Ue(o.verificaResposta(i))}),Q()}if(n&2){let t=e.$implicit,r=Ee(2);xe("altText",t)("status",r.getStatus(t))("disabled",!!r.selectedAnswer)}}function xH(n,e){if(n&1&&(z(0,"div",5),Vn(1,NH,1,3,"app-option-button",19,is),Q()),n&2){let t=Ee();U(),jn(t.alternativas)}}function PH(n,e){if(n&1){let t=it();z(0,"app-input-resp",21),De("enterPress",function(i){je(t);let o=Ee();return Ue(o.onEnterPress(i))}),Q()}if(n&2){let t=Ee();xe("valor",t.selectedAnswer??"")("readonly",!!t.selectedAnswer)("status",t.statusInput)}}var Bf=class n{question="";correctAnswer="";alternativas=[];corretas=0;erradas=0;perguntasTotais=0;modoEscrita=!1;statusInput="";selectedAnswer=null;hiraganaService=R(oi);katakanaService=R(si);scoreService=R(jf);authService=R(ln);ngOnInit(){this.authService.currentUser$.subscribe(()=>{this.loadScore()})}loadScore(){this.scoreService.getScore().then(e=>{e?(this.corretas=e.correct,this.erradas=e.wrong,this.perguntasTotais=e.total,this.modoEscrita=e.modoEscrita??!1,e.lastQuestion?this.restoreQuestion(e.lastQuestion):this.novaPergunta()):this.novaPergunta()})}resetQuiz(){this.corretas=0,this.erradas=0,this.perguntasTotais=0,this.novaPergunta(),this.salvaEstado()}novaPergunta(){let e=this.geraNovoCaracter();this.question=e.kana,this.correctAnswer=e.romaji,this.alternativas=this.geraAlternativas(e.romaji),this.selectedAnswer=null,this.statusInput="",this.perguntasTotais++,this.salvaEstado()}restoreQuestion(e){this.question=e.question,this.correctAnswer=this.hiraganaService.getByKana(this.question)?.romaji??this.katakanaService.getByKana(this.question)?.romaji??(()=>{throw new Error(`Kana "${this.question}" n\xE3o encontrado.`)})(),this.alternativas=e.alternativas,this.selectedAnswer=e.selectedAnswer??null,this.selectedAnswer?this.statusInput=this.selectedAnswer===this.correctAnswer?"correct":"incorrect":this.statusInput=""}geraNovoCaracter(){let t=Math.random()<.5?this.hiraganaService.getRandom():this.katakanaService.getRandom();return{kana:t.kana,romaji:t.romaji}}geraAlternativas(e){let t=[...this.hiraganaService.getAll(),...this.katakanaService.getAll()],r=new Set([e]);for(;r.size<4;)r.add(t[Math.floor(Math.random()*t.length)].romaji);return Array.from(r).sort(()=>Math.random()-.5)}verificaResposta(e){this.selectedAnswer||(this.selectedAnswer=e,e===this.correctAnswer?(this.corretas++,this.statusInput="correct"):(this.erradas++,this.statusInput="incorrect"),this.salvaEstado())}verificaRespostaTexto(e){this.verificaResposta(e)}onEnterPress(e){this.selectedAnswer?this.novaPergunta():this.verificaRespostaTexto(e)}getStatus(e){return this.selectedAnswer?e===this.correctAnswer?"correct":e===this.selectedAnswer?"incorrect":"neutral":"neutral"}salvaEstado(){let e={question:this.question,alternativas:this.alternativas,selectedAnswer:this.selectedAnswer};this.scoreService.saveScore(this.corretas,this.erradas,this.perguntasTotais,e,this.modoEscrita)}alterarModo(){this.modoEscrita=!this.modoEscrita,this.salvaEstado()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-quiz-page"]],decls:36,vars:7,consts:[[1,"page"],["id","quiz",1,"tab-content"],[1,"quiz-container"],[1,"question-container"],[1,"question-kana"],[1,"options-container"],[3,"valor","readonly","status"],[1,"quiz-controls"],[1,"quiz-btn",3,"click","disabled"],[1,"fas","fa-arrow-right"],[1,"quiz-btn","secondary",3,"click"],[1,"fas","fa-redo"],[1,"quiz-btn","mode",3,"click","disabled"],[1,"fa","fa-arrows-rotate"],[1,"stats"],[1,"stat-box"],[1,"fas","fa-check-circle"],[1,"fas","fa-times-circle"],[1,"fas","fa-question-circle"],[3,"altText","status","disabled"],[3,"respostaSelecionada","altText","status","disabled"],[3,"enterPress","valor","readonly","status"]],template:function(t,r){t&1&&(z(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),q(5,"Qual \xE9 a romaniza\xE7\xE3o deste caractere?"),Q(),z(6,"div",4),q(7),Q()(),Ln(8,xH,3,0,"div",5)(9,PH,1,3,"app-input-resp",6),z(10,"div",7)(11,"button",8),De("click",function(){return r.novaPergunta()}),q(12," Pr\xF3xima Pergunta "),rt(13,"i",9),Q(),z(14,"button",10),De("click",function(){return r.resetQuiz()}),q(15," Reiniciar Quiz "),rt(16,"i",11),Q(),z(17,"button",12),De("click",function(){return r.alterarModo()}),q(18," Alterar Modo"),rt(19,"i",13),Q()(),z(20,"div",14)(21,"div",15),rt(22,"i",16),q(23," Acertos: "),z(24,"span"),q(25),Q()(),z(26,"div",15),rt(27,"i",17),q(28," Erros: "),z(29,"span"),q(30),Q()(),z(31,"div",15),rt(32,"i",18),q(33," Perguntas: "),z(34,"span"),q(35),Q()()()()()()),t&2&&(U(7),ot(r.question),U(),Fn(r.modoEscrita?9:8),U(3),xe("disabled",!r.selectedAnswer),U(6),xe("disabled",r.selectedAnswer),U(8),ot(r.corretas),U(5),ot(r.erradas),U(5),ot(r.perguntasTotais))},dependencies:[Vf,Uf],styles:[".page[_ngcontent-%COMP%]{background-color:#fff;margin:2em auto;border-radius:15px;display:flex;flex-direction:column;padding:2em;gap:2em;max-width:1400px;box-shadow:0 10px 40px #fff9}.quiz-container[_ngcontent-%COMP%]{text-align:center;padding:20px}.quiz-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700}.question-container[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:40px;box-shadow:0 10px 20px #0000001a;margin-bottom:30px;position:relative}.question-kana[_ngcontent-%COMP%]{font-size:8rem;margin:30px 0;color:#1a2a6c;font-family:Noto Sans JP,sans-serif;text-shadow:0 5px 5px}.options-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1.5em;margin-top:30px}.quiz-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin:3em 0 2em}.quiz-btn[_ngcontent-%COMP%]{padding:15px 40px;border:none;border-radius:50px;background:#1a2a6c;color:#fff;font-size:1.2rem;font-weight:700;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:10px;box-shadow:0 5px 10px #0000004d}.quiz-btn[_ngcontent-%COMP%]:disabled{background:#ccc;color:#666;cursor:not-allowed;box-shadow:none;opacity:.6;transform:none}.quiz-btn[_ngcontent-%COMP%]:hover{background:#0d1a4a;transform:translateY(-3px)}.quiz-btn.secondary[_ngcontent-%COMP%]{background:#fdbb2d;color:#333}.stats[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:20px;font-size:1.2rem;font-weight:700;color:#1a2a6c;flex-wrap:wrap;gap:15px}.stat-box[_ngcontent-%COMP%]{background:#1a2a6c1a;padding:15px 30px;border-radius:15px;min-width:150px}"]})};var $f=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-kanji-page"]],decls:1,vars:0,consts:[[1,"page"]],template:function(t,r){t&1&&pt(0,"section",0)},styles:[".page[_ngcontent-%COMP%]{background-color:#fff;margin:2em auto;border-radius:15px;display:flex;flex-direction:column;padding:2em;gap:2em;max-width:1400px;box-shadow:0 10px 40px #fff9}"]})};function MH(n,e){if(n&1){let t=it();me(0,"h2"),q(1,"Realize o login para salvar sua pontua\xE7\xE3o no quiz!"),Ie(),me(2,"button",1),We("click",function(){je(t);let i=Ee();return Ue(i.login())}),pt(3,"i",2),q(4," Realizar login"),Ie()}}function OH(n,e){if(n&1){let t=it();me(0,"div",3),pt(1,"img",4),me(2,"p"),q(3),Ie()(),me(4,"button",5),We("click",function(){je(t);let i=Ee();return Ue(i.logout())}),q(5,"Logout"),Ie()}if(n&2){let t=Ee();U(),gr("src",t.user.photoURL,Vm),U(2),_n("Bem vindo, ",t.user.displayName)}}var Hf=class n{constructor(e){this.authService=e;this.authService.currentUser$.subscribe(t=>{this.user=t})}user=null;login(){this.authService.loginWithGoogle().then(e=>{this.user=e.user,console.log("Logado como: ",this.user.displayName)}).catch(e=>{console.log("Erro no login: ",e)})}logout(){this.authService.logout().then(()=>this.user=null)}static \u0275fac=function(t){return new(t||n)(ns(ln))};static \u0275cmp=ue({type:n,selectors:[["app-login-page"]],decls:3,vars:2,consts:[[1,"page"],[1,"login-btn",3,"click"],[1,"fa-brands","fa-google"],[1,"user-info"],["alt","Avatar","width","50",3,"src"],[1,"logout-btn",3,"click"]],template:function(t,r){t&1&&(me(0,"section",0),Ln(1,MH,5,0),Ln(2,OH,6,2),Ie()),t&2&&(U(),Fn(r.user?-1:1),U(),Fn(r.user?2:-1))},styles:[".page[_ngcontent-%COMP%]{background-color:#fff;margin:2em auto;border-radius:15px;display:flex;flex-direction:column;padding:2em;gap:2em;max-width:1400px;box-shadow:0 10px 40px #fff9}.login-btn[_ngcontent-%COMP%]{padding:15px 40px;border:none;border-radius:50px;background:#1a2a6c;color:#fff;font-size:1.2rem;font-weight:700;cursor:pointer;transition:all .3s ease;border:2px solid rgba(255,255,255,.3)}.login-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:1em}.login-btn[_ngcontent-%COMP%]:hover{opacity:.8}.login-btn.active[_ngcontent-%COMP%]{background:#fff;color:#1a2a6c;box-shadow:0 5px 10px #ffffff80}h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:1em 0;opacity:.9;align-self:center}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;background:#f5f5f5;border-radius:12px;padding:10px 20px;box-shadow:0 4px 8px #0000001a;margin-bottom:1rem}.user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;border:2px solid #1a2a6c}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:700;color:#333;font-size:1.1rem}.logout-btn[_ngcontent-%COMP%]{padding:15px 40px;border:none;border-radius:50px;background:#1a2a6c;color:#fff;font-size:1.2rem;font-weight:700;cursor:pointer;transition:all .3s ease;border:2px solid rgba(255,255,255,.3)}.logout-btn[_ngcontent-%COMP%]:hover{background:#0d1754}"]})};var zk=[{path:"",redirectTo:"alfabeto",pathMatch:"full"},{path:"alfabeto",component:Ff},{path:"quiz",component:Bf},{path:"kanji",component:$f},{path:"login",component:Hf}];var qk={providers:[Hg(),py({eventCoalescing:!0}),ev(zk),yA(()=>vA(VD.firebaseConfig)),m0(()=>y0()),Bk(()=>$k())]};var zf=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-header-title"]],decls:14,vars:0,consts:[[1,"title"],["src","favicon.png","alt",""],[1,"japanese"]],template:function(t,r){t&1&&(me(0,"section",0)(1,"h1"),pt(2,"img",1),q(3," Japon\xEAs F\xE1cil: "),me(4,"span",2),q(5,"\u3072\u3089\u304C\u306A"),Ie(),q(6,", "),me(7,"span",2),q(8,"\u30AB\u30BF\u30AB\u30CA"),Ie(),q(9," & "),me(10,"span",2),q(11,"\u6F22\u5B57"),Ie()(),me(12,"p"),q(13,"Aprenda os fundamentos da l\xEDngua japonesa de forma interativa e eficiente"),Ie()())},styles:[".title[_ngcontent-%COMP%]{text-align:center;color:#fff;margin:2em;justify-items:center}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   .japanese[_ngcontent-%COMP%]{font-weight:1000;text-shadow:0 5px 5px #3d63fc}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:400;width:24em;margin:1em 0 3em;opacity:.9}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.8rem;font-weight:500;display:flex;align-items:center;justify-content:center;gap:.5em}.title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3em;height:auto;display:block}"]})};function LH(n,e){if(n&1&&pt(0,"i"),n&2){let t=Ee();Gi(t.icone)}}var qf=class n{text="";icone;isActive=!1;tabClicked=new ve;onCLick(){this.tabClicked.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-tab-button"]],inputs:{text:"text",icone:"icone",isActive:"isActive"},outputs:{tabClicked:"tabClicked"},decls:3,vars:4,consts:[[1,"tab-button",3,"click"],[3,"class"]],template:function(t,r){t&1&&(me(0,"button",0),We("click",function(){return r.onCLick()}),Ln(1,LH,1,2,"i",1),q(2),Ie()),t&2&&(Pt("active",r.isActive),U(),Fn(r.icone?1:-1),U(),_n(" ",r.text,`
`))},styles:[".tab-button[_ngcontent-%COMP%]{padding:15px 40px;margin:0 5px;border:none;border-radius:50px;background:#fff3;color:#fff;font-size:1.2rem;font-weight:700;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid rgba(255,255,255,.3);display:flex;align-items:center;gap:10px}.tab-button[_ngcontent-%COMP%]:hover{background:#ffffff4d}.tab-button.active[_ngcontent-%COMP%]{background:#fff;color:#1a2a6c;box-shadow:0 5px 10px #ffffff80}"]})};var Wf=class n{constructor(e){this.router=e}activeTabIndex=0;ngOnInit(){this.setActiveTabByUrl(),this.router.events.pipe(xt(e=>e instanceof En)).subscribe(()=>{this.setActiveTabByUrl()})}setActiveTabByUrl(){let e=this.router.url;e.startsWith("/alfabeto")?this.activeTabIndex=0:e.startsWith("/quiz")?this.activeTabIndex=1:e.startsWith("/kanji")?this.activeTabIndex=2:e.startsWith("/login")&&(this.activeTabIndex=3)}setActiveTab(e){this.activeTabIndex=e,this.navegateToTab(this.activeTabIndex)}navegateToTab(e){switch(e){case 0:this.router.navigate(["/alfabeto"]);break;case 1:this.router.navigate(["/quiz"]);break;case 2:this.router.navigate(["/kanji"]);break;case 3:this.router.navigate(["/login"]);break}}static \u0275fac=function(t){return new(t||n)(ns(vs))};static \u0275cmp=ue({type:n,selectors:[["app-menu-tabs"]],decls:5,vars:4,consts:[[1,"menu-tabs"],["text","Alfabetos","icone","fas fa-book",3,"tabClicked","isActive"],["text","Quiz","icone","fas fa-question-circle",3,"tabClicked","isActive"],["text","Kanji","icone","fas fa-draw-polygon",3,"tabClicked","isActive"],["text","Login","icone","fas fa-right-to-bracket",3,"tabClicked","isActive"]],template:function(t,r){t&1&&(z(0,"section",0)(1,"app-tab-button",1),De("tabClicked",function(){return r.setActiveTab(0)}),Q(),z(2,"app-tab-button",2),De("tabClicked",function(){return r.setActiveTab(1)}),Q(),z(3,"app-tab-button",3),De("tabClicked",function(){return r.setActiveTab(2)}),Q(),z(4,"app-tab-button",4),De("tabClicked",function(){return r.setActiveTab(3)}),Q()()),t&2&&(U(),xe("isActive",r.activeTabIndex===0),U(),xe("isActive",r.activeTabIndex===1),U(),xe("isActive",r.activeTabIndex===2),U(),xe("isActive",r.activeTabIndex===3))},dependencies:[qf],styles:[".menu-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:2em;gap:1em}"]})};var Gf=class n{title="japones";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,r){t&1&&rt(0,"app-header-title")(1,"app-menu-tabs")(2,"router-outlet")},dependencies:[Cc,zf,Wf],encapsulation:2})};ky(Gf,qk).catch(n=>console.error(n));
