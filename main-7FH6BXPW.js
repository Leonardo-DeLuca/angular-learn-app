var tN=Object.defineProperty,nN=Object.defineProperties;var rN=Object.getOwnPropertyDescriptors;var hw=Object.getOwnPropertySymbols,iN=Object.getPrototypeOf,oN=Object.prototype.hasOwnProperty,sN=Object.prototype.propertyIsEnumerable,aN=Reflect.get;var fw=(t,e,n)=>e in t?tN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})oN.call(e,n)&&fw(t,n,e[n]);if(hw)for(var n of hw(e))sN.call(e,n)&&fw(t,n,e[n]);return t},Re=(t,e)=>nN(t,rN(e));var Pr=(t,e,n)=>aN(iN(t),n,e);var I=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{c(n.next(u))}catch(l){i(l)}},s=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((n=n.apply(t,e)).next())});var lp;function Nu(){return lp}function An(t){let e=lp;return lp=t,e}var pw=Symbol("NotFound"),fa=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function wi(t){return t===pw||t?.name==="\u0275NotFound"}function gw(t,e){return Object.is(t,e)}var Ke=null,xu=!1,hp=1;var To=Symbol("SIGNAL");function oe(t){let e=Ke;return Ke=t,e}function Pu(){return Ke}var Mu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fp(t){if(xu)throw new Error("");if(Ke===null)return;Ke.consumerOnSignalRead(t);let e=Ke.nextProducerIndex++;if(Vu(Ke),e<Ke.producerNode.length&&Ke.producerNode[e]!==t&&pa(Ke)){let n=Ke.producerNode[e];Fu(n,Ke.producerIndexOfThis[e])}Ke.producerNode[e]!==t&&(Ke.producerNode[e]=t,Ke.producerIndexOfThis[e]=pa(Ke)?_w(t,Ke,e):0),Ke.producerLastReadVersion[e]=t.version}function mw(){hp++}function yw(t){if(!(pa(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===hp)){if(!t.producerMustRecompute(t)&&!Lu(t)){dp(t);return}t.producerRecomputeValue(t),dp(t)}}function pp(t){if(t.liveConsumerNode===void 0)return;let e=xu;xu=!0;try{for(let n of t.liveConsumerNode)n.dirty||cN(n)}finally{xu=e}}function vw(){return Ke?.consumerAllowSignalWrites!==!1}function cN(t){t.dirty=!0,pp(t),t.consumerMarkedDirty?.(t)}function dp(t){t.dirty=!1,t.lastCleanEpoch=hp}function Ou(t){return t&&(t.nextProducerIndex=0),oe(t)}function gp(t,e){if(oe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(pa(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Fu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Lu(t){Vu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(yw(n),r!==n.version))return!0}return!1}function mp(t){if(Vu(t),pa(t))for(let e=0;e<t.producerNode.length;e++)Fu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function _w(t,e,n){if(Iw(t),t.liveConsumerNode.length===0&&Ew(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=_w(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Fu(t,e){if(Iw(t),t.liveConsumerNode.length===1&&Ew(t))for(let r=0;r<t.producerNode.length;r++)Fu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Vu(i),i.producerIndexOfThis[r]=e}}function pa(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Vu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Iw(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Ew(t){return t.producerNode!==void 0}function uN(){throw new Error}var ww=uN;function lN(t){ww(t)}function yp(t){ww=t}var dN=null;function vp(t,e){vw()||lN(t),t.equal(t.value,e)||(t.value=e,hN(t))}var _p=Re(F({},Mu),{equal:gw,value:void 0,kind:"signal"});function hN(t){t.version++,mw(),pp(t),dN?.(t)}function te(t){return typeof t=="function"}function bo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ju=bo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ti(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ve=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof ju?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Tw(o)}catch(s){e=e??[],s instanceof ju?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ju(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Tw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ti(n,e)}remove(e){let{_finalizers:n}=this;n&&Ti(n,e),e instanceof t&&e._removeParent(this)}};Ve.EMPTY=(()=>{let t=new Ve;return t.closed=!0,t})();var Ip=Ve.EMPTY;function Uu(t){return t instanceof Ve||t&&"closed"in t&&te(t.remove)&&te(t.add)&&te(t.unsubscribe)}function Tw(t){te(t)?t():t.unsubscribe()}var hn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var So={setTimeout(t,e,...n){let{delegate:r}=So;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=So;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Bu(t){So.setTimeout(()=>{let{onUnhandledError:e}=hn;if(e)e(t);else throw t})}function ga(){}var bw=Ep("C",void 0,void 0);function Sw(t){return Ep("E",void 0,t)}function Cw(t){return Ep("N",t,void 0)}function Ep(t,e,n){return{kind:t,value:e,error:n}}var bi=null;function Co(t){if(hn.useDeprecatedSynchronousErrorHandling){let e=!bi;if(e&&(bi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=bi;if(bi=null,n)throw r}}else t()}function Dw(t){hn.useDeprecatedSynchronousErrorHandling&&bi&&(bi.errorThrown=!0,bi.error=t)}var Si=class extends Ve{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Uu(e)&&e.add(this)):this.destination=gN}static create(e,n,r){return new Do(e,n,r)}next(e){this.isStopped?Tp(Cw(e),this):this._next(e)}error(e){this.isStopped?Tp(Sw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Tp(bw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},fN=Function.prototype.bind;function wp(t,e){return fN.call(t,e)}var bp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){$u(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){$u(r)}else $u(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){$u(n)}}},Do=class extends Si{constructor(e,n,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&hn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&wp(e.next,o),error:e.error&&wp(e.error,o),complete:e.complete&&wp(e.complete,o)}):i=e}this.destination=new bp(i)}};function $u(t){hn.useDeprecatedSynchronousErrorHandling?Dw(t):Bu(t)}function pN(t){throw t}function Tp(t,e){let{onStoppedNotification:n}=hn;n&&So.setTimeout(()=>n(t,e))}var gN={closed:!0,next:ga,error:pN,complete:ga};var Ao=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ht(t){return t}function Sp(...t){return Cp(t)}function Cp(t){return t.length===0?Ht:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=yN(n)?n:new Do(n,r,i);return Co(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Aw(r),new r((i,o)=>{let s=new Do({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ao](){return this}pipe(...n){return Cp(n)(this)}toPromise(n){return n=Aw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Aw(t){var e;return(e=t??hn.Promise)!==null&&e!==void 0?e:Promise}function mN(t){return t&&te(t.next)&&te(t.error)&&te(t.complete)}function yN(t){return t&&t instanceof Si||mN(t)&&Uu(t)}function Dp(t){return te(t?.lift)}function he(t){return e=>{if(Dp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(t,e,n,r,i){return new Ap(t,e,n,r,i)}var Ap=class extends Si{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ro(){return he((t,e)=>{let n=null;t._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ko=class extends ae{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Dp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ve;let n=this.getSubject();e.add(this.source.subscribe(fe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ve.EMPTY)}return e}refCount(){return Ro()(this)}};var Rw=bo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var gt=(()=>{class t extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Hu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Rw}next(n){Co(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Co(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Co(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Ip:(this.currentObservers=null,o.push(n),new Ve(()=>{this.currentObservers=null,Ti(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ae;return n.source=this,n}}return t.create=(e,n)=>new Hu(e,n),t})(),Hu=class extends gt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ip}};var Qe=class extends gt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Rp={now(){return(Rp.delegate||Date).now()},delegate:void 0};var zu=class extends Ve{constructor(e,n){super()}schedule(e,n=0){return this}};var ma={setInterval(t,e,...n){let{delegate:r}=ma;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ma;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var No=class extends zu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ma.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ma.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ti(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var xo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};xo.now=Rp.now;var Po=class extends xo{constructor(e,n=xo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var kp=new Po(No);var qu=class extends No{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Wu=class extends Po{};var Np=new Wu(qu);var Vt=new ae(t=>t.complete());function kw(t){return t&&te(t.schedule)}function Nw(t){return t[t.length-1]}function xw(t){return te(Nw(t))?t.pop():void 0}function Mr(t){return kw(Nw(t))?t.pop():void 0}function Gu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Mw(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function Pw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ci(t){return this instanceof Ci?(this.v=t,this):new Ci(t)}function Ow(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(D){return Promise.resolve(D).then(y,p)}}function c(y,D){r[y]&&(i[y]=function(N){return new Promise(function(k,O){o.push([y,N,k,O])>1||u(y,N)})},D&&(i[y]=D(i[y])))}function u(y,D){try{l(r[y](D))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof Ci?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,D){y(D),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Lw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Pw=="function"?Pw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var Ku=t=>t&&typeof t.length=="number"&&typeof t!="function";function Qu(t){return te(t?.then)}function Yu(t){return te(t[Ao])}function Ju(t){return Symbol.asyncIterator&&te(t?.[Symbol.asyncIterator])}function Zu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function vN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Xu=vN();function el(t){return te(t?.[Xu])}function tl(t){return Ow(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ci(n.read());if(i)return yield Ci(void 0);yield yield Ci(r)}}finally{n.releaseLock()}})}function nl(t){return te(t?.getReader)}function tt(t){if(t instanceof ae)return t;if(t!=null){if(Yu(t))return _N(t);if(Ku(t))return IN(t);if(Qu(t))return EN(t);if(Ju(t))return Fw(t);if(el(t))return wN(t);if(nl(t))return TN(t)}throw Zu(t)}function _N(t){return new ae(e=>{let n=t[Ao]();if(te(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function IN(t){return new ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function EN(t){return new ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Bu)})}function wN(t){return new ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Fw(t){return new ae(e=>{bN(t,e).catch(n=>e.error(n))})}function TN(t){return Fw(tl(t))}function bN(t,e){var n,r,i,o;return Mw(this,void 0,void 0,function*(){try{for(n=Lw(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function jt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Or(t,e=0){return he((n,r)=>{n.subscribe(fe(r,i=>jt(r,t,()=>r.next(i),e),()=>jt(r,t,()=>r.complete(),e),i=>jt(r,t,()=>r.error(i),e)))})}function Lr(t,e=0){return he((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Vw(t,e){return tt(t).pipe(Lr(e),Or(e))}function jw(t,e){return tt(t).pipe(Lr(e),Or(e))}function Uw(t,e){return new ae(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Bw(t,e){return new ae(n=>{let r;return jt(n,e,()=>{r=t[Xu](),jt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function rl(t,e){if(!t)throw new Error("Iterable cannot be null");return new ae(n=>{jt(n,e,()=>{let r=t[Symbol.asyncIterator]();jt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function $w(t,e){return rl(tl(t),e)}function Hw(t,e){if(t!=null){if(Yu(t))return Vw(t,e);if(Ku(t))return Uw(t,e);if(Qu(t))return jw(t,e);if(Ju(t))return rl(t,e);if(el(t))return Bw(t,e);if(nl(t))return $w(t,e)}throw Zu(t)}function He(t,e){return e?Hw(t,e):tt(t)}function X(...t){let e=Mr(t);return He(t,e)}function Mo(t,e){let n=te(t)?t:()=>t,r=i=>i.error(n());return new ae(e?i=>e.schedule(r,0,i):r)}function xp(t){return!!t&&(t instanceof ae||te(t.lift)&&te(t.subscribe))}var tr=bo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function pe(t,e){return he((n,r)=>{let i=0;n.subscribe(fe(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:SN}=Array;function CN(t,e){return SN(e)?t(...e):t(e)}function zw(t){return pe(e=>CN(t,e))}var{isArray:DN}=Array,{getPrototypeOf:AN,prototype:RN,keys:kN}=Object;function qw(t){if(t.length===1){let e=t[0];if(DN(e))return{args:e,keys:null};if(NN(e)){let n=kN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function NN(t){return t&&typeof t=="object"&&AN(t)===RN}function Ww(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function il(...t){let e=Mr(t),n=xw(t),{args:r,keys:i}=qw(t);if(r.length===0)return He([],e);let o=new ae(xN(r,e,i?s=>Ww(i,s):Ht));return n?o.pipe(zw(n)):o}function xN(t,e,n=Ht){return r=>{Gw(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)Gw(e,()=>{let l=He(t[u],e),h=!1;l.subscribe(fe(r,p=>{o[u]=p,h||(h=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Gw(t,e,n){t?jt(n,t,e):e()}function Kw(t,e,n,r,i,o,s,c){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?D(N):u.push(N),D=N=>{o&&e.next(N),l++;let k=!1;tt(n(N,h++)).subscribe(fe(e,O=>{i?.(O),o?y(O):e.next(O)},()=>{k=!0},void 0,()=>{if(k)try{for(l--;u.length&&l<r;){let O=u.shift();s?jt(e,s,()=>D(O)):D(O)}m()}catch(O){e.error(O)}}))};return t.subscribe(fe(e,y,()=>{p=!0,m()})),()=>{c?.()}}function Ye(t,e,n=1/0){return te(e)?Ye((r,i)=>pe((o,s)=>e(r,o,i,s))(tt(t(r,i))),n):(typeof e=="number"&&(n=e),he((r,i)=>Kw(r,i,t,n)))}function Qw(t=1/0){return Ye(Ht,t)}function Yw(){return Qw(1)}function Oo(...t){return Yw()(He(t,Mr(t)))}function ya(t){return new ae(e=>{tt(t()).subscribe(e)})}function Nt(t,e){return he((n,r)=>{let i=0;n.subscribe(fe(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Fr(t){return he((e,n)=>{let r=null,i=!1,o;r=e.subscribe(fe(n,void 0,void 0,s=>{o=tt(t(s,Fr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Jw(t,e,n,r,i){return(o,s)=>{let c=n,u=e,l=0;o.subscribe(fe(s,h=>{let p=l++;u=c?t(u,h,p):(c=!0,h),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function Lo(t,e){return te(e)?Ye(t,e,1):Ye(t,1)}function Vr(t){return he((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function nr(t){return t<=0?()=>Vt:he((e,n)=>{let r=0;e.subscribe(fe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function ol(t=PN){return he((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function PN(){return new tr}function va(t){return he((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function rr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Nt((i,o)=>t(i,o,r)):Ht,nr(1),n?Vr(e):ol(()=>new tr))}function Fo(t){return t<=0?()=>Vt:he((e,n)=>{let r=[];e.subscribe(fe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Pp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Nt((i,o)=>t(i,o,r)):Ht,Fo(1),n?Vr(e):ol(()=>new tr))}function Mp(t,e){return he(Jw(t,e,arguments.length>=2,!0))}function Op(...t){let e=Mr(t);return he((n,r)=>{(e?Oo(t,n,e):Oo(t,n)).subscribe(r)})}function rn(t,e){return he((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(fe(r,u=>{i?.unsubscribe();let l=0,h=o++;tt(t(u,h)).subscribe(i=fe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function sl(t){return he((e,n)=>{tt(t).subscribe(fe(n,()=>n.complete(),ga)),!n.closed&&e.subscribe(n)})}function nt(t,e,n){let r=te(t)||e||n?{next:t,error:e,complete:n}:t;return r?he((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(fe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ht}var hl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",$=class extends Error{code;constructor(e,n){super(Kp(e,n)),this.code=e}};function LN(t){return`NG0${Math.abs(t)}`}function Kp(t,e){return`${LN(t)}${e?": "+e:""}`}function Pe(t){for(let e in t)if(t[e]===Pe)return e;throw Error("")}function Bt(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Bt).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function fl(t,e){return t?e?`${t} ${e}`:t:e||""}var FN=Pe({__forward_ref__:Pe});function pl(t){return t.__forward_ref__=pl,t.toString=function(){return Bt(this())},t}function Ut(t){return Qp(t)?t():t}function Qp(t){return typeof t=="function"&&t.hasOwnProperty(FN)&&t.__forward_ref__===pl}function tT(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function V(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function wa(t){return VN(t,gl)}function Yp(t){return wa(t)!==null}function VN(t,e){return t.hasOwnProperty(e)&&t[e]||null}function jN(t){let e=t?.[gl]??null;return e||null}function Fp(t){return t&&t.hasOwnProperty(cl)?t[cl]:null}var gl=Pe({\u0275prov:Pe}),cl=Pe({\u0275inj:Pe}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=V({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Jp(t){return t&&!!t.\u0275providers}var Zp=Pe({\u0275cmp:Pe}),Xp=Pe({\u0275dir:Pe}),eg=Pe({\u0275pipe:Pe}),tg=Pe({\u0275mod:Pe}),Ia=Pe({\u0275fac:Pe}),Ni=Pe({__NG_ELEMENT_ID__:Pe}),Zw=Pe({__NG_ENV_ID__:Pe});function Ta(t){return typeof t=="string"?t:t==null?"":String(t)}function nT(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ta(t)}function ng(t,e){throw new $(-200,t)}function ml(t,e){throw new $(-201,!1)}var Vp;function rT(){return Vp}function zt(t){let e=Vp;return Vp=t,e}function rg(t,e,n){let r=wa(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;ml(t,"Injector")}var UN={},Di=UN,jp="__NG_DI_FLAG__",Up=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Ai(n)||0;try{return this.injector.get(e,r&8?null:Di,r)}catch(i){if(wi(i))return i;throw i}}},ul="ngTempTokenPath",BN="ngTokenPath",$N=/\n/gm,HN="\u0275",Xw="__source";function zN(t,e=0){let n=Nu();if(n===void 0)throw new $(-203,!1);if(n===null)return rg(t,void 0,e);{let r=qN(e),i=n.retrieve(t,r);if(wi(i)){if(r.optional)return null;throw i}return i}}function K(t,e=0){return(rT()||zN)(Ut(t),e)}function R(t,e){return K(t,Ai(e))}function Ai(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function qN(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Bp(t){let e=[];for(let n=0;n<t.length;n++){let r=Ut(t[n]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=WN(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(K(i,o))}else e.push(K(r))}return e}function iT(t,e){return t[jp]=e,t.prototype[jp]=e,t}function WN(t){return t[jp]}function GN(t,e,n,r){let i=t[ul];throw e[Xw]&&i.unshift(e[Xw]),t.message=KN(`
`+t.message,i,n,r),t[BN]=i,t[ul]=null,t}function KN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==HN?t.slice(2):t;let i=Bt(e);if(Array.isArray(e))i=e.map(Bt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):Bt(c)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace($N,`
  `)}`}function Ri(t,e){let n=t.hasOwnProperty(Ia);return n?t[Ia]:null}function yl(t,e){t.forEach(n=>Array.isArray(n)?yl(n,e):e(n))}function ig(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ba(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function oT(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function vl(t,e,n){let r=jo(t,e);return r>=0?t[r|1]=n:(r=~r,oT(t,r,e,n)),r}function _l(t,e){let n=jo(t,e);if(n>=0)return t[n|1]}function jo(t,e){return QN(t,e,1)}function QN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var xi={},Rn=[],or=new U(""),og=new U("",-1),sg=new U(""),Ea=class{get(e,n=Di){if(n===Di)throw new fa(`NullInjectorError: No provider for ${Bt(e)}!`);return n}};function ag(t){return t[tg]||null}function Br(t){return t[Zp]||null}function cg(t){return t[Xp]||null}function sT(t){return t[eg]||null}function qt(t){return{\u0275providers:t}}function aT(t){return qt([{provide:or,multi:!0,useValue:t}])}function cT(...t){return{\u0275providers:ug(!0,t),\u0275fromNgModule:!0}}function ug(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return yl(e,s=>{let c=s;ll(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&uT(i,o),n}function uT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];lg(i,o=>{e(o,r)})}}function ll(t,e,n,r){if(t=Ut(t),!t)return!1;let i=null,o=Fp(t),s=!o&&Br(t);if(!o&&!s){let u=t.ngModule;if(o=Fp(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)ll(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{yl(o.imports,h=>{ll(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&uT(l,e)}if(!c){let l=Ri(i)||(()=>new i);e({provide:i,useFactory:l,deps:Rn},i),e({provide:sg,useValue:i,multi:!0},i),e({provide:or,useValue:()=>K(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;lg(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function lg(t,e){for(let n of t)Jp(n)&&(n=n.\u0275providers),Array.isArray(n)?lg(n,e):e(n)}var YN=Pe({provide:String,useValue:Pe});function lT(t){return t!==null&&typeof t=="object"&&YN in t}function JN(t){return!!(t&&t.useExisting)}function ZN(t){return!!(t&&t.useFactory)}function dl(t){return typeof t=="function"}var Sa=new U(""),al={},eT={},Lp;function Ca(){return Lp===void 0&&(Lp=new Ea),Lp}var Je=class{},ki=class extends Je{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Hp(e,s=>this.processProvider(s)),this.records.set(og,Vo(void 0,this)),i.has("environment")&&this.records.set(Je,Vo(void 0,this));let o=this.records.get(Sa);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(sg,Rn,{self:!0}))}retrieve(e,n){let r=Ai(n)||0;try{return this.get(e,Di,r)}catch(i){if(wi(i))return i;throw i}}destroy(){_a(this),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return _a(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){_a(this);let n=An(this),r=zt(void 0),i;try{return e()}finally{An(n),zt(r)}}get(e,n=Di,r){if(_a(this),e.hasOwnProperty(Zw))return e[Zw](this);let i=Ai(r),o,s=An(this),c=zt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=rx(e)&&wa(e);h&&this.injectableDefInScope(h)?l=Vo($p(e),al):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Ca():this.parent;return n=i&8&&n===Di?null:n,u.get(e,n)}catch(u){if(wi(u)){if((u[ul]=u[ul]||[]).unshift(Bt(e)),s)throw u;return GN(u,e,"R3InjectorError",this.source)}else throw u}finally{zt(c),An(s)}}resolveInjectorInitializers(){let e=oe(null),n=An(this),r=zt(void 0),i;try{let o=this.get(or,Rn,{self:!0});for(let s of o)s()}finally{An(n),zt(r),oe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Bt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ut(e);let n=dl(e)?e:Ut(e&&e.provide),r=ex(e);if(!dl(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Vo(void 0,al,!0),i.factory=()=>Bp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=oe(null);try{return n.value===eT?ng(Bt(e)):n.value===al&&(n.value=eT,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&nx(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{oe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ut(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function $p(t){let e=wa(t),n=e!==null?e.factory:Ri(t);if(n!==null)return n;if(t instanceof U)throw new $(204,!1);if(t instanceof Function)return XN(t);throw new $(204,!1)}function XN(t){if(t.length>0)throw new $(204,!1);let n=jN(t);return n!==null?()=>n.factory(t):()=>new t}function ex(t){if(lT(t))return Vo(void 0,t.useValue);{let e=dT(t);return Vo(e,al)}}function dT(t,e,n){let r;if(dl(t)){let i=Ut(t);return Ri(i)||$p(i)}else if(lT(t))r=()=>Ut(t.useValue);else if(ZN(t))r=()=>t.useFactory(...Bp(t.deps||[]));else if(JN(t))r=(i,o)=>K(Ut(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ut(t&&(t.useClass||t.provide));if(tx(t))r=()=>new i(...Bp(t.deps));else return Ri(i)||$p(i)}return r}function _a(t){if(t.destroyed)throw new $(205,!1)}function Vo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function tx(t){return!!t.deps}function nx(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function rx(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Hp(t,e){for(let n of t)Array.isArray(n)?Hp(n,e):n&&Jp(n)?Hp(n.\u0275providers,e):e(n)}function Ze(t,e){let n;t instanceof ki?(_a(t),n=t):n=new Up(t);let r,i=An(n),o=zt(void 0);try{return e()}finally{An(i),zt(o)}}function hT(){return rT()!==void 0||Nu()!=null}var fn=0,Z=1,ne=2,rt=3,on=4,sn=5,Uo=6,Bo=7,Be=8,Pi=9,Nn=10,Me=11,$o=12,dg=13,Mi=14,Wt=15,Oi=16,Li=17,Fi=18,Da=19,hg=20,ir=21,Il=22,Aa=23,Gt=24,El=25,mt=26,fT=1,fg=6,$r=7,Ra=8,ka=9,yt=10;function sr(t){return Array.isArray(t)&&typeof t[fT]=="object"}function pn(t){return Array.isArray(t)&&t[fT]===!0}function pg(t){return(t.flags&4)!==0}function Hr(t){return t.componentOffset>-1}function wl(t){return(t.flags&1)===1}function Vi(t){return!!t.template}function Ho(t){return(t[ne]&512)!==0}function ji(t){return(t[ne]&256)===256}var pT="svg",gT="math";function an(t){for(;Array.isArray(t);)t=t[fn];return t}function gg(t,e){return an(e[t])}function xn(t,e){return an(e[t.index])}function Na(t,e){return t.data[e]}function gn(t,e){let n=e[t];return sr(n)?n:n[fn]}function Tl(t){return(t[ne]&128)===128}function mT(t){return pn(t[rt])}function Pn(t,e){return e==null?null:t[e]}function mg(t){t[Li]=0}function yg(t){t[ne]&1024||(t[ne]|=1024,Tl(t)&&Pa(t))}function yT(t,e){for(;t>0;)e=e[Mi],t--;return e}function xa(t){return!!(t[ne]&9216||t[Gt]?.dirty)}function bl(t){t[Nn].changeDetectionScheduler?.notify(8),t[ne]&64&&(t[ne]|=1024),xa(t)&&Pa(t)}function Pa(t){t[Nn].changeDetectionScheduler?.notify(0);let e=jr(t);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Tl(e)));)e=jr(e)}function vg(t,e){if(ji(t))throw new $(911,!1);t[ir]===null&&(t[ir]=[]),t[ir].push(e)}function vT(t,e){if(t[ir]===null)return;let n=t[ir].indexOf(e);n!==-1&&t[ir].splice(n,1)}function jr(t){let e=t[rt];return pn(e)?e[rt]:e}function _T(t){return t[Bo]??=[]}function IT(t){return t.cleanup??=[]}var ue={lFrame:PT(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Ma=function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t}(Ma||{}),ix=0,zp=!1;function ET(){return ue.lFrame.elementDepthCount}function wT(){ue.lFrame.elementDepthCount++}function _g(){ue.lFrame.elementDepthCount--}function TT(){return ue.bindingsEnabled}function bT(){return ue.skipHydrationRootTNode!==null}function Ig(t){return ue.skipHydrationRootTNode===t}function Eg(){ue.skipHydrationRootTNode=null}function ve(){return ue.lFrame.lView}function xt(){return ue.lFrame.tView}function ot(t){return ue.lFrame.contextLView=t,t[Be]}function st(t){return ue.lFrame.contextLView=null,t}function Kt(){let t=wg();for(;t!==null&&t.type===64;)t=t.parent;return t}function wg(){return ue.lFrame.currentTNode}function ST(){let t=ue.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function zo(t,e){let n=ue.lFrame;n.currentTNode=t,n.isParent=e}function Tg(){return ue.lFrame.isParent}function CT(){ue.lFrame.isParent=!1}function bg(t){tT("Must never be called in production mode"),ix=t}function Sg(){return zp}function Cg(t){let e=zp;return zp=t,e}function DT(t){return ue.lFrame.bindingIndex=t}function zr(){return ue.lFrame.bindingIndex++}function Dg(t){let e=ue.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function AT(){return ue.lFrame.inI18n}function RT(t,e){let n=ue.lFrame;n.bindingIndex=n.bindingRootIndex=t,Sl(e)}function kT(){return ue.lFrame.currentDirectiveIndex}function Sl(t){ue.lFrame.currentDirectiveIndex=t}function NT(t){let e=ue.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Ag(t){ue.lFrame.currentQueryIndex=t}function ox(t){let e=t[Z];return e.type===2?e.declTNode:e.type===1?t[sn]:null}function Rg(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=ox(o),i===null||(o=o[Mi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ue.lFrame=xT();return r.currentTNode=e,r.lView=t,!0}function Cl(t){let e=xT(),n=t[Z];ue.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function xT(){let t=ue.lFrame,e=t===null?null:t.child;return e===null?PT(t):e}function PT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function MT(){let t=ue.lFrame;return ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var kg=MT;function Dl(){let t=MT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function OT(t){return(ue.lFrame.contextLView=yT(t,ue.lFrame.contextLView))[Be]}function ar(){return ue.lFrame.selectedIndex}function qr(t){ue.lFrame.selectedIndex=t}function Al(){let t=ue.lFrame;return Na(t.tView,t.selectedIndex)}function LT(){return ue.lFrame.currentNamespace}var FT=!0;function Rl(){return FT}function kl(t){FT=t}function qp(t,e=null,n=null,r){let i=Ng(t,e,n,r);return i.resolveInjectorInitializers(),i}function Ng(t,e=null,n=null,r,i=new Set){let o=[n||Rn,cT(t)];return r=r||(typeof t=="object"?void 0:Bt(t)),new ki(o,e||Ca(),r||null,i)}var it=class t{static THROW_IF_NOT_FOUND=Di;static NULL=new Ea;static create(e,n){if(Array.isArray(e))return qp({name:""},n,e,"");{let r=e.name??"";return qp({name:r},e.parent,e.providers,r)}}static \u0275prov=V({token:t,providedIn:"any",factory:()=>K(og)});static __NG_ELEMENT_ID__=-1},at=new U(""),Wr=(()=>{class t{static __NG_ELEMENT_ID__=sx;static __NG_ENV_ID__=n=>n}return t})(),Wp=class extends Wr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ji(this._lView)}onDestroy(e){let n=this._lView;return vg(n,e),()=>vT(n,e)}};function sx(){return new Wp(ve())}var kn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Qt=new U("",{providedIn:"root",factory:()=>{let t=R(Je),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(kn),e.handleError(n))}}}),VT={provide:or,useValue:()=>void R(kn),multi:!0},ax=new U("",{providedIn:"root",factory:()=>{let t=R(at).defaultView;if(!t)return;let e=R(Qt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),R(Wr).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function xg(){return qt([aT(()=>void R(ax))])}function Pg(t){return typeof t=="function"&&t[To]!==void 0}function Mg(t){return Pg(t)&&typeof t.set=="function"}var Ur=class{},Oa=new U("",{providedIn:"root",factory:()=>!1});var Og=new U(""),Lg=new U("");var cr=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Qe(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ae(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=V({token:t,providedIn:"root",factory:()=>new t})}return t})(),qo=(()=>{class t{internalPendingTasks=R(cr);scheduler=R(Ur);errorHandler=R(Qt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=V({token:t,providedIn:"root",factory:()=>new t})}return t})();function La(...t){}var Fg=(()=>{class t{static \u0275prov=V({token:t,providedIn:"root",factory:()=>new Gp})}return t})(),Gp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function qa(t){return{toString:t}.toString()}var Nl="__parameters__";function yx(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function vx(t,e,n){return qa(()=>{let r=yx(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,h){let p=u.hasOwnProperty(Nl)?u[Nl]:Object.defineProperty(u,Nl,{value:[]})[Nl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Yt=iT(vx("Optional"),8);function _x(t){return typeof t=="function"}var Fl=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function pb(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var vn=(()=>{let t=()=>gb;return t.ngInherit=!0,t})();function gb(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ex),Ix}function Ix(){let t=yb(this),e=t?.current;if(e){let n=t.previous;if(n===xi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Ex(t,e,n,r,i){let o=this.declaredInputs[r],s=yb(t)||wx(t,{previous:xi,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new Fl(l&&l.currentValue,n,u===xi),pb(t,e,i,n)}var mb="__ngSimpleChanges__";function yb(t){return t[mb]||null}function wx(t,e){return t[mb]=e}var jT=[];var ke=function(t,e=null,n){for(let r=0;r<jT.length;r++){let i=jT[r];i(t,e,n)}};function Tx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=gb(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function bx(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Pl(t,e,n){vb(t,e,3,n)}function Ml(t,e,n,r){(t[ne]&3)===n&&vb(t,e,n,r)}function Vg(t,e){let n=t[ne];(n&3)===e&&(n&=16383,n+=1,t[ne]=n)}function vb(t,e,n,r){let i=r!==void 0?t[Li]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[Li]+=65536),(c<o||o==-1)&&(Sx(t,n,e,u),t[Li]=(t[Li]&4294901760)+u+2),u++}function UT(t,e){ke(4,t,e);let n=oe(null);try{e.call(t)}finally{oe(n),ke(5,t,e)}}function Sx(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[ne]>>14<t[Li]>>16&&(t[ne]&3)===e&&(t[ne]+=16384,UT(c,o)):UT(c,o)}var Go=-1,ja=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function Cx(t){return(t.flags&8)!==0}function Dx(t){return(t.flags&16)!==0}function Ax(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];kx(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function Rx(t){return t===3||t===4||t===6}function kx(t){return t.charCodeAt(0)===64}function ed(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?BT(t,n,i,null,e[++r]):BT(t,n,i,null,null))}}return t}function BT(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function _b(t){return t!==Go}function Vl(t){return t&32767}function Nx(t){return t>>16}function jl(t,e){let n=Nx(t),r=e;for(;n>0;)r=r[Mi],n--;return r}var qg=!0;function $T(t){let e=qg;return qg=t,e}var xx=256,Ib=xx-1,Eb=5,Px=0,Mn={};function Mx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ni)&&(r=n[Ni]),r==null&&(r=n[Ni]=Px++);let i=r&Ib,o=1<<i;e.data[t+(i>>Eb)]|=o}function wb(t,e){let n=Tb(t,e);if(n!==-1)return n;let r=e[Z];r.firstCreatePass&&(t.injectorIndex=e.length,jg(r.data,t),jg(e,null),jg(r.blueprint,null));let i=ym(t,e),o=t.injectorIndex;if(_b(i)){let s=Vl(i),c=jl(i,e),u=c[Z].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function jg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Tb(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ym(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Ab(i),r===null)return Go;if(n++,i=i[Mi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Go}function Ox(t,e,n){Mx(t,e,n)}function bb(t,e,n){if(n&8||t!==void 0)return t;ml(e,"NodeInjector")}function Sb(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Pi],o=zt(void 0);try{return i?i.get(e,r,n&8):rg(e,r,n&8)}finally{zt(o)}}return bb(r,e,n)}function Cb(t,e,n,r=0,i){if(t!==null){if(e[ne]&2048&&!(r&2)){let s=Ux(t,e,n,r,Mn);if(s!==Mn)return s}let o=Db(t,e,n,r,Mn);if(o!==Mn)return o}return Sb(e,n,r,i)}function Db(t,e,n,r,i){let o=Vx(n);if(typeof o=="function"){if(!Rg(e,t,r))return r&1?bb(i,n,r):Sb(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))ml(n);else return s}finally{kg()}}else if(typeof o=="number"){let s=null,c=Tb(t,e),u=Go,l=r&1?e[Wt][sn]:null;for((c===-1||r&4)&&(u=c===-1?ym(t,e):e[c+8],u===Go||!zT(r,!1)?c=-1:(s=e[Z],c=Vl(u),e=jl(u,e)));c!==-1;){let h=e[Z];if(HT(o,c,h.data)){let p=Lx(c,e,n,s,r,l);if(p!==Mn)return p}u=e[c+8],u!==Go&&zT(r,e[Z].data[c+8]===l)&&HT(o,c,e)?(s=h,c=Vl(u),e=jl(u,e)):c=-1}}return i}function Lx(t,e,n,r,i,o){let s=e[Z],c=s.data[t+8],u=r==null?Hr(c)&&qg:r!=s&&(c.type&3)!==0,l=i&1&&o===c,h=Fx(c,s,n,u,l);return h!==null?Wg(e,s,h,c,i):Mn}function Fx(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?c:c+h,m=i?c+h:l;for(let y=p;y<m;y++){let D=s[y];if(y<u&&n===D||y>=u&&D.type===n)return y}if(i){let y=s[u];if(y&&Vi(y)&&y.type===n)return u}return null}function Wg(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof ja){let c=o;c.resolving&&ng(nT(s[n]));let u=$T(c.canSeeViewProviders);c.resolving=!0;let l=s[n].type||s[n],h,p=c.injectImpl?zt(c.injectImpl):null,m=Rg(t,r,0);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Tx(n,s[n],e)}finally{p!==null&&zt(p),$T(u),c.resolving=!1,kg()}}return o}function Vx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ni)?t[Ni]:void 0;return typeof e=="number"?e>=0?e&Ib:jx:e}function HT(t,e,n){let r=1<<t;return!!(n[e+(t>>Eb)]&r)}function zT(t,e){return!(t&2)&&!(t&1&&e)}var Ui=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Cb(this._tNode,this._lView,e,Ai(r),n)}};function jx(){return new Ui(Kt(),ve())}function td(t){return qa(()=>{let e=t.prototype.constructor,n=e[Ia]||Gg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Ia]||Gg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Gg(t){return Qp(t)?()=>{let e=Gg(Ut(t));return e&&e()}:Ri(t)}function Ux(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!Ho(s);){let c=Db(o,s,n,r|2,Mn);if(c!==Mn)return c;let u=o.parent;if(!u){let l=s[hg];if(l){let h=l.get(n,Mn,r);if(h!==Mn)return h}u=Ab(s),s=s[Mi]}o=u}return i}function Ab(t){let e=t[Z],n=e.type;return n===2?e.declTNode:n===1?t[sn]:null}function Bx(){return vm(Kt(),ve())}function vm(t,e){return new Rb(xn(t,e))}var Rb=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Bx}return t})();function kb(t){return(t.flags&128)===128}var _m=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(_m||{}),Nb=new Map,$x=0;function Hx(){return $x++}function zx(t){Nb.set(t[Da],t)}function Kg(t){Nb.delete(t[Da])}var qT="__ngContext__";function Ko(t,e){sr(e)?(t[qT]=e[Da],zx(e)):t[qT]=e}function xb(t){return Mb(t[$o])}function Pb(t){return Mb(t[on])}function Mb(t){for(;t!==null&&!pn(t);)t=t[on];return t}var Qg;function Im(t){Qg=t}function Ob(){if(Qg!==void 0)return Qg;if(typeof document<"u")return document;throw new $(210,!1)}var nd=new U("",{providedIn:"root",factory:()=>qx}),qx="ng",rd=new U(""),Gr=new U("",{providedIn:"platform",factory:()=>"unknown"});var id=new U("",{providedIn:"root",factory:()=>Ob().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Wx="h",Gx="b";var Lb="r";var Fb="di";var Vb=!1,jb=new U("",{providedIn:"root",factory:()=>Vb});var Kx=(t,e,n,r)=>{};function Qx(t,e,n,r){Kx(t,e,n,r)}function Em(t){return(t.flags&32)===32}var Yx=()=>null;function Ub(t,e,n=!1){return Yx(t,e,n)}function Bb(t,e){let n=t.contentQueries;if(n!==null){let r=oe(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];Ag(o),c.contentQueries(2,e[s],s)}}}finally{oe(r)}}}function Yg(t,e,n){Ag(0);let r=oe(null);try{e(t,n)}finally{oe(r)}}function $b(t,e,n){if(pg(e)){let r=oe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{oe(r)}}}var ur=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ur||{});var Ul=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hl})`}};function od(t){return t instanceof Ul?t.changingThisBreaksApplicationSecurity:t}function Hb(t,e){let n=zb(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${hl})`)}return n===e}function zb(t){return t instanceof Ul&&t.getTypeName()||null}var Jx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qb(t){return t=String(t),t.match(Jx)?t:"unsafe:"+t}var wm=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(wm||{});function Tm(t){let e=Zx();return e?e.sanitize(wm.URL,t)||"":Hb(t,"URL")?od(t):qb(Ta(t))}function Zx(){let t=ve();return t&&t[Nn].sanitizer}function Wb(t){return t instanceof Function?t():t}function Xx(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var Gb="ng-template";function eP(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Xx(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(bm(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function bm(t){return t.type===4&&t.value!==Gb}function tP(t,e,n){let r=t.type===4&&!n?Gb:t.value;return e===r}function nP(t,e,n){let r=4,i=t.attrs,o=i!==null?oP(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!mn(r)&&!mn(u))return!1;if(s&&mn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!tP(t,u,n)||u===""&&e.length===1){if(mn(r))return!1;s=!0}}else if(r&8){if(i===null||!eP(t,i,u,n)){if(mn(r))return!1;s=!0}}else{let l=e[++c],h=rP(u,i,bm(t),n);if(h===-1){if(mn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(mn(r))return!1;s=!0}}}}return mn(r)||s}function mn(t){return(t&1)===0}function rP(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return sP(e,t)}function iP(t,e,n=!1){for(let r=0;r<e.length;r++)if(nP(t,e[r],n))return!0;return!1}function oP(t){for(let e=0;e<t.length;e++){let n=t[e];if(Rx(n))return e}return t.length}function sP(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function WT(t,e){return t?":not("+e.trim()+")":e}function aP(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!mn(s)&&(e+=WT(o,i),i=""),r=s,o=o||!mn(r);n++}return i!==""&&(e+=WT(o,i)),e}function cP(t){return t.map(aP).join(",")}function uP(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!mn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var cn={};function lP(t,e){return t.createText(e)}function dP(t,e,n){t.setValue(e,n)}function Kb(t,e,n){return t.createElement(e,n)}function Bl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Qb(t,e,n){t.appendChild(e,n)}function GT(t,e,n,r,i){r!==null?Bl(t,e,n,r,i):Qb(t,e,n)}function Yb(t,e,n){t.removeChild(null,e,n)}function hP(t,e,n){t.setAttribute(e,"style",n)}function fP(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Jb(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Ax(t,e,r),i!==null&&fP(t,e,i),o!==null&&hP(t,e,o)}function Sm(t,e,n,r,i,o,s,c,u,l,h){let p=mt+r,m=p+i,y=pP(p,m),D=typeof l=="function"?l():l;return y[Z]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function pP(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:cn);return n}function gP(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Sm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Cm(t,e,n,r,i,o,s,c,u,l,h){let p=e.blueprint.slice();return p[fn]=i,p[ne]=r|4|128|8|64|1024,(l!==null||t&&t[ne]&2048)&&(p[ne]|=2048),mg(p),p[rt]=p[Mi]=t,p[Be]=n,p[Nn]=s||t&&t[Nn],p[Me]=c||t&&t[Me],p[Pi]=u||t&&t[Pi]||null,p[sn]=o,p[Da]=Hx(),p[Uo]=h,p[hg]=l,p[Wt]=e.type==2?t[Wt]:p,p}function mP(t,e,n){let r=xn(e,t),i=gP(n),o=t[Nn].rendererFactory,s=Dm(t,Cm(t,i,null,Zb(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function Zb(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Xb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Dm(t,e){return t[$o]?t[dg][on]=e:t[$o]=e,t[dg]=e,e}function H(t=1){eS(xt(),ve(),ar()+t,!1)}function eS(t,e,n,r){if(!r)if((e[ne]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Pl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ml(e,o,0,n)}qr(n)}var sd=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(sd||{});function Jg(t,e,n,r){let i=oe(null);try{let[o,s,c]=t.inputs[n],u=null;(s&sd.SignalBased)!==0&&(u=e[o][To]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):pb(e,u,o,r)}finally{oe(i)}}var lr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(lr||{}),yP;function Am(t,e){return yP(t,e)}function Wo(t,e,n,r,i){if(r!=null){let o,s=!1;pn(r)?o=r:sr(r)&&(s=!0,r=r[fn]);let c=an(r);t===0&&n!==null?i==null?Qb(e,n,c):Bl(e,n,c,i||null,!0):t===1&&n!==null?Bl(e,n,c,i||null,!0):t===2?Yb(e,c,s):t===3&&e.destroyNode(c),o!=null&&RP(e,t,o,n,i)}}function vP(t,e){tS(t,e),e[fn]=null,e[sn]=null}function _P(t,e,n,r,i,o){r[fn]=i,r[sn]=e,cd(t,r,n,1,i,o)}function tS(t,e){e[Nn].changeDetectionScheduler?.notify(9),cd(t,e,e[Me],2,null,null)}function IP(t){let e=t[$o];if(!e)return Ug(t[Z],t);for(;e;){let n=null;if(sr(e))n=e[$o];else{let r=e[yt];r&&(n=r)}if(!n){for(;e&&!e[on]&&e!==t;)sr(e)&&Ug(e[Z],e),e=e[rt];e===null&&(e=t),sr(e)&&Ug(e[Z],e),n=e&&e[on]}e=n}}function Rm(t,e){let n=t[ka],r=n.indexOf(e);n.splice(r,1)}function ad(t,e){if(ji(e))return;let n=e[Me];n.destroyNode&&cd(t,e,n,3,null,null),IP(e)}function Ug(t,e){if(ji(e))return;let n=oe(null);try{e[ne]&=-129,e[ne]|=256,e[Gt]&&mp(e[Gt]),wP(t,e),EP(t,e),e[Z].type===1&&e[Me].destroy();let r=e[Oi];if(r!==null&&pn(e[rt])){r!==e[rt]&&Rm(r,e);let i=e[Fi];i!==null&&i.detachView(t)}Kg(e)}finally{oe(n)}}function EP(t,e){let n=t.cleanup,r=e[Bo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[Bo]=null);let i=e[ir];if(i!==null){e[ir]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[Aa];if(o!==null){e[Aa]=null;for(let s of o)s.destroy()}}function wP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ja)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];ke(4,c,u);try{u.call(c)}finally{ke(5,c,u)}}else{ke(4,i,o);try{o.call(i)}finally{ke(5,i,o)}}}}}function TP(t,e,n){return bP(t,e.parent,n)}function bP(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[fn];if(Hr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===ur.None||i===ur.Emulated)return null}return xn(r,n)}function SP(t,e,n){return DP(t,e,n)}function CP(t,e,n){return t.type&40?xn(t,n):null}var DP=CP,KT;function km(t,e,n,r){let i=TP(t,r,e),o=e[Me],s=r.parent||e[sn],c=SP(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)GT(o,i,n[u],c,!1);else GT(o,i,n,c,!1);KT!==void 0&&KT(o,r,e,n,i)}function Fa(t,e){if(e!==null){let n=e.type;if(n&3)return xn(e,t);if(n&4)return Zg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Fa(t,r);{let i=t[e.index];return pn(i)?Zg(-1,i):an(i)}}else{if(n&128)return Fa(t,e.next);if(n&32)return Am(e,t)()||an(t[e.index]);{let r=nS(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=jr(t[Wt]);return Fa(i,r)}else return Fa(t,e.next)}}}return null}function nS(t,e){if(e!==null){let r=t[Wt][sn],i=e.projection;return r.projection[i]}return null}function Zg(t,e){let n=yt+t+1;if(n<e.length){let r=e[n],i=r[Z].firstChild;if(i!==null)return Fa(r,i)}return e[$r]}function Nm(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&e===0&&(c&&Ko(an(c),r),n.flags|=2),!Em(n))if(u&8)Nm(t,e,n.child,r,i,o,!1),Wo(e,t,i,c,o);else if(u&32){let l=Am(n,r),h;for(;h=l();)Wo(e,t,i,h,o);Wo(e,t,i,c,o)}else u&16?AP(t,e,r,n,i,o):Wo(e,t,i,c,o);n=s?n.projectionNext:n.next}}function cd(t,e,n,r,i,o){Nm(n,r,t.firstChild,e,i,o,!1)}function AP(t,e,n,r,i,o){let s=n[Wt],u=s[sn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Wo(e,t,i,h,o)}else{let l=u,h=s[rt];kb(r)&&(l.flags|=128),Nm(t,e,l,h,i,o,!0)}}function RP(t,e,n,r,i){let o=n[$r],s=an(n);o!==s&&Wo(e,t,r,o,i);for(let c=yt;c<n.length;c++){let u=n[c];cd(u[Z],u,t,e,r,o)}}function kP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:lr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=lr.Important),t.setStyle(n,r,i,o))}}function rS(t,e,n,r,i){let o=ar(),s=r&2;try{qr(-1),s&&e.length>mt&&eS(t,e,mt,!1),ke(s?2:0,i,n),n(r,i)}finally{qr(o),ke(s?3:1,i,n)}}function iS(t,e,n){LP(t,e,n),(n.flags&64)===64&&FP(t,e,n)}function xm(t,e,n=xn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function NP(t,e,n,r){let o=r.get(jb,Vb)||n===ur.ShadowDom,s=t.selectRootElement(e,o);return xP(s),s}function xP(t){PP(t)}var PP=()=>null;function MP(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function oS(t,e,n,r,i,o){let s=e[Z];if(Pm(t,s,e,n,r)){Hr(t)&&OP(e,t.index);return}t.type&3&&(n=MP(n)),sS(t,e,n,r,i,o)}function sS(t,e,n,r,i,o){if(t.type&3){let s=xn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function OP(t,e){let n=gn(e,t);n[ne]&16||(n[ne]|=64)}function LP(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Hr(n)&&mP(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||wb(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=Wg(e,t,s,n);if(Ko(u,e),o!==null&&UP(e,s-r,u,c,n,o),Vi(c)){let l=gn(n.index,e);l[Be]=Wg(e,t,s,n)}}}function FP(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=kT();try{qr(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];Sl(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&VP(u,l)}}finally{qr(-1),Sl(s)}}function VP(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function jP(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];iP(e,o.selectors,!1)&&(r??=[],Vi(o)?r.unshift(o):r.push(o))}return r}function UP(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];Jg(r,n,u,l)}}function aS(t,e,n,r,i){let o=mt+n,s=e[Z],c=i(s,e,t,r,n);e[o]=c,zo(t,!0);let u=t.type===2;return u?(Jb(e[Me],c,t),(ET()===0||wl(t))&&Ko(c,e),wT()):Ko(c,e),Rl()&&(!u||!Em(t))&&km(s,e,c,t),t}function cS(t){let e=t;return Tg()?CT():(e=e.parent,zo(e,!1)),e}function BP(t,e){let n=t[Pi];if(!n)return;n.get(Qt,null)?.(e)}function Pm(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Jg(p,n[l],h,i),c=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Jg(h,l,r,i),c=!0}return c}function $P(t,e){let n=gn(e,t),r=n[Z];HP(r,n);let i=n[fn];i!==null&&n[Uo]===null&&(n[Uo]=Ub(i,n[Pi])),ke(18),Mm(r,n,n[Be]),ke(19,n[Be])}function HP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Mm(t,e,n){Cl(e);try{let r=t.viewQuery;r!==null&&Yg(1,r,n);let i=t.template;i!==null&&rS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Fi]?.finishViewCreation(t),t.staticContentQueries&&Bb(t,e),t.staticViewQueries&&Yg(2,t.viewQuery,n);let o=t.components;o!==null&&zP(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ne]&=-5,Dl()}}function zP(t,e){for(let n=0;n<e.length;n++)$P(t,e[n])}function Om(t,e,n,r){let i=oe(null);try{let o=e.tView,c=t[ne]&4096?4096:16,u=Cm(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Oi]=l;let h=t[Fi];return h!==null&&(u[Fi]=h.createEmbeddedView(o)),Mm(o,u,n),u}finally{oe(i)}}function Ua(t,e){return!e||e.firstChild===null||kb(t)}var QT=!1,qP=new U("");function Ba(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(an(o)),pn(o)&&uS(o,r);let s=n.type;if(s&8)Ba(t,e,n.child,r);else if(s&32){let c=Am(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=nS(e,n);if(Array.isArray(c))r.push(...c);else{let u=jr(e[Wt]);Ba(u[Z],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function uS(t,e){for(let n=yt;n<t.length;n++){let r=t[n],i=r[Z].firstChild;i!==null&&Ba(r[Z],r,i,e)}t[$r]!==t[fn]&&e.push(t[$r])}function lS(t){if(t[El]!==null){for(let e of t[El])e.impl.addSequence(e);t[El].length=0}}var dS=[];function WP(t){return t[Gt]??GP(t)}function GP(t){let e=dS.pop()??Object.create(QP);return e.lView=t,e}function KP(t){t.lView[Gt]!==t&&(t.lView=null,dS.push(t))}var QP=Re(F({},Mu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Pa(t.lView)},consumerOnSignalRead(){this.lView[Gt]=this}});function YP(t){let e=t[Gt]??Object.create(JP);return e.lView=t,e}var JP=Re(F({},Mu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=jr(t.lView);for(;e&&!hS(e[Z]);)e=jr(e);e&&yg(e)},consumerOnSignalRead(){this.lView[Gt]=this}});function hS(t){return t.type!==2}function fS(t){if(t[Aa]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Aa])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ne]&8192)}}var ZP=100;function Lm(t,e=0){let r=t[Nn].rendererFactory,i=!1;i||r.begin?.();try{XP(t,e)}finally{i||r.end?.()}}function XP(t,e){let n=Sg();try{Cg(!0),Xg(t,e);let r=0;for(;xa(t);){if(r===ZP)throw new $(103,!1);r++,Xg(t,1)}}finally{Cg(n)}}function pS(t,e){bg(e?Ma.Exhaustive:Ma.OnlyDirtyViews);try{Lm(t)}finally{bg(Ma.Off)}}function eM(t,e,n,r){if(ji(e))return;let i=e[ne],o=!1,s=!1;Cl(e);let c=!0,u=null,l=null;o||(hS(t)?(l=WP(e),u=Ou(l)):Pu()===null?(c=!1,l=YP(e),u=Ou(l)):e[Gt]&&(mp(e[Gt]),e[Gt]=null));try{mg(e),DT(t.bindingStartIndex),n!==null&&rS(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Pl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Ml(e,y,0,null),Vg(e,0)}if(s||tM(e),fS(e),gS(e,0),t.contentQueries!==null&&Bb(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Pl(e,y)}else{let y=t.contentHooks;y!==null&&Ml(e,y,1),Vg(e,1)}rM(t,e);let p=t.components;p!==null&&yS(e,p,0);let m=t.viewQuery;if(m!==null&&Yg(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Pl(e,y)}else{let y=t.viewHooks;y!==null&&Ml(e,y,2),Vg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Il]){for(let y of e[Il])y();e[Il]=null}o||(lS(e),e[ne]&=-73)}catch(h){throw o||Pa(e),h}finally{l!==null&&(gp(l,u),c&&KP(l)),Dl()}}function gS(t,e){for(let n=xb(t);n!==null;n=Pb(n))for(let r=yt;r<n.length;r++){let i=n[r];mS(i,e)}}function tM(t){for(let e=xb(t);e!==null;e=Pb(e)){if(!(e[ne]&2))continue;let n=e[ka];for(let r=0;r<n.length;r++){let i=n[r];yg(i)}}}function nM(t,e,n){ke(18);let r=gn(e,t);mS(r,n),ke(19,r[Be])}function mS(t,e){Tl(t)&&Xg(t,e)}function Xg(t,e){let r=t[Z],i=t[ne],o=t[Gt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Lu(o)),s||=!1,o&&(o.dirty=!1),t[ne]&=-9217,s)eM(r,t,r.template,t[Be]);else if(i&8192){let c=oe(null);try{fS(t),gS(t,1);let u=r.components;u!==null&&yS(t,u,1),lS(t)}finally{oe(c)}}}function yS(t,e,n){for(let r=0;r<e.length;r++)nM(t,e[r],n)}function rM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)qr(~i);else{let o=i,s=n[++r],c=n[++r];RT(s,o);let u=e[o];ke(24,u),c(2,u),ke(25,u)}}}finally{qr(-1)}}function Fm(t,e){let n=Sg()?64:1088;for(t[Nn].changeDetectionScheduler?.notify(e);t;){t[ne]|=n;let r=jr(t);if(Ho(t)&&!r)return t;t=r}return null}function vS(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function _S(t,e){let n=yt+e;if(n<t.length)return t[n]}function ud(t,e,n,r=!0){let i=e[Z];if(iM(i,e,t,n),r){let s=Zg(n,t),c=e[Me],u=c.parentNode(t[$r]);u!==null&&_P(i,t[sn],c,e,u,s)}let o=e[Uo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function IS(t,e){let n=$a(t,e);return n!==void 0&&ad(n[Z],n),n}function $a(t,e){if(t.length<=yt)return;let n=yt+e,r=t[n];if(r){let i=r[Oi];i!==null&&i!==t&&Rm(i,r),e>0&&(t[n-1][on]=r[on]);let o=ba(t,yt+e);vP(r[Z],r);let s=o[Fi];s!==null&&s.detachView(o[Z]),r[rt]=null,r[on]=null,r[ne]&=-129}return r}function iM(t,e,n,r){let i=yt+r,o=n.length;r>0&&(n[i-1][on]=e),r<o-yt?(e[on]=n[i],ig(n,yt+r,e)):(n.push(e),e[on]=null),e[rt]=n;let s=e[Oi];s!==null&&n!==s&&ES(s,e);let c=e[Fi];c!==null&&c.insertView(t),bl(e),e[ne]|=128}function ES(t,e){let n=t[ka],r=e[rt];if(sr(r))t[ne]|=2;else{let i=r[rt][Wt];e[Wt]!==i&&(t[ne]|=2)}n===null?t[ka]=[e]:n.push(e)}var Bi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[Z];return Ba(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Be]}set context(e){this._lView[Be]=e}get destroyed(){return ji(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[rt];if(pn(e)){let n=e[Ra],r=n?n.indexOf(this):-1;r>-1&&($a(e,r),ba(n,r))}this._attachedToViewContainer=!1}ad(this._lView[Z],this._lView)}onDestroy(e){vg(this._lView,e)}markForCheck(){Fm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){bl(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,Lm(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[Pi].get(qP,QT)}catch{this.exhaustive=QT}}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ho(this._lView),n=this._lView[Oi];n!==null&&!e&&Rm(n,this._lView),tS(this._lView[Z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let n=Ho(this._lView),r=this._lView[Oi];r!==null&&!n&&ES(r,this._lView),bl(this._lView)}};function ld(t,e,n,r,i){let o=t.data[e];if(o===null)o=oM(t,e,n,r,i),AT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=ST();o.injectorIndex=s===null?-1:s.injectorIndex}return zo(o,!0),o}function oM(t,e,n,r,i){let o=wg(),s=Tg(),c=s?o:o&&o.parent,u=t.data[e]=aM(t,c,n,e,r,i);return sM(t,u,o,s),u}function sM(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function aM(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return bT()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var V6=new RegExp(`^(\\d+)*(${Gx}|${Wx})*(.*)`);function cM(t){let e=t[fg]??[],r=t[rt][Me],i=[];for(let o of e)o.data[Fb]!==void 0?i.push(o):uM(o,r);t[fg]=i}function uM(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[Lb];for(;n<i;){let o=r.nextSibling;Yb(e,r,!1),r=o,n++}}}var lM=()=>null,dM=()=>null;function em(t,e){return lM(t,e)}function wS(t,e,n){return dM(t,e,n)}var TS=class{},dd=class{},tm=class{resolveComponentFactory(e){throw new $(917,!1)}},Wa=class{static NULL=new tm},$i=class{};var bS=(()=>{class t{static \u0275prov=V({token:t,providedIn:"root",factory:()=>null})}return t})();var Ol={},nm=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Ol,r);return i!==Ol||n===Ol?i:this.parentInjector.get(e,n,r)}};function $l(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=fl(i,c);else if(o==2){let u=c,l=e[++s];r=fl(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Zo(t,e=0){let n=ve();if(n===null)return K(t,e);let r=Kt();return Cb(r,n,Ut(t),e)}function hM(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,l]=h.resolveHostDirectives(s);break}gM(t,e,n,c,o,u,l)}o!==null&&r!==null&&fM(n,r,o)}function fM(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new $(-301,!1);r.push(e[i],o)}}function pM(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function gM(t,e,n,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let y=r[m];!u&&Vi(y)&&(u=!0,pM(t,n,m)),Ox(wb(n,e),t,y.type)}EM(n,t.data.length,c);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=Xb(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(n.mergedAttrs=ed(n.mergedAttrs,y.hostAttrs),yM(t,n,e,p,y),IM(p,y,i),s!==null&&s.has(y)){let[N,k]=s.get(y);n.directiveToIndex.set(y.type,[p,N+n.directiveStart,k+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let D=y.type.prototype;!l&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(D.ngOnChanges||D.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}mM(t,n,o)}function mM(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))YT(0,e,i,r),YT(1,e,i,r),ZT(e,r,!1);else{let o=n.get(i);JT(0,e,o,r),JT(1,e,o,r),ZT(e,r,!0)}}}function YT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),SS(e,o)}}function JT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),SS(e,s)}}function SS(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function ZT(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||bm(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function yM(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ri(i.type,!0)),s=new ja(o,Vi(i),Zo);t.blueprint[r]=s,n[r]=s,vM(t,e,r,Xb(t,n,i.hostVars,cn),i)}function vM(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;_M(s)!=c&&s.push(c),s.push(n,r,o)}}function _M(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function IM(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Vi(e)&&(n[""]=t)}}function EM(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function CS(t,e,n,r,i,o,s,c){let u=e[Z],l=u.consts,h=Pn(l,s),p=ld(u,t,n,r,h);return o&&hM(u,e,p,Pn(l,c),i),p.mergedAttrs=ed(p.mergedAttrs,p.attrs),p.attrs!==null&&$l(p,p.attrs,!1),p.mergedAttrs!==null&&$l(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function DS(t,e){bx(t,e),pg(e)&&t.queries.elementEnd(e)}function wM(t,e,n,r,i,o){let s=e.consts,c=Pn(s,i),u=ld(e,t,n,r,c);if(u.mergedAttrs=ed(u.mergedAttrs,u.attrs),o!=null){let l=Pn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&$l(u,u.attrs,!1),u.mergedAttrs!==null&&$l(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function dr(t,e,n){if(n===cn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Ll(t,e,n){return function r(i){let o=Hr(t)?gn(t.index,e):e;Fm(o,5);let s=e[Be],c=XT(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=XT(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function XT(t,e,n,r){let i=oe(null);try{return ke(6,e,n),n(r)!==!1}catch(o){return BP(t,o),!1}finally{ke(7,e,n),oe(i)}}function AS(t,e,n,r,i,o,s,c){let u=wl(t),l=!1,h=null;if(!r&&u&&(h=TM(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=xn(t,n),m=r?r(p):p;Qx(n,m,o,c);let y=i.listen(m,o,c),D=r?N=>r(an(N[t.index])):t.index;RS(D,e,n,o,c,y,!1)}return l}function TM(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[Bo],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function RS(t,e,n,r,i,o,s){let c=e.firstCreatePass?IT(e):null,u=_T(n),l=u.length;u.push(i,o),c&&c.push(r,t,l,(l+1)*(s?-1:1))}function eb(t,e,n,r,i,o){let s=e[n],c=e[Z],l=c.data[n].outputs[r],p=s[l].subscribe(o);RS(t.index,c,e,i,o,p,!0)}var rm=Symbol("BINDING");var Hl=class extends Wa{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Br(e);return new Qo(n,this.ngModule)}};function bM(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&sd.SignalBased)!==0};return i&&(o.transform=i),o})}function SM(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function CM(t,e,n){let r=e instanceof Je?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new nm(n,r):n}function DM(t){let e=t.get($i,null);if(e===null)throw new $(407,!1);let n=t.get(bS,null),r=t.get(Ur,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function AM(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return Kb(e,n,n==="svg"?pT:n==="math"?gT:null)}var Qo=class extends dd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=bM(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=SM(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=cP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){ke(22);let c=oe(null);try{let u=this.componentDef,l=RM(r,u,s,o),h=CM(u,i||this.ngModule,e),p=DM(h),m=p.rendererFactory.createRenderer(null,u),y=r?NP(m,r,u.encapsulation,h):AM(u,m),D=s?.some(tb)||o?.some(O=>typeof O!="function"&&O.bindings.some(tb)),N=Cm(null,l,null,512|Zb(u),null,null,p,m,h,null,Ub(y,h,!0));N[mt]=y,Cl(N);let k=null;try{let O=CS(mt,N,2,"#host",()=>l.directiveRegistry,!0,0);y&&(Jb(m,y,O),Ko(y,N)),iS(l,N,O),$b(l,O,N),DS(l,O),n!==void 0&&NM(O,this.ngContentSelectors,n),k=gn(O.index,N),N[Be]=k[Be],Mm(l,N,null)}catch(O){throw k!==null&&Kg(k),Kg(N),O}finally{ke(23),Dl()}return new zl(this.componentType,N,!!D)}finally{oe(c)}}};function RM(t,e,n,r){let i=t?["ng-version","20.1.0"]:uP(e.selectors[0]),o=null,s=null,c=0;if(n)for(let h of n)c+=h[rm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){c+=m[rm].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=cg(p);u.push(m)}return Sm(0,null,kM(o,s),1,c,u,null,null,null,[i],null)}function kM(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function tb(t){let e=t[rm].kind;return e==="input"||e==="twoWay"}var zl=class extends TS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Na(n[Z],mt),this.location=vm(this._tNode,n),this.instance=gn(this._tNode.index,n)[Be],this.hostView=this.changeDetectorRef=new Bi(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Pm(r,i[Z],i,e,n);this.previousInputValues.set(e,n);let s=gn(r.index,i);Fm(s,1)}get injector(){return new Ui(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function NM(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var hd=(()=>{class t{static __NG_ELEMENT_ID__=xM}return t})();function xM(){let t=Kt();return MM(t,ve())}var PM=hd,kS=class extends PM{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return vm(this._hostTNode,this._hostLView)}get injector(){return new Ui(this._hostTNode,this._hostLView)}get parentInjector(){let e=ym(this._hostTNode,this._hostLView);if(_b(e)){let n=jl(e,this._hostLView),r=Vl(e),i=n[Z].data[r+8];return new Ui(i,n)}else return new Ui(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=nb(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-yt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=em(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,Ua(this._hostTNode,s)),c}createComponent(e,n,r,i,o,s,c){let u=e&&!_x(e),l;if(u)l=n;else{let k=n||{};l=k.index,r=k.injector,i=k.projectableNodes,o=k.environmentInjector||k.ngModuleRef,s=k.directives,c=k.bindings}let h=u?e:new Qo(Br(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let O=(u?p:this.parentInjector).get(Je,null);O&&(o=O)}let m=Br(h.componentType??{}),y=em(this._lContainer,m?.id??null),D=y?.firstChild??null,N=h.create(p,i,D,o,s,c);return this.insertImpl(N.hostView,l,Ua(this._hostTNode,y)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(mT(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[rt],l=new kS(u,u[sn],u[rt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return ud(s,i,o,r),e.attachToViewContainerRef(),ig(Bg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=nb(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=$a(this._lContainer,n);r&&(ba(Bg(this._lContainer),n),ad(r[Z],r))}detach(e){let n=this._adjustIndex(e,-1),r=$a(this._lContainer,n);return r&&ba(Bg(this._lContainer),n)!=null?new Bi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function nb(t){return t[Ra]}function Bg(t){return t[Ra]||(t[Ra]=[])}function MM(t,e){let n,r=e[t.index];return pn(r)?n=r:(n=vS(r,e,null,t),e[t.index]=n,Dm(e,n)),LM(n,e,t,r),new kS(n,t,e)}function OM(t,e){let n=t[Me],r=n.createComment(""),i=xn(e,t),o=n.parentNode(i);return Bl(n,o,r,n.nextSibling(i),!1),r}var LM=jM,FM=()=>!1;function VM(t,e,n){return FM(t,e,n)}function jM(t,e,n,r){if(t[$r])return;let i;n.type&8?i=an(r):i=OM(e,n),t[$r]=i}var rb=new Set;function Kr(t){rb.has(t)||(rb.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Yo=class{},fd=class{};var ql=class extends Yo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Hl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=ag(e);this._bootstrapComponents=Wb(o.bootstrap),this._r3Injector=Ng(e,n,[{provide:Yo,useValue:this},{provide:Wa,useValue:this.componentFactoryResolver},...r],Bt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Wl=class extends fd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ql(this.moduleType,e,[])}};var Ha=class extends Yo{injector;componentFactoryResolver=new Hl(this);instance=null;constructor(e){super();let n=new ki([...e.providers,{provide:Yo,useValue:this},{provide:Wa,useValue:this.componentFactoryResolver}],e.parent||Ca(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ga(t,e,n=null){return new Ha({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var UM=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=ug(!1,n.type),i=r.length>0?Ga([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=V({token:t,providedIn:"environment",factory:()=>new t(K(Je))})}return t})();function de(t){return qa(()=>{let e=NS(t),n=Re(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===_m.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(UM).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ur.Emulated,styles:t.styles||Rn,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Kr("NgStandalone"),xS(n);let r=t.dependencies;return n.directiveDefs=ib(r,BM),n.pipeDefs=ib(r,sT),n.id=zM(n),n})}function BM(t){return Br(t)||cg(t)}function $M(t,e){if(t==null)return xi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=sd.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function HM(t){if(t==null)return xi;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Vm(t){return qa(()=>{let e=NS(t);return xS(e),e})}function NS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||xi,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Rn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:$M(t.inputs,e),outputs:HM(t.outputs),debugInfo:null}}function xS(t){t.features?.forEach(e=>e(t))}function ib(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function zM(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function qM(t,e,n,r,i,o,s,c){if(n.firstCreatePass){t.mergedAttrs=ed(t.mergedAttrs,t.attrs);let h=t.tView=Sm(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),zo(t,!1);let u=WM(n,e,t,r);Rl()&&km(n,e,u,t),Ko(u,e);let l=vS(u,e,u,t);e[r+mt]=l,Dm(e,l),VM(l,t,e)}function Gl(t,e,n,r,i,o,s,c,u,l,h){let p=n+mt,m;if(e.firstCreatePass){if(m=ld(e,p,4,s||null,c||null),l!=null){let y=Pn(e.consts,l);m.localNames=[];for(let D=0;D<y.length;D+=2)m.localNames.push(y[D],-1)}}else m=e.data[p];return qM(m,t,e,n,r,i,o,u),l!=null&&xm(t,m,h),m}var WM=GM;function GM(t,e,n,r){return kl(!0),e[Me].createComment("")}var jm=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(jm||{}),Ka=new U(""),PS=!1,im=class extends gt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,hT()&&(this.destroyRef=R(Wr,{optional:!0})??void 0,this.pendingTasks=R(cr,{optional:!0})??void 0)}emit(e){let n=oe(null);try{super.next(e)}finally{oe(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Ve&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},_e=im;function MS(t){let e,n;function r(){t=La;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function ob(t){return queueMicrotask(()=>t()),()=>{t=La}}var Um="isAngularZone",Kl=Um+"_ID",KM=0,be=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new _e(!1);onMicrotaskEmpty=new _e(!1);onStable=new _e(!1);onError=new _e(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=PS}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,JM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Um)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,QM,La,La);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},QM={};function Bm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function YM(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){MS(()=>{t.callbackScheduled=!1,om(t),t.isCheckStableRunning=!0,Bm(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),om(t)}function JM(t){let e=()=>{YM(t)},n=KM++;t._inner=t._inner.fork({name:"angular",properties:{[Um]:!0,[Kl]:n,[Kl+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(ZM(u))return r.invokeTask(o,s,c,u);try{return sb(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),ab(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return sb(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!XM(u)&&e(),ab(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,om(t),Bm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function om(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function sb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ab(t){t._nesting--,Bm(t)}var Ql=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new _e;onMicrotaskEmpty=new _e;onStable=new _e;onError=new _e;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function ZM(t){return OS(t,"__ignore_ng_zone__")}function XM(t){return OS(t,"__scheduler_tick__")}function OS(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var LS=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=V({token:t,providedIn:"root",factory:()=>new t})}return t})();var $m=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Hm=new U("");function Qa(t){return!!t&&typeof t.then=="function"}function FS(t){return!!t&&typeof t.subscribe=="function"}var VS=new U("");var zm=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=R(VS,{optional:!0})??[];injector=R(it);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Ze(this.injector,i);if(Qa(o))n.push(o);else if(FS(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),pd=new U("");function jS(){yp(()=>{let t="";throw new $(600,t)})}function US(t){return t.isBoundToModule}var eO=10;var zi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(Qt);afterRenderManager=R(LS);zonelessEnabled=R(Oa);rootEffectScheduler=R(Fg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new gt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(cr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(pe(n=>!n))}constructor(){R(Ka,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=R(Je);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=it.NULL){return this._injector.get(be).run(()=>{ke(10);let s=n instanceof dd;if(!this._injector.get(zm).done){let D="";throw new $(405,D)}let u;s?u=n:u=this._injector.get(Wa).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=US(u)?void 0:this._injector.get(Yo),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(Hm,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Va(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),ke(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ke(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(jm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new $(101,!1);let n=oe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,oe(n),this.afterTick.next(),ke(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get($i,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<eO;)ke(14),this.synchronizeOnce(),ke(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!xa(i))continue;let o=r&&!this.zonelessEnabled?0:1;Lm(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>xa(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Va(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(pd,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Va(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new $(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Va(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var sm=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function $g(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function tO(t,e,n){let r,i,o=0,s=t.length-1,c=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=$g(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let m=t.at(s),y=e[u],D=$g(s,m,u,y,n);if(D!==0){D<0&&t.updateValue(s,y),s--,u--;continue}let N=n(o,l),k=n(s,m),O=n(o,h);if(Object.is(O,k)){let B=n(u,y);Object.is(B,N)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new Yl,i??=ub(t,o,s,n),am(t,r,o,O))t.updateValue(o,h),o++,s++;else if(i.has(O))r.set(N,t.detach(o)),s--;else{let B=t.create(o,e[o]);t.attach(o,B),o++,s++}}for(;o<=u;)cb(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,m=$g(o,h,o,p,n);if(m!==0)m<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new Yl,i??=ub(t,o,s,n);let y=n(o,p);if(am(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let D=n(o,h);r.set(D,t.detach(o)),s--}}}for(;!l.done;)cb(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function am(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function cb(t,e,n,r,i){if(am(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function ub(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Yl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Qr(t,e,n,r,i,o,s,c){Kr("NgControlFlow");let u=ve(),l=xt(),h=Pn(l.consts,o);return Gl(u,l,t,e,n,r,i,h,256,s,c),qm}function qm(t,e,n,r,i,o,s,c){Kr("NgControlFlow");let u=ve(),l=xt(),h=Pn(l.consts,o);return Gl(u,l,t,e,n,r,i,h,512,s,c),qm}function Yr(t,e){Kr("NgControlFlow");let n=ve(),r=zr(),i=n[r]!==cn?n[r]:-1,o=i!==-1?Jl(n,mt+i):void 0,s=0;if(dr(n,r,t)){let c=oe(null);try{if(o!==void 0&&IS(o,s),t!==-1){let u=mt+t,l=Jl(n,u),h=dm(n[Z],u),p=wS(l,h,n),m=Om(n,h,e,{dehydratedView:p});ud(l,m,s,Ua(h,p))}}finally{oe(c)}}else if(o!==void 0){let c=_S(o,s);c!==void 0&&(c[Be]=e)}}var cm=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-yt}};function Xo(t){return t}var um=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function On(t,e,n,r,i,o,s,c,u,l,h,p,m){Kr("NgControlFlow");let y=ve(),D=xt(),N=u!==void 0,k=ve(),O=c?s.bind(k[Wt][Be]):s,B=new um(N,O);k[mt+t]=B,Gl(y,D,t+1,e,n,r,i,Pn(D.consts,o),256),N&&Gl(y,D,t+2,u,l,h,p,Pn(D.consts,m),512)}var lm=class extends sm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-yt}at(e){return this.getLView(e)[Be].$implicit}attach(e,n){let r=n[Uo];this.needsIndexUpdate||=e!==this.length,ud(this.lContainer,n,e,Ua(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,nO(this.lContainer,e)}create(e,n){let r=em(this.lContainer,this.templateTNode.tView.ssrId),i=Om(this.hostLView,this.templateTNode,new cm(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){ad(e[Z],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Be].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Be].$index=e}getLView(e){return rO(this.lContainer,e)}};function Ln(t){let e=oe(null),n=ar();try{let r=ve(),i=r[Z],o=r[n],s=n+1,c=Jl(r,s);if(o.liveCollection===void 0){let l=dm(i,s);o.liveCollection=new lm(c,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(tO(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=zr(),h=u.length===0;if(dr(r,l,h)){let p=n+2,m=Jl(r,p);if(h){let y=dm(i,p),D=wS(m,y,r),N=Om(r,y,void 0,{dehydratedView:D});ud(m,N,0,Ua(y,D))}else i.firstUpdatePass&&cM(m),IS(m,0)}}}finally{oe(e)}}function Jl(t,e){return t[e]}function nO(t,e){return $a(t,e)}function rO(t,e){return _S(t,e)}function dm(t,e){return Na(t,e)}function Oe(t,e,n){let r=ve(),i=zr();if(dr(r,i,e)){let o=xt(),s=Al();oS(s,r,t,e,r[Me],n)}return Oe}function hm(t,e,n,r,i){Pm(e,t,n,i?"class":"style",r)}function z(t,e,n,r){let i=ve(),o=i[Z],s=t+mt,c=o.firstCreatePass?CS(s,i,2,e,jP,TT(),n,r):o.data[s];if(aS(c,i,t,e,BS),wl(c)){let u=i[Z];iS(u,i,c),$b(u,c,i)}return r!=null&&xm(i,c),z}function Q(){let t=xt(),e=Kt(),n=cS(e);return t.firstCreatePass&&DS(t,n),Ig(n)&&Eg(),_g(),n.classesWithoutHost!=null&&Cx(n)&&hm(t,n,ve(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Dx(n)&&hm(t,n,ve(),n.stylesWithoutHost,!1),Q}function ct(t,e,n,r){return z(t,e,n,r),Q(),ct}function me(t,e,n,r){let i=ve(),o=i[Z],s=t+mt,c=o.firstCreatePass?wM(s,o,2,e,n,r):o.data[s];return aS(c,i,t,e,BS),r!=null&&xm(i,c),me}function Ie(){let t=Kt(),e=cS(t);return Ig(e)&&Eg(),_g(),Ie}function Tt(t,e,n,r){return me(t,e,n,r),Ie(),Tt}var BS=(t,e,n,r,i)=>(kl(!0),Kb(e[Me],r,LT()));function bt(){return ve()}function es(t,e,n){let r=ve(),i=zr();if(dr(r,i,e)){let o=xt(),s=Al();sS(s,r,t,e,r[Me],n)}return es}var Ya="en-US";var iO=Ya;function $S(t){typeof t=="string"&&(iO=t.toLowerCase().replace(/_/g,"-"))}function Ne(t,e,n){let r=ve(),i=xt(),o=Kt();return HS(i,r,r[Me],o,t,e,n),Ne}function vt(t,e,n){let r=ve(),i=xt(),o=Kt();return(o.type&3||n)&&AS(o,i,r,n,r[Me],t,e,Ll(o,r,e)),vt}function HS(t,e,n,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=Ll(r,e,o),AS(r,t,e,s,n,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Ll(r,e,o),eb(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Ll(r,e,o),eb(r,e,p,i,i,u)}}function Ce(t=1){return OT(t)}function xl(t,e){return t<<17|e<<2}function Hi(t){return t>>17&32767}function oO(t){return(t&2)==2}function sO(t,e){return t&131071|e<<17}function fm(t){return t|2}function Jo(t){return(t&131068)>>2}function Hg(t,e){return t&-131069|e<<2}function aO(t){return(t&1)===1}function pm(t){return t|1}function cO(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=Hi(s),u=Jo(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||jo(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Hi(t[c+1]);t[r+1]=xl(m,c),m!==0&&(t[m+1]=Hg(t[m+1],r)),t[c+1]=sO(t[c+1],r)}else t[r+1]=xl(c,0),c!==0&&(t[c+1]=Hg(t[c+1],r)),c=r;else t[r+1]=xl(u,0),c===0?c=r:t[u+1]=Hg(t[u+1],r),u=r;l&&(t[r+1]=fm(t[r+1])),lb(t,h,r,!0),lb(t,h,r,!1),uO(e,h,t,r,o),s=xl(c,u),o?e.classBindings=s:e.styleBindings=s}function uO(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&jo(o,e)>=0&&(n[r+1]=pm(n[r+1]))}function lb(t,e,n,r){let i=t[n+1],o=e===null,s=r?Hi(i):Jo(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];lO(u,e)&&(c=!0,t[s+1]=r?pm(l):fm(l)),s=r?Hi(l):Jo(l)}c&&(t[n+1]=r?fm(i):pm(i))}function lO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?jo(t,e)>=0:!1}var yn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function dO(t){return t.substring(yn.key,yn.keyEnd)}function hO(t){return fO(t),zS(t,qS(t,0,yn.textEnd))}function zS(t,e){let n=yn.textEnd;return n===e?-1:(e=yn.keyEnd=pO(t,yn.key=e,n),qS(t,e,n))}function fO(t){yn.key=0,yn.keyEnd=0,yn.value=0,yn.valueEnd=0,yn.textEnd=t.length}function qS(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function pO(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function gd(t,e,n){return WS(t,e,n,!1),gd}function Pt(t,e){return WS(t,e,null,!0),Pt}function Ja(t){mO(wO,gO,t,!0)}function gO(t,e){for(let n=hO(e);n>=0;n=zS(e,n))vl(t,dO(e),!0)}function WS(t,e,n,r){let i=ve(),o=xt(),s=Dg(2);if(o.firstUpdatePass&&KS(o,t,s,r),e!==cn&&dr(i,s,e)){let c=o.data[ar()];QS(o,c,i,i[Me],t,i[s+1]=bO(e,n),r,s)}}function mO(t,e,n,r){let i=xt(),o=Dg(2);i.firstUpdatePass&&KS(i,null,o,r);let s=ve();if(n!==cn&&dr(s,o,n)){let c=i.data[ar()];if(YS(c,r)&&!GS(i,o)){let u=r?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=fl(u,n||"")),hm(i,c,s,n,r)}else TO(i,c,s,s[Me],s[o+1],s[o+1]=EO(t,e,n),r,o)}}function GS(t,e){return e>=t.expandoStartIndex}function KS(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[ar()],s=GS(t,n);YS(o,r)&&e===null&&!s&&(e=!1),e=yO(i,o,e,r),cO(i,o,e,n,s,r)}}function yO(t,e,n,r){let i=NT(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=zg(null,t,e,n,r),n=za(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=zg(i,t,e,n,r),o===null){let u=vO(t,e,r);u!==void 0&&Array.isArray(u)&&(u=zg(null,t,e,u[1],r),u=za(u,e.attrs,r),_O(t,e,r,u))}else o=IO(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function vO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Jo(r)!==0)return t[Hi(r)]}function _O(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Hi(i)]=r}function IO(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=za(r,s,n)}return za(r,e.attrs,n)}function zg(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=za(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function za(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),vl(t,s,n?!0:e[++o]))}return t===void 0?null:t}function EO(t,e,n){if(n==null||n==="")return Rn;let r=[],i=od(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function wO(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&vl(t,r,n)}function TO(t,e,n,r,i,o,s,c){i===cn&&(i=Rn);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,D=null,N;h===p?(u+=2,l+=2,m!==y&&(D=p,N=y)):p===null||h!==null&&h<p?(u+=2,D=h):(l+=2,D=p,N=y),D!==null&&QS(t,e,n,r,D,N,s,c),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function QS(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],h=aO(l)?db(u,e,n,i,Jo(l),s):void 0;if(!Zl(h)){Zl(o)||oO(l)&&(o=db(u,null,n,i,c,s));let p=gg(ar(),n);kP(r,s,p,i,o)}}function db(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===cn&&(m=p?Rn:void 0);let y=p?_l(m,r):h===r?m:void 0;if(l&&!Zl(y)&&(y=_l(u,r)),Zl(y)&&(c=y,s))return c;let D=t[i+1];i=s?Hi(D):Jo(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=_l(u,r))}return c}function Zl(t){return t!==void 0}function bO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Bt(od(t)))),t}function YS(t,e){return(t.flags&(e?8:16))!==0}function q(t,e=""){let n=ve(),r=xt(),i=t+mt,o=r.firstCreatePass?ld(r,i,1,e,null):r.data[i],s=SO(r,n,o,e,t);n[i]=s,Rl()&&km(r,n,s,o),zo(o,!1)}var SO=(t,e,n,r,i)=>(kl(!0),lP(e[Me],r));function CO(t,e,n,r=""){return dr(t,zr(),n)?e+Ta(n)+r:cn}function Xe(t){return _n("",t),Xe}function _n(t,e,n){let r=ve(),i=CO(r,t,e,n);return i!==cn&&DO(r,ar(),i),_n}function DO(t,e,n){let r=gg(e,t);dP(t[Me],r,n)}function md(t,e,n){Mg(e)&&(e=e());let r=ve(),i=zr();if(dr(r,i,e)){let o=xt(),s=Al();oS(s,r,t,e,r[Me],n)}return md}function Wm(t,e){let n=Mg(t);return n&&t.set(e),n}function yd(t,e){let n=ve(),r=xt(),i=Kt();return HS(r,n,n[Me],i,t,e),yd}function ut(t){return dr(ve(),zr(),t)?Ta(t):cn}var Xl=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Gm=(()=>{class t{compileModuleSync(n){return new Wl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=ag(n),o=Wb(i.declarations).reduce((s,c)=>{let u=Br(c);return u&&s.push(new Qo(u)),s},[]);return new Xl(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var AO=(()=>{class t{zone=R(be);changeDetectionScheduler=R(Ur);applicationRef=R(zi);applicationErrorHandler=R(Qt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),JS=new U("",{factory:()=>!1});function Km({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new be(Re(F({},Ym()),{scheduleInRootZone:n})),[{provide:be,useFactory:t},{provide:or,multi:!0,useFactory:()=>{let r=R(AO,{optional:!0});return()=>r.initialize()}},{provide:or,multi:!0,useFactory:()=>{let r=R(RO);return()=>{r.initialize()}}},e===!0?{provide:Og,useValue:!0}:[],{provide:Lg,useValue:n??PS},{provide:Qt,useFactory:()=>{let r=R(be),i=R(Je),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(kn),o.handleError(s))})}}}]}function Qm(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Km({ngZoneFactory:()=>{let i=Ym(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Kr("NgZone_CoalesceEvent"),new be(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return qt([{provide:JS,useValue:!0},{provide:Oa,useValue:!1},r])}function Ym(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var RO=(()=>{class t{subscription=new Ve;initialized=!1;zone=R(be);pendingTasks=R(cr);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ZS=(()=>{class t{applicationErrorHandler=R(Qt);appRef=R(zi);taskService=R(cr);ngZone=R(be);zonelessEnabled=R(Oa);tracing=R(Ka,{optional:!0});disableScheduling=R(Og,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ve;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Kl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(Lg,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ql||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?ob:MS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Kl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ob(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kO(){return typeof $localize<"u"&&$localize.locale||Ya}var Jm=new U("",{providedIn:"root",factory:()=>R(Jm,{optional:!0,skipSelf:!0})||kO()});var tC=Symbol("InputSignalNode#UNSET"),jO=Re(F({},_p),{transformFn:void 0,applyValueToInputSignal(t,e){vp(t,e)}});function nC(t,e){let n=Object.create(jO);n.value=t,n.transformFn=e?.transform;function r(){if(fp(n),n.value===tC){let i=null;throw new $(-950,i)}return n.value}return r[To]=n,r}var UO=new U("");UO.__NG_ELEMENT_ID__=t=>{let e=Kt();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new $(204,!1)};function XS(t,e){return nC(t,e)}function BO(t){return nC(tC,t)}var rC=(XS.required=BO,XS);var Xa=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},iC=new Xa("20.1.0");var Zm=new U(""),$O=new U("");function Za(t){return!t.moduleRef}function HO(t){let e=Za(t)?t.r3Injector:t.moduleRef.injector,n=e.get(be);return n.run(()=>{Za(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Qt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Za(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Zm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Zm);s.add(o),t.moduleRef.onDestroy(()=>{Va(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return qO(r,n,()=>{let o=e.get(zm);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Jm,Ya);if($S(s||Ya),!e.get($O,!0))return Za(t)?e.get(zi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Za(t)){let u=e.get(zi);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return zO?.(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}var zO;function qO(t,e,n){try{let r=n();return Qa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var vd=null;function WO(t=[],e){return it.create({name:e,providers:[{provide:Sa,useValue:"platform"},{provide:Zm,useValue:new Set([()=>vd=null])},...t]})}function GO(t=[]){if(vd)return vd;let e=WO(t);return vd=e,jS(),KO(e),e}function KO(t){let e=t.get(rd,null);Ze(t,()=>{e?.forEach(n=>n())})}function Xm(){return!1}var _d=(()=>{class t{static __NG_ELEMENT_ID__=QO}return t})();function QO(t){return YO(Kt(),ve(),(t&16)===16)}function YO(t,e,n){if(Hr(t)&&!n){let r=gn(t.index,e);return new Bi(r,r)}else if(t.type&175){let r=e[Wt];return new Bi(r,e)}return null}function oC(t){ke(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=GO(r),o=[Km({}),{provide:Ur,useExisting:ZS},VT,...n||[]],s=new Ha({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return HO({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ke(9)}}var cC=null;function hr(){return cC}function ey(t){cC??=t}var ec=class{},ty=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:()=>R(uC),providedIn:"platform"})}return t})();var uC=(()=>{class t extends ty{_location;_history;_doc=R(at);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return hr().getBaseHref(this._doc)}onPopState(n){let r=hr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=hr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function lC(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function sC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Jr(t){return t&&t[0]!=="?"?`?${t}`:t}var Id=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:()=>R(hC),providedIn:"root"})}return t})(),dC=new U(""),hC=(()=>{class t extends Id{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(at).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return lC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Jr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Jr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Jr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(K(ty),K(dC,8))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ts=(()=>{class t{_subject=new gt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=XO(sC(aC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Jr(r))}normalize(n){return t.stripTrailingSlash(ZO(this._basePath,aC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Jr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Jr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Jr;static joinWithSlash=lC;static stripTrailingSlash=sC;static \u0275fac=function(r){return new(r||t)(K(Id))};static \u0275prov=V({token:t,factory:()=>JO(),providedIn:"root"})}return t})();function JO(){return new ts(K(Id))}function ZO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function aC(t){return t.replace(/\/index.html$/,"")}function XO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function ny(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var tc=class{};var fC="browser";var wd=new U(""),ay=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(K(wd),K(be))};static \u0275prov=V({token:t,factory:t.\u0275fac})}return t})(),nc=class{_doc;constructor(e){this._doc=e}manager},ry="ng-app-id";function pC(t){for(let e of t)e.remove()}function gC(t,e){let n=e.createElement("style");return n.textContent=t,n}function e1(t,e,n,r){let i=t.head?.querySelectorAll(`style[${ry}="${e}"],link[${ry}="${e}"]`);if(i)for(let o of i)o.removeAttribute(ry),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function oy(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var cy=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,e1(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,gC);r?.forEach(i=>this.addUsage(i,this.external,oy))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(pC(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])pC(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,gC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,oy(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(K(at),K(nd),K(id,8),K(Gr))};static \u0275prov=V({token:t,factory:t.\u0275fac})}return t})(),iy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},uy=/%COMP%/g;var yC="%COMP%",t1=`_nghost-${yC}`,n1=`_ngcontent-${yC}`,r1=!0,i1=new U("",{providedIn:"root",factory:()=>r1});function o1(t){return n1.replace(uy,t)}function s1(t){return t1.replace(uy,t)}function vC(t,e){return e.map(n=>n.replace(uy,t))}var ly=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,c,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new rc(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Ed?i.applyToHost(n):i instanceof ic&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case ur.Emulated:o=new Ed(u,l,r,this.appId,h,s,c,p,m);break;case ur.ShadowDom:return new sy(u,l,n,r,s,c,this.nonce,p,m);default:o=new ic(u,l,r,h,s,c,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(K(ay),K(cy),K(nd),K(i1),K(at),K(Gr),K(be),K(id),K(Ka,8))};static \u0275prov=V({token:t,factory:t.\u0275fac})}return t})(),rc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(iy[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(mC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(mC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=iy[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=iy[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(lr.DashCase|lr.Important)?e.style.setProperty(n,r,i&lr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&lr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=hr().getGlobalEventTarget(this.doc,e),!e))throw new $(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function mC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var sy=class extends rc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,c,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=vC(i.id,h);for(let m of h){let y=document.createElement("style");c&&y.setAttribute("nonce",c),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=oy(m,o);c&&y.setAttribute("nonce",c),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ic=class extends rc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,c,u,l){super(e,o,s,c,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?vC(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ed=class extends ic{contentAttr;hostAttr;constructor(e,n,r,i,o,s,c,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,c,u,l,h),this.contentAttr=o1(h),this.hostAttr=s1(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Td=class t extends ec{supportsDOMEvents=!0;static makeCurrent(){ey(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=a1();return n==null?null:c1(n)}resetBaseElement(){oc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ny(document.cookie,e)}},oc=null;function a1(){return oc=oc||document.head.querySelector("base"),oc?oc.getAttribute("href"):null}function c1(t){return new URL(t,document.baseURI).pathname}var u1=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:t.\u0275fac})}return t})(),IC=(()=>{class t extends nc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(K(at))};static \u0275prov=V({token:t,factory:t.\u0275fac})}return t})(),_C=["alt","control","meta","shift"],l1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},d1={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},EC=(()=>{class t extends nc{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),c=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>hr().onAndCancel(n,s.domEventName,c,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),_C.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=l1[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),_C.forEach(s=>{if(s!==i){let c=d1[s];c(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(K(at))};static \u0275prov=V({token:t,factory:t.\u0275fac})}return t})();function dy(t,e){return oC(F({rootComponent:t},h1(e)))}function h1(t){return{appProviders:[...y1,...t?.providers??[]],platformProviders:m1}}function f1(){Td.makeCurrent()}function p1(){return new kn}function g1(){return Im(document),document}var m1=[{provide:Gr,useValue:fC},{provide:rd,useValue:f1,multi:!0},{provide:at,useFactory:g1}];var y1=[{provide:Sa,useValue:"root"},{provide:kn,useFactory:p1},{provide:wd,useClass:IC,multi:!0,deps:[at]},{provide:wd,useClass:EC,multi:!0,deps:[at]},ly,cy,ay,{provide:$i,useExisting:ly},{provide:tc,useClass:u1},[]];var wC=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(K(at))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ie="primary",Ic=Symbol("RouteTitle"),my=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Gi(t){return new my(t)}function kC(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=t[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function _1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Fn(t[n],e[n]))return!1;return!0}function Fn(t,e){let n=t?yy(t):void 0,r=e?yy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!NC(t[i],e[i]))return!1;return!0}function yy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function NC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function xC(t){return t.length>0?t[t.length-1]:null}function pr(t){return xp(t)?t:Qa(t)?He(Promise.resolve(t)):X(t)}var I1={exact:MC,subset:OC},PC={exact:E1,subset:w1,ignored:()=>!0};function TC(t,e,n){return I1[n.paths](t.root,e.root,n.matrixParams)&&PC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function E1(t,e){return Fn(t,e)}function MC(t,e,n){if(!qi(t.segments,e.segments)||!Cd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!MC(t.children[r],e.children[r],n))return!1;return!0}function w1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>NC(t[n],e[n]))}function OC(t,e,n){return LC(t,e,e.segments,n)}function LC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!qi(i,n)||e.hasChildren()||!Cd(i,n,r))}else if(t.segments.length===n.length){if(!qi(t.segments,n)||!Cd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!OC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!qi(t.segments,i)||!Cd(t.segments,i,r)||!t.children[ie]?!1:LC(t.children[ie],e,o,r)}}function Cd(t,e,n){return e.every((r,i)=>PC[n](t[i].parameters,r.parameters))}var jn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ee([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Gi(this.queryParams),this._queryParamMap}toString(){return S1.serialize(this)}},Ee=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dd(this)}},Zr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Gi(this.parameters),this._parameterMap}toString(){return VC(this)}};function T1(t,e){return qi(t,e)&&t.every((n,r)=>Fn(n.parameters,e[r].parameters))}function qi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function b1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ie&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ie&&(n=n.concat(e(i,r)))}),n}var Ec=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:()=>new Ki,providedIn:"root"})}return t})(),Ki=class{parse(e){let n=new _y(e);return new jn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${sc(e.root,!0)}`,r=A1(e.queryParams),i=typeof e.fragment=="string"?`#${C1(e.fragment)}`:"";return`${n}${r}${i}`}},S1=new Ki;function Dd(t){return t.segments.map(e=>VC(e)).join("/")}function sc(t,e){if(!t.hasChildren())return Dd(t);if(e){let n=t.children[ie]?sc(t.children[ie],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ie&&r.push(`${i}:${sc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=b1(t,(r,i)=>i===ie?[sc(t.children[ie],!1)]:[`${i}:${sc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ie]!=null?`${Dd(t)}/${n[0]}`:`${Dd(t)}/(${n.join("//")})`}}function FC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bd(t){return FC(t).replace(/%3B/gi,";")}function C1(t){return encodeURI(t)}function vy(t){return FC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ad(t){return decodeURIComponent(t)}function bC(t){return Ad(t.replace(/\+/g,"%20"))}function VC(t){return`${vy(t.path)}${D1(t.parameters)}`}function D1(t){return Object.entries(t).map(([e,n])=>`;${vy(e)}=${vy(n)}`).join("")}function A1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${bd(n)}=${bd(i)}`).join("&"):`${bd(n)}=${bd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var R1=/^[^\/()?;#]+/;function hy(t){let e=t.match(R1);return e?e[0]:""}var k1=/^[^\/()?;=#]+/;function N1(t){let e=t.match(k1);return e?e[0]:""}var x1=/^[^=?&#]+/;function P1(t){let e=t.match(x1);return e?e[0]:""}var M1=/^[^&#]+/;function O1(t){let e=t.match(M1);return e?e[0]:""}var _y=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ie]=new Ee(e,n)),r}parseSegment(){let e=hy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new Zr(Ad(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=N1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=hy(this.remaining);i&&(r=i,this.capture(r))}e[Ad(n)]=Ad(r)}parseQueryParam(e){let n=P1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=O1(this.remaining);s&&(r=s,this.capture(r))}let i=bC(n),o=bC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=hy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ie);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ie]:new Ee([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function jC(t){return t.segments.length>0?new Ee([],{[ie]:t}):t}function UC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=UC(i);if(r===ie&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ee(t.segments,e);return L1(n)}function L1(t){if(t.numberOfChildren===1&&t.children[ie]){let e=t.children[ie];return new Ee(t.segments.concat(e.segments),e.children)}return t}function ss(t){return t instanceof jn}function BC(t,e,n=null,r=null){let i=$C(t);return HC(i,e,n,r)}function $C(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let c=new Ee(o.url,s);return o===t&&(e=c),c}let r=n(t.root),i=jC(r);return e??i}function HC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return fy(i,i,i,n,r);let o=F1(e);if(o.toRoot())return fy(i,i,new Ee([],{}),n,r);let s=V1(o,i,t),c=s.processChildren?cc(s.segmentGroup,s.index,o.commands):qC(s.segmentGroup,s.index,o.commands);return fy(i,s.segmentGroup,c,n,r)}function Rd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function dc(t){return typeof t=="object"&&t!=null&&t.outlets}function fy(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=zC(t,e,n);let c=jC(UC(s));return new jn(c,o,i)}function zC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=zC(o,e,n)}),new Ee(t.segments,r)}var kd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Rd(r[0]))throw new $(4003,!1);let i=r.find(dc);if(i&&i!==xC(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function F1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new kd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new kd(n,e,r)}var is=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function V1(t,e,n){if(t.isAbsolute)return new is(e,!0,0);if(!n)return new is(e,!1,NaN);if(n.parent===null)return new is(n,!0,0);let r=Rd(t.commands[0])?0:1,i=n.segments.length-1+r;return j1(n,i,t.numberOfDoubleDots)}function j1(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new is(r,!1,i-o)}function U1(t){return dc(t[0])?t[0].outlets:{[ie]:t}}function qC(t,e,n){if(t??=new Ee([],{}),t.segments.length===0&&t.hasChildren())return cc(t,e,n);let r=B1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ee(t.segments.slice(0,r.pathIndex),{});return o.children[ie]=new Ee(t.segments.slice(r.pathIndex),t.children),cc(o,0,i)}else return r.match&&i.length===0?new Ee(t.segments,{}):r.match&&!t.hasChildren()?Iy(t,e,n):r.match?cc(t,0,i):Iy(t,e,n)}function cc(t,e,n){if(n.length===0)return new Ee(t.segments,{});{let r=U1(n),i={};if(Object.keys(r).some(o=>o!==ie)&&t.children[ie]&&t.numberOfChildren===1&&t.children[ie].segments.length===0){let o=cc(t.children[ie],e,n);return new Ee(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=qC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ee(t.segments,i)}}function B1(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],c=n[r];if(dc(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!CC(u,l,s))return o;r+=2}else{if(!CC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Iy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(dc(o)){let u=$1(o.outlets);return new Ee(r,u)}if(i===0&&Rd(n[0])){let u=t.segments[e];r.push(new Zr(u.path,SC(n[0]))),i++;continue}let s=dc(o)?o.outlets[ie]:`${o}`,c=i<n.length-1?n[i+1]:null;s&&c&&Rd(c)?(r.push(new Zr(s,SC(c))),i+=2):(r.push(new Zr(s,{})),i++)}return new Ee(r,{})}function $1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Iy(new Ee([],{}),0,r))}),e}function SC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function CC(t,e,n){return t==n.path&&Fn(e,n.parameters)}var uc="imperative",lt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(lt||{}),Zt=class{id;url;constructor(e,n){this.id=e,this.url=n}},Qi=class extends Zt{type=lt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},En=class extends Zt{urlAfterRedirects;type=lt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(Mt||{}),hc=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(hc||{}),Vn=class extends Zt{reason;code;type=lt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},fr=class extends Zt{reason;code;type=lt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},as=class extends Zt{error;target;type=lt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fc=class extends Zt{urlAfterRedirects;state;type=lt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nd=class extends Zt{urlAfterRedirects;state;type=lt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xd=class extends Zt{urlAfterRedirects;state;shouldActivate;type=lt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Pd=class extends Zt{urlAfterRedirects;state;type=lt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Md=class extends Zt{urlAfterRedirects;state;type=lt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Od=class{route;type=lt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ld=class{route;type=lt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Fd=class{snapshot;type=lt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vd=class{snapshot;type=lt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jd=class{snapshot;type=lt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ud=class{snapshot;type=lt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var pc=class{},cs=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function H1(t){return!(t instanceof pc)&&!(t instanceof cs)}function z1(t,e){return t.providers&&!t._injector&&(t._injector=Ga(t.providers,e,`Route: ${t.path}`)),t._injector??e}function In(t){return t.outlet||ie}function q1(t,e){let n=t.filter(r=>In(r)===e);return n.push(...t.filter(r=>In(r)!==e)),n}function ds(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Bd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ds(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new hs(this.rootInjector)}},hs=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Bd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(K(Je))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$d=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ey(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Ey(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=wy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wy(e,this._root).map(n=>n.value)}};function Ey(t,e){if(t===e.value)return e;for(let n of e.children){let r=Ey(t,n);if(r)return r}return null}function wy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=wy(t,n);if(r.length)return r.unshift(e),r}return[]}var Jt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function rs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var gc=class extends $d{snapshot;constructor(e,n){super(e),this.snapshot=n,ky(this,e)}toString(){return this.snapshot.toString()}};function WC(t){let e=W1(t),n=new Qe([new Zr("",{})]),r=new Qe({}),i=new Qe({}),o=new Qe({}),s=new Qe(""),c=new Xr(n,r,o,s,i,ie,t,e.root);return c.snapshot=e.root,new gc(new Jt(c,[]),e)}function W1(t){let e={},n={},r={},i="",o=new Wi([],e,r,i,n,ie,t,null,{});return new mc("",new Jt(o,[]))}var Xr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(pe(l=>l[Ic]))??X(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pe(e=>Gi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pe(e=>Gi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Hd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&KC(i)&&(r.resolve[Ic]=i.title),r}var Wi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ic]}constructor(e,n,r,i,o,s,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Gi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Gi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},mc=class extends $d{url;constructor(e,n){super(n),this.url=e,ky(this,n)}toString(){return GC(this._root)}};function ky(t,e){e.value._routerState=t,e.children.forEach(n=>ky(t,n))}function GC(t){let e=t.children.length>0?` { ${t.children.map(GC).join(", ")} } `:"";return`${t.value}${e}`}function py(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Fn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Fn(e.params,n.params)||t.paramsSubject.next(n.params),_1(e.url,n.url)||t.urlSubject.next(n.url),Fn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ty(t,e){let n=Fn(t.params,e.params)&&T1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Ty(t.parent,e.parent))}function KC(t){return typeof t.title=="string"||t.title===null}var QC=new U(""),wc=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ie;activateEvents=new _e;deactivateEvents=new _e;attachEvents=new _e;detachEvents=new _e;routerOutletData=rC(void 0);parentContexts=R(hs);location=R(hd);changeDetector=R(_d);inputBinder=R(Gd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new by(n,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Vm({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[vn]})}return t})(),by=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Xr?this.route:e===hs?this.childContexts:e===QC?this.outletData:this.parent.get(e,n)}},Gd=new U("");var Ny=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=de({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ct(0,"router-outlet")},dependencies:[wc],encapsulation:2})}return t})();function xy(t){let e=t.children&&t.children.map(xy),n=e?Re(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ie&&(n.component=Ny),n}function G1(t,e,n){let r=yc(t,e._root,n?n._root:void 0);return new gc(r,e)}function yc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=K1(t,e,n);return new Jt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>yc(t,c)),s}}let r=Q1(e.value),i=e.children.map(o=>yc(t,o));return new Jt(r,i)}}function K1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return yc(t,r,i);return yc(t,r)})}function Q1(t){return new Xr(new Qe(t.url),new Qe(t.params),new Qe(t.queryParams),new Qe(t.fragment),new Qe(t.data),t.outlet,t.component,t)}var us=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},YC="ngNavigationCancelingError";function zd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ss(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=JC(!1,Mt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function JC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[YC]=!0,n.cancellationCode=e,n}function Y1(t){return ZC(t)&&ss(t.url)}function ZC(t){return!!t&&t[YC]}var J1=(t,e,n,r)=>pe(i=>(new Sy(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Sy=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),py(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=rs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=rs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=rs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=rs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ud(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Vd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(py(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),py(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},qd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},os=class{component;route;constructor(e,n){this.component=e,this.route=n}};function Z1(t,e,n){let r=t._root,i=e?e._root:null;return ac(r,i,n,[r.value])}function X1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function fs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Yp(t)?t:e.get(t):r}function ac(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=rs(e);return t.children.forEach(s=>{eL(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>lc(c,n.getContext(s),i)),i}function eL(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=tL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new qd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ac(t,e,c?c.children:null,r,i):ac(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new os(c.outlet.component,s))}else s&&lc(e,c,i),i.canActivateChecks.push(new qd(r)),o.component?ac(t,null,c?c.children:null,r,i):ac(t,null,n,r,i);return i}function tL(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!qi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!qi(t.url,e.url)||!Fn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ty(t,e)||!Fn(t.queryParams,e.queryParams);case"paramsChange":default:return!Ty(t,e)}}function lc(t,e,n){let r=rs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?lc(s,e.children.getContext(o),n):lc(s,null,n):lc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new os(e.outlet.component,i)):n.canDeactivateChecks.push(new os(null,i)):n.canDeactivateChecks.push(new os(null,i))}function Tc(t){return typeof t=="function"}function nL(t){return typeof t=="boolean"}function rL(t){return t&&Tc(t.canLoad)}function iL(t){return t&&Tc(t.canActivate)}function oL(t){return t&&Tc(t.canActivateChild)}function sL(t){return t&&Tc(t.canDeactivate)}function aL(t){return t&&Tc(t.canMatch)}function XC(t){return t instanceof tr||t?.name==="EmptyError"}var Sd=Symbol("INITIAL_VALUE");function ls(){return rn(t=>il(t.map(e=>e.pipe(nr(1),Op(Sd)))).pipe(pe(e=>{for(let n of e)if(n!==!0){if(n===Sd)return Sd;if(n===!1||cL(n))return n}return!0}),Nt(e=>e!==Sd),nr(1)))}function cL(t){return ss(t)||t instanceof us}function uL(t,e){return Ye(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?X(Re(F({},n),{guardsResult:!0})):lL(s,r,i,t).pipe(Ye(c=>c&&nL(c)?dL(r,o,t,e):X(c)),pe(c=>Re(F({},n),{guardsResult:c})))})}function lL(t,e,n,r){return He(t).pipe(Ye(i=>mL(i.component,i.route,n,e,r)),rr(i=>i!==!0,!0))}function dL(t,e,n,r){return He(e).pipe(Lo(i=>Oo(fL(i.route.parent,r),hL(i.route,r),gL(t,i.path,n),pL(t,i.route,n))),rr(i=>i!==!0,!0))}function hL(t,e){return t!==null&&e&&e(new jd(t)),X(!0)}function fL(t,e){return t!==null&&e&&e(new Fd(t)),X(!0)}function pL(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let i=r.map(o=>ya(()=>{let s=ds(e)??n,c=fs(o,s),u=iL(c)?c.canActivate(e,t):Ze(s,()=>c(e,t));return pr(u).pipe(rr())}));return X(i).pipe(ls())}function gL(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>X1(s)).filter(s=>s!==null).map(s=>ya(()=>{let c=s.guards.map(u=>{let l=ds(s.node)??n,h=fs(u,l),p=oL(h)?h.canActivateChild(r,t):Ze(l,()=>h(r,t));return pr(p).pipe(rr())});return X(c).pipe(ls())}));return X(o).pipe(ls())}function mL(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return X(!0);let s=o.map(c=>{let u=ds(e)??i,l=fs(c,u),h=sL(l)?l.canDeactivate(t,e,n,r):Ze(u,()=>l(t,e,n,r));return pr(h).pipe(rr())});return X(s).pipe(ls())}function yL(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return X(!0);let o=i.map(s=>{let c=fs(s,t),u=rL(c)?c.canLoad(e,n):Ze(t,()=>c(e,n));return pr(u)});return X(o).pipe(ls(),eD(r))}function eD(t){return Sp(nt(e=>{if(typeof e!="boolean")throw zd(t,e)}),pe(e=>e===!0))}function vL(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return X(!0);let o=i.map(s=>{let c=fs(s,t),u=aL(c)?c.canMatch(e,n):Ze(t,()=>c(e,n));return pr(u)});return X(o).pipe(ls(),eD(r))}var vc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},_c=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ns(t){return Mo(new vc(t))}function _L(t){return Mo(new $(4e3,!1))}function IL(t){return Mo(JC(!1,Mt.GuardRejected))}var Cy=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return X(r);if(i.numberOfChildren>1||!i.children[ie])return _L(`${e.redirectTo}`);i=i.children[ie]}}applyRedirectCommands(e,n,r,i,o){return EL(n,i,o).pipe(pe(s=>{if(s instanceof jn)throw new _c(s);let c=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new _c(c);return c}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new jn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=n[c]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new Ee(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function EL(t,e,n){if(typeof t=="string")return X(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,params:l,data:h,title:p}=e;return pr(Ze(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,title:p})))}var Dy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wL(t,e,n,r,i){let o=tD(t,e,n);return o.matched?(r=z1(e,r),vL(r,e,n,i).pipe(pe(s=>s===!0?o:F({},Dy)))):X(o)}function tD(t,e,n){if(e.path==="**")return TL(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},Dy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||kC)(n,t,e);if(!i)return F({},Dy);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function TL(t){return{matched:!0,parameters:t.length>0?xC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function DC(t,e,n,r){return n.length>0&&CL(t,n,r)?{segmentGroup:new Ee(e,SL(r,new Ee(n,t.children))),slicedSegments:[]}:n.length===0&&DL(t,n,r)?{segmentGroup:new Ee(t.segments,bL(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ee(t.segments,t.children),slicedSegments:n}}function bL(t,e,n,r){let i={};for(let o of n)if(Kd(t,e,o)&&!r[In(o)]){let s=new Ee([],{});i[In(o)]=s}return F(F({},r),i)}function SL(t,e){let n={};n[ie]=e;for(let r of t)if(r.path===""&&In(r)!==ie){let i=new Ee([],{});n[In(r)]=i}return n}function CL(t,e,n){return n.some(r=>Kd(t,e,r)&&In(r)!==ie)}function DL(t,e,n){return n.some(r=>Kd(t,e,r))}function Kd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function AL(t,e,n){return e.length===0&&!t.children[n]}var Ay=class{};function RL(t,e,n,r,i,o,s="emptyOnly"){return new Ry(t,e,n,r,i,s,o).recognize()}var kL=31,Ry=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new Cy(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=DC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(pe(({children:n,rootSnapshot:r})=>{let i=new Jt(r,n),o=new mc("",i),s=BC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Wi([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ie,n).pipe(pe(r=>({children:r,rootSnapshot:n})),Fr(r=>{if(r instanceof _c)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof vc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(pe(s=>s instanceof Jt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return He(o).pipe(Lo(s=>{let c=r.children[s],u=q1(n,s);return this.processSegmentGroup(e,u,c,s,i)}),Mp((s,c)=>(s.push(...c),s)),Vr(null),Pp(),Ye(s=>{if(s===null)return ns(r);let c=nD(s);return NL(c),X(c)}))}processSegment(e,n,r,i,o,s,c){return He(n).pipe(Lo(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,c).pipe(Fr(l=>{if(l instanceof vc)return X(null);throw l}))),rr(u=>!!u),Fr(u=>{if(XC(u))return AL(r,i,o)?X(new Ay):ns(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,c,u){return In(r)!==s&&(s===ie||!Kd(i,o,r))?ns(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):ns(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=tD(n,i,o);if(!u)return ns(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kL&&(this.allowRedirects=!1));let y=new Wi(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,AC(i),In(i),i.component??i._loadedComponent??null,i,RC(i)),D=Hd(y,c,this.paramsInheritanceStrategy);return y.params=Object.freeze(D.params),y.data=Object.freeze(D.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(rn(k=>this.applyRedirects.lineralizeSegments(i,k)),Ye(k=>this.processSegment(e,r,n,k.concat(m),s,!1,c)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let c=wL(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),c.pipe(rn(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(rn(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,D=new Wi(m,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,AC(r),In(r),r.component??r._loadedComponent??null,r,RC(r)),N=Hd(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(N.params),D.data=Object.freeze(N.data);let{segmentGroup:k,slicedSegments:O}=DC(n,m,y,l);if(O.length===0&&k.hasChildren())return this.processChildren(h,l,k,D).pipe(pe(J=>new Jt(D,J)));if(l.length===0&&O.length===0)return X(new Jt(D,[]));let B=In(r)===o;return this.processSegment(h,l,k,O,B?ie:o,!0,D).pipe(pe(J=>new Jt(D,J instanceof Jt?[J]:[])))}))):ns(n)))}getChildConfig(e,n,r){return n.children?X({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?X({routes:n._loadedRoutes,injector:n._loadedInjector}):yL(e,n,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,n).pipe(nt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):IL(n))):X({routes:[],injector:e})}};function NL(t){t.sort((e,n)=>e.value.outlet===ie?-1:n.value.outlet===ie?1:e.value.outlet.localeCompare(n.value.outlet))}function xL(t){let e=t.value.routeConfig;return e&&e.path===""}function nD(t){let e=[],n=new Set;for(let r of t){if(!xL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=nD(r.children);e.push(new Jt(r.value,i))}return e.filter(r=>!n.has(r))}function AC(t){return t.data||{}}function RC(t){return t.resolve||{}}function PL(t,e,n,r,i,o){return Ye(s=>RL(t,e,n,r,s.extractedUrl,i,o).pipe(pe(({state:c,tree:u})=>Re(F({},s),{targetSnapshot:c,urlAfterRedirects:u}))))}function ML(t,e){return Ye(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return X(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of rD(u))s.add(l);let c=0;return He(s).pipe(Lo(u=>o.has(u)?OL(u,r,t,e):(u.data=Hd(u,u.parent,t).resolve,X(void 0))),nt(()=>c++),Fo(1),Ye(u=>c===s.size?X(n):Vt))})}function rD(t){let e=t.children.map(n=>rD(n)).flat();return[t,...e]}function OL(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!KC(i)&&(o[Ic]=i.title),ya(()=>(t.data=Hd(t,t.parent,n).resolve,LL(o,t,e,r).pipe(pe(s=>(t._resolvedData=s,t.data=F(F({},t.data),s),null)))))}function LL(t,e,n,r){let i=yy(t);if(i.length===0)return X({});let o={};return He(i).pipe(Ye(s=>FL(t[s],e,n,r).pipe(rr(),nt(c=>{if(c instanceof us)throw zd(new Ki,c);o[s]=c}))),Fo(1),pe(()=>o),Fr(s=>XC(s)?Vt:Mo(s)))}function FL(t,e,n,r){let i=ds(e)??r,o=fs(t,i),s=o.resolve?o.resolve(e,n):Ze(i,()=>o(e,n));return pr(s)}function gy(t){return rn(e=>{let n=t(e);return n?He(n).pipe(pe(()=>e)):X(e)})}var Py=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ie);return r}getResolvedTitleForRoute(n){return n.data[Ic]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:()=>R(iD),providedIn:"root"})}return t})(),iD=(()=>{class t extends Py{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(K(wC))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bc=new U("",{providedIn:"root",factory:()=>({})}),Sc=new U(""),oD=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(Gm);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return X(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=pr(Ze(n,()=>r.loadComponent())).pipe(pe(aD),nt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),va(()=>{this.componentLoaders.delete(r)})),o=new ko(i,()=>new gt).pipe(Ro());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=sD(r,this.compiler,n,this.onLoadEndListener).pipe(va(()=>{this.childrenLoaders.delete(r)})),s=new ko(o,()=>new gt).pipe(Ro());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sD(t,e,n,r){return pr(Ze(n,()=>t.loadChildren())).pipe(pe(aD),Ye(i=>i instanceof fd||Array.isArray(i)?X(i):He(e.compileModuleAsync(i))),pe(i=>{r&&r(t);let o,s,c=!1;return Array.isArray(i)?(s=i,c=!0):(o=i.create(n).injector,s=o.get(Sc,[],{optional:!0,self:!0}).flat()),{routes:s.map(xy),injector:o}}))}function VL(t){return t&&typeof t=="object"&&"default"in t}function aD(t){return VL(t)?t.default:t}var Qd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:()=>R(jL),providedIn:"root"})}return t})(),jL=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),cD=new U("");var uD=new U(""),lD=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new gt;transitionAbortWithErrorSubject=new gt;configLoader=R(oD);environmentInjector=R(Je);destroyRef=R(Wr);urlSerializer=R(Ec);rootContexts=R(hs);location=R(ts);inputBindingEnabled=R(Gd,{optional:!0})!==null;titleStrategy=R(Py);options=R(bc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(Qd);createViewTransition=R(cD,{optional:!0});navigationErrorHandler=R(uD,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>X(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Od(i)),r=i=>this.events.next(new Ld(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Re(F({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(n){return this.transitions=new Qe(null),this.transitions.pipe(Nt(r=>r!==null),rn(r=>{let i=!1;return X(r).pipe(rn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Mt.SupersededByNewNavigation),Vt;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Re(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&c!=="reload"){let u="";return this.events.next(new fr(o.id,this.urlSerializer.serialize(o.rawUrl),u,hc.IgnoredSameUrlNavigation)),o.resolve(!1),Vt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return X(o).pipe(rn(u=>(this.events.next(new Qi(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Vt:Promise.resolve(u))),PL(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=Re(F({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new fc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new Qi(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let D=WC(this.rootComponentType).snapshot;return this.currentTransition=r=Re(F({},o),{targetSnapshot:D,urlAfterRedirects:l,extras:Re(F({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,X(r)}else{let u="";return this.events.next(new fr(o.id,this.urlSerializer.serialize(o.extractedUrl),u,hc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Vt}}),nt(o=>{let s=new Nd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),pe(o=>(this.currentTransition=r=Re(F({},o),{guards:Z1(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),uL(this.environmentInjector,o=>this.events.next(o)),nt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw zd(this.urlSerializer,o.guardsResult);let s=new xd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Nt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Mt.GuardRejected),!1)),gy(o=>{if(o.guards.canActivateChecks.length!==0)return X(o).pipe(nt(s=>{let c=new Pd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),rn(s=>{let c=!1;return X(s).pipe(ML(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(s,"",Mt.NoDataFromResolver)}}))}),nt(s=>{let c=new Md(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}))}),gy(o=>{let s=c=>{let u=[];if(c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent){let l=ds(c)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,c.routeConfig).pipe(nt(h=>{c.component=h}),pe(()=>{})))}for(let l of c.children)u.push(...s(l));return u};return il(s(o.targetSnapshot.root)).pipe(Vr(null),nr(1))}),gy(()=>this.afterPreactivation()),rn(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return c?He(c).pipe(pe(()=>r)):X(r)}),pe(o=>{let s=G1(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Re(F({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),nt(()=>{this.events.next(new pc)}),J1(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),nr(1),sl(new ae(o=>{let s=r.abortController.signal,c=()=>o.next();return s.addEventListener("abort",c),()=>s.removeEventListener("abort",c)}).pipe(Nt(()=>!i&&!r.targetRouterState),nt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Mt.Aborted)}))),nt({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new En(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),sl(this.transitionAbortWithErrorSubject.pipe(nt(o=>{throw o}))),va(()=>{i||this.cancelNavigationTransition(r,"",Mt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Fr(o=>{if(this.destroyed)return r.resolve(!1),Vt;if(i=!0,ZC(o))this.events.next(new Vn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),Y1(o)?this.events.next(new cs(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new as(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=Ze(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(c instanceof us){let{message:u,cancellationCode:l}=zd(this.urlSerializer,c);this.events.next(new Vn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new cs(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Vt}))}))}cancelNavigationTransition(n,r,i){let o=new Vn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function UL(t){return t!==uc}var dD=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:()=>R(BL),providedIn:"root"})}return t})(),Wd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},BL=(()=>{class t extends Wd{static \u0275fac=(()=>{let n;return function(i){return(n||(n=td(t)))(i||t)}})();static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hD=(()=>{class t{urlSerializer=R(Ec);options=R(bc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(ts);urlHandlingStrategy=R(Qd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new jn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof jn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=WC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:()=>R($L),providedIn:"root"})}return t})(),$L=(()=>{class t extends hD{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Qi?this.updateStateMemento():n instanceof fr?this.commitTransition(r):n instanceof fc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof pc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Vn&&n.code!==Mt.SupersededByNewNavigation&&n.code!==Mt.Redirect?this.restoreHistory(r):n instanceof as?this.restoreHistory(r,!0):n instanceof En&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let c=this.browserPageId,u=F(F({},s),this.generateNgRouterState(i,c));this.location.replaceState(n,"",u)}else{let c=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",c)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=td(t)))(i||t)}})();static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function My(t,e){t.events.pipe(Nt(n=>n instanceof En||n instanceof Vn||n instanceof as||n instanceof fr),pe(n=>n instanceof En||n instanceof fr?0:(n instanceof Vn?n.code===Mt.Redirect||n.code===Mt.SupersededByNewNavigation:!1)?2:1),Nt(n=>n!==2),nr(1)).subscribe(()=>{e()})}var HL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ps=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R($m);stateManager=R(hD);options=R(bc,{optional:!0})||{};pendingTasks=R(cr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(lD);urlSerializer=R(Ec);location=R(ts);urlHandlingStrategy=R(Qd);injector=R(Je);_events=new gt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(dD);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(Sc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(Gd,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ve;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Vn&&r.code!==Mt.Redirect&&r.code!==Mt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof En)this.navigated=!0;else if(r instanceof cs){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||UL(i.source)},s);this.scheduleNavigation(c,uc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}H1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),uc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,s,o).catch(u=>{this.disposed||this.injector.get(Qt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(xy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=$C(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return HC(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=ss(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,uc,null,r)}navigate(n,r={skipLocationChange:!1}){return qL(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},HL):r===!1?i=F({},zL):i=r,ss(n))return TC(this.currentUrlTree,n,i);let o=this.parseUrl(n);return TC(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{c=p,u=m});let h=this.pendingTasks.add();return My(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new $(4008,!1)}var GL=new U("");function Oy(t,...e){return qt([{provide:Sc,multi:!0,useValue:t},[],{provide:Xr,useFactory:KL,deps:[ps]},{provide:pd,multi:!0,useFactory:QL},e.map(n=>n.\u0275providers)])}function KL(t){return t.routerState.root}function QL(){let t=R(it);return e=>{let n=t.get(zi);if(e!==n.components[0])return;let r=t.get(ps),i=t.get(YL);t.get(JL)===1&&r.initialNavigation(),t.get(ZL,null,{optional:!0})?.setUpPreloading(),t.get(GL,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var YL=new U("",{factory:()=>new gt}),JL=new U("",{providedIn:"root",factory:()=>1});var ZL=new U("");var fD={production:!1,firebaseConfig:{projectId:"japones-bedac",appId:"1:964982698950:web:e5b2797c57df0d657eb8c7",storageBucket:"japones-bedac.firebasestorage.app",apiKey:"AIzaSyAnnJLZr_SqhDgu8Kx4bY0t3_OiM3m_KME",authDomain:"japones-bedac.firebaseapp.com",messagingSenderId:"964982698950",measurementId:"G-R79XFJ7LC5"}};var Yd=class t{texto="";isActive=!1;tabClicked=new _e;onCLick(){this.tabClicked.emit()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["app-alfabeto-tab-button"]],inputs:{texto:"texto",isActive:"isActive"},outputs:{tabClicked:"tabClicked"},decls:2,vars:3,consts:[[1,"tab-button",3,"click"]],template:function(n,r){n&1&&(me(0,"button",0),vt("click",function(){return r.onCLick()}),q(1),Ie()),n&2&&(Pt("active",r.isActive),H(),Xe(r.texto))},styles:[".tab-button[_ngcontent-%COMP%]{padding:.7rem 1.5rem;border:none;border-radius:50px;background:#1a2a6c;color:#fff;font-size:1rem;font-weight:700;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:10px;box-shadow:0 5px 10px #0000004d}.tab-button[_ngcontent-%COMP%]:hover{background:#0d1a4a;transform:translateY(-3px)}.tab-button.active[_ngcontent-%COMP%]{background:#fdbb2d;color:#333}"]})};var Jd=class t{isActive=!1;texto="";tabClicked=new _e;onCLick(){this.tabClicked.emit()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["app-group-tab-button"]],inputs:{isActive:"isActive",texto:"texto"},outputs:{tabClicked:"tabClicked"},decls:2,vars:3,consts:[[1,"tab-button",3,"click"]],template:function(n,r){n&1&&(me(0,"button",0),vt("click",function(){return r.onCLick()}),q(1),Ie()),n&2&&(Pt("active",r.isActive),H(),Xe(r.texto))},styles:[".tab-button[_ngcontent-%COMP%]{padding:10px 20px;background:#e0e7ff;border:none;border-radius:30px;cursor:pointer;transition:all .3s;font-weight:500;box-shadow:0 5px 10px #0000004d}.tab-button[_ngcontent-%COMP%]:hover{background:#c5d2ff;transform:translateY(-3px)}.tab-button.active[_ngcontent-%COMP%]{background:#1a2a6c;color:#fff}"]})};var ei=class t{groupList=[{id:0,text:"Todos"},{id:1,text:"Vogais"},{id:2,text:"K"},{id:3,text:"S"},{id:4,text:"T"},{id:5,text:"N"},{id:6,text:"H"},{id:7,text:"M"},{id:8,text:"Y"},{id:9,text:"R"},{id:10,text:"W"}];getAll(){return this.groupList}getTextById(e){let n=this.groupList.find(r=>r.id===e);return n?n.text:""}static \u0275fac=function(n){return new(n||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};var Zd=class t{tabsList=[{id:0,text:"Todos"},{id:1,text:"Hiragana"},{id:2,text:"Katakana"}];getAll(){return this.tabsList}static \u0275fac=function(n){return new(n||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};var Xd=class t{checked=!1;checkedChange=new _e;toggleCheck(e){e.stopPropagation(),this.checked=!this.checked,this.checkedChange.emit(this.checked)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["app-check-button"]],inputs:{checked:"checked"},outputs:{checkedChange:"checkedChange"},decls:2,vars:2,consts:[["type","button","aria-label","Marcar/Desmarcar",1,"check-btn",3,"click"],[1,"fas","fa-check"]],template:function(n,r){n&1&&(me(0,"button",0),vt("click",function(o){return r.toggleCheck(o)}),Tt(1,"i",1),Ie()),n&2&&Pt("checked",r.checked)},styles:[".check-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#ffffff4d;border:none;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff;transition:all .3s;z-index:10}.check-btn.checked[_ngcontent-%COMP%]{background:#4caf50;color:#fff}"]})};var gs=class t{strokes="";kana="";romaji="";example="";meaning="";group="";flipped=!1;checked=!1;checkedChange=new _e;toggleFlip(){this.flipped=!this.flipped}onCheckedChange(e){this.checkedChange.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["app-flashcard"]],inputs:{strokes:"strokes",kana:"kana",romaji:"romaji",example:"example",meaning:"meaning",group:"group",checked:"checked"},outputs:{checkedChange:"checkedChange"},decls:21,vars:11,consts:[[1,"flashcard",3,"click"],[1,"flashcard-inner"],[1,"flashcard-front"],[3,"checkedChange","checked"],[1,"strokes"],[1,"kana"],[1,"flashcard-back"],[1,"romaji"],[1,"example-container"],[1,"example-word"],[1,"example-meaning"]],template:function(n,r){n&1&&(z(0,"div",0),Ne("click",function(){return r.toggleFlip()}),z(1,"div",1)(2,"div",2)(3,"app-check-button",3),Ne("checkedChange",function(o){return r.onCheckedChange(o)}),Q(),z(4,"div",4),q(5),Q(),z(6,"div",5),q(7),Q()(),z(8,"div",6)(9,"app-check-button",3),yd("checkedChange",function(o){return Wm(r.checked,o)||(r.checked=o),o}),Ne("checkedChange",function(o){return r.onCheckedChange(o)}),Q(),z(10,"div",4),q(11),Q(),z(12,"div",5),q(13),Q(),z(14,"div",7),q(15),Q(),z(16,"div",8)(17,"div",9),q(18),Q(),z(19,"div",10),q(20),Q()()()()()),n&2&&(Pt("flipped",r.flipped),H(3),Oe("checked",r.checked),H(2),Xe(r.strokes),H(2),Xe(r.kana),H(2),md("checked",r.checked),H(2),Xe(r.strokes),H(2),Xe(r.kana),H(2),Xe(r.romaji),H(3),Xe(r.example),H(2),Xe(r.meaning))},dependencies:[Xd],styles:[".flashcard[_ngcontent-%COMP%]{width:200px;height:280px;box-sizing:border-box}.flashcard[_ngcontent-%COMP%]:hover{transform:translateY(-5px);cursor:pointer}.flashcard-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;text-align:center;transition:transform 1s;transform-style:preserve-3d}.flashcard.flipped[_ngcontent-%COMP%]   .flashcard-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.flashcard-front[_ngcontent-%COMP%], .flashcard-back[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;backface-visibility:hidden;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:15px;box-shadow:0 5px 15px #000000b3;padding:15px;overflow:hidden}.flashcard-front[_ngcontent-%COMP%]{background:#1a2a6c;color:#fff}.flashcard-back[_ngcontent-%COMP%]{background:#fdbb2d;color:#333;transform:rotateY(180deg);justify-content:space-between}.kana[_ngcontent-%COMP%], .kanji[_ngcontent-%COMP%]{font-size:4rem;font-weight:700;margin-bottom:10px;font-family:Noto Sans JP,sans-serif}.romaji[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:10px}.meaning[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin-bottom:10px}.example-container[_ngcontent-%COMP%]{width:100%;padding:10px;background:#ffffffb3;border-radius:10px;margin-top:10px;max-height:100px;overflow:hidden}.example-word[_ngcontent-%COMP%]{font-size:1.1rem;font-family:Noto Sans JP,sans-serif;margin-bottom:5px;line-height:1.3}.example-meaning[_ngcontent-%COMP%]{font-size:.9rem;font-style:italic;color:#555;line-height:1.3}.strokes[_ngcontent-%COMP%]{font-size:.9rem;color:#1a2a6c;font-weight:700;position:absolute;top:10px;left:10px;background:#ffffffb3;padding:2px 8px;border-radius:10px}"]})};var ti=class t{hiraganaList=[{kana:"\u3042",romaji:"a",group:"Vogais",strokes:"3 tra\xE7os",example:"\u3042\u3081 (ame)",meaning:"chuva"},{kana:"\u3044",romaji:"i",group:"Vogais",strokes:"2 tra\xE7os",example:"\u3044\u3059 (isu)",meaning:"cadeira"},{kana:"\u3046",romaji:"u",group:"Vogais",strokes:"2 tra\xE7os",example:"\u3046\u307E (uma)",meaning:"cavalo"},{kana:"\u3048",romaji:"e",group:"Vogais",strokes:"2 tra\xE7os",example:"\u3048\u304D (eki)",meaning:"esta\xE7\xE3o"},{kana:"\u304A",romaji:"o",group:"Vogais",strokes:"3 tra\xE7os",example:"\u304A\u306B (oni)",meaning:"dem\xF4nio"},{kana:"\u304B",romaji:"ka",group:"K",strokes:"2 tra\xE7os",example:"\u304B\u3055 (kasa)",meaning:"guarda-chuva"},{kana:"\u304D",romaji:"ki",group:"K",strokes:"4 tra\xE7os",example:"\u304D (ki)",meaning:"\xE1rvore"},{kana:"\u304F",romaji:"ku",group:"K",strokes:"1 tra\xE7o",example:"\u304F\u3064 (kutsu)",meaning:"sapato"},{kana:"\u3051",romaji:"ke",group:"K",strokes:"3 tra\xE7os",example:"\u3051\u3044\u3055\u3064 (keisatsu)",meaning:"pol\xEDcia"},{kana:"\u3053",romaji:"ko",group:"K",strokes:"2 tra\xE7os",example:"\u3053\u3069\u3082 (kodomo)",meaning:"crian\xE7a"},{kana:"\u3055",romaji:"sa",group:"S",strokes:"3 tra\xE7os",example:"\u3055\u304B\u306A (sakana)",meaning:"peixe"},{kana:"\u3057",romaji:"shi",group:"S",strokes:"1 tra\xE7o",example:"\u3057\u304A (shio)",meaning:"sal"},{kana:"\u3059",romaji:"su",group:"S",strokes:"2 tra\xE7os",example:"\u3059\u3057 (sushi)",meaning:"sushi"},{kana:"\u305B",romaji:"se",group:"S",strokes:"2 tra\xE7os",example:"\u305B\u3093\u305B\u3044 (sensei)",meaning:"professor"},{kana:"\u305D",romaji:"so",group:"S",strokes:"1 tra\xE7o",example:"\u305D\u3089 (sora)",meaning:"c\xE9u"},{kana:"\u305F",romaji:"ta",group:"T",strokes:"4 tra\xE7os",example:"\u305F\u3053 (tako)",meaning:"polvo"},{kana:"\u3061",romaji:"chi",group:"T",strokes:"2 tra\xE7os",example:"\u3061\u3061 (chichi)",meaning:"pai"},{kana:"\u3064",romaji:"tsu",group:"T",strokes:"1 tra\xE7o",example:"\u3064\u304D (tsuki)",meaning:"lua"},{kana:"\u3066",romaji:"te",group:"T",strokes:"1 tra\xE7o",example:"\u3066 (te)",meaning:"m\xE3o"},{kana:"\u3068",romaji:"to",group:"T",strokes:"2 tra\xE7os",example:"\u3068\u3051\u3044 (tokei)",meaning:"rel\xF3gio"},{kana:"\u306A",romaji:"na",group:"N",strokes:"4 tra\xE7os",example:"\u306A\u3059 (nasu)",meaning:"berinjela"},{kana:"\u306B",romaji:"ni",group:"N",strokes:"3 tra\xE7os",example:"\u306B\u307B\u3093 (nihon)",meaning:"Jap\xE3o"},{kana:"\u306C",romaji:"nu",group:"N",strokes:"2 tra\xE7os",example:"\u306C\u3044\u3050\u308B\u307F (nuigurumi)",meaning:"pel\xFAcia"},{kana:"\u306D",romaji:"ne",group:"N",strokes:"2 tra\xE7os",example:"\u306D\u3053 (neko)",meaning:"gato"},{kana:"\u306E",romaji:"no",group:"N",strokes:"1 tra\xE7o",example:"\u306E\u308A (nori)",meaning:"alga marinha"},{kana:"\u306F",romaji:"ha",group:"H",strokes:"3 tra\xE7os",example:"\u306F\u306A (hana)",meaning:"flor"},{kana:"\u3072",romaji:"hi",group:"H",strokes:"1 tra\xE7o",example:"\u3072\u3053\u3046\u304D (hikouki)",meaning:"avi\xE3o"},{kana:"\u3075",romaji:"fu",group:"H",strokes:"4 tra\xE7os",example:"\u3075\u306D (fune)",meaning:"navio"},{kana:"\u3078",romaji:"he",group:"H",strokes:"1 tra\xE7o",example:"\u3078\u3084 (heya)",meaning:"quarto"},{kana:"\u307B",romaji:"ho",group:"H",strokes:"4 tra\xE7os",example:"\u307B\u3057 (hoshi)",meaning:"estrela"},{kana:"\u307E",romaji:"ma",group:"M",strokes:"3 tra\xE7os",example:"\u307E\u3093\u304C (manga)",meaning:"quadrinhos"},{kana:"\u307F",romaji:"mi",group:"M",strokes:"2 tra\xE7os",example:"\u307F\u305A (mizu)",meaning:"\xE1gua"},{kana:"\u3080",romaji:"mu",group:"M",strokes:"3 tra\xE7os",example:"\u3080\u3057 (mushi)",meaning:"inseto"},{kana:"\u3081",romaji:"me",group:"M",strokes:"2 tra\xE7os",example:"\u3081 (me)",meaning:"olho"},{kana:"\u3082",romaji:"mo",group:"M",strokes:"3 tra\xE7os",example:"\u3082\u3082 (momo)",meaning:"p\xEAssego"},{kana:"\u3084",romaji:"ya",group:"Y",strokes:"3 tra\xE7os",example:"\u3084\u307E (yama)",meaning:"montanha"},{kana:"\u3086",romaji:"yu",group:"Y",strokes:"2 tra\xE7os",example:"\u3086\u304D (yuki)",meaning:"neve"},{kana:"\u3088",romaji:"yo",group:"Y",strokes:"2 tra\xE7os",example:"\u3088\u308B (yoru)",meaning:"noite"},{kana:"\u3089",romaji:"ra",group:"R",strokes:"2 tra\xE7os",example:"\u3089\u304F\u3060 (rakuda)",meaning:"camelo"},{kana:"\u308A",romaji:"ri",group:"R",strokes:"2 tra\xE7os",example:"\u308A\u3093\u3054 (ringo)",meaning:"ma\xE7\xE3"},{kana:"\u308B",romaji:"ru",group:"R",strokes:"1 tra\xE7o",example:"\u308B\u3059 (rusu)",meaning:"aus\xEAncia"},{kana:"\u308C",romaji:"re",group:"R",strokes:"2 tra\xE7os",example:"\u308C\u3093\u3057\u3085\u3046 (renshuu)",meaning:"pr\xE1tica"},{kana:"\u308D",romaji:"ro",group:"R",strokes:"1 tra\xE7o",example:"\u308D\u3046\u304B (rouka)",meaning:"corredor"},{kana:"\u308F",romaji:"wa",group:"W",strokes:"2 tra\xE7os",example:"\u308F\u306B (wani)",meaning:"crocodilo"},{kana:"\u3092",romaji:"wo",group:"W",strokes:"3 tra\xE7os",example:"\u3092 (part\xEDcula)",meaning:"part\xEDcula objeto"},{kana:"\u3093",romaji:"n",group:"W",strokes:"1 tra\xE7o",example:"\u306B\u307B\u3093\u3054 (nihongo)",meaning:"l\xEDngua japonesa"}];groupsService=R(ei);getAll(){return this.hiraganaList}getByGroup(e){let n=this.groupsService.getTextById(e).toLowerCase();return this.hiraganaList.filter(r=>r.group.toLowerCase()===n)}getLenght(){return this.hiraganaList.length}getRandom(){let e=Math.floor(Math.random()*this.hiraganaList.length);return this.hiraganaList[e]}getByKana(e){return this.hiraganaList.find(r=>r.kana===e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};var tF=(t,e)=>e.kana;function nF(t,e){if(t&1){let n=bt();z(0,"app-flashcard",2),Ne("checkedChange",function(i){let o=ot(n).$implicit,s=Ce();return st(s.onCardChecked({kana:o.kana,checked:i}))}),Q()}if(t&2){let n=e.$implicit,r=Ce();Oe("kana",ut(n.kana))("romaji",ut(n.romaji))("group",ut(n.group))("strokes",ut(n.strokes))("example",ut(n.example))("meaning",ut(n.meaning))("checked",r.checkedStates[n.kana]||!1)}}var eh=class t{group=0;checkedStates={};checkedChange=new _e;hiraganaService=R(ti);hiraganaList=[];ngOnChanges(e){if(e.group){let n=e.group.currentValue;this.hiraganaList=n?this.hiraganaService.getByGroup(n):this.hiraganaService.getAll()}}onCardChecked(e){this.checkedChange.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["app-tab-hiragana"]],inputs:{group:"group",checkedStates:"checkedStates"},outputs:{checkedChange:"checkedChange"},features:[vn],decls:6,vars:0,consts:[[1,"flashcard-container"],[3,"checked","kana","romaji","group","strokes","example","meaning"],[3,"checkedChange","checked","kana","romaji","group","strokes","example","meaning"]],template:function(n,r){n&1&&(z(0,"h1"),q(1,"Hiragana"),Q(),ct(2,"hr"),z(3,"div",0),On(4,nF,1,13,"app-flashcard",1,tF),Q()),n&2&&(H(4),Ln(r.hiraganaList))},dependencies:[gs],styles:["hr[_ngcontent-%COMP%]{border:2px solid #fdbb2d}h1[_ngcontent-%COMP%]{color:#1a2a6c;justify-self:center;font-size:2rem;font-weight:700}.flashcard-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(12em,1fr));gap:2em;box-sizing:border-box;justify-items:center}.sectionFlashCards[_ngcontent-%COMP%]{margin-bottom:5em}"],changeDetection:0})};var ni=class t{katakanaList=[{kana:"\u30A2",romaji:"a",group:"Vogais",strokes:"2 tra\xE7os",example:"\u30A2\u30E1\u30EA\u30AB (amerika)",meaning:"Am\xE9rica"},{kana:"\u30A4",romaji:"i",group:"Vogais",strokes:"2 tra\xE7os",example:"\u30A4\u30BF\u30EA\u30A2 (itaria)",meaning:"It\xE1lia"},{kana:"\u30A6",romaji:"u",group:"Vogais",strokes:"3 tra\xE7os",example:"\u30A6\u30A4\u30B9\u30AD\u30FC (uisukii)",meaning:"u\xEDsque"},{kana:"\u30A8",romaji:"e",group:"Vogais",strokes:"3 tra\xE7os",example:"\u30A8\u30EC\u30D9\u30FC\u30BF\u30FC (erebeetaa)",meaning:"elevador"},{kana:"\u30AA",romaji:"o",group:"Vogais",strokes:"3 tra\xE7os",example:"\u30AA\u30EC\u30F3\u30B8 (orenji)",meaning:"laranja"},{kana:"\u30AB",romaji:"ka",group:"k",strokes:"2 tra\xE7os",example:"\u30AB\u30E1\u30E9 (kamera)",meaning:"c\xE2mera"},{kana:"\u30AD",romaji:"ki",group:"k",strokes:"3 tra\xE7os",example:"\u30AD\u30FC\u30DC\u30FC\u30C9 (kiiboodo)",meaning:"teclado"},{kana:"\u30AF",romaji:"ku",group:"k",strokes:"2 tra\xE7os",example:"\u30AF\u30C3\u30AD\u30FC (kukkii)",meaning:"biscoito"},{kana:"\u30B1",romaji:"ke",group:"k",strokes:"3 tra\xE7os",example:"\u30B1\u30FC\u30AD (keeki)",meaning:"bolo"},{kana:"\u30B3",romaji:"ko",group:"k",strokes:"2 tra\xE7os",example:"\u30B3\u30FC\u30D2\u30FC (koohii)",meaning:"caf\xE9"},{kana:"\u30B5",romaji:"sa",group:"s",strokes:"3 tra\xE7os",example:"\u30B5\u30E9\u30C0 (sarada)",meaning:"salada"},{kana:"\u30B7",romaji:"shi",group:"s",strokes:"3 tra\xE7os",example:"\u30B7\u30E3\u30EF\u30FC (shawaa)",meaning:"chuveiro"},{kana:"\u30B9",romaji:"su",group:"s",strokes:"2 tra\xE7os",example:"\u30B9\u30FC\u30D1\u30FC (suupaa)",meaning:"supermercado"},{kana:"\u30BB",romaji:"se",group:"s",strokes:"2 tra\xE7os",example:"\u30BB\u30FC\u30BF\u30FC (seetaa)",meaning:"su\xE9ter"},{kana:"\u30BD",romaji:"so",group:"s",strokes:"2 tra\xE7os",example:"\u30BD\u30D5\u30A1 (sofa)",meaning:"sof\xE1"},{kana:"\u30BF",romaji:"ta",group:"t",strokes:"3 tra\xE7os",example:"\u30BF\u30AF\u30B7\u30FC (takushii)",meaning:"t\xE1xi"},{kana:"\u30C1",romaji:"chi",group:"t",strokes:"2 tra\xE7os",example:"\u30C1\u30FC\u30BA (chiizu)",meaning:"queijo"},{kana:"\u30C4",romaji:"tsu",group:"t",strokes:"3 tra\xE7os",example:"\u30C4\u30A2\u30FC (tsuaa)",meaning:"passeio"},{kana:"\u30C6",romaji:"te",group:"t",strokes:"2 tra\xE7os",example:"\u30C6\u30EC\u30D3 (terebi)",meaning:"televis\xE3o"},{kana:"\u30C8",romaji:"to",group:"t",strokes:"2 tra\xE7os",example:"\u30C8\u30DE\u30C8 (tomato)",meaning:"tomate"},{kana:"\u30CA",romaji:"na",group:"n",strokes:"2 tra\xE7os",example:"\u30CA\u30A4\u30D5 (naifu)",meaning:"faca"},{kana:"\u30CB",romaji:"ni",group:"n",strokes:"2 tra\xE7os",example:"\u30CB\u30F3\u30B8\u30F3 (ninjin)",meaning:"cenoura"},{kana:"\u30CC",romaji:"nu",group:"n",strokes:"2 tra\xE7os",example:"\u30CC\u30FC\u30C9\u30EB (nuudoru)",meaning:"macarr\xE3o"},{kana:"\u30CD",romaji:"ne",group:"n",strokes:"4 tra\xE7os",example:"\u30CD\u30AF\u30BF\u30A4 (nekutai)",meaning:"gravata"},{kana:"\u30CE",romaji:"no",group:"n",strokes:"1 tra\xE7o",example:"\u30CE\u30FC\u30C8 (nooto)",meaning:"caderno"},{kana:"\u30CF",romaji:"ha",group:"h",strokes:"2 tra\xE7os",example:"\u30CF\u30F3\u30D0\u30FC\u30AC\u30FC (hanbaagaa)",meaning:"hamb\xFArguer"},{kana:"\u30D2",romaji:"hi",group:"h",strokes:"2 tra\xE7os",example:"\u30D2\u30FC\u30BF\u30FC (hiitaa)",meaning:"aquecedor"},{kana:"\u30D5",romaji:"fu",group:"h",strokes:"1 tra\xE7o",example:"\u30D5\u30E9\u30A4\u30D1\u30F3 (furaipan)",meaning:"frigideira"},{kana:"\u30D8",romaji:"he",group:"h",strokes:"1 tra\xE7o",example:"\u30D8\u30EA\u30B3\u30D7\u30BF\u30FC (herikoputaa)",meaning:"helic\xF3ptero"},{kana:"\u30DB",romaji:"ho",group:"h",strokes:"4 tra\xE7os",example:"\u30DB\u30C6\u30EB (hoteru)",meaning:"hotel"},{kana:"\u30DE",romaji:"ma",group:"m",strokes:"2 tra\xE7os",example:"\u30DE\u30F3\u30AC (manga)",meaning:"quadrinhos"},{kana:"\u30DF",romaji:"mi",group:"m",strokes:"3 tra\xE7os",example:"\u30DF\u30EB\u30AF (miruku)",meaning:"leite"},{kana:"\u30E0",romaji:"mu",group:"m",strokes:"2 tra\xE7os",example:"\u30E0\u30FC\u30D3\u30FC (muubii)",meaning:"filme"},{kana:"\u30E1",romaji:"me",group:"m",strokes:"2 tra\xE7os",example:"\u30E1\u30CB\u30E5\u30FC (menyuu)",meaning:"card\xE1pio"},{kana:"\u30E2",romaji:"mo",group:"m",strokes:"3 tra\xE7os",example:"\u30E2\u30CB\u30BF\u30FC (monitaa)",meaning:"monitor"},{kana:"\u30E4",romaji:"ya",group:"y",strokes:"3 tra\xE7os",example:"\u30E4\u30AF\u30EB\u30C8 (yakuruto)",meaning:"yakult"},{kana:"\u30E6",romaji:"yu",group:"y",strokes:"2 tra\xE7os",example:"\u30E6\u30FC\u30E2\u30A2 (yuumoa)",meaning:"humor"},{kana:"\u30E8",romaji:"yo",group:"y",strokes:"2 tra\xE7os",example:"\u30E8\u30FC\u30ED\u30C3\u30D1 (yooroppa)",meaning:"Europa"},{kana:"\u30E9",romaji:"ra",group:"r",strokes:"2 tra\xE7os",example:"\u30E9\u30FC\u30E1\u30F3 (raamen)",meaning:"l\xE1men"},{kana:"\u30EA",romaji:"ri",group:"r",strokes:"2 tra\xE7os",example:"\u30EA\u30E2\u30B3\u30F3 (rimokon)",meaning:"controle remoto"},{kana:"\u30EB",romaji:"ru",group:"r",strokes:"2 tra\xE7os",example:"\u30EB\u30FC\u30EB (ruuru)",meaning:"regra"},{kana:"\u30EC",romaji:"re",group:"r",strokes:"1 tra\xE7o",example:"\u30EC\u30B9\u30C8\u30E9\u30F3 (resutoran)",meaning:"restaurante"},{kana:"\u30ED",romaji:"ro",group:"r",strokes:"3 tra\xE7os",example:"\u30ED\u30DC\u30C3\u30C8 (robotto)",meaning:"rob\xF4"},{kana:"\u30EF",romaji:"wa",group:"w",strokes:"2 tra\xE7os",example:"\u30EF\u30A4\u30F3 (wain)",meaning:"vinho"},{kana:"\u30F2",romaji:"wo",group:"w",strokes:"3 tra\xE7os",example:"\u30F2 (part\xEDcula)",meaning:"part\xEDcula objeto"},{kana:"\u30F3",romaji:"n",group:"w",strokes:"2 tra\xE7os",example:"\u30DA\u30F3 (pen)",meaning:"caneta"}];groupsService=R(ei);getAll(){return this.katakanaList}getByGroup(e){let n=this.groupsService.getTextById(e).toLowerCase();return this.katakanaList.filter(r=>n===r.group.toLowerCase())}getLenght(){return this.katakanaList.length}getRandom(){let e=Math.floor(Math.random()*this.katakanaList.length);return this.katakanaList[e]}getByKana(e){return this.katakanaList.find(r=>r.kana===e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};var rF=(t,e)=>e.kana;function iF(t,e){if(t&1){let n=bt();z(0,"app-flashcard",2),Ne("checkedChange",function(i){let o=ot(n).$implicit,s=Ce();return st(s.onCardChecked({kana:o.kana,checked:i}))}),Q()}if(t&2){let n=e.$implicit,r=Ce();Oe("kana",ut(n.kana))("romaji",ut(n.romaji))("group",ut(n.group))("strokes",ut(n.strokes))("example",ut(n.example))("meaning",ut(n.meaning))("checked",r.checkedStates[n.kana]||!1)}}var th=class t{group=0;checkedStates={};checkedChange=new _e;katakanaList=[];katakanaService=R(ni);ngOnChanges(e){if(e.group){let n=e.group.currentValue;this.katakanaList=n?this.katakanaService.getByGroup(n):this.katakanaService.getAll()}}onCardChecked(e){this.checkedChange.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["app-tab-katakana"]],inputs:{group:"group",checkedStates:"checkedStates"},outputs:{checkedChange:"checkedChange"},features:[vn],decls:6,vars:0,consts:[[1,"flashcard-container"],[3,"checked","kana","romaji","group","strokes","example","meaning"],[3,"checkedChange","checked","kana","romaji","group","strokes","example","meaning"]],template:function(n,r){n&1&&(z(0,"h1"),q(1,"Katakana"),Q(),ct(2,"hr"),z(3,"div",0),On(4,iF,1,13,"app-flashcard",1,rF),Q()),n&2&&(H(4),Ln(r.katakanaList))},dependencies:[gs],styles:["hr[_ngcontent-%COMP%]{border:2px solid #fdbb2d}h1[_ngcontent-%COMP%]{color:#1a2a6c;justify-self:center;font-size:2rem;font-weight:700}.flashcard-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(12em,1fr));gap:2em;box-sizing:border-box;justify-items:center}.sectionFlashCards[_ngcontent-%COMP%]{margin-bottom:5em}"]})};var nh=class t{isCollapsed=!1;totalChecked=0;progress=0;hiraganaService=R(ti);katakanaService=R(ni);totalCharacters=this.hiraganaService.getLenght()+this.katakanaService.getLenght();collapseBar(){this.isCollapsed=!this.isCollapsed}updateProgress(){this.progress=+(this.totalChecked/this.totalCharacters*100).toFixed(2)}ngOnChanges(e){e.totalChecked&&this.updateProgress()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["app-progress-bar"]],inputs:{totalChecked:"totalChecked"},features:[vn],decls:13,vars:7,consts:[[1,"progress-section"],[1,"progress-header"],[1,"progress-title"],[1,"fas","fa-chart-line"],[1,"toggle-btn",3,"click"],[1,"fas","fa-chevron-up"],[1,"progress-content"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"fas","fa-check-circle"]],template:function(n,r){n&1&&(me(0,"div",0)(1,"div",1)(2,"h3",2),Tt(3,"i",3),q(4," Seu Progresso"),Ie(),me(5,"button",4),vt("click",function(){return r.collapseBar()}),Tt(6,"i",5),Ie()(),me(7,"div",6)(8,"div",7),Tt(9,"div",8),Ie(),me(10,"div",9),Tt(11,"i",10),q(12),Ie()()()),n&2&&(Pt("collapsed",r.isCollapsed),H(6),Pt("rotated",r.isCollapsed),H(3),gd("width",r.progress+"%"),H(3),_n("",r.progress,"% Completo"))},styles:[".progress-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:15px;font-size:.9rem;color:#555}.progress-text[_ngcontent-%COMP%]{text-align:center;font-weight:700;color:#1a2a6c;display:flex;align-items:center;justify-content:center;gap:5px}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#4caf50,#8bc34a);border-radius:10px;transition:width .5s ease;position:relative}.progress-bar[_ngcontent-%COMP%]{height:20px;background:#e0e0e0;border-radius:10px;overflow:hidden;margin-bottom:10px}.progress-title[_ngcontent-%COMP%]{color:#1a2a6c;margin-bottom:15px;font-size:1.5rem;display:flex;align-items:center;gap:10px}.progress-section[_ngcontent-%COMP%]{background:#ffffffe6;border-radius:15px;padding:20px;margin-top:30px;margin-bottom:0;box-shadow:0 5px 15px #0000004d;transition:max-height .5s ease,padding .5s ease;max-height:500px;overflow:hidden}.progress-section.collapsed[_ngcontent-%COMP%]{max-height:60px;padding:10px 20px}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;cursor:pointer}.toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#1a2a6c}.toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .5s ease}.toggle-btn[_ngcontent-%COMP%]   i.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}"]})};var pD=()=>{};var yD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},oF=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},rh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new Fy;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let D=l<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Fy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},sF=function(t){let e=yD(t);return rh.encodeByteArray(e,!0)},Dc=function(t){return sF(t).replace(/\./g,"")},ih=function(t){try{return rh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var aF=()=>jy().__FIREBASE_DEFAULTS__,cF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ih(t[1]);return e&&JSON.parse(e)},oh=()=>{try{return pD()||aF()||cF()||uF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Uy=t=>{var e,n;return(n=(e=oh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vD=t=>{let e=Uy(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},By=()=>{var t;return(t=oh())===null||t===void 0?void 0:t.config},$y=t=>{var e;return(e=oh())===null||e===void 0?void 0:e[`_${t}`]};var Yi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ri(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function sh(t){return I(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function _D(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Dc(JSON.stringify(n)),Dc(JSON.stringify(s)),""].join(".")}var Cc={};function lF(){let t={prod:[],emulator:[]};for(let e of Object.keys(Cc))Cc[e]?t.emulator.push(e):t.prod.push(e);return t}function dF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var gD=!1;function ah(t,e){if(typeof window>"u"||typeof document>"u"||!ri(window.location.host)||Cc[t]===e||Cc[t]||gD)return;Cc[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=lF().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{gD=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=dF(r),y=n("text"),D=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),k=document.getElementById(N)||document.createElement("a"),O=n("preprendIcon"),B=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let J=m.element;c(J),h(k,N);let De=l();u(B,O),J.append(B,D,k,De),document.body.appendChild(J)}o?(D.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ID(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function hF(){var t;let e=(t=oh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ED(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wD(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bD(){let t=dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SD(){return!hF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ac(){try{return typeof indexedDB=="object"}catch{return!1}}function CD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var fF="FirebaseError",Xt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fF,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wn.prototype.create)}},wn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?pF(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new Xt(i,c,r)}};function pF(t,e){return t.replace(gF,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var gF=/\{\$([^}]+)}/g;function DD(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Un(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(mD(o)&&mD(s)){if(!Un(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function mD(t){return t!==null&&typeof t=="object"}function ms(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function AD(t,e){let n=new Vy(t,e);return n.subscribe.bind(n)}var Vy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");mF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ly),i.error===void 0&&(i.error=Ly),i.complete===void 0&&(i.complete=Ly);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function mF(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ly(){}var tX=4*60*60*1e3;function Ot(t){return t&&t._delegate?t._delegate:t}var Lt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ji="[DEFAULT]";var Hy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Yi;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vF(e))try{this.getOrInitializeService({instanceIdentifier:Ji})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return I(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ji){return this.instances.has(e)}getOptions(e=Ji){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ji){return this.component?this.component.multipleInstances?e:Ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function yF(t){return t===Ji?void 0:t}function vF(t){return t.instantiationMode==="EAGER"}var ch=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Hy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var _F=[],ce=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ce||{}),IF={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},EF=ce.INFO,wF={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},TF=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=wF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Bn=class{constructor(e){this.name=e,this._logLevel=EF,this._logHandler=TF,this._userLogHandler=null,_F.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var bF=(t,e)=>e.some(n=>t instanceof n),RD,kD;function SF(){return RD||(RD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CF(){return kD||(kD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ND=new WeakMap,qy=new WeakMap,xD=new WeakMap,zy=new WeakMap,Gy=new WeakMap;function DF(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n($n(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&ND.set(n,t)}).catch(()=>{}),Gy.set(e,t),e}function AF(t){if(qy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});qy.set(t,e)}var Wy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $n(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function PD(t){Wy=t(Wy)}function RF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(uh(this),e,...n);return xD.set(r,e.sort?e.sort():[e]),$n(r)}:CF().includes(t)?function(...e){return t.apply(uh(this),e),$n(ND.get(this))}:function(...e){return $n(t.apply(uh(this),e))}}function kF(t){return typeof t=="function"?RF(t):(t instanceof IDBTransaction&&AF(t),bF(t,SF())?new Proxy(t,Wy):t)}function $n(t){if(t instanceof IDBRequest)return DF(t);if(zy.has(t))return zy.get(t);let e=kF(t);return e!==t&&(zy.set(t,e),Gy.set(e,t)),e}var uh=t=>Gy.get(t);function OD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=$n(s);return r&&s.addEventListener("upgradeneeded",u=>{r($n(s.result),u.oldVersion,u.newVersion,$n(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var NF=["get","getKey","getAll","getAllKeys","count"],xF=["put","add","delete","clear"],Ky=new Map;function MD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ky.get(e))return Ky.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=xF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||NF.includes(n)))return;let o=function(s,...c){return I(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return Ky.set(e,o),o}PD(t=>Re(F({},t),{get:(e,n,r)=>MD(e,n)||t.get(e,n,r),has:(e,n)=>!!MD(e,n)||t.has(e,n)}));var Yy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PF(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function PF(t){let e=t.getComponent();return e?.type==="VERSION"}var Jy="@firebase/app",LD="0.13.2";var gr=new Bn("@firebase/app"),MF="@firebase/app-compat",OF="@firebase/analytics-compat",LF="@firebase/analytics",FF="@firebase/app-check-compat",VF="@firebase/app-check",jF="@firebase/auth",UF="@firebase/auth-compat",BF="@firebase/database",$F="@firebase/data-connect",HF="@firebase/database-compat",zF="@firebase/functions",qF="@firebase/functions-compat",WF="@firebase/installations",GF="@firebase/installations-compat",KF="@firebase/messaging",QF="@firebase/messaging-compat",YF="@firebase/performance",JF="@firebase/performance-compat",ZF="@firebase/remote-config",XF="@firebase/remote-config-compat",eV="@firebase/storage",tV="@firebase/storage-compat",nV="@firebase/firestore",rV="@firebase/ai",iV="@firebase/firestore-compat",oV="firebase",sV="11.10.0";var Zy="[DEFAULT]",aV={[Jy]:"fire-core",[MF]:"fire-core-compat",[LF]:"fire-analytics",[OF]:"fire-analytics-compat",[VF]:"fire-app-check",[FF]:"fire-app-check-compat",[jF]:"fire-auth",[UF]:"fire-auth-compat",[BF]:"fire-rtdb",[$F]:"fire-data-connect",[HF]:"fire-rtdb-compat",[zF]:"fire-fn",[qF]:"fire-fn-compat",[WF]:"fire-iid",[GF]:"fire-iid-compat",[KF]:"fire-fcm",[QF]:"fire-fcm-compat",[YF]:"fire-perf",[JF]:"fire-perf-compat",[ZF]:"fire-rc",[XF]:"fire-rc-compat",[eV]:"fire-gcs",[tV]:"fire-gcs-compat",[nV]:"fire-fst",[iV]:"fire-fst-compat",[rV]:"fire-vertex","fire-js":"fire-js",[oV]:"fire-js-all"};var Rc=new Map,cV=new Map,Xy=new Map;function FD(t,e){try{t.container.addComponent(e)}catch(n){gr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Tn(t){let e=t.name;if(Xy.has(e))return gr.debug(`There were multiple attempts to register component ${e}.`),!1;Xy.set(e,t);for(let n of Rc.values())FD(n,t);for(let n of cV.values())FD(n,t);return!0}function ys(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function en(t){return t==null?!1:t.settings!==void 0}var uV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ii=new wn("app","Firebase",uV);var ev=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}};var oi=sV;function rv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Zy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ii.create("bad-app-name",{appName:String(i)});if(n||(n=By()),!n)throw ii.create("no-options");let o=Rc.get(i);if(o){if(Un(n,o.options)&&Un(r,o.config))return o;throw ii.create("duplicate-app",{appName:i})}let s=new ch(i);for(let u of Xy.values())s.addComponent(u);let c=new ev(n,r,s);return Rc.set(i,c),c}function Zi(t=Zy){let e=Rc.get(t);if(!e&&t===Zy&&By())return rv();if(!e)throw ii.create("no-app",{appName:t});return e}function lh(){return Array.from(Rc.values())}function je(t,e,n){var r;let i=(r=aV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gr.warn(c.join(" "));return}Tn(new Lt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var lV="firebase-heartbeat-database",dV=1,kc="firebase-heartbeat-store",Qy=null;function BD(){return Qy||(Qy=OD(lV,dV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(kc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ii.create("idb-open",{originalErrorMessage:t.message})})),Qy}function hV(t){return I(this,null,function*(){try{let n=(yield BD()).transaction(kc),r=yield n.objectStore(kc).get($D(t));return yield n.done,r}catch(e){if(e instanceof Xt)gr.warn(e.message);else{let n=ii.create("idb-get",{originalErrorMessage:e?.message});gr.warn(n.message)}}})}function VD(t,e){return I(this,null,function*(){try{let r=(yield BD()).transaction(kc,"readwrite");yield r.objectStore(kc).put(e,$D(t)),yield r.done}catch(n){if(n instanceof Xt)gr.warn(n.message);else{let r=ii.create("idb-set",{originalErrorMessage:n?.message});gr.warn(r.message)}}})}function $D(t){return`${t.name}!${t.options.appId}`}var fV=1024,pV=30,tv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new nv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return I(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=jD();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>pV){let s=mV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gr.warn(r)}})}getHeartbeatsHeader(){return I(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=jD(),{heartbeatsToSend:r,unsentEntries:i}=gV(this._heartbeatsCache.heartbeats),o=Dc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return gr.warn(n),""}})}};function jD(){return new Date().toISOString().substring(0,10)}function gV(t,e=fV){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),UD(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),UD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var nv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(this,null,function*(){return Ac()?CD().then(()=>!0).catch(()=>!1):!1})}read(){return I(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield hV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return VD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return VD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function UD(t){return Dc(JSON.stringify({version:2,heartbeats:t})).length}function mV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function yV(t){Tn(new Lt("platform-logger",e=>new Yy(e),"PRIVATE")),Tn(new Lt("heartbeat",e=>new tv(e),"PRIVATE")),je(Jy,LD,t),je(Jy,LD,"esm2017"),je("fire-js","")}yV("");var vV="firebase",_V="11.10.0";je(vV,_V,"app");function HD(t){t===void 0&&(t=R(it));let e=t.get(qo);return n=>new ae(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let c=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return c.add(()=>{r.unsubscribe(),s()}),c})}var si=new Xa("ANGULARFIRE2_VERSION");function Nc(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var _s=(t,e)=>{let n=e?[e]:lh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},vs=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(vs||{}),zD=Xm()&&typeof Zone<"u"?vs.WARN:vs.SILENT;var dh=class{zone;delegate;constructor(e,n=Np){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},ai=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=R(be);this.outsideAngular=n.runOutsideAngular(()=>new dh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new dh(typeof Zone>"u"?void 0:Zone.current,kp))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),qD=!1;function IV(t,e){!qD&&(zD>vs.SILENT||Xm())&&(qD=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),zD>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function EV(t){let e=R(be,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Xi(t){let e=R(be,{optional:!0});return e?e.run(()=>t()):t()}var wV=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Ze(n,()=>Xi(()=>t.apply(void 0,r)))),tn=(t,e,n)=>(n||=e?vs.WARN:vs.VERBOSE,function(){let r,i=arguments,o,s,c;try{o=R(ai),s=R(qo),c=R(Je)}catch{return IV(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Xi(()=>s.add())),i[l]=wV(i[l],r,c));let u=EV(()=>t.apply(this,i));return e?u instanceof ae?u.pipe(Lr(o.outsideAngular),Or(o.insideAngular),HD(c)):u instanceof Promise?Xi(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>Ze(c,()=>Xi(()=>h(m))),m=>Ze(c,()=>Xi(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Xi(()=>u):u instanceof ae?u.pipe(Lr(o.outsideAngular),Or(o.insideAngular)):Xi(()=>u)});var mr=class{constructor(e){return e}},eo=class{constructor(){return lh()}};function TV(t){return t&&t.length===1?t[0]:new mr(Zi())}var iv=new U("angularfire2._apps"),bV={provide:mr,useFactory:TV,deps:[[new Yt,iv]]},SV={provide:eo,deps:[[new Yt,iv]]};function CV(t){return(e,n)=>{let r=n.get(Gr);je("angularfire",si.full,"core"),je("angularfire",si.full,"app"),je("angular",iC.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new mr(i)}}function WD(t,...e){return qt([bV,SV,{provide:iv,useFactory:CV(t),multi:!0,deps:[be,it,ai,...e]}])}var GD=tn(rv,!0);var DV=new Map,AV={activated:!1,tokenObservers:[]},RV={initialized:!1,enabled:!1};function bn(t){return DV.get(t)||Object.assign({},AV)}function JD(){return RV}var kV="https://content-firebaseappcheck.googleapis.com/v1";var NV="exchangeDebugToken",KD={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},iee=24*60*60*1e3;var av=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return I(this,null,function*(){this.stop();try{this.pending=new Yi,this.pending.promise.catch(n=>{}),yield xV(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Yi,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function xV(t){return new Promise(e=>{setTimeout(e,t)})}var PV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ci=new wn("appCheck","AppCheck",PV);function ZD(t){if(!bn(t).activated)throw ci.create("use-before-activation",{appName:t.name})}function XD(r,i){return I(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,c)}catch(y){throw ci.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw ci.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw ci.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw ci.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function eA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${kV}/projects/${n}/apps/${r}:${NV}?key=${i}`,body:{debug_token:e}}}var MV="firebase-app-check-database",OV=1,cv="firebase-app-check-store";var hh=null;function LV(){return hh||(hh=new Promise((t,e)=>{try{let n=indexedDB.open(MV,OV);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(ci.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(cv,{keyPath:"compositeKey"})}}}catch(n){e(ci.create("storage-open",{originalErrorMessage:n?.message}))}}),hh)}function FV(t,e){return VV(jV(t),e)}function VV(t,e){return I(this,null,function*(){let r=(yield LV()).transaction(cv,"readwrite"),o=r.objectStore(cv).put({compositeKey:t,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;c(ci.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function jV(t){return`${t.options.appId}-${t.name}`}var xc=new Bn("@firebase/app-check");function ov(t,e){return Ac()?FV(t,e).catch(n=>{xc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function tA(){return JD().enabled}function nA(){return I(this,null,function*(){let t=JD();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var UV={error:"UNKNOWN_ERROR"};function BV(t){return rh.encodeString(JSON.stringify(t),!1)}function uv(t,e=!1,n=!1){return I(this,null,function*(){let r=t.app;ZD(r);let i=bn(r),o=i.token,s;if(o&&!Pc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Pc(l)?o=l:yield ov(r,void 0))}if(!e&&o&&Pc(o))return{token:o.token};let c=!1;if(tA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=XD(eA(r,yield nA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=yield i.exchangeTokenPromise;return yield ov(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?xc.warn(l.message):n&&xc.error(l),sv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=yield bn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?xc.warn(l.message):n&&xc.error(l),s=l}let u;return o?s?Pc(o)?u={token:o.token,internalError:s}:u=sv(s):(u={token:o.token},i.token=o,yield ov(r,o)):u=sv(s),c&&qV(r,u),u})}function $V(t){return I(this,null,function*(){let e=t.app;ZD(e);let{provider:n}=bn(e);if(tA()){let r=yield nA(),{token:i}=yield XD(eA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function HV(t,e,n,r){let{app:i}=t,o=bn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Pc(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),QD(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>QD(t))}function rA(t,e){let n=bn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function QD(t){let{app:e}=t,n=bn(e),r=n.tokenRefresher;r||(r=zV(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function zV(t){let{app:e}=t;return new av(()=>I(null,null,function*(){let n=bn(e),r;if(n.token?r=yield uv(t,!0):r=yield uv(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=bn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},KD.RETRIAL_MIN_WAIT,KD.RETRIAL_MAX_WAIT)}function qV(t,e){let n=bn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Pc(t){return t.expireTimeMillis-Date.now()>0}function sv(t){return{token:BV(UV),error:t}}var lv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=bn(this.app);for(let n of e)rA(this.app,n.next);return Promise.resolve()}};function WV(t,e){return new lv(t,e)}function GV(t){return{getToken:e=>uv(t,e),getLimitedUseToken:()=>$V(t),addTokenListener:e=>HV(t,"INTERNAL",e),removeTokenListener:e=>rA(t.app,e)}}var KV="@firebase/app-check",QV="0.10.1";var YV="app-check",YD="app-check-internal";function JV(){Tn(new Lt(YV,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return WV(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(YD).initialize()})),Tn(new Lt(YD,t=>{let e=t.getProvider("app-check").getImmediate();return GV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),je(KV,QV)}JV();var ZV="app-check";var Is=class{constructor(){return _s(ZV)}};var XV=["localhost","0.0.0.0","127.0.0.1"],yee=typeof window<"u"&&XV.includes(window.location.hostname);function vA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var _A=vA,IA=new wn("auth","Firebase",vA());var vh=new Bn("@firebase/auth");function ej(t,...e){vh.logLevel<=ce.WARN&&vh.warn(`Auth (${oi}): ${t}`,...e)}function ph(t,...e){vh.logLevel<=ce.ERROR&&vh.error(`Auth (${oi}): ${t}`,...e)}function zn(t,...e){throw Av(t,...e)}function Sn(t,...e){return Av(t,...e)}function Dv(t,e,n){let r=Object.assign(Object.assign({},_A()),{[e]:n});return new wn("auth","Firebase",r).create(e,{appName:t.name})}function to(t){return Dv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tj(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&zn(t,"argument-error"),Dv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Av(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return IA.create(t,...e)}function Y(t,e,...n){if(!t)throw Av(e,...n)}function yr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw ph(e),new Error(e)}function _r(t,e){t||yr(e)}function fv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function nj(){return iA()==="http:"||iA()==="https:"}function iA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function rj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nj()||wD()||"connection"in navigator)?navigator.onLine:!0}function ij(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var no=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,_r(n>e,"Short delay should be less than long delay!"),this.isMobile=ID()||TD()}get(){return rj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Rv(t,e){_r(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var _h=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var oj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var sj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aj=new no(3e4,6e4);function kv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function ws(o,s,c,u){return I(this,arguments,function*(t,e,n,r,i={}){return EA(t,i,()=>I(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=ms(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return ED()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&ri(t.emulatorConfig.host)&&(y.credentials="include"),_h.fetch()(yield wA(t,t.config.apiHost,n,p),y)}))})}function EA(t,e,n){return I(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},oj),e);try{let i=new pv(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw fh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw fh(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw fh(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw fh(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Dv(t,h,l);zn(t,h)}}catch(i){if(i instanceof Xt)throw i;zn(t,"network-request-failed",{message:String(i)})}})}function cj(o,s,c,u){return I(this,arguments,function*(t,e,n,r,i={}){let l=yield ws(t,e,n,r,i);return"mfaPendingCredential"in l&&zn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function wA(t,e,n,r){return I(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Rv(t.config,i):`${t.config.apiScheme}://${i}`;return sj.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var pv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sn(this.auth,"network-request-failed")),aj.get())})}};function fh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Sn(t,e,r);return i.customData._tokenResponse=n,i}function uj(t,e){return I(this,null,function*(){return ws(t,"POST","/v1/accounts:delete",e)})}function Ih(t,e){return I(this,null,function*(){return ws(t,"POST","/v1/accounts:lookup",e)})}function Mc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Nv(t,e=!1){return I(this,null,function*(){let n=Ot(t),r=yield n.getIdToken(e),i=xv(r);Y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Mc(dv(i.auth_time)),issuedAtTime:Mc(dv(i.iat)),expirationTime:Mc(dv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function dv(t){return Number(t)*1e3}function xv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ph("JWT malformed, contained fewer than 3 sections"),null;try{let i=ih(n);return i?JSON.parse(i):(ph("Failed to decode base64 JWT payload"),null)}catch(i){return ph("Caught error parsing JWT payload as JSON",i?.toString()),null}}function oA(t){let e=xv(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Lc(t,e,n=!1){return I(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Xt&&lj(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function lj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var gv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>I(this,null,function*(){yield this.iteration()}),n)}iteration(){return I(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Fc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mc(this.lastLoginAt),this.creationTime=Mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Eh(t){return I(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Lc(t,Ih(n,{idToken:r}));Y(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?TA(o.providerUserInfo):[],c=dj(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!c?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Fc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function Pv(t){return I(this,null,function*(){let e=Ot(t);yield Eh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function dj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function TA(t){return t.map(e=>{var{providerId:n}=e,r=Gu(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function hj(t,e){return I(this,null,function*(){let n=yield EA(t,{},()=>I(null,null,function*(){let r=ms({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield wA(t,i,"/v1/token",`key=${o}`),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return t.emulatorConfig&&ri(t.emulatorConfig.host)&&(u.credentials="include"),_h.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function fj(t,e){return I(this,null,function*(){return ws(t,"POST","/v2/accounts:revokeToken",kv(t,e))})}var Oc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let n=oA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return I(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return I(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield hj(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(Y(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Y(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return yr("not implemented")}};function ui(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var li=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Gu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return I(this,null,function*(){let n=yield Lc(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Nv(this,e)}reload(){return Pv(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return I(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Eh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return I(this,null,function*(){if(en(this.auth.app))return Promise.reject(to(this.auth));let e=yield this.getIdToken();return yield Lc(this,uj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,c,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,D=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,B=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:J,emailVerified:De,isAnonymous:At,providerData:Te,stsTokenManager:T}=n;Y(J&&T,e,"internal-error");let v=Oc.fromJSON(this.name,T);Y(typeof J=="string",e,"internal-error"),ui(p,e.name),ui(m,e.name),Y(typeof De=="boolean",e,"internal-error"),Y(typeof At=="boolean",e,"internal-error"),ui(y,e.name),ui(D,e.name),ui(N,e.name),ui(k,e.name),ui(O,e.name),ui(B,e.name);let E=new t({uid:J,auth:e,email:m,emailVerified:De,displayName:p,isAnonymous:At,photoURL:D,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:O,lastLoginAt:B});return Te&&Array.isArray(Te)&&(E.providerData=Te.map(w=>Object.assign({},w))),k&&(E._redirectEventId=k),E}static _fromIdTokenResponse(e,n,r=!1){return I(this,null,function*(){let i=new Oc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Eh(o),o})}static _fromGetAccountInfoResponse(e,n,r){return I(this,null,function*(){let i=n.users[0];Y(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?TA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new Oc;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Fc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var sA=new Map;function vr(t){_r(t instanceof Function,"Expected a class definition");let e=sA.get(t);return e?(_r(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sA.set(t,e),e)}var pj=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(this,null,function*(){return!0})}_set(n,r){return I(this,null,function*(){this.storage[n]=r})}_get(n){return I(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return I(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),mv=pj;function gh(t,e,n){return`firebase:${t}:${e}:${n}`}var wh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=gh(this.userKey,i.apiKey,o),this.fullPersistenceKey=gh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return I(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Ih(this.auth,{idToken:e}).catch(()=>{});return n?li._fromGetAccountInfoResponse(this.auth,n,e):null}return li._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return I(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return I(this,null,function*(){if(!n.length)return new t(vr(mv),e,r);let i=(yield Promise.all(n.map(l=>I(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||vr(mv),s=gh(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield Ih(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield li._fromGetAccountInfoResponse(e,m,h)}else p=li._fromJSON(e,h);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(n.map(l=>I(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function aA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RA(e))return"Blackberry";if(kA(e))return"Webos";if(SA(e))return"Safari";if((e.includes("chrome/")||CA(e))&&!e.includes("edge/"))return"Chrome";if(AA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function bA(t=dt()){return/firefox\//i.test(t)}function SA(t=dt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CA(t=dt()){return/crios\//i.test(t)}function DA(t=dt()){return/iemobile/i.test(t)}function AA(t=dt()){return/android/i.test(t)}function RA(t=dt()){return/blackberry/i.test(t)}function kA(t=dt()){return/webos/i.test(t)}function Mv(t=dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gj(t=dt()){var e;return Mv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mj(){return bD()&&document.documentMode===10}function NA(t=dt()){return Mv(t)||AA(t)||kA(t)||RA(t)||/windows phone/i.test(t)||DA(t)}function xA(t,e=[]){let n;switch(t){case"Browser":n=aA(dt());break;case"Worker":n=`${aA(dt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oi}/${r}`}var yv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return I(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function yj(n){return I(this,arguments,function*(t,e={}){return ws(t,"GET","/v2/passwordPolicy",kv(t,e))})}var vj=6,vv=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:vj,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var _v=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Th(this),this.idTokenSubscription=new Th(this),this.beforeStateQueue=new yv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vr(n)),this._initializationPromise=this.queue(()=>I(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield wh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return I(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return I(this,null,function*(){try{let n=yield Ih(this,{idToken:e}),r=yield li._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return I(this,null,function*(){var n;if(en(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return I(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return I(this,null,function*(){try{yield Eh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=ij()}_delete(){return I(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return I(this,null,function*(){if(en(this.app))return Promise.reject(to(this));let n=e?Ot(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return I(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>I(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return I(this,null,function*(){return en(this.app)?Promise.reject(to(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return en(this.app)?Promise.reject(to(this)):this.queue(()=>I(this,null,function*(){yield this.assertedPersistence.setPersistence(vr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return I(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return I(this,null,function*(){let e=yield yj(this),n=new vv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return I(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield fj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return I(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return I(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&vr(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=yield wh.create(this,[vr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return I(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>I(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return I(this,null,function*(){if(e===this.currentUser)return this.queue(()=>I(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return I(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return I(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return I(this,null,function*(){var e;if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&ej(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Nh(t){return Ot(t)}var Th=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=AD(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ov={loadJS(){return I(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _j(t){Ov=t}function Ij(t){return Ov.loadJS(t)}function Ej(){return Ov.gapiScript}function PA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Lv(t,e){let n=ys(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Un(o,e??{}))return i;zn(i,"already-initialized")}return n.initialize({options:e})}function wj(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(vr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Fv(t,e,n){let r=Nh(t);Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=MA(e),{host:s,port:c}=Tj(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Y(Un(l,r.config.emulator)&&Un(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ri(s)?(sh(`${o}//${s}${u}`),ah("Auth",!0)):i||bj()}function MA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Tj(t){let e=MA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:cA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:cA(s)}}}function cA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function bj(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Vc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yr("not implemented")}_getIdTokenResponse(e){return yr("not implemented")}_linkToIdToken(e,n){return yr("not implemented")}_getReauthenticationResolver(e){return yr("not implemented")}};function Es(t,e){return I(this,null,function*(){return cj(t,"POST","/v1/accounts:signInWithIdp",kv(t,e))})}var Sj="http://localhost",bh=class t extends Vc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Gu(n,["providerId","signInMethod"]);if(!r||!i)return null;let s=new t(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let n=this.buildRequest();return Es(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Es(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Es(e,n)}buildRequest(){let e={requestUri:Sj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ms(n)}return e}};var jc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Sh=class extends jc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Vv=(()=>{class t extends Sh{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return bh._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();var Uc=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return I(this,null,function*(){let o=yield li._fromIdTokenResponse(e,r,i),s=uA(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return I(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=uA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function uA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Iv=class t extends Xt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function OA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Iv._fromErrorAndOperation(t,o,e,r):o})}function Cj(t,e,n=!1){return I(this,null,function*(){let r=yield Lc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Uc._forOperation(t,"link",r)})}function Dj(t,e,n=!1){return I(this,null,function*(){let{auth:r}=t;if(en(r.app))return Promise.reject(to(r));let i="reauthenticate";try{let o=yield Lc(t,OA(r,i,e,t),n);Y(o.idToken,r,"internal-error");let s=xv(o.idToken);Y(s,r,"internal-error");let{sub:c}=s;return Y(t.uid===c,r,"user-mismatch"),Uc._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&zn(r,"user-mismatch"),o}})}function Aj(t,e,n=!1){return I(this,null,function*(){if(en(t.app))return Promise.reject(to(t));let r="signIn",i=yield OA(t,r,e),o=yield Uc._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function jv(t,e,n,r){return Ot(t).onIdTokenChanged(e,n,r)}function Uv(t,e,n){return Ot(t).beforeAuthStateChanged(e,n)}function $c(t,e,n,r){return Ot(t).onAuthStateChanged(e,n,r)}function Bv(t){return Ot(t).signOut()}var Ch="__sak";var Dh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Rj=1e3,kj=10,Nj=(()=>{class t extends Dh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);mj()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,kj):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},Rj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return I(this,null,function*(){yield Pr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return I(this,null,function*(){let r=yield Pr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return I(this,null,function*(){yield Pr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),LA=Nj;var xj=(()=>{class t extends Dh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),$v=xj;function Pj(t){return Promise.all(t.map(e=>I(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var Mj=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return I(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(h=>I(this,null,function*(){return h(r.origin,s)})),l=yield Pj(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Hv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Ev=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return I(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=Hv("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Hn(){return window}function Oj(t){Hn().location.href=t}function FA(){return typeof Hn().WorkerGlobalScope<"u"&&typeof Hn().importScripts=="function"}function Lj(){return I(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Fj(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Vj(){return FA()?self:null}var VA="firebaseLocalStorageDb",jj=1,Ah="firebaseLocalStorage",jA="fbase_key",ro=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function xh(t,e){return t.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function Uj(){let t=indexedDB.deleteDatabase(VA);return new ro(t).toPromise()}function wv(){let t=indexedDB.open(VA,jj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Ah,{keyPath:jA})}catch(i){n(i)}}),t.addEventListener("success",()=>I(null,null,function*(){let r=t.result;r.objectStoreNames.contains(Ah)?e(r):(r.close(),yield Uj(),e(yield wv()))}))})}function lA(t,e,n){return I(this,null,function*(){let r=xh(t,!0).put({[jA]:e,value:n});return new ro(r).toPromise()})}function Bj(t,e){return I(this,null,function*(){let n=xh(t,!1).get(e),r=yield new ro(n).toPromise();return r===void 0?null:r.value})}function dA(t,e){let n=xh(t,!0).delete(e);return new ro(n).toPromise()}var $j=800,Hj=3,zj=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return I(this,null,function*(){return this.db?this.db:(this.db=yield wv(),this.db)})}_withRetries(n){return I(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>Hj)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return I(this,null,function*(){return FA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return I(this,null,function*(){this.receiver=Mj._getInstance(Vj()),this.receiver._subscribe("keyChanged",(n,r)=>I(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>I(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return I(this,null,function*(){var n,r;if(this.activeServiceWorker=yield Lj(),!this.activeServiceWorker)return;this.sender=new Ev(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return I(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Fj()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return I(this,null,function*(){try{if(!indexedDB)return!1;let n=yield wv();return yield lA(n,Ch,"1"),yield dA(n,Ch),!0}catch{}return!1})}_withPendingWrite(n){return I(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(i=>lA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return I(this,null,function*(){let r=yield this._withRetries(i=>Bj(i,n));return this.localCache[n]=r,r})}_remove(n){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(r=>dA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return I(this,null,function*(){let n=yield this._withRetries(o=>{let s=xh(o,!1).getAll();return new ro(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>I(this,null,function*(){return this._poll()}),$j)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),UA=zj;var Dee=PA("rcb"),Aee=new no(3e4,6e4);function BA(t,e){return e?vr(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Bc=class extends Vc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Es(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Es(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Es(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function qj(t){return Aj(t.auth,new Bc(t),t.bypassAuthState)}function Wj(t){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),Dj(n,new Bc(t),t.bypassAuthState)}function Gj(t){return I(this,null,function*(){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),Cj(n,new Bc(t),t.bypassAuthState)})}var Rh=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>I(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return I(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qj;case"linkViaPopup":case"linkViaRedirect":return Gj;case"reauthViaPopup":case"reauthViaRedirect":return Wj;default:zn(this.auth,"internal-error")}}resolve(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Kj=new no(2e3,1e4);function zv(t,e,n){return I(this,null,function*(){if(en(t.app))return Promise.reject(Sn(t,"operation-not-supported-in-this-environment"));let r=Nh(t);tj(t,e,jc);let i=BA(r,n);return new Qj(r,"signInViaPopup",e,i).executeNotNull()})}var Qj=(()=>{class t extends Rh{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return I(this,null,function*(){let n=yield this.execute();return Y(n,this.auth,"internal-error"),n})}onExecution(){return I(this,null,function*(){_r(this.filter.length===1,"Popup operations only handle one event");let n=Hv();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,Kj.get())};n()}}t.currentPopupAction=null;return t})(),Yj="pendingRedirect",mh=new Map,Tv=class t extends Rh{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return I(this,null,function*(){let e=mh.get(this.auth._key());if(!e){try{let r=(yield Jj(this.resolver,this.auth))?yield Pr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}mh.set(this.auth._key(),e)}return this.bypassAuthState||mh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return I(this,null,function*(){if(e.type==="signInViaRedirect")return Pr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Pr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return I(this,null,function*(){})}cleanUp(){}};function Jj(t,e){return I(this,null,function*(){let n=e2(e),r=Xj(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function Zj(t,e){mh.set(t._key(),e)}function Xj(t){return vr(t._redirectPersistence)}function e2(t){return gh(Yj,t.config.apiKey,t.name)}function t2(t,e,n=!1){return I(this,null,function*(){if(en(t.app))return Promise.reject(to(t));let r=Nh(t),i=BA(r,e),s=yield new Tv(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var n2=10*60*1e3,bv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!r2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$A(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=n2&&this.cachedEventUids.clear(),this.cachedEventUids.has(hA(e))}saveEventToCache(e){this.cachedEventUids.add(hA(e)),this.lastProcessedEventTime=Date.now()}};function hA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $A({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function r2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $A(t);default:return!1}}function i2(n){return I(this,arguments,function*(t,e={}){return ws(t,"GET","/v1/projects",e)})}var o2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s2=/^https?/;function a2(t){return I(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield i2(t);for(let n of e)try{if(c2(n))return}catch{}zn(t,"unauthorized-domain")})}function c2(t){let e=fv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!s2.test(n))return!1;if(o2.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var u2=new no(3e4,6e4);function fA(){let t=Hn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function l2(t){return new Promise((e,n)=>{var r,i,o;function s(){fA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fA(),n(Sn(t,"network-request-failed"))},timeout:u2.get()})}if(!((i=(r=Hn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Hn().gapi)===null||o===void 0)&&o.load)s();else{let c=PA("iframefcb");return Hn()[c]=()=>{gapi.load?s():n(Sn(t,"network-request-failed"))},Ij(`${Ej()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw yh=null,e})}var yh=null;function d2(t){return yh=yh||l2(t),yh}var h2=new no(5e3,15e3),f2="__/auth/iframe",p2="emulator/auth/iframe",g2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},m2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function y2(t){let e=t.config;Y(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Rv(e,p2):`https://${t.config.authDomain}/${f2}`,r={apiKey:e.apiKey,appName:t.name,v:oi},i=m2.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${ms(r).slice(1)}`}function v2(t){return I(this,null,function*(){let e=yield d2(t),n=Hn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:y2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g2,dontclear:!0},r=>new Promise((i,o)=>I(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Sn(t,"network-request-failed"),c=Hn().setTimeout(()=>{o(s)},h2.get());function u(){Hn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var _2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I2=500,E2=600,w2="_blank",T2="http://localhost",kh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function b2(t,e,n,r=I2,i=E2){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},_2),{width:r.toString(),height:i.toString(),top:o,left:s}),l=dt().toLowerCase();n&&(c=CA(l)?w2:n),bA(l)&&(e=e||T2,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,D])=>`${m}${y}=${D},`,"");if(gj(l)&&c!=="_self")return S2(e||"",c),new kh(null);let p=window.open(e||"",c,h);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new kh(p)}function S2(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var C2="__/auth/handler",D2="emulator/auth/handler",A2=encodeURIComponent("fac");function pA(t,e,n,r,i,o){return I(this,null,function*(){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:oi,eventId:i};if(e instanceof jc){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",DD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Sh){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let c=s;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=yield t._getAppCheckToken(),l=u?`#${A2}=${encodeURIComponent(u)}`:"";return`${R2(t)}?${ms(c).slice(1)}${l}`})}function R2({config:t}){return t.emulator?Rv(t,D2):`https://${t.authDomain}/${C2}`}var hv="webStorageSupport",Sv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$v,this._completeRedirectFn=t2,this._overrideRedirectResult=Zj}_openPopup(e,n,r,i){return I(this,null,function*(){var o;_r((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield pA(e,n,r,fv(),i);return b2(e,s,Hv())})}_openRedirect(e,n,r,i){return I(this,null,function*(){yield this._originValidation(e);let o=yield pA(e,n,r,fv(),i);return Oj(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(_r(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return I(this,null,function*(){let n=yield v2(e),r=new bv(e);return n.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hv,{type:hv},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[hv];s!==void 0&&n(!!s),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=a2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NA()||SA()||Mv()}},HA=Sv;var gA="@firebase/auth",mA="1.10.8";var Cv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return I(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function k2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function N2(t){Tn(new Lt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;Y(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xA(t)},l=new _v(r,i,o,u);return wj(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Tn(new Lt("auth-internal",e=>{let n=Nh(e.getProvider("auth").getImmediate());return(r=>new Cv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),je(gA,mA,k2(t)),je(gA,mA,"esm2017")}var x2=5*60,P2=$y("authIdTokenMaxAge")||x2,yA=null,M2=t=>e=>I(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>P2)return;let i=n?.token;yA!==i&&(yA=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function qv(t=Zi()){let e=ys(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Lv(t,{popupRedirectResolver:HA,persistence:[UA,LA,$v]}),r=$y("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=M2(o.toString());Uv(n,s,()=>s(n.currentUser)),jv(n,c=>s(c))}}let i=Uy("auth");return i&&Fv(n,`http://${i}`),n}function O2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_j({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Sn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",O2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});N2("Browser");var zA="auth",io=class{constructor(e){return e}},Hc=class{constructor(){return _s(zA)}};var Wv=new U("angularfire2.auth-instances");function SU(t,e){let n=Nc(zA,t,e);return n&&new io(n)}function CU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new io(r)}}var DU={provide:Hc,deps:[[new Yt,Wv]]},AU={provide:io,useFactory:SU,deps:[[new Yt,Wv],mr]};function qA(t,...e){return je("angularfire",si.full,"auth"),qt([AU,DU,{provide:Wv,useFactory:CU(t),multi:!0,deps:[be,it,ai,eo,[new Yt,Is],...e]}])}var WA=tn(qv,!0);var GA=tn($c,!0);var KA=tn(zv,!0,2);var QA=tn(Bv,!0,2);var un=class t{constructor(e){this.auth=e;GA(this.auth,n=>{this.currentUserSubject.next(n)})}currentUserSubject=new Qe(null);currentUser$=this.currentUserSubject.asObservable();loginWithGoogle(){return KA(this.auth,new Vv)}logout(){return QA(this.auth)}currentUser(){return this.auth.currentUser||console.warn("AuthService: Nenhum usu\xE1rio autenticado no momento."),this.auth.currentUser}static \u0275fac=function(n){return new(n||t)(K(io))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};var YA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},JA={};var Ir,Kv;(function(){var t;function e(T,v){function E(){}E.prototype=v.prototype,T.D=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(w,b,C){for(var _=Array(arguments.length-2),Zn=2;Zn<arguments.length;Zn++)_[Zn-2]=arguments[Zn];return v.prototype[b].apply(w,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,E){E||(E=0);var w=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)w[b]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(b=0;16>b;++b)w[b]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],b=T.g[2];var C=T.g[3],_=v+(C^E&(b^C))+w[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=C+(b^v&(E^b))+w[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(E^C&(v^E))+w[2]+606105819&4294967295,b=C+(_<<17&4294967295|_>>>15),_=E+(v^b&(C^v))+w[3]+3250441966&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(C^E&(b^C))+w[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(b^v&(E^b))+w[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(E^C&(v^E))+w[6]+2821735955&4294967295,b=C+(_<<17&4294967295|_>>>15),_=E+(v^b&(C^v))+w[7]+4249261313&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(C^E&(b^C))+w[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(b^v&(E^b))+w[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(E^C&(v^E))+w[10]+4294925233&4294967295,b=C+(_<<17&4294967295|_>>>15),_=E+(v^b&(C^v))+w[11]+2304563134&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(C^E&(b^C))+w[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(b^v&(E^b))+w[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(E^C&(v^E))+w[14]+2792965006&4294967295,b=C+(_<<17&4294967295|_>>>15),_=E+(v^b&(C^v))+w[15]+1236535329&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(b^C&(E^b))+w[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^b&(v^E))+w[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(C^v))+w[11]+643717713&4294967295,b=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(b^C))+w[0]+3921069994&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(E^b))+w[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^b&(v^E))+w[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(C^v))+w[15]+3634488961&4294967295,b=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(b^C))+w[4]+3889429448&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(E^b))+w[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^b&(v^E))+w[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(C^v))+w[3]+4107603335&4294967295,b=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(b^C))+w[8]+1163531501&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(E^b))+w[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^b&(v^E))+w[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(C^v))+w[7]+1735328473&4294967295,b=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(b^C))+w[12]+2368359562&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(E^b^C)+w[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^b)+w[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^E)+w[11]+1839030562&4294967295,b=C+(_<<16&4294967295|_>>>16),_=E+(b^C^v)+w[14]+4259657740&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^C)+w[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^b)+w[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^E)+w[7]+4139469664&4294967295,b=C+(_<<16&4294967295|_>>>16),_=E+(b^C^v)+w[10]+3200236656&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^C)+w[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^b)+w[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^E)+w[3]+3572445317&4294967295,b=C+(_<<16&4294967295|_>>>16),_=E+(b^C^v)+w[6]+76029189&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^C)+w[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^b)+w[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^E)+w[15]+530742520&4294967295,b=C+(_<<16&4294967295|_>>>16),_=E+(b^C^v)+w[2]+3299628645&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(b^(E|~C))+w[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~b))+w[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~E))+w[14]+2878612391&4294967295,b=C+(_<<15&4294967295|_>>>17),_=E+(C^(b|~v))+w[5]+4237533241&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~C))+w[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~b))+w[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~E))+w[10]+4293915773&4294967295,b=C+(_<<15&4294967295|_>>>17),_=E+(C^(b|~v))+w[1]+2240044497&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~C))+w[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~b))+w[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~E))+w[6]+2734768916&4294967295,b=C+(_<<15&4294967295|_>>>17),_=E+(C^(b|~v))+w[13]+1309151649&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~C))+w[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~b))+w[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~E))+w[2]+718787259&4294967295,b=C+(_<<15&4294967295|_>>>17),_=E+(C^(b|~v))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var E=v-this.blockSize,w=this.B,b=this.h,C=0;C<v;){if(b==0)for(;C<=E;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<v;)if(w[b++]=T.charCodeAt(C++),b==this.blockSize){i(this,w),b=0;break}}else for(;C<v;)if(w[b++]=T[C++],b==this.blockSize){i(this,w),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var E=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=E&255,E/=256;for(this.u(T),T=Array(16),v=E=0;4>v;++v)for(var w=0;32>w;w+=8)T[E++]=this.g[v]>>>w&255;return T};function o(T,v){var E=c;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function s(T,v){this.h=v;for(var E=[],w=!0,b=T.length-1;0<=b;b--){var C=T[b]|0;w&&C==v||(E[b]=C,w=!1)}this.g=E}var c={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return k(l(-T));for(var v=[],E=1,w=0;T>=E;w++)v[w]=T/E|0,E*=4294967296;return new s(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return k(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),w=p,b=0;b<T.length;b+=8){var C=Math.min(8,T.length-b),_=parseInt(T.substring(b,b+C),v);8>C?(C=l(Math.pow(v,C)),w=w.j(C).add(l(_))):(w=w.j(E),w=w.add(l(_)))}return w}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-k(this).m();for(var T=0,v=1,E=0;E<this.g.length;E++){var w=this.i(E);T+=(0<=w?w:4294967296+w)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D(this))return"0";if(N(this))return"-"+k(this).toString(T);for(var v=l(Math.pow(T,6)),E=this,w="";;){var b=De(E,v).g;E=O(E,b.j(v));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=b,D(E))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function D(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=O(this,T),N(T)?-1:D(T)?0:1};function k(T){for(var v=T.g.length,E=[],w=0;w<v;w++)E[w]=~T.g[w];return new s(E,~T.h).add(m)}t.abs=function(){return N(this)?k(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0,b=0;b<=v;b++){var C=w+(this.i(b)&65535)+(T.i(b)&65535),_=(C>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);w=_>>>16,C&=65535,_&=65535,E[b]=_<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function O(T,v){return T.add(k(v))}t.j=function(T){if(D(this)||D(T))return p;if(N(this))return N(T)?k(this).j(k(T)):k(k(this).j(T));if(N(T))return k(this.j(k(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,E=[],w=0;w<2*v;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<T.g.length;b++){var C=this.i(w)>>>16,_=this.i(w)&65535,Zn=T.i(b)>>>16,Ks=T.i(b)&65535;E[2*w+2*b]+=_*Ks,B(E,2*w+2*b),E[2*w+2*b+1]+=C*Ks,B(E,2*w+2*b+1),E[2*w+2*b+1]+=_*Zn,B(E,2*w+2*b+1),E[2*w+2*b+2]+=C*Zn,B(E,2*w+2*b+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function B(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function J(T,v){this.g=T,this.h=v}function De(T,v){if(D(v))throw Error("division by zero");if(D(T))return new J(p,p);if(N(T))return v=De(k(T),v),new J(k(v.g),k(v.h));if(N(v))return v=De(T,k(v)),new J(k(v.g),v.h);if(30<T.g.length){if(N(T)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,w=v;0>=w.l(T);)E=At(E),w=At(w);var b=Te(E,1),C=Te(w,1);for(w=Te(w,2),E=Te(E,2);!D(w);){var _=C.add(w);0>=_.l(T)&&(b=b.add(E),C=_),w=Te(w,1),E=Te(E,1)}return v=O(T,b.j(v)),new J(b,v)}for(b=p;0<=T.l(v);){for(E=Math.max(1,Math.floor(T.m()/v.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=l(E),_=C.j(v);N(_)||0<_.l(T);)E-=w,C=l(E),_=C.j(v);D(C)&&(C=m),b=b.add(C),T=O(T,_)}return new J(b,T)}t.A=function(T){return De(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)&T.i(w);return new s(E,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)|T.i(w);return new s(E,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)^T.i(w);return new s(E,this.h^T.h)};function At(T){for(var v=T.g.length+1,E=[],w=0;w<v;w++)E[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(E,T.h)}function Te(T,v){var E=v>>5;v%=32;for(var w=T.g.length-E,b=[],C=0;C<w;C++)b[C]=0<v?T.i(C+E)>>>v|T.i(C+E+1)<<32-v:T.i(C+E);return new s(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Kv=JA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Ir=JA.Integer=s}).apply(typeof YA<"u"?YA:typeof self<"u"?self:typeof window<"u"?window:{});var Ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Er={};var Qv,kU,Ts,Yv,zc,Mh,Jv,Zv,Xv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ph=="object"&&Ph];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var S=a[g];if(!(S in f))break e;f=f[S]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var f=0,g=!1,S={next:function(){if(!g&&f<a.length){var A=f++;return{value:d(A,a[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,f){return f})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,g),a.apply(d,S)}}return function(){return a.apply(d,arguments)}}function m(a,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function D(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,S,A){for(var M=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)M[Ae-2]=arguments[Ae];return d.prototype[S].apply(g,M)}}function N(a){let d=a.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function k(a,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let S=a.length||0,A=g.length||0;a.length=S+A;for(let M=0;M<A;M++)a[S+M]=g[M]}else a.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function B(a){return/^[\s\xa0]*$/.test(a)}function J(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function De(a){return De[" "](a),a}De[" "]=function(){};var At=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function Te(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function T(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function v(a){let d={};for(let f in a)d[f]=a[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let f,g;for(let S=1;S<arguments.length;S++){g=arguments[S];for(f in g)a[f]=g[f];for(let A=0;A<E.length;A++)f=E[A],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function b(a){var d=1;a=a.split(":");let f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function C(a){c.setTimeout(()=>{throw a},0)}function _(){var a=jf;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Zn{constructor(){this.h=this.g=null}add(d,f){let g=Ks.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ks=new O(()=>new Ek,a=>a.reset());class Ek{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Qs,Ys=!1,jf=new Zn,dE=()=>{let a=c.Promise.resolve(void 0);Qs=()=>{a.then(wk)}};var wk=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(f){C(f)}var d=Ks;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}Ys=!1};function Rr(){this.s=this.s,this.C=this.C}Rr.prototype.s=!1,Rr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Rr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _t(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};var Tk=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function Js(a,d){if(_t.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(At){e:{try{De(d.nodeName);var S=!0;break e}catch{}S=!1}S||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:bk[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Js.aa.h.call(this)}}D(Js,_t);var bk={2:"touch",3:"pen",4:"mouse"};Js.prototype.h=function(){Js.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Zs="closure_listenable_"+(1e6*Math.random()|0),Sk=0;function Ck(a,d,f,g,S){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=S,this.key=++Sk,this.da=this.fa=!1}function pu(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function gu(a){this.src=a,this.g={},this.h=0}gu.prototype.add=function(a,d,f,g,S){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var M=Bf(a,d,g,S);return-1<M?(d=a[M],f||(d.fa=!1)):(d=new Ck(d,this.src,A,!!g,S),d.fa=f,a.push(d)),d};function Uf(a,d){var f=d.type;if(f in a.g){var g=a.g[f],S=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=S)&&Array.prototype.splice.call(g,S,1),A&&(pu(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Bf(a,d,f,g){for(var S=0;S<a.length;++S){var A=a[S];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return S}return-1}var $f="closure_lm_"+(1e6*Math.random()|0),Hf={};function hE(a,d,f,g,S){if(g&&g.once)return pE(a,d,f,g,S);if(Array.isArray(d)){for(var A=0;A<d.length;A++)hE(a,d[A],f,g,S);return null}return f=Gf(f),a&&a[Zs]?a.K(d,f,l(g)?!!g.capture:!!g,S):fE(a,d,f,!1,g,S)}function fE(a,d,f,g,S,A){if(!d)throw Error("Invalid event type");var M=l(S)?!!S.capture:!!S,Ae=qf(a);if(Ae||(a[$f]=Ae=new gu(a)),f=Ae.add(d,f,g,M,A),f.proxy)return f;if(g=Dk(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)Tk||(S=M),S===void 0&&(S=!1),a.addEventListener(d.toString(),g,S);else if(a.attachEvent)a.attachEvent(mE(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Dk(){function a(f){return d.call(a.src,a.listener,f)}let d=Ak;return a}function pE(a,d,f,g,S){if(Array.isArray(d)){for(var A=0;A<d.length;A++)pE(a,d[A],f,g,S);return null}return f=Gf(f),a&&a[Zs]?a.L(d,f,l(g)?!!g.capture:!!g,S):fE(a,d,f,!0,g,S)}function gE(a,d,f,g,S){if(Array.isArray(d))for(var A=0;A<d.length;A++)gE(a,d[A],f,g,S);else g=l(g)?!!g.capture:!!g,f=Gf(f),a&&a[Zs]?(a=a.i,d=String(d).toString(),d in a.g&&(A=a.g[d],f=Bf(A,f,g,S),-1<f&&(pu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete a.g[d],a.h--)))):a&&(a=qf(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Bf(d,f,g,S)),(f=-1<a?d[a]:null)&&zf(f))}function zf(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Zs])Uf(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(mE(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=qf(d))?(Uf(f,a),f.h==0&&(f.src=null,d[$f]=null)):pu(a)}}}function mE(a){return a in Hf?Hf[a]:Hf[a]="on"+a}function Ak(a,d){if(a.da)a=!0;else{d=new Js(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&zf(a),a=f.call(g,d)}return a}function qf(a){return a=a[$f],a instanceof gu?a:null}var Wf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gf(a){return typeof a=="function"?a:(a[Wf]||(a[Wf]=function(d){return a.handleEvent(d)}),a[Wf])}function It(){Rr.call(this),this.i=new gu(this),this.M=this,this.F=null}D(It,Rr),It.prototype[Zs]=!0,It.prototype.removeEventListener=function(a,d,f,g){gE(this,a,d,f,g)};function Rt(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new _t(d,a);else if(d instanceof _t)d.target=d.target||a;else{var S=d;d=new _t(g,a),w(d,S)}if(S=!0,f)for(var A=f.length-1;0<=A;A--){var M=d.g=f[A];S=mu(M,g,!0,d)&&S}if(M=d.g=a,S=mu(M,g,!0,d)&&S,S=mu(M,g,!1,d)&&S,f)for(A=0;A<f.length;A++)M=d.g=f[A],S=mu(M,g,!1,d)&&S}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)pu(f[g]);delete a.g[d],a.h--}}this.F=null},It.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},It.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function mu(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var S=!0,A=0;A<d.length;++A){var M=d[A];if(M&&!M.da&&M.capture==f){var Ae=M.listener,pt=M.ha||M.src;M.fa&&Uf(a.i,M),S=Ae.call(pt,g)!==!1&&S}}return S&&!g.defaultPrevented}function yE(a,d,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function vE(a){a.g=yE(()=>{a.g=null,a.i&&(a.i=!1,vE(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class Rk extends Rr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:vE(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xs(a){Rr.call(this),this.h=a,this.g={}}D(Xs,Rr);var _E=[];function IE(a){Te(a.g,function(d,f){this.g.hasOwnProperty(f)&&zf(d)},a),a.g={}}Xs.prototype.N=function(){Xs.aa.N.call(this),IE(this)},Xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kf=c.JSON.stringify,kk=c.JSON.parse,Nk=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Qf(){}Qf.prototype.h=null;function EE(a){return a.h||(a.h=a.i())}function wE(){}var ea={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yf(){_t.call(this,"d")}D(Yf,_t);function Jf(){_t.call(this,"c")}D(Jf,_t);var vi={},TE=null;function yu(){return TE=TE||new It}vi.La="serverreachability";function bE(a){_t.call(this,vi.La,a)}D(bE,_t);function ta(a){let d=yu();Rt(d,new bE(d))}vi.STAT_EVENT="statevent";function SE(a,d){_t.call(this,vi.STAT_EVENT,a),this.stat=d}D(SE,_t);function kt(a){let d=yu();Rt(d,new SE(d,a))}vi.Ma="timingevent";function CE(a,d){_t.call(this,vi.Ma,a),this.size=d}D(CE,_t);function na(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function ra(){this.g=!0}ra.prototype.xa=function(){this.g=!1};function xk(a,d,f,g,S,A){a.info(function(){if(a.g)if(A)for(var M="",Ae=A.split("&"),pt=0;pt<Ae.length;pt++){var ye=Ae[pt].split("=");if(1<ye.length){var Et=ye[0];ye=ye[1];var wt=Et.split("_");M=2<=wt.length&&wt[1]=="type"?M+(Et+"="+ye+"&"):M+(Et+"=redacted&")}}else M=null;else M=A;return"XMLHTTP REQ ("+g+") [attempt "+S+"]: "+d+`
`+f+`
`+M})}function Pk(a,d,f,g,S,A,M){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+S+"]: "+d+`
`+f+`
`+A+" "+M})}function _o(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ok(a,f)+(g?" "+g:"")})}function Mk(a,d){a.info(function(){return"TIMEOUT: "+d})}ra.prototype.info=function(){};function Ok(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var S=g[1];if(Array.isArray(S)&&!(1>S.length)){var A=S[0];if(A!="noop"&&A!="stop"&&A!="close")for(var M=1;M<S.length;M++)S[M]=""}}}}return Kf(f)}catch{return d}}var vu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},DE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zf;function _u(){}D(_u,Qf),_u.prototype.g=function(){return new XMLHttpRequest},_u.prototype.i=function(){return{}},Zf=new _u;function kr(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new Xs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new AE}function AE(){this.i=null,this.g="",this.h=!1}var RE={},Xf={};function ep(a,d,f){a.L=1,a.v=Tu(Xn(d)),a.m=f,a.P=!0,kE(a,null)}function kE(a,d){a.F=Date.now(),Iu(a),a.A=Xn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),zE(f.i,"t",g),a.C=0,f=a.j.J,a.h=new AE,a.g=cw(a.j,f?d:null,!a.m),0<a.O&&(a.M=new Rk(m(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var S="readystatechange";Array.isArray(S)||(S&&(_E[0]=S.toString()),S=_E);for(var A=0;A<S.length;A++){var M=hE(f,S[A],g||d.handleEvent,!1,d.h||d);if(!M)break;d.g[M.key]=M}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),ta(),xk(a.i,a.u,a.A,a.l,a.R,a.m)}kr.prototype.ca=function(a){a=a.target;let d=this.M;d&&er(a)==3?d.j():this.Y(a)},kr.prototype.Y=function(a){try{if(a==this.g)e:{let wt=er(this.g);var d=this.g.Ba();let wo=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||JE(this.g)))){this.J||wt!=4||d==7||(d==8||0>=wo?ta(3):ta(2)),tp(this);var f=this.g.Z();this.X=f;t:if(NE(this)){var g=JE(this.g);a="";var S=g.length,A=er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),ia(this);var M="";break t}this.h.i=new c.TextDecoder}for(d=0;d<S;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(A&&d==S-1)});g.length=0,this.h.g+=a,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=f==200,Pk(this.i,this.u,this.A,this.l,this.R,wt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,pt=this.g;if((Ae=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Ae)){var ye=Ae;break t}}ye=null}if(f=ye)_o(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,np(this,f);else{this.o=!1,this.s=3,kt(12),_i(this),ia(this);break e}}if(this.P){f=!0;let dn;for(;!this.J&&this.C<M.length;)if(dn=Lk(this,M),dn==Xf){wt==4&&(this.s=4,kt(14),f=!1),_o(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==RE){this.s=4,kt(15),_o(this.i,this.l,M,"[Invalid Chunk]"),f=!1;break}else _o(this.i,this.l,dn,null),np(this,dn);if(NE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||M.length!=0||this.h.h||(this.s=1,kt(16),f=!1),this.o=this.o&&f,!f)_o(this.i,this.l,M,"[Invalid Chunked Response]"),_i(this),ia(this);else if(0<M.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),cp(Et),Et.M=!0,kt(11))}}else _o(this.i,this.l,M,null),np(this,M);wt==4&&_i(this),this.o&&!this.J&&(wt==4?iw(this.j,this):(this.o=!1,Iu(this)))}else Xk(this.g),f==400&&0<M.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),_i(this),ia(this)}}}catch{}finally{}};function NE(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Lk(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?Xf:(f=Number(d.substring(f,g)),isNaN(f)?RE:(g+=1,g+f>d.length?Xf:(d=d.slice(g,g+f),a.C=g+f,d)))}kr.prototype.cancel=function(){this.J=!0,_i(this)};function Iu(a){a.S=Date.now()+a.I,xE(a,a.I)}function xE(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=na(m(a.ba,a),d)}function tp(a){a.B&&(c.clearTimeout(a.B),a.B=null)}kr.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(Mk(this.i,this.A),this.L!=2&&(ta(),kt(17)),_i(this),this.s=2,ia(this)):xE(this,this.S-a)};function ia(a){a.j.G==0||a.J||iw(a.j,a)}function _i(a){tp(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,IE(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function np(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||rp(f.h,a))){if(!a.K&&rp(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var S=g;if(S[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Au(f),Cu(f);else break e;ap(f),kt(18)}}else f.za=S[1],0<f.za-f.T&&37500>S[2]&&f.F&&f.v==0&&!f.C&&(f.C=na(m(f.Za,f),6e3));if(1>=OE(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ei(f,11)}else if((a.K||f.g==a)&&Au(f),!B(d))for(S=f.Da.g.parse(d),d=0;d<S.length;d++){let ye=S[d];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];let Et=ye[3];Et!=null&&(f.la=Et,f.j.info("VER="+f.la));let wt=ye[4];wt!=null&&(f.Aa=wt,f.j.info("SVER="+f.Aa));let wo=ye[5];wo!=null&&typeof wo=="number"&&0<wo&&(g=1.5*wo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let dn=a.g;if(dn){let ku=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ku){var A=g.h;A.g||ku.indexOf("spdy")==-1&&ku.indexOf("quic")==-1&&ku.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(ip(A,A.h),A.h=null))}if(g.D){let up=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;up&&(g.ya=up,xe(g.I,g.D,up))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var M=a;if(g.qa=aw(g,g.J?g.ia:null,g.W),M.K){LE(g.h,M);var Ae=M,pt=g.L;pt&&(Ae.I=pt),Ae.B&&(tp(Ae),Iu(Ae)),g.g=M}else nw(g);0<f.i.length&&Du(f)}else ye[0]!="stop"&&ye[0]!="close"||Ei(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Ei(f,7):sp(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}ta(4)}catch{}}var Fk=class{constructor(a,d){this.g=a,this.map=d}};function PE(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ME(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function OE(a){return a.h?1:a.g?a.g.size:0}function rp(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function ip(a,d){a.g?a.g.add(d):a.h=d}function LE(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}PE.prototype.cancel=function(){if(this.i=FE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function FE(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.D);return d}return N(a.i)}function Vk(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function jk(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(let g in a)d[f++]=g;return d}}}function VE(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=jk(a),g=Vk(a),S=g.length,A=0;A<S;A++)d.call(void 0,g[A],f&&f[A],a)}var jE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uk(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),S=null;if(0<=g){var A=a[f].substring(0,g);S=a[f].substring(g+1)}else A=a[f];d(A,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function Ii(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ii){this.h=a.h,Eu(this,a.j),this.o=a.o,this.g=a.g,wu(this,a.s),this.l=a.l;var d=a.i,f=new aa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),UE(this,f),this.m=a.m}else a&&(d=String(a).match(jE))?(this.h=!1,Eu(this,d[1]||"",!0),this.o=oa(d[2]||""),this.g=oa(d[3]||"",!0),wu(this,d[4]),this.l=oa(d[5]||"",!0),UE(this,d[6]||"",!0),this.m=oa(d[7]||"")):(this.h=!1,this.i=new aa(null,this.h))}Ii.prototype.toString=function(){var a=[],d=this.j;d&&a.push(sa(d,BE,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(sa(d,BE,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(sa(f,f.charAt(0)=="/"?Hk:$k,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",sa(f,qk)),a.join("")};function Xn(a){return new Ii(a)}function Eu(a,d,f){a.j=f?oa(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function wu(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function UE(a,d,f){d instanceof aa?(a.i=d,Wk(a.i,a.h)):(f||(d=sa(d,zk)),a.i=new aa(d,a.h))}function xe(a,d,f){a.i.set(d,f)}function Tu(a){return xe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function oa(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function sa(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Bk),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Bk(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var BE=/[#\/\?@]/g,$k=/[#\?:]/g,Hk=/[#\?]/g,zk=/[#\?@]/g,qk=/#/g;function aa(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Nr(a){a.g||(a.g=new Map,a.h=0,a.i&&Uk(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=aa.prototype,t.add=function(a,d){Nr(this),this.i=null,a=Io(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function $E(a,d){Nr(a),d=Io(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function HE(a,d){return Nr(a),d=Io(a,d),a.g.has(d)}t.forEach=function(a,d){Nr(this),this.g.forEach(function(f,g){f.forEach(function(S){a.call(d,S,g,this)},this)},this)},t.na=function(){Nr(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let S=a[g];for(let A=0;A<S.length;A++)f.push(d[g])}return f},t.V=function(a){Nr(this);let d=[];if(typeof a=="string")HE(this,a)&&(d=d.concat(this.g.get(Io(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Nr(this),this.i=null,a=Io(this,a),HE(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function zE(a,d,f){$E(a,d),0<f.length&&(a.i=null,a.g.set(Io(a,d),N(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),M=this.V(g);for(g=0;g<M.length;g++){var S=A;M[g]!==""&&(S+="="+encodeURIComponent(String(M[g]))),a.push(S)}}return this.i=a.join("&")};function Io(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function Wk(a,d){d&&!a.j&&(Nr(a),a.i=null,a.g.forEach(function(f,g){var S=g.toLowerCase();g!=S&&($E(this,g),zE(this,S,f))},a)),a.j=d}function Gk(a,d){let f=new ra;if(c.Image){let g=new Image;g.onload=y(xr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(xr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(xr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(xr,f,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function Kk(a,d){let f=new ra,g=new AbortController,S=setTimeout(()=>{g.abort(),xr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(A=>{clearTimeout(S),A.ok?xr(f,"TestPingServer: ok",!0,d):xr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(S),xr(f,"TestPingServer: error",!1,d)})}function xr(a,d,f,g,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),g(f)}catch{}}function Qk(){this.g=new Nk}function Yk(a,d,f){let g=f||"";try{VE(a,function(S,A){let M=S;l(S)&&(M=Kf(S)),d.push(g+A+"="+encodeURIComponent(M))})}catch(S){throw d.push(g+"type="+encodeURIComponent("_badmap")),S}}function ca(a){this.l=a.Ub||null,this.j=a.eb||!1}D(ca,Qf),ca.prototype.g=function(){return new bu(this.l,this.j)},ca.prototype.i=function(a){return function(){return a}}({});function bu(a,d){It.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(bu,It),t=bu.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,la(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ua(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,la(this)),this.g&&(this.readyState=3,la(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qE(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function qE(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ua(this):la(this),this.readyState==3&&qE(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ua(this))},t.Qa=function(a){this.g&&(this.response=a,ua(this))},t.ga=function(){this.g&&ua(this)};function ua(a){a.readyState=4,a.l=null,a.j=null,a.v=null,la(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function la(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(bu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function WE(a){let d="";return Te(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function op(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=WE(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):xe(a,d,f))}function Fe(a){It.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Fe,It);var Jk=/^https?$/i,Zk=["POST","PUT"];t=Fe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zf.g(),this.v=this.o?EE(this.o):EE(Zf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(A){GE(this,A);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var S in g)f.set(S,g[S]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),S=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Zk,d,void 0))||g||S||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,M]of f)this.g.setRequestHeader(A,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{YE(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){GE(this,A)}};function GE(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,KE(a),Su(a)}function KE(a){a.A||(a.A=!0,Rt(a,"complete"),Rt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Rt(this,"complete"),Rt(this,"abort"),Su(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Su(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?QE(this):this.bb())},t.bb=function(){QE(this)};function QE(a){if(a.h&&typeof s<"u"&&(!a.v[1]||er(a)!=4||a.Z()!=2)){if(a.u&&er(a)==4)yE(a.Ea,0,a);else if(Rt(a,"readystatechange"),er(a)==4){a.h=!1;try{let M=a.Z();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=M===0){var S=String(a.D).match(jE)[1]||null;!S&&c.self&&c.self.location&&(S=c.self.location.protocol.slice(0,-1)),g=!Jk.test(S?S.toLowerCase():"")}f=g}if(f)Rt(a,"complete"),Rt(a,"success");else{a.m=6;try{var A=2<er(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",KE(a)}}finally{Su(a)}}}}function Su(a,d){if(a.g){YE(a);let f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Rt(a,"ready");try{f.onreadystatechange=g}catch{}}}function YE(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function er(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),kk(d)}};function JE(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Xk(a){let d={};a=(a.g&&2<=er(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(B(a[g]))continue;var f=b(a[g]);let S=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[S]||[];d[S]=A,A.push(f)}T(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function da(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function ZE(a){this.Aa=0,this.i=[],this.j=new ra,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=da("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=da("baseRetryDelayMs",5e3,a),this.cb=da("retryDelaySeedMs",1e4,a),this.Wa=da("forwardChannelMaxRetries",2,a),this.wa=da("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new PE(a&&a.concurrentRequestLimit),this.Da=new Qk,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ZE.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){kt(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=aw(this,null,this.W),Du(this)};function sp(a){if(XE(a),a.G==3){var d=a.U++,f=Xn(a.I);if(xe(f,"SID",a.K),xe(f,"RID",d),xe(f,"TYPE","terminate"),ha(a,f),d=new kr(a,a.j,d),d.L=2,d.v=Tu(Xn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=cw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Iu(d)}sw(a)}function Cu(a){a.g&&(cp(a),a.g.cancel(),a.g=null)}function XE(a){Cu(a),a.u&&(c.clearTimeout(a.u),a.u=null),Au(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Du(a){if(!ME(a.h)&&!a.s){a.s=!0;var d=a.Ga;Qs||dE(),Ys||(Qs(),Ys=!0),jf.add(d,a),a.B=0}}function eN(a,d){return OE(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=na(m(a.Ga,a,d),ow(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let S=new kr(this,this.j,a),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(S.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=tw(this,S,d),f=Xn(this.I),xe(f,"RID",a),xe(f,"CVER",22),this.D&&xe(f,"X-HTTP-Session-Id",this.D),ha(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(WE(A)))+"&"+d:this.m&&op(f,this.m,A)),ip(this.h,S),this.Ua&&xe(f,"TYPE","init"),this.P?(xe(f,"$req",d),xe(f,"SID","null"),S.T=!0,ep(S,f,null)):ep(S,f,d),this.G=2}}else this.G==3&&(a?ew(this,a):this.i.length==0||ME(this.h)||ew(this))};function ew(a,d){var f;d?f=d.l:f=a.U++;let g=Xn(a.I);xe(g,"SID",a.K),xe(g,"RID",f),xe(g,"AID",a.T),ha(a,g),a.m&&a.o&&op(g,a.m,a.o),f=new kr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=tw(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ip(a.h,f),ep(f,g,d)}function ha(a,d){a.H&&Te(a.H,function(f,g){xe(d,g,f)}),a.l&&VE({},function(f,g){xe(d,g,f)})}function tw(a,d,f){f=Math.min(a.i.length,f);var g=a.l?m(a.l.Na,a.l,a):null;e:{var S=a.i;let A=-1;for(;;){let M=["count="+f];A==-1?0<f?(A=S[0].g,M.push("ofs="+A)):A=0:M.push("ofs="+A);let Ae=!0;for(let pt=0;pt<f;pt++){let ye=S[pt].g,Et=S[pt].map;if(ye-=A,0>ye)A=Math.max(0,S[pt].g-100),Ae=!1;else try{Yk(Et,M,"req"+ye+"_")}catch{g&&g(Et)}}if(Ae){g=M.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function nw(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Qs||dE(),Ys||(Qs(),Ys=!0),jf.add(d,a),a.v=0}}function ap(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=na(m(a.Fa,a),ow(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,rw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=na(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Cu(this),rw(this))};function cp(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function rw(a){a.g=new kr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Xn(a.qa);xe(d,"RID","rpc"),xe(d,"SID",a.K),xe(d,"AID",a.T),xe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&xe(d,"TO",a.ja),xe(d,"TYPE","xmlhttp"),ha(a,d),a.m&&a.o&&op(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Tu(Xn(d)),f.m=null,f.P=!0,kE(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Cu(this),ap(this),kt(19))};function Au(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function iw(a,d){var f=null;if(a.g==d){Au(a),cp(a),a.g=null;var g=2}else if(rp(a.h,d))f=d.D,LE(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var S=a.B;g=yu(),Rt(g,new CE(g,f)),Du(a)}else nw(a);else if(S=d.s,S==3||S==0&&0<d.X||!(g==1&&eN(a,d)||g==2&&ap(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),S){case 1:Ei(a,5);break;case 4:Ei(a,10);break;case 3:Ei(a,6);break;default:Ei(a,2)}}}function ow(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Ei(a,d){if(a.j.info("Error code "+d),d==2){var f=m(a.fb,a),g=a.Xa;let S=!g;g=new Ii(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Eu(g,"https"),Tu(g),S?Gk(g.toString(),f):Kk(g.toString(),f)}else kt(2);a.G=0,a.l&&a.l.sa(d),sw(a),XE(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function sw(a){if(a.G=0,a.ka=[],a.l){let d=FE(a.h);(d.length!=0||a.i.length!=0)&&(k(a.ka,d),k(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function aw(a,d,f){var g=f instanceof Ii?Xn(f):new Ii(f);if(g.g!="")d&&(g.g=d+"."+g.g),wu(g,g.s);else{var S=c.location;g=S.protocol,d=d?d+"."+S.hostname:S.hostname,S=+S.port;var A=new Ii(null);g&&Eu(A,g),d&&(A.g=d),S&&wu(A,S),f&&(A.l=f),g=A}return f=a.D,d=a.ya,f&&d&&xe(g,f,d),xe(g,"VER",a.la),ha(a,g),g}function cw(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Fe(new ca({eb:f})):new Fe(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function uw(){}t=uw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ru(){}Ru.prototype.g=function(a,d){return new $t(a,d)};function $t(a,d){It.call(this),this.g=new ZE(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!B(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!B(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Eo(this)}D($t,It),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){sp(this.g)},$t.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Kf(a),a=f);d.i.push(new Fk(d.Ya++,a)),d.G==3&&Du(d)},$t.prototype.N=function(){this.g.l=null,delete this.j,sp(this.g),delete this.g,$t.aa.N.call(this)};function lw(a){Yf.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}D(lw,Yf);function dw(){Jf.call(this),this.status=1}D(dw,Jf);function Eo(a){this.g=a}D(Eo,uw),Eo.prototype.ua=function(){Rt(this.g,"a")},Eo.prototype.ta=function(a){Rt(this.g,new lw(a))},Eo.prototype.sa=function(a){Rt(this.g,new dw)},Eo.prototype.ra=function(){Rt(this.g,"b")},Ru.prototype.createWebChannel=Ru.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,Xv=Er.createWebChannelTransport=function(){return new Ru},Zv=Er.getStatEventTarget=function(){return yu()},Jv=Er.Event=vi,Mh=Er.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vu.NO_ERROR=0,vu.TIMEOUT=8,vu.HTTP_ERROR=6,zc=Er.ErrorCode=vu,DE.COMPLETE="complete",Yv=Er.EventType=DE,wE.EventType=ea,ea.OPEN="a",ea.CLOSE="b",ea.ERROR="c",ea.MESSAGE="d",It.prototype.listen=It.prototype.K,Ts=Er.WebChannel=wE,kU=Er.FetchXmlHttpFactory=ca,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,Qv=Er.XhrIo=Fe}).apply(typeof Ph<"u"?Ph:typeof self<"u"?self:typeof window<"u"?window:{});var ZA="@firebase/firestore",XA="4.8.0";var ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");var Hs="11.10.0";var lo=new Bn("@firebase/firestore");function bs(){return lo.logLevel}function L(t,...e){if(lo.logLevel<=ce.DEBUG){let n=e.map(BI);lo.debug(`Firestore (${Hs}): ${t}`,...n)}}function wr(t,...e){if(lo.logLevel<=ce.ERROR){let n=e.map(BI);lo.error(`Firestore (${Hs}): ${t}`,...n)}}function pi(t,...e){if(lo.logLevel<=ce.WARN){let n=e.map(BI);lo.warn(`Firestore (${Hs}): ${t}`,...n)}}function BI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function W(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,U0(t,r,n)}function U0(t,e,n){let r=`FIRESTORE (${Hs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw wr(r),new Error(r)}function we(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||U0(e,i,r)}function ee(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends Xt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Bh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},i_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}},o_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},s_=class{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>I(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string",31837,{l:r}),new Bh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new ht(e)}},a_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},c_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new a_(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}},$h=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},u_=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,en(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){we(this.o===void 0,3512);let r=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,L("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $h(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $h(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function NU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function B0(){return new TextEncoder}var Jc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=NU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function se(t,e){return t<e?-1:t>e?1:0}function l_(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return se(r,i);{let o=B0(),s=xU(o.encode(e0(t,n)),o.encode(e0(e,n)));return s!==0?s:se(r,i)}}n+=r>65535?2:1}return se(t.length,e.length)}function e0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function xU(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return se(t[n],e[n]);return se(t.length,e.length)}function Ns(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var t0="__name__",Hh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&W(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&W(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return se(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):l_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ir.fromString(e.substring(4,e.length-2))}},$e=class t extends Hh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},PU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nn=class t extends Hh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return PU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===t0}static keyField(){return new t([t0])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new j(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new j(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new j(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new j(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var G=class t{constructor(e){this.path=e}static fromPath(e){return new t($e.fromString(e))}static fromName(e){return new t($e.fromString(e).popFirst(5))}static empty(){return new t($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new $e(e.slice()))}};function MU(t,e,n){if(!n)throw new j(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function OU(t,e,n,r){if(e===!0&&r===!0)throw new j(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function n0(t){if(!G.isDocumentKey(t))throw new j(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function $I(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W(12329,{type:typeof t})}function Zc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=$I(t);throw new j(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function We(t,e){let n={typeString:t};return e&&(n.value=e),n}function du(t,e){if(!$0(t))throw new j(x.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new j(x.INVALID_ARGUMENT,n);return!0}var r0=-62135596800,i0=1e6,Ge=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*i0);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<r0)throw new j(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i0}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-r0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ge._jsonSchemaVersion="firestore/timestamp/1.0",Ge._jsonSchema={type:We("string",Ge._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};var re=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Ge(0,0))}static max(){return new t(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Xc=-1,d_=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};d_.UNKNOWN_ID=-1;function LU(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new ho(i,G.empty(),e)}function FU(t){return new ho(t.readTime,t.key,Xc)}var ho=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(re.min(),G.empty(),Xc)}static max(){return new t(re.max(),G.empty(),Xc)}};function VU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}var jU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",h_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zs(t){return I(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==jU)throw t;L("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function UU(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qs(t){return t.name==="IndexedDbTransactionError"}var HI=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),zI=-1;function _f(t){return t==null}function eu(t){return t===0&&1/t==-1/0}function BU(t){return typeof t=="number"&&Number.isInteger(t)&&!eu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var H0="";function $U(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=o0(e)),e=HU(t.get(n),e);return o0(e)}function HU(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case H0:n+="";break;default:n+=o}}return n}function o0(t){return t+H0+""}var zU="remoteDocuments",z0="owner";var q0="mutationQueues";var W0="mutations";var G0="documentMutations",qU="remoteDocumentsV14";var K0="remoteDocumentGlobal";var Q0="targets";var Y0="targetDocuments";var J0="targetGlobal",Z0="collectionParents";var X0="clientMetadata";var eR="bundles";var tR="namedQueries";var WU="indexConfiguration";var GU="indexState";var KU="indexEntries";var nR="documentOverlays";var QU="globals";var YU=[q0,W0,G0,zU,Q0,z0,J0,Y0,X0,K0,Z0,eR,tR],xte=[...YU,nR],JU=[q0,W0,G0,qU,Q0,z0,J0,Y0,X0,K0,Z0,eR,tR,nR],ZU=JU,XU=[...ZU,WU,GU,KU];var Pte=[...XU,QU];function s0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ue=class t{constructor(e,n){this.comparator=e,this.root=n||Gn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new As(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new As(this.root,e,this.comparator,!1)}getReverseIterator(){return new As(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new As(this.root,e,this.comparator,!0)}},As=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw W(27949);return e+(this.isRed()?0:1)}};Gn.EMPTY=null,Gn.RED=!0,Gn.BLACK=!1;Gn.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ft=class t{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zh(this.data.getIterator())}getIteratorFrom(e){return new zh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},zh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var qn=class t{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new t([])}unionWith(e){let n=new ft(nn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ns(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var qh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Dt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new qh("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Dt.EMPTY_BYTE_STRING=new Dt("");var eB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(t){if(we(!!t,39018),typeof t=="string"){let e=0,n=eB.exec(t);if(we(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function br(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}var iR="server_timestamp",oR="__type__",sR="__previous_value__",aR="__local_write_time__";function qI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[oR])===null||n===void 0?void 0:n.stringValue)===iR}function If(t){let e=t.mapValue.fields[sR];return qI(e)?If(e):e}function tu(t){let e=Tr(t.mapValue.fields[aR].timestampValue);return new Ge(e.seconds,e.nanos)}var f_=class{constructor(e,n,r,i,o,s,c,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Wh="(default)",Gh=class t{constructor(e,n){this.projectId=e,this.database=n||Wh}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Wh}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var WI="__type__",cR="__max__",Oh={mapValue:{fields:{__type__:{stringValue:cR}}}},GI="__vector__",xs="value";function gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qI(t)?4:lR(t)?9007199254740991:uR(t)?10:11:W(28295,{value:t})}function Yn(t,e){if(t===e)return!0;let n=gi(t);if(n!==gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tu(t).isEqual(tu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Tr(i.timestampValue),c=Tr(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return br(i.bytesValue).isEqual(br(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Le(i.geoPointValue.latitude)===Le(o.geoPointValue.latitude)&&Le(i.geoPointValue.longitude)===Le(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Le(i.integerValue)===Le(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Le(i.doubleValue),c=Le(o.doubleValue);return s===c?eu(s)===eu(c):isNaN(s)&&isNaN(c)}return!1}(t,e);case 9:return Ns(t.arrayValue.values||[],e.arrayValue.values||[],Yn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(s0(s)!==s0(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!Yn(s[u],c[u])))return!1;return!0}(t,e);default:return W(52216,{left:t})}}function nu(t,e){return(t.values||[]).find(n=>Yn(n,e))!==void 0}function Ps(t,e){if(t===e)return 0;let n=gi(t),r=gi(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(o,s){let c=Le(o.integerValue||o.doubleValue),u=Le(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return a0(t.timestampValue,e.timestampValue);case 4:return a0(tu(t),tu(e));case 5:return l_(t.stringValue,e.stringValue);case 6:return function(o,s){let c=br(o),u=br(s);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=se(c[l],u[l]);if(h!==0)return h}return se(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let c=se(Le(o.latitude),Le(s.latitude));return c!==0?c:se(Le(o.longitude),Le(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return c0(t.arrayValue,e.arrayValue);case 10:return function(o,s){var c,u,l,h;let p=o.fields||{},m=s.fields||{},y=(c=p[xs])===null||c===void 0?void 0:c.arrayValue,D=(u=m[xs])===null||u===void 0?void 0:u.arrayValue,N=se(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:c0(y,D)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Oh.mapValue&&s===Oh.mapValue)return 0;if(o===Oh.mapValue)return 1;if(s===Oh.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=l_(u[p],h[p]);if(m!==0)return m;let y=Ps(c[u[p]],l[h[p]]);if(y!==0)return y}return se(u.length,h.length)}(t.mapValue,e.mapValue);default:throw W(23264,{le:n})}}function a0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);let n=Tr(t),r=Tr(e),i=se(n.seconds,r.seconds);return i!==0?i:se(n.nanos,r.nanos)}function c0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ps(n[i],r[i]);if(o)return o}return se(n.length,r.length)}function Ms(t){return p_(t)}function p_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Tr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return br(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=p_(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${p_(n.fields[s])}`;return i+"}"}(t.mapValue):W(61005,{value:t})}function Vh(t){switch(gi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=If(t);return e?16+Vh(e):16;case 5:return 2*t.stringValue.length;case 6:return br(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Vh(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return yo(r.fields,(o,s)=>{i+=o.length+Vh(s)}),i}(t.mapValue);default:throw W(13486,{value:t})}}function g_(t){return!!t&&"integerValue"in t}function KI(t){return!!t&&"arrayValue"in t}function u0(t){return!!t&&"nullValue"in t}function l0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jh(t){return!!t&&"mapValue"in t}function uR(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[WI])===null||n===void 0?void 0:n.stringValue)===GI}function Wc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return yo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Wc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function lR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cR}var Ote={mapValue:{fields:{[WI]:{stringValue:GI},[xs]:{arrayValue:{}}}}};var Cn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wc(n)}setAll(e){let n=nn.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=Wc(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());jh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Yn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];jh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){yo(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Wc(this.value))}};function dR(t){let e=[];return yo(t.fields,(n,r)=>{let i=new nn([n]);if(jh(r)){let o=dR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new qn(e)}var Dn=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,re.min(),re.min(),re.min(),Cn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,re.min(),re.min(),Cn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,re.min(),re.min(),Cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Os=class{constructor(e,n){this.position=e,this.inclusive=n}};function d0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),n.key):r=Ps(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function h0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Yn(t.position[n],e.position[n]))return!1;return!0}var Ls=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function tB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Kh=class{},et=class t extends Kh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new y_(e,n,r):n==="array-contains"?new I_(e,r):n==="in"?new E_(e,r):n==="not-in"?new w_(e,r):n==="array-contains-any"?new T_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new v_(e,r):new __(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ps(n,this.value)):n!==null&&gi(this.value)===gi(n)&&this.matchesComparison(Ps(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Jn=class t extends Kh{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return hR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function hR(t){return t.op==="and"}function fR(t){return nB(t)&&hR(t)}function nB(t){for(let e of t.filters)if(e instanceof Jn)return!1;return!0}function m_(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+Ms(t.value);if(fR(t))return t.filters.map(e=>m_(e)).join(",");{let e=t.filters.map(n=>m_(n)).join(",");return`${t.op}(${e})`}}function pR(t,e){return t instanceof et?function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&Yn(r.value,i.value)}(t,e):t instanceof Jn?function(r,i){return i instanceof Jn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&pR(s,i.filters[c]),!0):!1}(t,e):void W(19439)}function gR(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${Ms(n.value)}`}(t):t instanceof Jn?function(n){return n.op.toString()+" {"+n.getFilters().map(gR).join(" ,")+"}"}(t):"Filter"}var y_=class extends et{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){let n=G.comparator(e.key,this.key);return this.matchesComparison(n)}},v_=class extends et{constructor(e,n){super(e,"in",n),this.keys=mR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},__=class extends et{constructor(e,n){super(e,"not-in",n),this.keys=mR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function mR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}var I_=class extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return KI(n)&&nu(n.arrayValue,this.value)}},E_=class extends et{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&nu(this.value.arrayValue,n)}},w_=class extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nu(this.value.arrayValue,n)}},T_=class extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!KI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nu(this.value.arrayValue,r))}};var b_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Pe=null}};function f0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new b_(t,e,n,r,i,o,s)}function QI(t){let e=ee(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>m_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),_f(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ms(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ms(r)).join(",")),e.Pe=n}return e.Pe}function YI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!h0(t.startAt,e.startAt)&&h0(t.endAt,e.endAt)}function S_(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Fs=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function rB(t,e,n,r,i,o,s,c){return new Fs(t,e,n,r,i,o,s,c)}function JI(t){return new Fs(t)}function p0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iB(t){return t.collectionGroup!==null}function Gc(t){let e=ee(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new ft(nn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Ls(o,r))}),n.has(nn.keyField().canonicalString())||e.Te.push(new Ls(nn.keyField(),r))}return e.Te}function Kn(t){let e=ee(t);return e.Ie||(e.Ie=oB(e,Gc(t))),e.Ie}function oB(t,e){if(t.limitType==="F")return f0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ls(i.field,o)});let n=t.endAt?new Os(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Os(t.startAt.position,t.startAt.inclusive):null;return f0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function C_(t,e,n){return new Fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ef(t,e){return YI(Kn(t),Kn(e))&&t.limitType===e.limitType}function yR(t){return`${QI(Kn(t))}|lt:${t.limitType}`}function Ss(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>gR(i)).join(", ")}]`),_f(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ms(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ms(i)).join(",")),`Target(${r})`}(Kn(t))}; limitType=${t.limitType})`}function wf(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Gc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,c,u){let l=d0(s,c,u);return s.inclusive?l<=0:l<0}(r.startAt,Gc(r),i)||r.endAt&&!function(s,c,u){let l=d0(s,c,u);return s.inclusive?l>=0:l>0}(r.endAt,Gc(r),i))}(t,e)}function sB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vR(t){return(e,n)=>{let r=!1;for(let i of Gc(t)){let o=aB(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function aB(t,e,n){let r=t.field.isKeyField()?G.comparator(e.key,n.key):function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?Ps(u,l):W(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return W(19790,{direction:t.dir})}}var Sr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return rR(this.inner)}size(){return this.innerSize}};var cB=new Ue(G.comparator);function Cr(){return cB}var _R=new Ue(G.comparator);function qc(...t){let e=_R;for(let n of t)e=e.insert(n.key,n);return e}function IR(t){let e=_R;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function oo(){return Kc()}function ER(){return Kc()}function Kc(){return new Sr(t=>t.toString(),(t,e)=>t.isEqual(e))}var uB=new Ue(G.comparator),lB=new ft(G.comparator);function le(...t){let e=lB;for(let n of t)e=e.add(n);return e}var dB=new ft(se);function hB(){return dB}function ZI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eu(e)?"-0":e}}function wR(t){return{integerValue:""+t}}function fB(t,e){return BU(e)?wR(e):ZI(t,e)}var Vs=class{constructor(){this._=void 0}};function pB(t,e,n){return t instanceof js?function(i,o){let s={fields:{[oR]:{stringValue:iR},[aR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&qI(o)&&(o=If(o)),o&&(s.fields[sR]=o),{mapValue:s}}(n,e):t instanceof fo?bR(t,e):t instanceof po?SR(t,e):function(i,o){let s=TR(i,o),c=g0(s)+g0(i.Ee);return g_(s)&&g_(i.Ee)?wR(c):ZI(i.serializer,c)}(t,e)}function gB(t,e,n){return t instanceof fo?bR(t,e):t instanceof po?SR(t,e):n}function TR(t,e){return t instanceof Us?function(r){return g_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var js=class extends Vs{},fo=class extends Vs{constructor(e){super(),this.elements=e}};function bR(t,e){let n=CR(e);for(let r of t.elements)n.some(i=>Yn(i,r))||n.push(r);return{arrayValue:{values:n}}}var po=class extends Vs{constructor(e){super(),this.elements=e}};function SR(t,e){let n=CR(e);for(let r of t.elements)n=n.filter(i=>!Yn(i,r));return{arrayValue:{values:n}}}var Us=class extends Vs{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function g0(t){return Le(t.integerValue||t.doubleValue)}function CR(t){return KI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function mB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof fo&&i instanceof fo||r instanceof po&&i instanceof po?Ns(r.elements,i.elements,Yn):r instanceof Us&&i instanceof Us?Yn(r.Ee,i.Ee):r instanceof js&&i instanceof js}(t.transform,e.transform)}var D_=class{constructor(e,n){this.version=e,this.transformResults=n}},co=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Uh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Bs=class{};function DR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qh(t.key,co.none()):new go(t.key,t.data,co.none());{let n=t.data,r=Cn.empty(),i=new ft(nn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Dr(t.key,r,new qn(i.toArray()),co.none())}}function yB(t,e,n){t instanceof go?function(i,o,s){let c=i.value.clone(),u=y0(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Dr?function(i,o,s){if(!Uh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=y0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(AR(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Qc(t,e,n,r){return t instanceof go?function(o,s,c,u){if(!Uh(o.precondition,s))return c;let l=o.value.clone(),h=v0(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Dr?function(o,s,c,u){if(!Uh(o.precondition,s))return c;let l=v0(o.fieldTransforms,u,s),h=s.data;return h.setAll(AR(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,c){return Uh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(t,e,n)}function vB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=TR(r.transform,i||null);o!=null&&(n===null&&(n=Cn.empty()),n.set(r.field,o))}return n||null}function m0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ns(r,i,(o,s)=>mB(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var go=class extends Bs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Dr=class extends Bs{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function AR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function y0(t,e,n){let r=new Map;we(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,gB(s,c,n[i]))}return r}function v0(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,pB(o,s,e))}return r}var Qh=class extends Bs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},A_=class extends Bs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var R_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&yB(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Qc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=ER();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=DR(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Ns(this.mutations,e.mutations,(n,r)=>m0(n,r))&&Ns(this.baseMutations,e.baseMutations,(n,r)=>m0(n,r))}},k_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return uB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var N_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var x_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ze,ge;function _B(t){switch(t){case x.OK:return W(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return W(15467,{code:t})}}function RR(t){if(t===void 0)return wr("GRPC error has no .code"),x.UNKNOWN;switch(t){case ze.OK:return x.OK;case ze.CANCELLED:return x.CANCELLED;case ze.UNKNOWN:return x.UNKNOWN;case ze.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case ze.INTERNAL:return x.INTERNAL;case ze.UNAVAILABLE:return x.UNAVAILABLE;case ze.UNAUTHENTICATED:return x.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case ze.NOT_FOUND:return x.NOT_FOUND;case ze.ALREADY_EXISTS:return x.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return x.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case ze.ABORTED:return x.ABORTED;case ze.OUT_OF_RANGE:return x.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return x.UNIMPLEMENTED;case ze.DATA_LOSS:return x.DATA_LOSS;default:return W(39323,{code:t})}}(ge=ze||(ze={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var _0=null;var IB=new Ir([4294967295,4294967295],0);function I0(t){let e=B0().encode(t),n=new Kv;return n.update(e),new Uint8Array(n.digest())}function E0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ir([n,r],0),new Ir([i,o],0)]}var P_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new so(`Invalid padding: ${n}`);if(r<0)throw new so(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new so(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new so(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ir.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Ir.fromNumber(r)));return i.compare(IB)===1&&(i=new Ir([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=I0(e),[r,i]=E0(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.fe===0)return;let n=I0(e),[r,i]=E0(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},so=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Yh=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ru.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(re.min(),i,new Ue(se),Cr(),le())}},ru=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,le(),le(),le())}};var Rs=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},Jh=class{constructor(e,n){this.targetId=e,this.De=n}},Zh=class{constructor(e,n,r=Dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Xh=class{constructor(){this.ve=0,this.Ce=w0(),this.Fe=Dt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=le(),n=le(),r=le();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:W(38017,{changeType:o})}}),new ru(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=w0()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},M_=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Cr(),this.je=Lh(),this.Je=Lh(),this.He=new Ue(se)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:W(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(S_(o))if(r===0){let s=new G(o.path);this.Xe(n,s,Dn.newNoDocument(s,re.min()))}else we(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let c=this._t(e),u=c?this.ut(c,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}_0?.ct(function(h,p,m,y,D){var N,k,O,B,J,De;let At={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Te=p.unchangedNames;return Te&&(At.bloomFilter={applied:D===0,hashCount:(N=Te?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(B=(O=(k=Te?.bits)===null||k===void 0?void 0:k.bitmap)===null||O===void 0?void 0:O.length)!==null&&B!==void 0?B:0,padding:(De=(J=Te?.bits)===null||J===void 0?void 0:J.padding)!==null&&De!==void 0?De:0,mightContain:T=>{var v;return(v=y?.mightContain(T))!==null&&v!==void 0&&v}}),At}(s,e.De,this.We.lt(),c,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=br(r).toUint8Array()}catch(u){if(u instanceof qh)return pi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new P_(s,i,o)}catch(u){return pi(u instanceof so?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let c=this.st(s);if(c){if(o.current&&S_(c.target)){let u=new G(c.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Dn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=le();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Yh(e,n,this.He,this.ze,r);return this.ze=Cr(),this.je=Lh(),this.Je=Lh(),this.He=new Ue(se),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Xh,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new ft(se),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new ft(se),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Xh),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Lh(){return new Ue(G.comparator)}function w0(){return new Ue(G.comparator)}var EB={asc:"ASCENDING",desc:"DESCENDING"},wB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TB={and:"AND",or:"OR"},O_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function L_(t,e){return t.useProto3Json||_f(e)?e:{value:e}}function ef(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bB(t,e){return ef(t,e.toTimestamp())}function Qn(t){return we(!!t,49232),re.fromTimestamp(function(n){let r=Tr(n);return new Ge(r.seconds,r.nanos)}(t))}function XI(t,e){return F_(t,e).canonicalString()}function F_(t,e){let n=function(i){return new $e(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function NR(t){let e=$e.fromString(t);return we(LR(e),10190,{key:e.toString()}),e}function V_(t,e){return XI(t.databaseId,e.path)}function e_(t,e){let n=NR(e);if(n.get(1)!==t.databaseId.projectId)throw new j(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(PR(n))}function xR(t,e){return XI(t.databaseId,e)}function SB(t){let e=NR(t);return e.length===4?$e.emptyPath():PR(e)}function j_(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PR(t){return we(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function T0(t,e,n){return{name:V_(t,e),fields:n.value.mapValue.fields}}function CB(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:W(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(we(h===void 0||typeof h=="string",58123),Dt.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(l){let h=l.code===void 0?x.UNKNOWN:RR(l.code);return new j(h,l.message||"")}(s);n=new Zh(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=e_(t,r.document.name),o=Qn(r.document.updateTime),s=r.document.createTime?Qn(r.document.createTime):re.min(),c=new Cn({mapValue:{fields:r.document.fields}}),u=Dn.newFoundDocument(i,o,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Rs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=e_(t,r.document),o=r.readTime?Qn(r.readTime):re.min(),s=Dn.newNoDocument(i,o),c=r.removedTargetIds||[];n=new Rs([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=e_(t,r.document),o=r.removedTargetIds||[];n=new Rs([],o,i,null)}else{if(!("filter"in e))return W(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new x_(i,o),c=r.targetId;n=new Jh(c,s)}}return n}function DB(t,e){let n;if(e instanceof go)n={update:T0(t,e.key,e.value)};else if(e instanceof Qh)n={delete:V_(t,e.key)};else if(e instanceof Dr)n={update:T0(t,e.key,e.data),updateMask:LB(e.fieldMask)};else{if(!(e instanceof A_))return W(16599,{Rt:e.type});n={verify:V_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof js)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof fo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof po)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Us)return{fieldPath:s.field.canonicalString(),increment:c.Ee};throw W(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:bB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:W(27497)}(t,e.precondition)),n}function AB(t,e){return t&&t.length>0?(we(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?Qn(i.updateTime):Qn(o);return s.isEqual(re.min())&&(s=Qn(o)),new D_(s,i.transformResults||[])}(n,e))):[]}function RB(t,e){return{documents:[xR(t,e.path)]}}function kB(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xR(t,i);let o=function(l){if(l.length!==0)return OR(Jn.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Cs(m.field),direction:PB(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=L_(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:n,parent:i}}function NB(t){let e=SB(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){we(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let m=MR(p);return m instanceof Jn&&fR(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(D){return new Ls(Ds(D.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,_f(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new Os(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Os(y,m)}(n.endAt)),rB(e,i,s,o,c,"F",u,l)}function xB(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ds(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ds(n.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ds(n.unaryFilter.field);return et.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ds(n.unaryFilter.field);return et.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}}(t):t.fieldFilter!==void 0?function(n){return et.create(Ds(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jn.create(n.compositeFilter.filters.map(r=>MR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W(1026)}}(n.compositeFilter.op))}(t):W(30097,{filter:t})}function PB(t){return EB[t]}function MB(t){return wB[t]}function OB(t){return TB[t]}function Cs(t){return{fieldPath:t.canonicalString()}}function Ds(t){return nn.fromServerFormat(t.fieldPath)}function OR(t){return t instanceof et?function(n){if(n.op==="=="){if(l0(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NAN"}};if(u0(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(l0(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NAN"}};if(u0(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cs(n.field),op:MB(n.op),value:n.value}}}(t):t instanceof Jn?function(n){let r=n.getFilters().map(i=>OR(i));return r.length===1?r[0]:{compositeFilter:{op:OB(n.op),filters:r}}}(t):W(54877,{filter:t})}function LB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var iu=class t{constructor(e,n,r,i,o=re.min(),s=re.min(),c=Dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var U_=class{constructor(e){this.gt=e}};function FB(t){let e=NB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?C_(e,e.limit,"L"):e}var tf=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Le(e.integerValue));else if("doubleValue"in e){let r=Le(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),eu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Tr(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(br(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?lR(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):uR(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):W(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=xs,c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Le(c)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),G.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};tf.Ut=new tf;var B_=class{constructor(){this.Dn=new $_}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(ho.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(ho.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},$_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ft($e.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ft($e.comparator)).toArray()}};var Lte=new Uint8Array(0);var b0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FR=41943040,ln=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(FR,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);var ou=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var S0="LruGarbageCollector",VB=1048576;function C0([t,e],[n,r]){let i=se(t,n);return i===0?se(e,r):i}var H_=class{constructor(e){this.Tr=e,this.buffer=new ft(C0),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();C0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},z_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){L(S0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>I(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){qs(n)?L(S0,"Ignoring IndexedDB error during garbage collection: ",n):yield zs(n)}yield this.Rr(3e5)}))}},q_=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(HI.ue);let r=new H_(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(b0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b0):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),bs()<=ce.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function jB(t,e){return new q_(t,e)}var W_=class{constructor(){this.changes=new Sr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var G_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var K_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Qc(r.mutation,i,qn.empty(),Ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){let i=oo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=qc();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=oo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=Cr(),s=Kc(),c=function(){return Kc()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Dr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Qc(h.mutation,l,h.mutation.getFieldMask(),Ge.now())):s.set(l.key,qn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return c.set(l,new G_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=Kc(),i=new Ue((s,c)=>s-c),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||qn.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||le()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=ER();h.forEach(m=>{if(!o.has(m)){let y=DR(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):iB(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(oo()),c=Xc,u=o;return s.next(l=>P.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,le())).next(h=>({batchId:c,changes:IR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=qc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=qc();return this.indexManager.getCollectionParents(e,o).next(c=>P.forEach(c,u=>{let l=function(p,m){return new Fs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Dn.newInvalidDocument(h)))});let c=qc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Qc(h.mutation,l,qn.empty(),Ge.now()),wf(n,l)&&(c=c.insert(u,l))}),c})}};var Q_=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Qn(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:FB(i.bundledQuery),readTime:Qn(i.readTime)}}(n)),P.resolve()}};var Y_=class{constructor(){this.overlays=new Ue(G.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=oo();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=oo(),o=n.length+1,s=new G(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ue((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=oo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=oo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return P.resolve(c)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new N_(n,r));let o=this.kr.get(n);o===void 0&&(o=le(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var J_=class{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var su=class{constructor(){this.qr=new ft(qe.Qr),this.$r=new ft(qe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new qe(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new qe(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new G(new $e([])),r=new qe(n,e),i=new qe(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new G(new $e([])),r=new qe(n,e),i=new qe(n,e+1),o=le();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new qe(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},qe=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return G.comparator(e.key,n.key)||se(e.Hr,n.Hr)}static Ur(e,n){return se(e.Hr,n.Hr)||G.comparator(e.key,n.key)}};var Z_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new ft(qe.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new R_(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Yr=this.Yr.add(new qe(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?zI:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(se);return n.forEach(i=>{let o=new qe(i,0),s=new qe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new qe(new G(o),0),c=new ft(se);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Hr)),!0)},s),P.resolve(this.ei(c))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{let o=new qe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new qe(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var X_=class{constructor(e){this.ni=e,this.docs=function(){return new Ue(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Dn.newInvalidDocument(n))}getEntries(e,n){let r=Cr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Dn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Cr(),s=n.path,c=new G(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||VU(FU(h),r)<=0||(i.has(h.key)||wf(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){W(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new eI(this)}getSize(e){return P.resolve(this.size)}},eI=class extends W_{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var tI=class{constructor(e){this.persistence=e,this.ii=new Sr(n=>QI(n),YI),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.si=0,this.oi=new su,this.targetCount=0,this._i=ou.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new ou(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}};var nf=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new HI(0),this.ci=!1,this.ci=!0,this.li=new J_,this.referenceDelegate=e(this),this.hi=new tI(this),this.indexManager=new B_,this.remoteDocumentCache=function(i){return new X_(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new U_(n),this.Ti=new Q_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Y_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Z_(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){L("MemoryPersistence","Starting transaction:",e);let i=new nI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},nI=class extends h_{constructor(e){super(),this.currentSequenceNumber=e}},rI=class t{constructor(e){this.persistence=e,this.Ai=new su,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw W(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=G.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,re.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},rf=class t{constructor(e,n){this.persistence=e,this.gi=new Sr(r=>$U(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=jB(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(c=>{c||(r++,o.removeEntry(s,re.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vh(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var iI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=le(),i=le();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var oI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var sI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return SD()?8:UU(dt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new oI;return this.ws(e,n,s).next(c=>{if(o.result=c,this.Rs)return this.Ss(e,n,s,c.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(bs()<=ce.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",Ss(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(bs()<=ce.DEBUG&&L("QueryEngine","Query:",Ss(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(bs()<=ce.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",Ss(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(n))):P.resolve())}ps(e,n){if(p0(n))return P.resolve(null);let r=Kn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=C_(n,null,"F"),r=Kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=le(...o);return this.gs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,c);return this.Ds(n,l,s,u.readTime)?this.ps(e,C_(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return p0(n)||i.isEqual(re.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(bs()<=ce.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ss(n)),this.vs(e,s,n,LU(i,Xc)).next(c=>c))})}bs(e,n){let r=new ft(vR(e));return n.forEach((i,o)=>{wf(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return bs()<=ce.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",Ss(n)),this.gs.getDocumentsMatchingQuery(e,n,ho.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var eE="LocalStore",UB=3e8,aI=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Ue(se),this.Ms=new Sr(o=>QI(o),YI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new K_(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function BB(t,e,n,r){return new aI(t,e,n,r)}function VR(t,e){return I(this,null,function*(){let n=ee(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=le();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:c}))})})})}function $B(t,e){let n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(c,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(N=>{let k=l.docVersions.get(D);we(k!==null,48541),N.version.compareTo(k)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=le();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function jR(t){let e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function HB(t,e){let n=ee(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let c=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;c.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Dt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,k,O){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=UB?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(m,y,h)&&c.push(n.hi.updateTargetData(o,y))});let u=Cr(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(zB(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(re.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return P.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function zB(t,e,n){let r=le(),i=le();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Cr();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):L(eE,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function qB(t,e){let n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=zI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function WB(t,e){let n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new iu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function cI(t,e,n){return I(this,null,function*(){let r=ee(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!qs(s))throw s;L(eE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function D0(t,e,n){let r=ee(t),i=re.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=ee(u),m=p.Ms.get(h);return m!==void 0?P.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)}(r,s,Kn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:re.min(),n?o:le())).next(c=>(GB(r,sB(e),c),{documents:c,qs:o})))}function GB(t,e,n){let r=t.xs.get(e)||re.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var of=class{constructor(){this.activeTargetIds=hB()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var uI=class{constructor(){this.Fo=new of,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new of,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var lI=class{xo(e){}shutdown(){}};var A0="ConnectivityMonitor",sf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){L(A0,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){L(A0,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Fh=null;function dI(){return Fh===null?Fh=function(){return 268435456+Math.round(2147483648*Math.random())}():Fh++,"0x"+Fh.toString(16)}var t_="RestConnection",KB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},hI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Wh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=dI(),c=this.Go(e,n.toUriEncodedString());L(t_,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(c),h=ri(l);return this.jo(e,c,u,r,h).then(p=>(L(t_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw pi(t_,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=KB[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var fI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Ct="WebChannelConnection",pI=class extends hI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=dI();return new Promise((c,u)=>{let l=new Qv;l.setWithCredentials(!0),l.listenOnce(Yv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case zc.NO_ERROR:let p=l.getResponseJson();L(Ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case zc.TIMEOUT:L(Ct,`RPC '${e}' ${s} timed out`),u(new j(x.DEADLINE_EXCEEDED,"Request time out"));break;case zc.HTTP_ERROR:let m=l.getStatus();if(L(Ct,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let D=y?.error;if(D&&D.status&&D.message){let N=function(O){let B=O.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(B)>=0?B:x.UNKNOWN}(D.status);u(new j(N,D.message))}else u(new j(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new j(x.UNAVAILABLE,"Connection failed."));break;default:W(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{L(Ct,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);L(Ct,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=dI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Xv(),c=Zv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");L(Ct,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,D=new fI({Ho:k=>{y?L(Ct,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(m||(L(Ct,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),L(Ct,`RPC '${e}' stream ${i} sending:`,k),p.send(k))},Yo:()=>p.close()}),N=(k,O,B)=>{k.listen(O,J=>{try{B(J)}catch(De){setTimeout(()=>{throw De},0)}})};return N(p,Ts.EventType.OPEN,()=>{y||(L(Ct,`RPC '${e}' stream ${i} transport opened.`),D.s_())}),N(p,Ts.EventType.CLOSE,()=>{y||(y=!0,L(Ct,`RPC '${e}' stream ${i} transport closed`),D.__(),this.I_(p))}),N(p,Ts.EventType.ERROR,k=>{y||(y=!0,pi(Ct,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),D.__(new j(x.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ts.EventType.MESSAGE,k=>{var O;if(!y){let B=k.data[0];we(!!B,16349);let J=B,De=J?.error||((O=J[0])===null||O===void 0?void 0:O.error);if(De){L(Ct,`RPC '${e}' stream ${i} received error:`,De);let At=De.status,Te=function(E){let w=ze[E];if(w!==void 0)return RR(w)}(At),T=De.message;Te===void 0&&(Te=x.INTERNAL,T="Unknown error status: "+At+" with message "+De.message),y=!0,D.__(new j(Te,T)),p.close()}else L(Ct,`RPC '${e}' stream ${i} received:`,B),D.a_(B)}}),N(c,Jv.STAT_EVENT,k=>{k.stat===Mh.PROXY?L(Ct,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Mh.NOPROXY&&L(Ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.o_()},0),D}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function n_(){return typeof document<"u"?document:null}function Tf(t){return new O_(t,!0)}var af=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var R0="PersistentStream",cf=class{constructor(e,n,r,i,o,s,c,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new af(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return I(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return I(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return I(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new j(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>I(this,null,function*(){this.state=0,this.start()}))}G_(e){return L(R0,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(L(R0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},gI=class extends cf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=CB(this.serializer,e),r=function(o){if(!("targetChange"in o))return re.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?re.min():s.readTime?Qn(s.readTime):re.min()}(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=j_(this.serializer),n.addTarget=function(o,s){let c,u=s.target;if(c=S_(u)?{documents:RB(o,u)}:{query:kB(o,u).Vt},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=kR(o,s.resumeToken);let l=L_(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(re.min())>0){c.readTime=ef(o,s.snapshotVersion.toTimestamp());let l=L_(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=xB(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=j_(this.serializer),n.removeTarget=e,this.k_(n)}},mI=class extends cf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=AB(e.writeResults,e.commitTime),r=Qn(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=j_(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>DB(this.serializer,r))};this.k_(n)}};var yI=class{},vI=class extends yI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new j(x.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,F_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(x.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Jo(e,F_(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(x.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},_I=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(wr(n),this._a=!1):L("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var mo="RemoteStore",II=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>I(this,null,function*(){vo(this)&&(L(mo,"Restarting streams for network reachability change."),yield function(u){return I(this,null,function*(){let l=ee(u);l.Ia.add(4),yield hu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield bf(l)})}(this))}))}),this.Aa=new _I(r,i)}};function bf(t){return I(this,null,function*(){if(vo(t))for(let e of t.da)yield e(!0)})}function hu(t){return I(this,null,function*(){for(let e of t.da)yield e(!1)})}function UR(t,e){let n=ee(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),iE(n)?rE(n):Ws(n).x_()&&nE(n,e))}function tE(t,e){let n=ee(t),r=Ws(n);n.Ta.delete(e),r.x_()&&BR(n,e),n.Ta.size===0&&(r.x_()?r.B_():vo(n)&&n.Aa.set("Unknown"))}function nE(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ws(t).H_(e)}function BR(t,e){t.Ra.$e(e),Ws(t).Y_(e)}function rE(t){t.Ra=new M_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ws(t).start(),t.Aa.aa()}function iE(t){return vo(t)&&!Ws(t).M_()&&t.Ta.size>0}function vo(t){return ee(t).Ia.size===0}function $R(t){t.Ra=void 0}function QB(t){return I(this,null,function*(){t.Aa.set("Online")})}function YB(t){return I(this,null,function*(){t.Ta.forEach((e,n)=>{nE(t,e)})})}function JB(t,e){return I(this,null,function*(){$R(t),iE(t)?(t.Aa.la(e),rE(t)):t.Aa.set("Unknown")})}function ZB(t,e,n){return I(this,null,function*(){if(t.Aa.set("Online"),e instanceof Zh&&e.state===2&&e.cause)try{yield function(i,o){return I(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ta.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ta.delete(c),i.Ra.removeTarget(c))})}(t,e)}catch(r){L(mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield uf(t,r)}else if(e instanceof Rs?t.Ra.Ye(e):e instanceof Jh?t.Ra.it(e):t.Ra.et(e),!n.isEqual(re.min()))try{let r=yield jR(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let c=o.Ra.Pt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Dt.EMPTY_BYTE_STRING,h.snapshotVersion)),BR(o,u);let p=new iu(h.target,u,l,h.sequenceNumber);nE(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){L(mo,"Failed to raise snapshot:",r),yield uf(t,r)}})}function uf(t,e,n){return I(this,null,function*(){if(!qs(e))throw e;t.Ia.add(1),yield hu(t),t.Aa.set("Offline"),n||(n=()=>jR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>I(null,null,function*(){L(mo,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield bf(t)}))})}function HR(t,e){return e().catch(n=>uf(t,n,e))}function Sf(t){return I(this,null,function*(){let e=ee(t),n=mi(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:zI;for(;XB(e);)try{let i=yield qB(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,e$(e,i)}catch(i){yield uf(e,i)}zR(e)&&qR(e)})}function XB(t){return vo(t)&&t.Pa.length<10}function e$(t,e){t.Pa.push(e);let n=mi(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function zR(t){return vo(t)&&!mi(t).M_()&&t.Pa.length>0}function qR(t){mi(t).start()}function t$(t){return I(this,null,function*(){mi(t).na()})}function n$(t){return I(this,null,function*(){let e=mi(t);for(let n of t.Pa)e.X_(n.mutations)})}function r$(t,e,n){return I(this,null,function*(){let r=t.Pa.shift(),i=k_.from(r,e,n);yield HR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Sf(t)})}function i$(t,e){return I(this,null,function*(){e&&mi(t).Z_&&(yield function(r,i){return I(this,null,function*(){if(function(s){return _B(s)&&s!==x.ABORTED}(i.code)){let o=r.Pa.shift();mi(r).N_(),yield HR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Sf(r)}})}(t,e)),zR(t)&&qR(t)})}function k0(t,e){return I(this,null,function*(){let n=ee(t);n.asyncQueue.verifyOperationInProgress(),L(mo,"RemoteStore received new credentials");let r=vo(n);n.Ia.add(3),yield hu(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield bf(n)})}function o$(t,e){return I(this,null,function*(){let n=ee(t);e?(n.Ia.delete(2),yield bf(n)):e||(n.Ia.add(2),yield hu(n),n.Aa.set("Unknown"))})}function Ws(t){return t.Va||(t.Va=function(n,r,i){let o=ee(n);return o.ia(),new gI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:QB.bind(null,t),e_:YB.bind(null,t),n_:JB.bind(null,t),J_:ZB.bind(null,t)}),t.da.push(e=>I(null,null,function*(){e?(t.Va.N_(),iE(t)?rE(t):t.Aa.set("Unknown")):(yield t.Va.stop(),$R(t))}))),t.Va}function mi(t){return t.ma||(t.ma=function(n,r,i){let o=ee(n);return o.ia(),new mI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:t$.bind(null,t),n_:i$.bind(null,t),ea:n$.bind(null,t),ta:r$.bind(null,t)}),t.da.push(e=>I(null,null,function*(){e?(t.ma.N_(),yield Sf(t)):(yield t.ma.stop(),t.Pa.length>0&&(L(mo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var EI=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function oE(t,e){if(wr("AsyncQueue",`${e}: ${t}`),qs(t))return new j(x.UNAVAILABLE,`${e}: ${t}`);throw t}var lf=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=qc(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var df=class{constructor(){this.fa=new Ue(G.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):W(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},$s=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,lf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var wI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},TI=class{constructor(){this.queries=N0(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=ee(n),o=i.queries;i.queries=N0(),o.forEach((s,c)=>{for(let u of c.wa)u.onError(r)})})(this,new j(x.ABORTED,"Firestore shutting down"))}};function N0(){return new Sr(t=>yR(t),Ef)}function s$(t,e){return I(this,null,function*(){let n=ee(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new wI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let c=oE(s,`Initialization of query '${Ss(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&sE(n)})}function a$(t,e){return I(this,null,function*(){let n=ee(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function c$(t,e){let n=ee(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.wa)c.Ca(i)&&(r=!0);s.ya=i}}r&&sE(n)}function u$(t,e,n){let r=ee(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function sE(t){t.Da.forEach(e=>{e.next()})}var bI,x0;(x0=bI||(bI={})).Fa="default",x0.Cache="cache";var SI=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new $s(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=$s.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==bI.Cache}};var hf=class{constructor(e){this.key=e}},ff=class{constructor(e){this.key=e}},CI=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=le(),this.mutatedKeys=le(),this.Xa=vR(e),this.eu=new lf(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new df,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=wf(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),k=!1;m&&y?m.data.isEqual(y.data)?D!==N&&(r.track({type:3,doc:y}),k=!0):this.iu(m,y)||(r.track({type:2,doc:y}),k=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),k=!0):m&&!y&&(r.track({type:1,doc:m}),k=!0,(u||l)&&(c=!0)),k&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:c,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,D){let N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{At:k})}};return N(y)-N(D)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let c=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new $s(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new df,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=le(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new ff(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new hf(r))}),n}uu(e){this.Ha=e.qs,this.Za=le();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return $s.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},aE="SyncEngine",DI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},AI=class{constructor(e){this.key=e,this.lu=!1}},RI=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Sr(c=>yR(c),Ef),this.Tu=new Map,this.Iu=new Set,this.du=new Ue(G.comparator),this.Eu=new Map,this.Au=new su,this.Ru={},this.Vu=new Map,this.mu=ou.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function l$(t,e,n=!0){return I(this,null,function*(){let r=JR(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield WR(r,e,n,!0),i})}function d$(t,e){return I(this,null,function*(){let n=JR(t);yield WR(n,e,!0,!1)})}function WR(t,e,n,r){return I(this,null,function*(){let i=yield WB(t.localStore,Kn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=yield h$(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&UR(t.remoteStore,i),c})}function h$(t,e,n,r,i){return I(this,null,function*(){t.gu=(p,m,y)=>function(N,k,O,B){return I(this,null,function*(){let J=k.view.nu(O);J.Ds&&(J=yield D0(N.localStore,k.query,!1).then(({documents:T})=>k.view.nu(T,J)));let De=B&&B.targetChanges.get(k.targetId),At=B&&B.targetMismatches.get(k.targetId)!=null,Te=k.view.applyChanges(J,N.isPrimaryClient,De,At);return M0(N,k.targetId,Te._u),Te.snapshot})}(t,p,m,y);let o=yield D0(t.localStore,e,!0),s=new CI(e,o.qs),c=s.nu(o.documents),u=ru.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);M0(t,n,l._u);let h=new DI(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function f$(t,e,n){return I(this,null,function*(){let r=ee(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Ef(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield cI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tE(r.remoteStore,i.targetId),kI(r,i.targetId)}).catch(zs))):(kI(r,i.targetId),yield cI(r.localStore,i.targetId,!0))})}function p$(t,e){return I(this,null,function*(){let n=ee(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tE(n.remoteStore,r.targetId))})}function g$(t,e,n){return I(this,null,function*(){let r=w$(t);try{let i=yield function(s,c){let u=ee(s),l=Ge.now(),h=c.reduce((y,D)=>y.add(D.key),le()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=Cr(),N=le();return u.Os.getEntries(y,h).next(k=>{D=k,D.forEach((O,B)=>{B.isValidDocument()||(N=N.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(k=>{p=k;let O=[];for(let B of c){let J=vB(B,p.get(B.key).overlayedDocument);J!=null&&O.push(new Dr(B.key,J,dR(J.value.mapValue),co.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,c)}).next(k=>{m=k;let O=k.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,k.batchId,O)})}).then(()=>({batchId:m.batchId,changes:IR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ue(se)),l=l.insert(c,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,n),yield fu(r,i.changes),yield Sf(r.remoteStore)}catch(i){let o=oE(i,"Failed to persist write");n.reject(o)}})}function GR(t,e){return I(this,null,function*(){let n=ee(t);try{let r=yield HB(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?we(s.lu,14607):i.removedDocuments.size>0&&(we(s.lu,42227),s.lu=!1))}),yield fu(n,r,e)}catch(r){yield zs(r)}})}function P0(t,e,n){let r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let u=ee(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(c)&&(l=!0)}),l&&sE(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function m$(t,e,n){return I(this,null,function*(){let r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ue(G.comparator);s=s.insert(o,Dn.newNoDocument(o,re.min()));let c=le().add(o),u=new Yh(re.min(),new Map,new Ue(se),s,c);yield GR(r,u),r.du=r.du.remove(o),r.Eu.delete(e),cE(r)}else yield cI(r.localStore,e,!1).then(()=>kI(r,e,n)).catch(zs)})}function y$(t,e){return I(this,null,function*(){let n=ee(t),r=e.batch.batchId;try{let i=yield $B(n.localStore,e);QR(n,r,null),KR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield fu(n,i)}catch(i){yield zs(i)}})}function v$(t,e,n){return I(this,null,function*(){let r=ee(t);try{let i=yield function(s,c){let u=ee(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(we(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);QR(r,e,n),KR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield fu(r,i)}catch(i){yield zs(i)}})}function KR(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function QR(t,e,n){let r=ee(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function kI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||YR(t,r)})}function YR(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(tE(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),cE(t))}function M0(t,e,n){for(let r of n)r instanceof hf?(t.Au.addReference(r.key,e),_$(t,r)):r instanceof ff?(L(aE,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||YR(t,r.key)):W(19791,{yu:r})}function _$(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(L(aE,"New document in limbo: "+n),t.Iu.add(r),cE(t))}function cE(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new G($e.fromString(e)),r=t.mu.next();t.Eu.set(r,new AI(n)),t.du=t.du.insert(n,r),UR(t.remoteStore,new iu(Kn(JI(n.path)),r,"TargetPurposeLimboResolution",HI.ue))}}function fu(t,e,n){return I(this,null,function*(){let r=ee(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=iI.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(u,l){return I(this,null,function*(){let h=ee(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!qs(p))throw p;L(eE,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),D=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(D);h.Fs=h.Fs.insert(m,N)}}})}(r.localStore,o))})}function I$(t,e){return I(this,null,function*(){let n=ee(t);if(!n.currentUser.isEqual(e)){L(aE,"User change. New user:",e.toKey());let r=yield VR(n.localStore,e);n.currentUser=e,function(o,s){o.Vu.forEach(c=>{c.forEach(u=>{u.reject(new j(x.CANCELLED,s))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fu(n,r.Bs)}})}function E$(t,e){let n=ee(t),r=n.Eu.get(e);if(r&&r.lu)return le().add(r.key);{let i=le(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let c=n.Pu.get(s);i=i.unionWith(c.view.tu)}return i}}function JR(t){let e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m$.bind(null,e),e.hu.J_=c$.bind(null,e.eventManager),e.hu.pu=u$.bind(null,e.eventManager),e}function w$(t){let e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v$.bind(null,e),e}var ZR=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return I(this,null,function*(){this.serializer=Tf(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return BB(this.persistence,new sI,n.initialUser,this.serializer)}Du(n){return new nf(rI.Vi,this.serializer)}bu(n){return new uI}terminate(){return I(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),NI=class extends ZR{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){we(this.persistence.referenceDelegate instanceof rf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new z_(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new nf(r=>rf.Vi(r,n),this.serializer)}};var T$=(()=>{class t{initialize(n,r){return I(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>P0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=I$.bind(null,this.syncEngine),yield o$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new TI}()}createDatastore(n){let r=Tf(n.databaseInfo.databaseId),i=function(s){return new pI(s)}(n.databaseInfo);return function(s,c,u,l){return new vI(s,c,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,c,u){return new II(i,o,s,c,u)}(this.localStore,this.datastore,n.asyncQueue,r=>P0(this.syncEngine,r,0),function(){return sf.C()?new sf:new lI}())}createSyncEngine(n,r){return function(o,s,c,u,l,h,p){let m=new RI(o,s,c,u,l,h);return p&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return I(this,null,function*(){var n,r;yield function(o){return I(this,null,function*(){let s=ee(o);L(mo,"RemoteStore shutting down."),s.Ia.add(5),yield hu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var xI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var yi="FirestoreClient",PI=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ht.UNAUTHENTICATED,this.clientId=Jc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>I(this,null,function*(){L(yi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(L(yi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>I(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=oE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function r_(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),L(yi,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>I(null,null,function*(){r.isEqual(i)||(yield VR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{pi("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{L("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{pi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function O0(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield b$(t);L(yi,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>k0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>k0(e.remoteStore,i)),t._onlineComponents=e})}function b$(t){return I(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L(yi,"Using user provided OfflineComponentProvider");try{yield r_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;pi("Error using user provided cache. Falling back to memory cache: "+n),yield r_(t,new ZR)}}else L(yi,"Using default OfflineComponentProvider"),yield r_(t,new NI(void 0));return t._offlineComponents})}function XR(t){return I(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(L(yi,"Using user provided OnlineComponentProvider"),yield O0(t,t._uninitializedComponentsProvider._online)):(L(yi,"Using default OnlineComponentProvider"),yield O0(t,new T$))),t._onlineComponents})}function S$(t){return XR(t).then(e=>e.syncEngine)}function C$(t){return I(this,null,function*(){let e=yield XR(t),n=e.eventManager;return n.onListen=l$.bind(null,e.syncEngine),n.onUnlisten=f$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=d$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=p$.bind(null,e.syncEngine),n})}function D$(t,e,n={}){let r=new Wn;return t.asyncQueue.enqueueAndForget(()=>I(null,null,function*(){return function(o,s,c,u,l){let h=new xI({next:m=>{h.Ou(),s.enqueueAndForget(()=>a$(o,p));let y=m.docs.has(c);!y&&m.fromCache?l.reject(new j(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new j(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new SI(JI(c.path),h,{includeMetadataChanges:!0,ka:!0});return s$(o,p)}(yield C$(t),t.asyncQueue,e,n,r)})),r.promise}function ek(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var L0=new Map;var tk="firestore.googleapis.com",F0=!0,pf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tk,this.ssl=F0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:F0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VB)throw new j(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ek((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},au=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new i_;switch(r.type){case"firstParty":return new c_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return I(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=L0.get(n);r&&(L("ComponentProvider","Removing Datastore"),L0.delete(n),r.terminate())}(this),Promise.resolve()}};function nk(t,e,n,r={}){var i;t=Zc(t,au);let o=ri(e),s=t._getSettings(),c=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(sh(`https://${u}`),ah("Firestore",!0)),s.host!==tk&&s.host!==u&&pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Un(l,c)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ht.MOCK_USER;else{h=_D(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new j(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ht(m)}t._authCredentials=new o_(new Bh(h,p))}}var MI=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ft=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(du(n,t._jsonSchema))return new t(e,r||null,new G($e.fromString(n.referencePath)))}};Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:We("string",Ft._jsonSchemaVersion),referencePath:We("string")};var cu=class t extends MI{constructor(e,n,r){super(e,n,JI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new G(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function rk(t,e,...n){if(t=Ot(t),arguments.length===1&&(e=Jc.newId()),MU("doc","path",e),t instanceof au){let r=$e.fromString(e,...n);return n0(r),new Ft(t,null,new G(r))}{if(!(t instanceof Ft||t instanceof cu))throw new j(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child($e.fromString(e,...n));return n0(r),new Ft(t.firestore,t instanceof cu?t.converter:null,new G(r))}}var V0="AsyncQueue",gf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new af(this,"async_queue_retry"),this.oc=()=>{let r=n_();r&&L(V0,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=n_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=n_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new Wn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return I(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!qs(e))throw e;L(V0,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,wr("INTERNAL UNHANDLED ERROR: ",j0(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=EI.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&W(47125,{hc:j0(this.tc)})}verifyOperationInProgress(){}Pc(){return I(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function j0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var uu=class extends au{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new gf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return I(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new gf(e),this._firestoreClient=void 0,yield e}})}};function ik(t,e){let n=typeof t=="object"?t:Zi(),r=typeof t=="string"?t:e||Wh,i=ys(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=vD("firestore");o&&nk(i,...o)}return i}function ok(t){if(t._terminated)throw new j(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||A$(t),t._firestoreClient}function A$(t){var e,n,r;let i=t._freezeSettings(),o=function(c,u,l,h){return new f_(c,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ek(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new PI(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(t._componentsProvider))}var di=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Dt.fromBase64String(e))}catch(n){throw new j(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};di._jsonSchemaVersion="firestore/bytes/1.0",di._jsonSchema={type:We("string",di._jsonSchemaVersion),bytes:We("string")};var lu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var mf=class{constructor(e){this._methodName=e}};var hi=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(du(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};hi._jsonSchemaVersion="firestore/geoPoint/1.0",hi._jsonSchema={type:We("string",hi._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};var fi=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new j(x.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};fi._jsonSchemaVersion="firestore/vectorValue/1.0",fi._jsonSchema={type:We("string",fi._jsonSchemaVersion),vectorValues:We("object")};var R$=/^__.*__$/,OI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new go(e,this.data,n,this.fieldTransforms)}};function sk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{Ec:t})}}var LI=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return yf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(sk(this.Ec)&&R$.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},FI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tf(e)}Dc(e,n,r,i=!1){return new LI({Ec:e,methodName:n,bc:r,path:nn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function k$(t){let e=t._freezeSettings(),n=Tf(t._databaseId);return new FI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function N$(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);lk("Data must be an object, but it was:",s,r);let c=ck(r,s),u,l;if(o.merge)u=new qn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=x$(e,p,n);if(!s.contains(m))throw new j(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);M$(h,m)||h.push(m)}u=new qn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new OI(new Cn(c),u,l)}function ak(t,e){if(uk(t=Ot(t)))return lk("Unsupported field value:",e,t),ck(t,e);if(t instanceof mf)return function(r,i){if(!sk(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let u=ak(c,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ge.fromDate(r);return{timestampValue:ef(i.serializer,o)}}if(r instanceof Ge){let o=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ef(i.serializer,o)}}if(r instanceof hi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof di)return{bytesValue:kR(i.serializer,r._byteString)};if(r instanceof Ft){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:XI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fi)return function(s,c){return{mapValue:{fields:{[WI]:{stringValue:GI},[xs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.wc("VectorValues must only contain numeric values.");return ZI(c.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${$I(r)}`)}(t,e)}function ck(t,e){let n={};return rR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(t,(r,i)=>{let o=ak(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function uk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof hi||t instanceof di||t instanceof Ft||t instanceof mf||t instanceof fi)}function lk(t,e,n){if(!uk(n)||!$0(n)){let r=$I(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function x$(t,e,n){if((e=Ot(e))instanceof lu)return e._internalPath;if(typeof e=="string")return dk(t,e);throw yf("Field path arguments must be of type string or ",t,!1,void 0,n)}var P$=new RegExp("[~\\*/\\[\\]]");function dk(t,e,n){if(e.search(P$)>=0)throw yf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lu(...e.split("."))._internalPath}catch{throw yf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new j(x.INVALID_ARGUMENT,c+t+u)}function M$(t,e){return t.some(n=>n.isEqual(e))}var vf=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new VI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(hk("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},VI=class extends vf{data(){return super.data()}};function hk(t,e){return typeof e=="string"?dk(t,e):e instanceof lu?e._internalPath:e._delegate._internalPath}var jI=class{convertValue(e,n="none"){switch(gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw W(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return yo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[xs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Le(s.doubleValue));return new fi(o)}convertGeoPoint(e){return new hi(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=If(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){let n=Tr(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=$e.fromString(e);we(LR(r),9688,{name:e});let i=new Gh(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(n)||wr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function O$(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ao=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},uo=class t extends vf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ks(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(hk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new j(x.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};uo._jsonSchemaVersion="firestore/documentSnapshot/1.0",uo._jsonSchema={type:We("string",uo._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};var ks=class extends uo{data(e={}){return super.data(e)}},Yc=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ao(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ks(this._firestore,this._userDataWriter,r.key,r,new ao(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new ks(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ao(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new ks(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ao(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:L$(c.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new j(x.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function L$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:t})}}function fk(t){t=Zc(t,Ft);let e=Zc(t.firestore,uu);return D$(ok(e),t._key).then(n=>V$(e,t,n))}Yc._jsonSchemaVersion="firestore/querySnapshot/1.0",Yc._jsonSchema={type:We("string",Yc._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};var UI=class extends jI{constructor(e){super(),this.firestore=e}convertBytes(e){return new di(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}};function pk(t,e,n){t=Zc(t,Ft);let r=Zc(t.firestore,uu),i=O$(t.converter,e,n);return F$(r,[N$(k$(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,co.none())])}function F$(t,e){return function(r,i){let o=new Wn;return r.asyncQueue.enqueueAndForget(()=>I(null,null,function*(){return g$(yield S$(r),i,o)})),o.promise}(ok(t),e)}function V$(t,e,n){let r=n.docs.get(e._key),i=new UI(t);return new uo(t,i,e._key,r,new ao(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Hs=i})(oi),Tn(new Lt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new uu(new s_(r.getProvider("auth-internal")),new u_(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gh(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),je(ZA,XA,e),je(ZA,XA,"esm2017")})();var Ar=class{constructor(e){return e}},gk="firestore",uE=class{constructor(){return _s(gk)}};var lE=new U("angularfire2.firestore-instances");function j$(t,e){let n=Nc(gk,t,e);return n&&new Ar(n)}function U$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ar(r)}}var B$={provide:uE,deps:[[new Yt,lE]]},$$={provide:Ar,useFactory:j$,deps:[[new Yt,lE],mr]};function mk(t,...e){return je("angularfire",si.full,"fst"),qt([$$,B$,{provide:lE,useFactory:U$(t),multi:!0,deps:[be,it,ai,eo,[new Yt,Hc],[new Yt,Is],...e]}])}var Gs=tn(rk,!0,2);var Cf=tn(fk,!0);var yk=tn(ik,!0);var Df=tn(pk,!0,2);var Af=class t{constructor(e,n){this.firestore=e;this.authService=n}saveCheckedStates(e){return I(this,null,function*(){let n=this.authService.currentUser();if(n){let r=Gs(this.firestore,`alfabetoStates/${n.uid}`);yield Df(r,{checkedStates:e,updatedAt:new Date}),console.log("Estados do alfabeto salvos no Firestore para",n.displayName)}else sessionStorage.setItem("checkedStates",JSON.stringify(e)),console.log("Estados do alfabeto salvos no SessionStorage")})}getCheckedStates(){return I(this,null,function*(){let e=this.authService.currentUser();if(e){let n=Gs(this.firestore,`alfabetoStates/${e.uid}`),r=yield Cf(n);return r.exists()?(console.log("Estados do alfabeto recuperados do Firestore para",e.displayName),r.data().checkedStates||{}):(console.log("Nenhum estado de alfabeto encontrado no Firestore para",e.displayName),{})}else{let n=sessionStorage.getItem("checkedStates");return n?(console.log("Estados do alfabeto recuperados do SessionStorage"),JSON.parse(n)):(console.log("Nenhum estado de alfabeto encontrado no SessionStorage"),{})}})}static \u0275fac=function(n){return new(n||t)(K(Ar),K(un))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};function H$(t,e){if(t&1){let n=bt();z(0,"app-alfabeto-tab-button",7),Ne("tabClicked",function(){let i=ot(n).$implicit,o=Ce();return o.setActiveTab(i.id),st(o.resetGroup())}),Q()}if(t&2){let n=e.$implicit,r=Ce();Oe("texto",ut(n.text))("isActive",r.activeTabIndex===n.id)}}function z$(t,e){if(t&1){let n=bt();z(0,"app-group-tab-button",7),Ne("tabClicked",function(){let i=ot(n).$implicit,o=Ce();return st(o.setActiveGroup(i.id))}),Q()}if(t&2){let n=e.$implicit,r=Ce();Oe("texto",ut(n.text))("isActive",r.activeGroupIndex===n.id)}}function q$(t,e){if(t&1){let n=bt();z(0,"app-tab-hiragana",8),Ne("checkedChange",function(i){ot(n);let o=Ce();return st(o.onCheckedChange(i.kana,i.checked))}),Q()}if(t&2){let n=Ce();Oe("group",n.activeGroupIndex)("checkedStates",n.checkedStates)}}function W$(t,e){if(t&1){let n=bt();z(0,"app-tab-katakana",8),Ne("checkedChange",function(i){ot(n);let o=Ce();return st(o.onCheckedChange(i.kana,i.checked))}),Q()}if(t&2){let n=Ce();Oe("group",n.activeGroupIndex)("checkedStates",n.checkedStates)}}function G$(t,e){if(t&1){let n=bt();z(0,"app-tab-hiragana",8),Ne("checkedChange",function(i){ot(n);let o=Ce();return st(o.onCheckedChange(i.kana,i.checked))}),Q(),z(1,"app-tab-katakana",8),Ne("checkedChange",function(i){ot(n);let o=Ce();return st(o.onCheckedChange(i.kana,i.checked))}),Q()}if(t&2){let n=Ce();Oe("group",n.activeGroupIndex)("checkedStates",n.checkedStates),H(),Oe("group",n.activeGroupIndex)("checkedStates",n.checkedStates)}}var Rf=class t{activeTabIndex=0;activeGroupIndex=0;groupList=[];tabsList=[];checkedStates={};totalChecked=0;groupService=R(ei);tabService=R(Zd);alfabetoStateService=R(Af);authService=R(un);cdr=R(_d);ngOnInit(){this.groupList=this.groupService.getAll(),this.tabsList=this.tabService.getAll(),this.authService.currentUser$.subscribe(()=>{this.loadCheckedStates()})}loadCheckedStates(){this.alfabetoStateService.getCheckedStates().then(e=>{this.checkedStates=e,this.updateTotalChecked(),this.cdr.markForCheck()})}setActiveTab(e){this.activeTabIndex=e}setActiveGroup(e){this.activeGroupIndex=e}resetGroup(){this.activeGroupIndex=0}onCheckedChange(e,n){this.checkedStates[e]=n,this.updateTotalChecked(),this.saveCheckedStates()}updateTotalChecked(){this.totalChecked=Object.values(this.checkedStates).filter(e=>e).length}saveCheckedStates(){console.log("Salvando estados do alfabeto:",this.checkedStates),this.alfabetoStateService.saveCheckedStates(this.checkedStates)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["app-alfabeto-page"]],outputs:{totalChecked:"totalChecked"},decls:12,vars:2,consts:[[1,"page"],[1,"tabSelect"],[3,"texto","isActive"],[1,"groupSelect"],[1,"flashcards"],[3,"group","checkedStates"],[3,"totalChecked"],[3,"tabClicked","texto","isActive"],[3,"checkedChange","group","checkedStates"]],template:function(n,r){if(n&1&&(z(0,"section",0)(1,"div",1),On(2,H$,1,3,"app-alfabeto-tab-button",2,Xo),Q(),z(4,"div",3),On(5,z$,1,3,"app-group-tab-button",2,Xo),Q(),z(7,"div",4),Qr(8,q$,1,2,"app-tab-hiragana",5)(9,W$,1,2,"app-tab-katakana",5)(10,G$,2,4),Q(),ct(11,"app-progress-bar",6),Q()),n&2){let i;H(2),Ln(r.tabsList),H(3),Ln(r.groupList),H(3),Yr((i=r.activeTabIndex)===1?8:i===2?9:10),H(3),Oe("totalChecked",r.totalChecked)}},dependencies:[Yd,Jd,eh,th,nh],styles:[".page[_ngcontent-%COMP%]{background-color:#fff;margin:2em auto;border-radius:15px;display:flex;flex-direction:column;padding:2em;gap:2em;max-width:1400px;box-shadow:0 10px 40px #fff9}.tabSelect[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:2em;justify-content:center}.groupSelect[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:0 10em}.sectionFlashCards[_ngcontent-%COMP%]{padding:0}.flashcards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}"],changeDetection:0})};var kf=class t{altText="";status="neutral";disabled=!1;respostaSelecionada=new _e;classe="option-btn";emiteResposta(){this.disabled||this.respostaSelecionada.emit(this.altText)}ngOnChanges(e){this.classe="option-btn",this.status==="correct"?this.classe+=" correct":this.status==="incorrect"&&(this.classe+=" incorrect")}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["app-option-button"]],inputs:{altText:"altText",status:"status",disabled:"disabled"},outputs:{respostaSelecionada:"respostaSelecionada"},features:[vn],decls:2,vars:4,consts:[[3,"click","disabled"]],template:function(n,r){n&1&&(me(0,"button",0),vt("click",function(){return r.emiteResposta()}),q(1),Ie()),n&2&&(Ja(r.classe),es("disabled",r.disabled),H(),_n(" ",r.altText,`
`))},styles:[".option-btn[_ngcontent-%COMP%]{padding:20px;border:none;border-radius:15px;background:#e0e0e0;font-size:1.5rem;font-weight:700;cursor:pointer;transition:all .3s;width:100%}.option-btn[_ngcontent-%COMP%]:hover{background:#d0d0d0;transform:translateY(-3px)}.option-btn.correct[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.option-btn.incorrect[_ngcontent-%COMP%]{background:#f44336;color:#fff}"]})};var Nf=class t{constructor(e,n){this.firestore=e;this.authService=n}saveScore(e,n,r,i=null){return I(this,null,function*(){let o=this.authService.currentUser();o||(console.warn("Usu\xE1rio n\xE3o encontrado de imediato. Tentando aguardar auth..."),yield new Promise(c=>setTimeout(c,500)),o=this.authService.currentUser());let s={correct:e,wrong:n,total:r,lastQuestion:i,updatedAt:new Date};if(o){let c=Gs(this.firestore,`scores/${o.uid}`);yield Df(c,F({uid:o.uid,displayName:o.displayName},s)),console.log("Score salvo no Firestore para",o.displayName)}else sessionStorage.setItem("quizScore",JSON.stringify(s)),console.log("Score salvo no SessionStorage")})}getScore(){return I(this,null,function*(){let e=this.authService.currentUser();if(e||(console.warn("Usu\xE1rio n\xE3o encontrado de imediato para getScore. Tentando aguardar auth..."),yield new Promise(n=>setTimeout(n,500)),e=this.authService.currentUser()),e){let n=Gs(this.firestore,`scores/${e.uid}`),r=yield Cf(n);return r.exists()?(console.log("Score recuperado com sucesso do Firestore para",e.displayName),r.data()):(console.log("Nenhum score encontrado para",e.displayName),null)}else{let n=sessionStorage.getItem("quizScore");return n?(console.log("Score recuperado do SessionStorage"),JSON.parse(n)):(console.log("Nenhum score encontrado no SessionStorage"),null)}})}static \u0275fac=function(n){return new(n||t)(K(Ar),K(un))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};function K$(t,e){if(t&1){let n=bt();z(0,"app-option-button",17),Ne("respostaSelecionada",function(i){ot(n);let o=Ce();return st(o.verificaResposta(i))}),Q()}if(t&2){let n=e.$implicit,r=Ce();Oe("altText",n)("status",r.getStatus(n))("disabled",!!r.selectedAnswer)}}var xf=class t{question="";correctAnswer="";alternativas=[];corretas=0;erradas=0;perguntasTotais=0;selectedAnswer=null;hiraganaService=R(ti);katakanaService=R(ni);scoreService=R(Nf);authService=R(un);ngOnInit(){this.authService.currentUser$.subscribe(()=>{this.loadScore()})}loadScore(){this.scoreService.getScore().then(e=>{e?(this.corretas=e.correct,this.erradas=e.wrong,this.perguntasTotais=e.total,e.lastQuestion?this.restoreQuestion(e.lastQuestion):this.novaPergunta()):this.novaPergunta()})}resetQuiz(){this.corretas=0,this.erradas=0,this.perguntasTotais=0,this.novaPergunta(),this.salvaEstado()}novaPergunta(){let e=this.geraNovoCaracter();this.question=e.kana,this.correctAnswer=e.romaji,this.alternativas=this.geraAlternativas(e.romaji),this.selectedAnswer=null,this.perguntasTotais++,this.salvaEstado()}restoreQuestion(e){this.question=e.question,this.correctAnswer=this.hiraganaService.getByKana(this.question)?.romaji??this.katakanaService.getByKana(this.question)?.romaji??(()=>{throw new Error(`Kana "${this.question}" n\xE3o encontrado.`)})(),this.alternativas=e.alternativas,this.selectedAnswer=e.selectedAnswer??null}geraNovoCaracter(){let n=Math.random()<.5?this.hiraganaService.getRandom():this.katakanaService.getRandom();return{kana:n.kana,romaji:n.romaji}}geraAlternativas(e){let n=[...this.hiraganaService.getAll(),...this.katakanaService.getAll()],r=new Set([e]);for(;r.size<4;)r.add(n[Math.floor(Math.random()*n.length)].romaji);return Array.from(r).sort(()=>Math.random()-.5)}verificaResposta(e){this.selectedAnswer||(this.selectedAnswer=e,e===this.correctAnswer?this.corretas++:this.erradas++,this.salvaEstado())}getStatus(e){return this.selectedAnswer?e===this.correctAnswer?"correct":e===this.selectedAnswer?"incorrect":"neutral":"neutral"}salvaEstado(){let e={question:this.question,alternativas:this.alternativas,selectedAnswer:this.selectedAnswer};this.scoreService.saveScore(this.corretas,this.erradas,this.perguntasTotais,e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["app-quiz-page"]],decls:34,vars:5,consts:[[1,"page"],["id","quiz",1,"tab-content"],[1,"quiz-container"],[1,"question-container"],[1,"question-kana"],[1,"options-container"],[3,"altText","status","disabled"],[1,"quiz-controls"],[1,"quiz-btn",3,"click","disabled"],[1,"fas","fa-arrow-right"],[1,"quiz-btn","secondary",3,"click"],[1,"fas","fa-redo"],[1,"stats"],[1,"stat-box"],[1,"fas","fa-check-circle"],[1,"fas","fa-times-circle"],[1,"fas","fa-question-circle"],[3,"respostaSelecionada","altText","status","disabled"]],template:function(n,r){n&1&&(z(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),q(5,"Qual \xE9 a romaniza\xE7\xE3o deste caractere?"),Q(),z(6,"div",4),q(7),Q()(),z(8,"div",5),On(9,K$,1,3,"app-option-button",6,Xo),Q(),z(11,"div",7)(12,"button",8),Ne("click",function(){return r.novaPergunta()}),q(13," Pr\xF3xima Pergunta "),ct(14,"i",9),Q(),z(15,"button",10),Ne("click",function(){return r.resetQuiz()}),q(16," Reiniciar Quiz "),ct(17,"i",11),Q()(),z(18,"div",12)(19,"div",13),ct(20,"i",14),q(21," Acertos: "),z(22,"span"),q(23),Q()(),z(24,"div",13),ct(25,"i",15),q(26," Erros: "),z(27,"span"),q(28),Q()(),z(29,"div",13),ct(30,"i",16),q(31," Perguntas: "),z(32,"span"),q(33),Q()()()()()()),n&2&&(H(7),Xe(r.question),H(2),Ln(r.alternativas),H(3),Oe("disabled",!r.selectedAnswer),H(11),Xe(r.corretas),H(5),Xe(r.erradas),H(5),Xe(r.perguntasTotais))},dependencies:[kf],styles:[".page[_ngcontent-%COMP%]{background-color:#fff;margin:2em auto;border-radius:15px;display:flex;flex-direction:column;padding:2em;gap:2em;max-width:1400px;box-shadow:0 10px 40px #fff9}.quiz-container[_ngcontent-%COMP%]{text-align:center;padding:20px}.quiz-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700}.question-container[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:40px;box-shadow:0 10px 20px #0000001a;margin-bottom:30px;position:relative}.question-kana[_ngcontent-%COMP%]{font-size:8rem;margin:30px 0;color:#1a2a6c;font-family:Noto Sans JP,sans-serif;text-shadow:0 5px 5px}.options-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1.5em;margin-top:30px}.quiz-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin:4em 0 2em}.quiz-btn[_ngcontent-%COMP%]{padding:15px 40px;border:none;border-radius:50px;background:#1a2a6c;color:#fff;font-size:1.2rem;font-weight:700;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:10px;box-shadow:0 5px 10px #0000004d}.quiz-btn[_ngcontent-%COMP%]:disabled{background:#ccc;color:#666;cursor:not-allowed;box-shadow:none;opacity:.6;transform:none}.quiz-btn[_ngcontent-%COMP%]:hover{background:#0d1a4a;transform:translateY(-3px)}.quiz-btn.secondary[_ngcontent-%COMP%]{background:#fdbb2d;color:#333}.stats[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:20px;font-size:1.2rem;font-weight:700;color:#1a2a6c;flex-wrap:wrap;gap:15px}.stat-box[_ngcontent-%COMP%]{background:#1a2a6c1a;padding:15px 30px;border-radius:15px;min-width:150px}"]})};var Pf=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["app-kanji-page"]],decls:2,vars:0,template:function(n,r){n&1&&(me(0,"p"),q(1,"kanji-page works!"),Ie())},encapsulation:2})};function Q$(t,e){if(t&1){let n=bt();me(0,"h2"),q(1,"Realize o login para salvar sua pontua\xE7\xE3o no quiz!"),Ie(),me(2,"button",1),vt("click",function(){ot(n);let i=Ce();return st(i.login())}),Tt(3,"i",2),q(4," Realizar login"),Ie()}}function Y$(t,e){if(t&1){let n=bt();me(0,"div",3),Tt(1,"img",4),me(2,"p"),q(3),Ie()(),me(4,"button",5),vt("click",function(){ot(n);let i=Ce();return st(i.logout())}),q(5,"Logout"),Ie()}if(t&2){let n=Ce();H(),es("src",n.user.photoURL,Tm),H(2),_n("Bem vindo, ",n.user.displayName)}}var Mf=class t{constructor(e){this.authService=e;$c(e.auth,n=>{this.user=n})}user=null;login(){this.authService.loginWithGoogle().then(e=>{this.user=e.user,console.log("Logado como: ",this.user.displayName)}).catch(e=>{console.log("Erro no login: ",e)})}logout(){this.authService.logout().then(()=>this.user=null)}static \u0275fac=function(n){return new(n||t)(Zo(un))};static \u0275cmp=de({type:t,selectors:[["app-login-page"]],decls:3,vars:2,consts:[[1,"page"],[1,"login-btn",3,"click"],[1,"fa-brands","fa-google"],[1,"user-info"],["alt","Avatar","width","50",3,"src"],[1,"logout-btn",3,"click"]],template:function(n,r){n&1&&(me(0,"section",0),Qr(1,Q$,5,0),Qr(2,Y$,6,2),Ie()),n&2&&(H(),Yr(r.user?-1:1),H(),Yr(r.user?2:-1))},styles:[".page[_ngcontent-%COMP%]{background-color:#fff;margin:2em auto;border-radius:15px;display:flex;flex-direction:column;padding:2em;gap:2em;max-width:1400px;box-shadow:0 10px 40px #fff9}.login-btn[_ngcontent-%COMP%]{padding:15px 40px;border:none;border-radius:50px;background:#1a2a6c;color:#fff;font-size:1.2rem;font-weight:700;cursor:pointer;transition:all .3s ease;border:2px solid rgba(255,255,255,.3)}.login-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:1em}.login-btn[_ngcontent-%COMP%]:hover{opacity:.8}.login-btn.active[_ngcontent-%COMP%]{background:#fff;color:#1a2a6c;box-shadow:0 5px 10px #ffffff80}h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:1em 0;opacity:.9;align-self:center}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;background:#f5f5f5;border-radius:12px;padding:10px 20px;box-shadow:0 4px 8px #0000001a;margin-bottom:1rem}.user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;border:2px solid #1a2a6c}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:700;color:#333;font-size:1.1rem}.logout-btn[_ngcontent-%COMP%]{padding:15px 40px;border:none;border-radius:50px;background:#1a2a6c;color:#fff;font-size:1.2rem;font-weight:700;cursor:pointer;transition:all .3s ease;border:2px solid rgba(255,255,255,.3)}.logout-btn[_ngcontent-%COMP%]:hover{background:#0d1754}"]})};var _k=[{path:"",redirectTo:"alfabeto",pathMatch:"full"},{path:"alfabeto",component:Rf},{path:"quiz",component:xf},{path:"kanji",component:Pf},{path:"login",component:Mf}];var Ik={providers:[xg(),Qm({eventCoalescing:!0}),Oy(_k),WD(()=>GD(fD.firebaseConfig)),qA(()=>WA()),mk(()=>yk())]};var Of=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["app-header-title"]],decls:14,vars:0,consts:[[1,"title"],["src","favicon.png","alt",""],[1,"japanese"]],template:function(n,r){n&1&&(me(0,"section",0)(1,"h1"),Tt(2,"img",1),q(3," Japon\xEAs F\xE1cil: "),me(4,"span",2),q(5,"\u3072\u3089\u304C\u306A"),Ie(),q(6,", "),me(7,"span",2),q(8,"\u30AB\u30BF\u30AB\u30CA"),Ie(),q(9," & "),me(10,"span",2),q(11,"\u6F22\u5B57"),Ie()(),me(12,"p"),q(13,"Aprenda os fundamentos da l\xEDngua japonesa de forma interativa e eficiente"),Ie()())},styles:[".title[_ngcontent-%COMP%]{text-align:center;color:#fff;margin:2em;justify-items:center}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   .japanese[_ngcontent-%COMP%]{font-weight:1000;text-shadow:0 5px 5px #3d63fc}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:400;width:24em;margin:1em 0 3em;opacity:.9}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.8rem;font-weight:500;display:flex;align-items:center;justify-content:center;gap:.5em}.title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3em;height:auto;display:block}"]})};function J$(t,e){if(t&1&&Tt(0,"i"),t&2){let n=Ce();Ja(n.icone)}}var Lf=class t{text="";icone;isActive=!1;tabClicked=new _e;onCLick(){this.tabClicked.emit()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["app-tab-button"]],inputs:{text:"text",icone:"icone",isActive:"isActive"},outputs:{tabClicked:"tabClicked"},decls:3,vars:4,consts:[[1,"tab-button",3,"click"],[3,"class"]],template:function(n,r){n&1&&(me(0,"button",0),vt("click",function(){return r.onCLick()}),Qr(1,J$,1,2,"i",1),q(2),Ie()),n&2&&(Pt("active",r.isActive),H(),Yr(r.icone?1:-1),H(),_n(" ",r.text,`
`))},styles:[".tab-button[_ngcontent-%COMP%]{padding:15px 40px;margin:0 5px;border:none;border-radius:50px;background:#fff3;color:#fff;font-size:1.2rem;font-weight:700;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid rgba(255,255,255,.3);display:flex;align-items:center;gap:10px}.tab-button[_ngcontent-%COMP%]:hover{background:#ffffff4d}.tab-button.active[_ngcontent-%COMP%]{background:#fff;color:#1a2a6c;box-shadow:0 5px 10px #ffffff80}"]})};var Ff=class t{constructor(e){this.router=e}activeTabIndex=0;ngOnInit(){this.setActiveTabByUrl(),this.router.events.pipe(Nt(e=>e instanceof En)).subscribe(()=>{this.setActiveTabByUrl()})}setActiveTabByUrl(){let e=this.router.url;e.startsWith("/alfabeto")?this.activeTabIndex=0:e.startsWith("/quiz")?this.activeTabIndex=1:e.startsWith("/kanji")?this.activeTabIndex=2:e.startsWith("/login")&&(this.activeTabIndex=3)}setActiveTab(e){this.activeTabIndex=e,this.navegateToTab(this.activeTabIndex)}navegateToTab(e){switch(e){case 0:this.router.navigate(["/alfabeto"]);break;case 1:this.router.navigate(["/quiz"]);break;case 2:this.router.navigate(["/kanji"]);break;case 3:this.router.navigate(["/login"]);break}}static \u0275fac=function(n){return new(n||t)(Zo(ps))};static \u0275cmp=de({type:t,selectors:[["app-menu-tabs"]],decls:5,vars:4,consts:[[1,"menu-tabs"],["text","Alfabetos","icone","fas fa-book",3,"tabClicked","isActive"],["text","Quiz","icone","fas fa-question-circle",3,"tabClicked","isActive"],["text","Kanji","icone","fas fa-draw-polygon",3,"tabClicked","isActive"],["text","Login","icone","fas fa-right-to-bracket",3,"tabClicked","isActive"]],template:function(n,r){n&1&&(z(0,"section",0)(1,"app-tab-button",1),Ne("tabClicked",function(){return r.setActiveTab(0)}),Q(),z(2,"app-tab-button",2),Ne("tabClicked",function(){return r.setActiveTab(1)}),Q(),z(3,"app-tab-button",3),Ne("tabClicked",function(){return r.setActiveTab(2)}),Q(),z(4,"app-tab-button",4),Ne("tabClicked",function(){return r.setActiveTab(3)}),Q()()),n&2&&(H(),Oe("isActive",r.activeTabIndex===0),H(),Oe("isActive",r.activeTabIndex===1),H(),Oe("isActive",r.activeTabIndex===2),H(),Oe("isActive",r.activeTabIndex===3))},dependencies:[Lf],styles:[".menu-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:2em;gap:1em}"]})};var Vf=class t{title="japones";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(n,r){n&1&&ct(0,"app-header-title")(1,"app-menu-tabs")(2,"router-outlet")},dependencies:[wc,Of,Ff],encapsulation:2})};dy(Vf,Ik).catch(t=>console.error(t));
